<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: ImageViewport.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">ImageViewport.cpp</div>  </div>
</div>
<div class="contents">
<a href="../../da/dda/ImageViewport_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">-----------------------------------------------------------------------------</span>
<a name="l00003"></a>00003 <span class="comment">This source file is part of VideoTexture library</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">Copyright (c) 2007 The Zdeno Ash Miklas</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">This program is free software; you can redistribute it and/or modify it under</span>
<a name="l00008"></a>00008 <span class="comment">the terms of the GNU Lesser General Public License as published by the Free Software</span>
<a name="l00009"></a>00009 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
<a name="l00010"></a>00010 <span class="comment">version.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00013"></a>00013 <span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00014"></a>00014 <span class="comment">FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">You should have received a copy of the GNU Lesser General Public License along with</span>
<a name="l00017"></a>00017 <span class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</span>
<a name="l00018"></a>00018 <span class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</span>
<a name="l00019"></a>00019 <span class="comment">http://www.gnu.org/copyleft/lesser.txt.</span>
<a name="l00020"></a>00020 <span class="comment">-----------------------------------------------------------------------------</span>
<a name="l00021"></a>00021 <span class="comment">*/</span>
<a name="l00022"></a>00022 
<a name="l00027"></a>00027 <span class="comment">// implementation</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="../../d7/db2/PyObjectPlus_8h.html">PyObjectPlus.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;structmember.h&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;GL/glew.h&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/de4/KX__PythonInit_8h.html">KX_PythonInit.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dbf/Texture_8h.html">Texture.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc8/ImageBase_8h.html">ImageBase.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d75/FilterSource_8h.html">FilterSource.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d5f/ImageViewport_8h.html">ImageViewport.h</a>&quot;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">// constructor</span>
<a name="l00042"></a><a class="code" href="../../d5/dbb/classImageViewport.html#abb95d03dab96ff43e7bd34c9b1782a24">00042</a> <a class="code" href="../../d5/dbb/classImageViewport.html#abb95d03dab96ff43e7bd34c9b1782a24" title="constructor">ImageViewport::ImageViewport</a> (<span class="keywordtype">void</span>) : m_alpha(false), m_texInit(false)
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044     <span class="comment">// get viewport rectangle</span>
<a name="l00045"></a>00045     <a class="code" href="../../d9/d14/classRAS__Rect.html">RAS_Rect</a> rect = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a73270876d4beab375ee4cbc78e597251">KX_GetActiveEngine</a>()-&gt;<a class="code" href="../../db/dcd/classKX__KetsjiEngine.html#a95ef4b484c4599aad58075d438a84fb7">GetCanvas</a>()-&gt;<a class="code" href="../../d5/df6/classRAS__ICanvas.html#a1c856054e47078f4b3cfd0e9da61b0b8">GetWindowArea</a>();
<a name="l00046"></a>00046     <a class="code" href="../../d5/dbb/classImageViewport.html#ab38e6baa8166de1c00e8cccc32db2723" title="frame buffer rectangle">m_viewport</a>[0] = rect.<a class="code" href="../../d9/d14/classRAS__Rect.html#a9e661b65c551333a1a035e9d1bed0472">GetLeft</a>();
<a name="l00047"></a>00047     <a class="code" href="../../d5/dbb/classImageViewport.html#ab38e6baa8166de1c00e8cccc32db2723" title="frame buffer rectangle">m_viewport</a>[1] = rect.<a class="code" href="../../d9/d14/classRAS__Rect.html#a5e2f95e2e83c2cdbca7ceae795032c1f">GetBottom</a>();
<a name="l00048"></a>00048     <a class="code" href="../../d5/dbb/classImageViewport.html#ab38e6baa8166de1c00e8cccc32db2723" title="frame buffer rectangle">m_viewport</a>[2] = rect.<a class="code" href="../../d9/d14/classRAS__Rect.html#a35536f6f0c9aa3c85fbc6fbb8b541626">GetWidth</a>();
<a name="l00049"></a>00049     <a class="code" href="../../d5/dbb/classImageViewport.html#ab38e6baa8166de1c00e8cccc32db2723" title="frame buffer rectangle">m_viewport</a>[3] = rect.<a class="code" href="../../d9/d14/classRAS__Rect.html#ac86a8ec4c765f4c311d6d9b29ea3b86a">GetHeight</a>();
<a name="l00050"></a>00050     
<a name="l00051"></a>00051     <span class="comment">//glGetIntegerv(GL_VIEWPORT, m_viewport);</span>
<a name="l00052"></a>00052     <span class="comment">// create buffer for viewport image</span>
<a name="l00053"></a>00053     <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a> = <span class="keyword">new</span> <a class="code" href="../../d6/d5c/gameengine_2VideoTexture_2Common_8h.html#aec93e83855ac17c3c25c55c37ca186dd">BYTE</a> [4 * <a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[0] * <a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[1]];
<a name="l00054"></a>00054     <span class="comment">// set attributes</span>
<a name="l00055"></a>00055     <a class="code" href="../../d5/dbb/classImageViewport.html#a60be68b25f9b97a1fa411a33a89592b4" title="set whole buffer use">setWhole</a>(<span class="keyword">false</span>);
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">// destructor</span>
<a name="l00059"></a><a class="code" href="../../d5/dbb/classImageViewport.html#a444b07b4839c50d4074f9cce6a1baf43">00059</a> <a class="code" href="../../d5/dbb/classImageViewport.html#a444b07b4839c50d4074f9cce6a1baf43" title="destructor">ImageViewport::~ImageViewport</a> (<span class="keywordtype">void</span>)
<a name="l00060"></a>00060 { <span class="keyword">delete</span> [] <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a>; }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">// use whole viewport to capture image</span>
<a name="l00064"></a><a class="code" href="../../d5/dbb/classImageViewport.html#a60be68b25f9b97a1fa411a33a89592b4">00064</a> <span class="keywordtype">void</span> <a class="code" href="../../d5/dbb/classImageViewport.html#a60be68b25f9b97a1fa411a33a89592b4" title="set whole buffer use">ImageViewport::setWhole</a> (<span class="keywordtype">bool</span> whole)
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066     <span class="comment">// set whole</span>
<a name="l00067"></a>00067     <a class="code" href="../../d5/dbb/classImageViewport.html#a9d5b575ddd4f2b4c61ac0491077efbf6" title="use whole viewport">m_whole</a> = whole;
<a name="l00068"></a>00068     <span class="comment">// set capture size to viewport size, if whole,</span>
<a name="l00069"></a>00069     <span class="comment">// otherwise place area in the middle of viewport</span>
<a name="l00070"></a>00070     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 2; ++idx)
<a name="l00071"></a>00071     {
<a name="l00072"></a>00072         <span class="comment">// capture size</span>
<a name="l00073"></a>00073         <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] = whole ? short(<a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx])
<a name="l00074"></a>00074             : <a class="code" href="../../d7/d1e/classImageBase.html#a52a7d3f17e49f7ce5947a564484dc39c" title="calculate size (nearest power of 2)">calcSize</a>(<span class="keywordtype">short</span>(<a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx]));
<a name="l00075"></a>00075         <span class="comment">// position</span>
<a name="l00076"></a>00076         <a class="code" href="../../d5/dbb/classImageViewport.html#adf51a8a89a2ed4e0f147a8910ca46d3e" title="position of capture rectangle in viewport">m_position</a>[idx] = whole ? 0 : ((<a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx] - <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx]) &gt;&gt; 1);
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078     <span class="comment">// init image</span>
<a name="l00079"></a>00079     <a class="code" href="../../d7/d1e/classImageBase.html#a562a806d96ef5832059917c9d391583f" title="initialize image data">init</a>(<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[1]);
<a name="l00080"></a>00080     <span class="comment">// set capture position</span>
<a name="l00081"></a>00081     <a class="code" href="../../d5/dbb/classImageViewport.html#a6eff26204740c20d8149d7d6833445ea" title="set position in viewport">setPosition</a>();
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="../../d5/dbb/classImageViewport.html#a8e152d8874ebebf3bf9ec486de2272a4">00084</a> <span class="keywordtype">void</span> <a class="code" href="../../d5/dbb/classImageViewport.html#a8e152d8874ebebf3bf9ec486de2272a4" title="set capture size in viewport">ImageViewport::setCaptureSize</a> (<span class="keywordtype">short</span> * <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>)
<a name="l00085"></a>00085 {
<a name="l00086"></a>00086     <a class="code" href="../../d5/dbb/classImageViewport.html#a9d5b575ddd4f2b4c61ac0491077efbf6" title="use whole viewport">m_whole</a> = <span class="keyword">false</span>;
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (size == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) 
<a name="l00088"></a>00088         size = <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>;
<a name="l00089"></a>00089     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 2; ++idx)
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         <span class="keywordflow">if</span> (size[idx] &lt; 1)
<a name="l00092"></a>00092             <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] = 1;
<a name="l00093"></a>00093         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size[idx] &gt; <a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx])
<a name="l00094"></a>00094             <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] = short(<a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx]);
<a name="l00095"></a>00095         <span class="keywordflow">else</span>
<a name="l00096"></a>00096             <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] = size[idx];
<a name="l00097"></a>00097     }
<a name="l00098"></a>00098     <a class="code" href="../../d7/d1e/classImageBase.html#a562a806d96ef5832059917c9d391583f" title="initialize image data">init</a>(<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[1]);
<a name="l00099"></a>00099     <span class="comment">// set capture position</span>
<a name="l00100"></a>00100     <a class="code" href="../../d5/dbb/classImageViewport.html#a6eff26204740c20d8149d7d6833445ea" title="set position in viewport">setPosition</a>();
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="comment">// set position of capture rectangle</span>
<a name="l00104"></a><a class="code" href="../../d5/dbb/classImageViewport.html#a6eff26204740c20d8149d7d6833445ea">00104</a> <span class="keywordtype">void</span> <a class="code" href="../../d5/dbb/classImageViewport.html#a6eff26204740c20d8149d7d6833445ea" title="set position in viewport">ImageViewport::setPosition</a> (GLint * pos)
<a name="l00105"></a>00105 {
<a name="l00106"></a>00106     <span class="comment">// if new position is not provided, use existing position</span>
<a name="l00107"></a>00107     <span class="keywordflow">if</span> (pos == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) pos = <a class="code" href="../../d5/dbb/classImageViewport.html#adf51a8a89a2ed4e0f147a8910ca46d3e" title="position of capture rectangle in viewport">m_position</a>;
<a name="l00108"></a>00108     <span class="comment">// save position</span>
<a name="l00109"></a>00109     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 2; ++idx)
<a name="l00110"></a>00110         <a class="code" href="../../d5/dbb/classImageViewport.html#adf51a8a89a2ed4e0f147a8910ca46d3e" title="position of capture rectangle in viewport">m_position</a>[idx] = pos[idx] &lt; 0 ? 0 : pos[idx] &gt;= <a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx]
<a name="l00111"></a>00111         - <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] ? <a class="code" href="../../d5/dbb/classImageViewport.html#ab734d05fa6f5653f56cf81155eb24c6d" title="get viewport size">getViewportSize</a>()[idx] - <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[idx] : pos[idx];
<a name="l00112"></a>00112     <span class="comment">// recalc up left corner</span>
<a name="l00113"></a>00113     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 2; ++idx)
<a name="l00114"></a>00114         <a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[idx] = <a class="code" href="../../d5/dbb/classImageViewport.html#adf51a8a89a2ed4e0f147a8910ca46d3e" title="position of capture rectangle in viewport">m_position</a>[idx] + <a class="code" href="../../d5/dbb/classImageViewport.html#ab38e6baa8166de1c00e8cccc32db2723" title="frame buffer rectangle">m_viewport</a>[idx];
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">// capture image from viewport</span>
<a name="l00119"></a><a class="code" href="../../d5/dbb/classImageViewport.html#a44d262f38465a9d956b1caf3238a567c">00119</a> <span class="keywordtype">void</span> <a class="code" href="../../d5/dbb/classImageViewport.html#a44d262f38465a9d956b1caf3238a567c" title="capture image from viewport">ImageViewport::calcImage</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texId, <span class="keywordtype">double</span> ts)
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121     <span class="comment">// if scale was changed</span>
<a name="l00122"></a>00122     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d1e/classImageBase.html#a7c750fb906318ac76c4fba8d38beca66" title="scale was changed">m_scaleChange</a>)
<a name="l00123"></a>00123         <span class="comment">// reset image</span>
<a name="l00124"></a>00124         <a class="code" href="../../d7/d1e/classImageBase.html#a562a806d96ef5832059917c9d391583f" title="initialize image data">init</a>(<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[1]);
<a name="l00125"></a>00125     <span class="comment">// if texture wasn&#39;t initialized</span>
<a name="l00126"></a>00126     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dbb/classImageViewport.html#a7ff94ed0c0880c2f18589952bcb90eec" title="texture is initialized">m_texInit</a>)
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128         <span class="comment">// initialize it</span>
<a name="l00129"></a>00129         <a class="code" href="../../d5/d87/Texture_8cpp.html#a5aa523889ad93bce9f67aa1d4200e061">loadTexture</a>(texId, <a class="code" href="../../d7/d1e/classImageBase.html#a5b007e53c09d6ece89292fa690e74c96" title="image buffer">m_image</a>, <a class="code" href="../../d7/d1e/classImageBase.html#aa3cc46056a3b1e92fdc097c9b15ac651" title="image size">m_size</a>);
<a name="l00130"></a>00130         <a class="code" href="../../d5/dbb/classImageViewport.html#a7ff94ed0c0880c2f18589952bcb90eec" title="texture is initialized">m_texInit</a> = <span class="keyword">true</span>;
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132     <span class="comment">// if texture can be directly created</span>
<a name="l00133"></a>00133     <span class="keywordflow">if</span> (texId != 0 &amp;&amp; <a class="code" href="../../d7/d1e/classImageBase.html#aa7d792e9a61d2f8af25bd37e23f260ff" title="pixel filter">m_pyfilter</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0] == <a class="code" href="../../d7/d1e/classImageBase.html#a52a7d3f17e49f7ce5947a564484dc39c" title="calculate size (nearest power of 2)">calcSize</a>(<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0])
<a name="l00134"></a>00134             &amp;&amp; <a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[1] == <a class="code" href="../../d7/d1e/classImageBase.html#a52a7d3f17e49f7ce5947a564484dc39c" title="calculate size (nearest power of 2)">calcSize</a>(<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[1]) &amp;&amp; !<a class="code" href="../../d7/d1e/classImageBase.html#a15e4241d07f7c60b51c937103265c0b2" title="flip image vertically">m_flip</a>)
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136         <span class="comment">// just copy current viewport to texture</span>
<a name="l00137"></a>00137         glBindTexture(GL_TEXTURE_2D, texId);
<a name="l00138"></a>00138         glCopyTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, <a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[1], (GLsizei)<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], (GLsizei)m_capSize[1]);
<a name="l00139"></a>00139         <span class="comment">// image is not available</span>
<a name="l00140"></a>00140         <a class="code" href="../../d7/d1e/classImageBase.html#a5d95583e493b1c7281fa80fdc0ca54e5" title="image is available">m_avail</a> = <span class="keyword">false</span>;
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142     <span class="comment">// otherwise copy viewport to buffer, if image is not available</span>
<a name="l00143"></a>00143     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d1e/classImageBase.html#a5d95583e493b1c7281fa80fdc0ca54e5" title="image is available">m_avail</a>)
<a name="l00144"></a>00144     {
<a name="l00145"></a>00145         <span class="comment">// get frame buffer data</span>
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (<a class="code" href="../../d5/dbb/classImageViewport.html#aed2d680bdf5d792d713eec684b6e16ab" title="use alpha channel">m_alpha</a>)
<a name="l00147"></a>00147         {
<a name="l00148"></a>00148             glReadPixels(<a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[1], (GLsizei)<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], (GLsizei)m_capSize[1], GL_RGBA,
<a name="l00149"></a>00149                          GL_UNSIGNED_BYTE, <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a>);
<a name="l00150"></a>00150             <span class="comment">// filter loaded data</span>
<a name="l00151"></a>00151             <a class="code" href="../../d4/d6e/classFilterRGBA32.html" title="class for RGBA32 conversion">FilterRGBA32</a> filt;
<a name="l00152"></a>00152             <a class="code" href="../../d7/d1e/classImageBase.html#ac356d7c8394aa1cc56945b3f6cac6c49">filterImage</a>(filt, <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a>, m_capSize);
<a name="l00153"></a>00153         }
<a name="l00154"></a>00154         <span class="keywordflow">else</span>
<a name="l00155"></a>00155         {
<a name="l00156"></a>00156             glReadPixels(<a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[0], <a class="code" href="../../d5/dbb/classImageViewport.html#aaa3da62aa587c5761dd5a87285f010d7" title="upper left point for capturing">m_upLeft</a>[1], (GLsizei)<a class="code" href="../../d5/dbb/classImageViewport.html#a011aeaee3e75cf70d97f9fea40b20dbc" title="size of captured area">m_capSize</a>[0], (GLsizei)m_capSize[1], GL_RGB,
<a name="l00157"></a>00157                          GL_UNSIGNED_BYTE, <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a>);
<a name="l00158"></a>00158             <span class="comment">// filter loaded data</span>
<a name="l00159"></a>00159             <a class="code" href="../../da/d4d/classFilterRGB24.html" title="class for RGB24 conversion">FilterRGB24</a> filt;
<a name="l00160"></a>00160             <a class="code" href="../../d7/d1e/classImageBase.html#ac356d7c8394aa1cc56945b3f6cac6c49">filterImage</a>(filt, <a class="code" href="../../d5/dbb/classImageViewport.html#a800a725412b4729c6f176dd0f4e34a7a" title="buffer to copy viewport">m_viewportImage</a>, m_capSize);
<a name="l00161"></a>00161         }
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="comment">// cast Image pointer to ImageViewport</span>
<a name="l00168"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">00168</a> <span class="keyword">inline</span> <a class="code" href="../../d5/dbb/classImageViewport.html" title="class for viewport access">ImageViewport</a> * <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>)
<a name="l00169"></a>00169 { <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../d5/dbb/classImageViewport.html" title="class for viewport access">ImageViewport</a>*<span class="keyword">&gt;</span>(<span class="keyword">self</span>-&gt;m_image); }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">// python methods</span>
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">// get whole</span>
<a name="l00176"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#a9eed982478f73d9949e995a99bee8f0e">00176</a> PyObject * <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a9eed982478f73d9949e995a99bee8f0e">ImageViewport_getWhole</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, <span class="keywordtype">void</span> * closure)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178     <span class="keywordflow">if</span> (self-&gt;m_image != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getWhole()) Py_RETURN_TRUE;
<a name="l00179"></a>00179     <span class="keywordflow">else</span> Py_RETURN_FALSE;
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">// set whole</span>
<a name="l00183"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#a81797cb7fbfc41fa7a1dbec33becee20">00183</a> <span class="keywordtype">int</span> <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a81797cb7fbfc41fa7a1dbec33becee20">ImageViewport_setWhole</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, PyObject * value, <span class="keywordtype">void</span> * closure)
<a name="l00184"></a>00184 {
<a name="l00185"></a>00185     <span class="comment">// check parameter, report failure</span>
<a name="l00186"></a>00186     <span class="keywordflow">if</span> (value == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !PyBool_Check(value))
<a name="l00187"></a>00187     {
<a name="l00188"></a>00188         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;The value must be a bool&quot;</span>);
<a name="l00189"></a>00189         <span class="keywordflow">return</span> -1;
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191     <span class="keywordflow">try</span>
<a name="l00192"></a>00192     {
<a name="l00193"></a>00193         <span class="comment">// set whole, can throw in case of resize and buffer exports</span>
<a name="l00194"></a>00194         <span class="keywordflow">if</span> (self-&gt;m_image != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;<a class="code" href="../../d5/dbb/classImageViewport.html#a60be68b25f9b97a1fa411a33a89592b4" title="set whole buffer use">setWhole</a>(value == Py_True);
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196     <span class="keywordflow">catch</span> (<a class="code" href="../../d4/d67/classException.html">Exception</a> &amp; <a class="code" href="../../d0/dbc/namespaceKDL.html#a82c1904677c13464d30566d25edc9034">exp</a>)
<a name="l00197"></a>00197     {
<a name="l00198"></a>00198         exp.<a class="code" href="../../d4/d67/classException.html#a23fbb421ab3e1a05de04890fd2d86c7c">report</a>();
<a name="l00199"></a>00199         <span class="keywordflow">return</span> -1;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201     <span class="comment">// success</span>
<a name="l00202"></a>00202     <span class="keywordflow">return</span> 0;
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="comment">// get alpha</span>
<a name="l00206"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#ae5d49ee34ccbed6b6fdcc6bac53462ff">00206</a> PyObject * <a class="code" href="../../da/dda/ImageViewport_8cpp.html#ae5d49ee34ccbed6b6fdcc6bac53462ff">ImageViewport_getAlpha</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, <span class="keywordtype">void</span> * closure)
<a name="l00207"></a>00207 {
<a name="l00208"></a>00208     <span class="keywordflow">if</span> (self-&gt;m_image != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getAlpha()) Py_RETURN_TRUE;
<a name="l00209"></a>00209     <span class="keywordflow">else</span> Py_RETURN_FALSE;
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">// set whole</span>
<a name="l00213"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#aaa7a02d5791166ab07f6c329361c7e4b">00213</a> <span class="keywordtype">int</span> <a class="code" href="../../da/dda/ImageViewport_8cpp.html#aaa7a02d5791166ab07f6c329361c7e4b">ImageViewport_setAlpha</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, PyObject * value, <span class="keywordtype">void</span> * closure)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <span class="comment">// check parameter, report failure</span>
<a name="l00216"></a>00216     <span class="keywordflow">if</span> (value == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !PyBool_Check(value))
<a name="l00217"></a>00217     {
<a name="l00218"></a>00218         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;The value must be a bool&quot;</span>);
<a name="l00219"></a>00219         <span class="keywordflow">return</span> -1;
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221     <span class="comment">// set alpha</span>
<a name="l00222"></a>00222     <span class="keywordflow">if</span> (self-&gt;m_image != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;<a class="code" href="../../d5/dbb/classImageViewport.html#a39594002a37e89a77550e3f4e8aeff93" title="set whole buffer use">setAlpha</a>(value == Py_True);
<a name="l00223"></a>00223     <span class="comment">// success</span>
<a name="l00224"></a>00224     <span class="keywordflow">return</span> 0;
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="comment">// get position</span>
<a name="l00229"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#a5acff6315222f40ac33df705a9bf3132">00229</a> <span class="keyword">static</span> PyObject * <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a5acff6315222f40ac33df705a9bf3132">ImageViewport_getPosition</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, <span class="keywordtype">void</span> * closure)
<a name="l00230"></a>00230 {
<a name="l00231"></a>00231     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">&quot;(ii)&quot;</span>, <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getPosition()[0],
<a name="l00232"></a>00232         <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getPosition()[1]);
<a name="l00233"></a>00233 }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 <span class="comment">// set position</span>
<a name="l00236"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#ab3bd3d7dc39c3a50bc7779f6fe4b339c">00236</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dda/ImageViewport_8cpp.html#ab3bd3d7dc39c3a50bc7779f6fe4b339c">ImageViewport_setPosition</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, PyObject * value, <span class="keywordtype">void</span> * closure)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238     <span class="comment">// check validity of parameter</span>
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (value == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !PySequence_Check(value) || PySequence_Size(value) != 2
<a name="l00240"></a>00240         || !PyLong_Check(PySequence_Fast_GET_ITEM(value, 0))
<a name="l00241"></a>00241         || !PyLong_Check(PySequence_Fast_GET_ITEM(value, 1)))
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;The value must be a sequence of 2 ints&quot;</span>);
<a name="l00244"></a>00244         <span class="keywordflow">return</span> -1;
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246     <span class="comment">// set position</span>
<a name="l00247"></a>00247     GLint pos [] = {
<a name="l00248"></a>00248         GLint(PyLong_AsSsize_t(PySequence_Fast_GET_ITEM(value, 0))),
<a name="l00249"></a>00249             GLint(PyLong_AsSsize_t(PySequence_Fast_GET_ITEM(value, 1)))
<a name="l00250"></a>00250     };
<a name="l00251"></a>00251     <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;<a class="code" href="../../d5/dbb/classImageViewport.html#a6eff26204740c20d8149d7d6833445ea" title="set position in viewport">setPosition</a>(pos);
<a name="l00252"></a>00252     <span class="comment">// success</span>
<a name="l00253"></a>00253     <span class="keywordflow">return</span> 0;
<a name="l00254"></a>00254 }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="comment">// get capture size</span>
<a name="l00257"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#a5d321cb7a6819f043c5f8573f2d43c14">00257</a> PyObject * <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a5d321cb7a6819f043c5f8573f2d43c14">ImageViewport_getCaptureSize</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, <span class="keywordtype">void</span> * closure)
<a name="l00258"></a>00258 {
<a name="l00259"></a>00259     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">&quot;(ii)&quot;</span>, <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getCaptureSize()[0],
<a name="l00260"></a>00260         <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;getCaptureSize()[1]);
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <span class="comment">// set capture size</span>
<a name="l00264"></a><a class="code" href="../../d8/d5f/ImageViewport_8h.html#a7eb9d4bc0f315f1d422ad06f0275dfe7">00264</a> <span class="keywordtype">int</span> <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a7eb9d4bc0f315f1d422ad06f0275dfe7">ImageViewport_setCaptureSize</a> (<a class="code" href="../../db/d22/structPyImage.html">PyImage</a> * <span class="keyword">self</span>, PyObject * value, <span class="keywordtype">void</span> * closure)
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266     <span class="comment">// check validity of parameter</span>
<a name="l00267"></a>00267     <span class="keywordflow">if</span> (value == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !PySequence_Check(value) || PySequence_Size(value) != 2
<a name="l00268"></a>00268         || !PyLong_Check(PySequence_Fast_GET_ITEM(value, 0))
<a name="l00269"></a>00269         || !PyLong_Check(PySequence_Fast_GET_ITEM(value, 1)))
<a name="l00270"></a>00270     {
<a name="l00271"></a>00271         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;The value must be a sequence of 2 ints&quot;</span>);
<a name="l00272"></a>00272         <span class="keywordflow">return</span> -1;
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274     <span class="comment">// set capture size</span>
<a name="l00275"></a>00275     <span class="keywordtype">short</span> <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a> [] = {
<a name="l00276"></a>00276         short(PyLong_AsSsize_t(PySequence_Fast_GET_ITEM(value, 0))),
<a name="l00277"></a>00277             short(PyLong_AsSsize_t(PySequence_Fast_GET_ITEM(value, 1)))
<a name="l00278"></a>00278     };
<a name="l00279"></a>00279     <span class="keywordflow">try</span>
<a name="l00280"></a>00280     {
<a name="l00281"></a>00281         <span class="comment">// can throw in case of resize and buffer exports</span>
<a name="l00282"></a>00282         <a class="code" href="../../da/dda/ImageViewport_8cpp.html#afd1fdf5f781682b4e7f32c3b2d1b0c21">getImageViewport</a>(<span class="keyword">self</span>)-&gt;<a class="code" href="../../d5/dbb/classImageViewport.html#a8e152d8874ebebf3bf9ec486de2272a4" title="set capture size in viewport">setCaptureSize</a>(size);
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284     <span class="keywordflow">catch</span> (<a class="code" href="../../d4/d67/classException.html">Exception</a> &amp; <a class="code" href="../../d0/dbc/namespaceKDL.html#a82c1904677c13464d30566d25edc9034">exp</a>)
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286         exp.<a class="code" href="../../d4/d67/classException.html#a23fbb421ab3e1a05de04890fd2d86c7c">report</a>();
<a name="l00287"></a>00287         <span class="keywordflow">return</span> -1;
<a name="l00288"></a>00288     }
<a name="l00289"></a>00289     <span class="comment">// success</span>
<a name="l00290"></a>00290     <span class="keywordflow">return</span> 0;
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">// methods structure</span>
<a name="l00295"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#a96d95cfea5d22c60c68a0b46feb3bfef">00295</a> <span class="keyword">static</span> PyMethodDef <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a96d95cfea5d22c60c68a0b46feb3bfef">imageViewportMethods</a>[] =
<a name="l00296"></a>00296 { <span class="comment">// methods from ImageBase class</span>
<a name="l00297"></a>00297     {<span class="stringliteral">&quot;refresh&quot;</span>, (PyCFunction)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a32a9996415eb4022f96f8d7ec4e11324">Image_refresh</a>, METH_NOARGS, <span class="stringliteral">&quot;Refresh image - invalidate its current content&quot;</span>},
<a name="l00298"></a>00298     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}
<a name="l00299"></a>00299 };
<a name="l00300"></a>00300 <span class="comment">// attributes structure</span>
<a name="l00301"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#ad1f681a1c4ae592317d2613f41f879d6">00301</a> <span class="keyword">static</span> PyGetSetDef <a class="code" href="../../da/dda/ImageViewport_8cpp.html#ad1f681a1c4ae592317d2613f41f879d6">imageViewportGetSets</a>[] =
<a name="l00302"></a>00302 { 
<a name="l00303"></a>00303     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;whole&quot;</span>, (getter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#a9eed982478f73d9949e995a99bee8f0e">ImageViewport_getWhole</a>, (setter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#a81797cb7fbfc41fa7a1dbec33becee20">ImageViewport_setWhole</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;use whole viewport to capture&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>},
<a name="l00304"></a>00304     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;position&quot;</span>, (getter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#a5acff6315222f40ac33df705a9bf3132">ImageViewport_getPosition</a>, (setter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#ab3bd3d7dc39c3a50bc7779f6fe4b339c">ImageViewport_setPosition</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;upper left corner of captured area&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>},
<a name="l00305"></a>00305     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;capsize&quot;</span>, (getter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#a5d321cb7a6819f043c5f8573f2d43c14">ImageViewport_getCaptureSize</a>, (setter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#a7eb9d4bc0f315f1d422ad06f0275dfe7">ImageViewport_setCaptureSize</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;size of viewport area being captured&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>},
<a name="l00306"></a>00306     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;alpha&quot;</span>, (getter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#ae5d49ee34ccbed6b6fdcc6bac53462ff">ImageViewport_getAlpha</a>, (setter)<a class="code" href="../../da/dda/ImageViewport_8cpp.html#aaa7a02d5791166ab07f6c329361c7e4b">ImageViewport_setAlpha</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;use alpha in texture&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>},
<a name="l00307"></a>00307     <span class="comment">// attributes from ImageBase class</span>
<a name="l00308"></a>00308     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;valid&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a6b3f44688f95712ef88fe7d77a691faa">Image_valid</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;bool to tell if an image is available&quot;</span>, NULL},
<a name="l00309"></a>00309     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;image&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a9b4db516cc4d59b2cf81a103395a15d3">Image_getImage</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;image data&quot;</span>, NULL},
<a name="l00310"></a>00310     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;size&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a0dde8b5e268ab4f832ebce906c8f1381">Image_getSize</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;image size&quot;</span>, NULL},
<a name="l00311"></a>00311     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;scale&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#aa2921166202839803e54f1d69c4b244c">Image_getScale</a>, (setter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a2b3fc30447615f7c5155a0820e119ea6">Image_setScale</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;fast scale of image (near neighbor)&quot;</span>, NULL},
<a name="l00312"></a>00312     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;flip&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a60a82932d95bd5ca1b7a79bd652f9a66">Image_getFlip</a>, (setter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a3e5611278b05dd5398ec3e68e0807f96">Image_setFlip</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;flip image vertically&quot;</span>, NULL},
<a name="l00313"></a>00313     {(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;filter&quot;</span>, (getter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#a4d20ed03b397f1f9c2819a8c087a351c">Image_getFilter</a>, (setter)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#ada454e6ebcbdea4d40ad7369d5a2dc79">Image_setFilter</a>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;pixel filter&quot;</span>, NULL},
<a name="l00314"></a>00314     {NULL}
<a name="l00315"></a>00315 };
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">// define python type</span>
<a name="l00319"></a><a class="code" href="../../da/dda/ImageViewport_8cpp.html#a78c09054e374c768061eb0e6b2d8c387">00319</a> PyTypeObject <a class="code" href="../../d3/dbe/blendVideoTex_8cpp.html#a78c09054e374c768061eb0e6b2d8c387">ImageViewportType</a> =
<a name="l00320"></a>00320 { 
<a name="l00321"></a>00321     PyVarObject_HEAD_INIT(NULL, 0)
<a name="l00322"></a>00322     <span class="stringliteral">&quot;VideoTexture.ImageViewport&quot;</span>,   <span class="comment">/*tp_name*/</span>
<a name="l00323"></a>00323     <span class="keyword">sizeof</span>(<a class="code" href="../../db/d22/structPyImage.html">PyImage</a>),          <span class="comment">/*tp_basicsize*/</span>
<a name="l00324"></a>00324     0,                         <span class="comment">/*tp_itemsize*/</span>
<a name="l00325"></a>00325     (destructor)<a class="code" href="../../db/d8e/ImageBase_8cpp.html#aab9974bdcd9824aa8304d102279e0b99">Image_dealloc</a>, <span class="comment">/*tp_dealloc*/</span>
<a name="l00326"></a>00326     0,                         <span class="comment">/*tp_print*/</span>
<a name="l00327"></a>00327     0,                         <span class="comment">/*tp_getattr*/</span>
<a name="l00328"></a>00328     0,                         <span class="comment">/*tp_setattr*/</span>
<a name="l00329"></a>00329     0,                         <span class="comment">/*tp_compare*/</span>
<a name="l00330"></a>00330     0,                         <span class="comment">/*tp_repr*/</span>
<a name="l00331"></a>00331     0,                         <span class="comment">/*tp_as_number*/</span>
<a name="l00332"></a>00332     0,                         <span class="comment">/*tp_as_sequence*/</span>
<a name="l00333"></a>00333     0,                         <span class="comment">/*tp_as_mapping*/</span>
<a name="l00334"></a>00334     0,                         <span class="comment">/*tp_hash */</span>
<a name="l00335"></a>00335     0,                         <span class="comment">/*tp_call*/</span>
<a name="l00336"></a>00336     0,                         <span class="comment">/*tp_str*/</span>
<a name="l00337"></a>00337     0,                         <span class="comment">/*tp_getattro*/</span>
<a name="l00338"></a>00338     0,                         <span class="comment">/*tp_setattro*/</span>
<a name="l00339"></a>00339     &amp;<a class="code" href="../../db/d8e/ImageBase_8cpp.html#ab77040fc062c59fed8cfc59f057e3271">imageBufferProcs</a>,         <span class="comment">/*tp_as_buffer*/</span>
<a name="l00340"></a>00340     Py_TPFLAGS_DEFAULT,        <span class="comment">/*tp_flags*/</span>
<a name="l00341"></a>00341     <span class="stringliteral">&quot;Image source from viewport&quot;</span>,       <span class="comment">/* tp_doc */</span>
<a name="l00342"></a>00342     0,                     <span class="comment">/* tp_traverse */</span>
<a name="l00343"></a>00343     0,                     <span class="comment">/* tp_clear */</span>
<a name="l00344"></a>00344     0,                     <span class="comment">/* tp_richcompare */</span>
<a name="l00345"></a>00345     0,                     <span class="comment">/* tp_weaklistoffset */</span>
<a name="l00346"></a>00346     0,                     <span class="comment">/* tp_iter */</span>
<a name="l00347"></a>00347     0,                     <span class="comment">/* tp_iternext */</span>
<a name="l00348"></a>00348     <a class="code" href="../../da/dda/ImageViewport_8cpp.html#a96d95cfea5d22c60c68a0b46feb3bfef">imageViewportMethods</a>,    <span class="comment">/* tp_methods */</span>
<a name="l00349"></a>00349     0,                   <span class="comment">/* tp_members */</span>
<a name="l00350"></a>00350     <a class="code" href="../../da/dda/ImageViewport_8cpp.html#ad1f681a1c4ae592317d2613f41f879d6">imageViewportGetSets</a>,          <span class="comment">/* tp_getset */</span>
<a name="l00351"></a>00351     0,                         <span class="comment">/* tp_base */</span>
<a name="l00352"></a>00352     0,                         <span class="comment">/* tp_dict */</span>
<a name="l00353"></a>00353     0,                         <span class="comment">/* tp_descr_get */</span>
<a name="l00354"></a>00354     0,                         <span class="comment">/* tp_descr_set */</span>
<a name="l00355"></a>00355     0,                         <span class="comment">/* tp_dictoffset */</span>
<a name="l00356"></a>00356     (initproc)Image_init&lt;ImageViewport&gt;,     <span class="comment">/* tp_init */</span>
<a name="l00357"></a>00357     0,                         <span class="comment">/* tp_alloc */</span>
<a name="l00358"></a>00358     <a class="code" href="../../db/d8e/ImageBase_8cpp.html#a0c7bec9878faf6a119923b192d797361">Image_allocNew</a>,           <span class="comment">/* tp_new */</span>
<a name="l00359"></a>00359 };
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:24 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
