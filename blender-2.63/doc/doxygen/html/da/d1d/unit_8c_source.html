<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: unit.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">unit.c</div>  </div>
</div>
<div class="contents">
<a href="../../da/d1d/unit_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * Contributor(s): Campbell Barton</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d47/BKE__unit_8h.html">BKE_unit.h</a>&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/db3/BLI__string_8h.html">BLI_string.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d83/BLI__string__utf8_8h.html">BLI_string_utf8.h</a>&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#  include &quot;<a class="code" href="../../d9/ded/BLI__winstuff_8h.html" title="Compatibility-like things for windows.">BLI_winstuff.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a><a class="code" href="../../da/d1d/unit_8c.html#a662c2b90a66ba7c1bbad554a5646bc65">00042</a> <span class="preprocessor">#define TEMP_STR_SIZE 256</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a><a class="code" href="../../da/d1d/unit_8c.html#a48d1e1f72bb85f5f6befd3a4fe0b8baf">00044</a> <span class="preprocessor">#define SEP_CHR     &#39;#&#39;</span>
<a name="l00045"></a><a class="code" href="../../da/d1d/unit_8c.html#afca78395a53c9a778bfd9f8ea89bdcab">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define SEP_STR     &quot;#&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="../../da/d1d/unit_8c.html#a6ebf6899d6c1c8b7b9d09be872c05aae">00047</a> <span class="preprocessor">#define EPS 0.00001</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">00049</a> <span class="preprocessor">#define UN_SC_KM    1000.0f</span>
<a name="l00050"></a><a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_HM    100.0f</span>
<a name="l00051"></a><a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_DAM   10.0f</span>
<a name="l00052"></a><a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_M     1.0f</span>
<a name="l00053"></a><a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_DM    0.1f</span>
<a name="l00054"></a><a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_CM    0.01f</span>
<a name="l00055"></a><a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_MM    0.001f</span>
<a name="l00056"></a><a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_UM    0.000001f</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a><a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">00058</a> <span class="preprocessor">#define UN_SC_MI    1609.344f</span>
<a name="l00059"></a><a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_FUR   201.168f</span>
<a name="l00060"></a><a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_CH    20.1168f</span>
<a name="l00061"></a><a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_YD    0.9144f</span>
<a name="l00062"></a><a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_FT    0.3048f</span>
<a name="l00063"></a><a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_IN    0.0254f</span>
<a name="l00064"></a><a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_MIL   0.0000254f</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="../../da/d1d/unit_8c.html#a3f5e59f03f3d0736b1da0cfc4b673a1d">00066</a> <span class="preprocessor">#define UN_SC_MTON  1000.0f </span><span class="comment">/* metric ton */</span>
<a name="l00067"></a><a class="code" href="../../da/d1d/unit_8c.html#abcc0abf76215b9a97704f332789d377c">00067</a> <span class="preprocessor">#define UN_SC_QL    100.0f</span>
<a name="l00068"></a><a class="code" href="../../da/d1d/unit_8c.html#ae9ff6ae1f6bf312e49228ab55816c48a">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_KG    1.0f</span>
<a name="l00069"></a><a class="code" href="../../da/d1d/unit_8c.html#a4581cc218006024cc814cbfcc2332b52">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_HG    0.1f</span>
<a name="l00070"></a><a class="code" href="../../da/d1d/unit_8c.html#ac68cf336ce6027db77323b3fe945a080">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_DAG   0.01f</span>
<a name="l00071"></a><a class="code" href="../../da/d1d/unit_8c.html#a5146348d038c75cb14ac21a290c83c65">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_G     0.001f</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a><a class="code" href="../../da/d1d/unit_8c.html#a10ed231178e8f1f70e00c2702dcde40c">00073</a> <span class="preprocessor">#define UN_SC_ITON  907.18474f </span><span class="comment">/* imperial ton */</span>
<a name="l00074"></a><a class="code" href="../../da/d1d/unit_8c.html#a296296b9595db3115bdbd9f3d4757512">00074</a> <span class="preprocessor">#define UN_SC_CWT   45.359237f</span>
<a name="l00075"></a><a class="code" href="../../da/d1d/unit_8c.html#ab1e9a3fff3a8fa03f4f182087030cb72">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_ST    6.35029318f</span>
<a name="l00076"></a><a class="code" href="../../da/d1d/unit_8c.html#a639e59e9f7fccc98fdae453b22cc8ff6">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_LB    0.45359237f</span>
<a name="l00077"></a><a class="code" href="../../da/d1d/unit_8c.html#abf7c5606e564f6821612412d4d6c56a8">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define UN_SC_OZ    0.028349523125f</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 <span class="comment">/* define a single unit */</span>
<a name="l00080"></a><a class="code" href="../../d1/d6a/structbUnitDef.html">00080</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> {
<a name="l00081"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">00081</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>;
<a name="l00082"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#ab0bd311d1ed70e33d1dec931a0b709f3">00082</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d6a/structbUnitDef.html#ab0bd311d1ed70e33d1dec931a0b709f3">name_plural</a>; <span class="comment">/* abused a bit for the display name */</span>
<a name="l00083"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">00083</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>; <span class="comment">/* this is used for display*/</span>
<a name="l00084"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">00084</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a>; <span class="comment">/* keyboard-friendly ASCII-only version of name_short, can be NULL */</span>
<a name="l00085"></a>00085     <span class="comment">/* if name_short has non-ASCII chars, name_alt should be present */</span>
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#a387599e3e510a3625337c0ed35b89ad3">00087</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d6a/structbUnitDef.html#a387599e3e510a3625337c0ed35b89ad3">name_display</a>; <span class="comment">/* can be NULL */</span>
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">00089</a>     <span class="keywordtype">double</span> <a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>;
<a name="l00090"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#af871b4578860f4405357246c7a50b532">00090</a>     <span class="keywordtype">double</span> <a class="code" href="../../d1/d6a/structbUnitDef.html#af871b4578860f4405357246c7a50b532">bias</a>; <span class="comment">/* not used yet, needed for converting temperature */</span>
<a name="l00091"></a><a class="code" href="../../d1/d6a/structbUnitDef.html#a9fd186e343c85cea3f6f6bfef2edcb25">00091</a>     <span class="keywordtype">int</span> <a class="code" href="../../d1/d6a/structbUnitDef.html#a9fd186e343c85cea3f6f6bfef2edcb25">flag</a>;
<a name="l00092"></a>00092 } <a class="code" href="../../da/d1d/unit_8c.html#a12d1ce8f77c0a76d0eb7de50b1a60927">bUnitDef</a>;
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">00094</a> <span class="preprocessor">#define B_UNIT_DEF_NONE 0</span>
<a name="l00095"></a><a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define B_UNIT_DEF_SUPPRESS 1 </span><span class="comment">/* Use for units that are not used enough to be translated into for common use */</span>
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="comment">/* define a single unit */</span>
<a name="l00098"></a><a class="code" href="../../d6/d4b/structbUnitCollection.html">00098</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> {
<a name="l00099"></a><a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">00099</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>;
<a name="l00100"></a><a class="code" href="../../d6/d4b/structbUnitCollection.html#a0c88876e19acecdb3adc6304e749bc47">00100</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/d4b/structbUnitCollection.html#a0c88876e19acecdb3adc6304e749bc47">base_unit</a>; <span class="comment">/* basic unit index (when user doesn&#39;t specify unit explicitly) */</span>
<a name="l00101"></a><a class="code" href="../../d6/d4b/structbUnitCollection.html#ae410335f70b0d555da31e0383234db87">00101</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/d4b/structbUnitCollection.html#ae410335f70b0d555da31e0383234db87">flag</a>; <span class="comment">/* options for this system */</span>
<a name="l00102"></a><a class="code" href="../../d6/d4b/structbUnitCollection.html#a4641bc543bf82e85eb52aaca5f559ecf">00102</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/d4b/structbUnitCollection.html#a4641bc543bf82e85eb52aaca5f559ecf">length</a>; <span class="comment">/* to quickly find the last item */</span>
<a name="l00103"></a>00103 } <a class="code" href="../../da/d1d/unit_8c.html#adaba1c16f5d6fed37ba20e6bfd36605f">bUnitCollection</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">/* Dummy */</span>
<a name="l00106"></a><a class="code" href="../../da/d1d/unit_8c.html#af40d5bd661387d068931d553a802f97a">00106</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#af40d5bd661387d068931d553a802f97a">buDummyDef</a>[] = { {<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1.0, 0.0}, {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}};
<a name="l00107"></a><a class="code" href="../../da/d1d/unit_8c.html#a6f52b94d9ba412621693f275c8cb9c18">00107</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a6f52b94d9ba412621693f275c8cb9c18">buDummyCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#af40d5bd661387d068931d553a802f97a">buDummyDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#af40d5bd661387d068931d553a802f97a">buDummyDef</a>)};
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="comment">/* Lengths */</span>
<a name="l00110"></a><a class="code" href="../../da/d1d/unit_8c.html#ab7ed1e52c2f54d75550ace85951f78eb">00110</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#ab7ed1e52c2f54d75550ace85951f78eb">buMetricLenDef</a>[] = {
<a name="l00111"></a>00111     {<span class="stringliteral">&quot;kilometer&quot;</span>, <span class="stringliteral">&quot;kilometers&quot;</span>,     <span class="stringliteral">&quot;km&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Kilometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00112"></a>00112     {<span class="stringliteral">&quot;hectometer&quot;</span>, <span class="stringliteral">&quot;hectometers&quot;</span>,   <span class="stringliteral">&quot;hm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;100 Meters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00113"></a>00113     {<span class="stringliteral">&quot;dekameter&quot;</span>, <span class="stringliteral">&quot;dekameters&quot;</span>,     <span class="stringliteral">&quot;dam&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;10 Meters&quot;</span>,  <a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00114"></a>00114     {<span class="stringliteral">&quot;meter&quot;</span>, <span class="stringliteral">&quot;meters&quot;</span>,             <span class="stringliteral">&quot;m&quot;</span>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Meters&quot;</span>,     <a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00115"></a>00115     {<span class="stringliteral">&quot;decimetre&quot;</span>, <span class="stringliteral">&quot;decimetres&quot;</span>,     <span class="stringliteral">&quot;dm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;10 Centimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00116"></a>00116     {<span class="stringliteral">&quot;centimeter&quot;</span>, <span class="stringliteral">&quot;centimeters&quot;</span>,   <span class="stringliteral">&quot;cm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Centimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00117"></a>00117     {<span class="stringliteral">&quot;millimeter&quot;</span>, <span class="stringliteral">&quot;millimeters&quot;</span>,   <span class="stringliteral">&quot;mm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Millimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00118"></a>00118     {<span class="stringliteral">&quot;micrometer&quot;</span>, <span class="stringliteral">&quot;micrometers&quot;</span>,   <span class="stringliteral">&quot;µm&quot;</span>, <span class="stringliteral">&quot;um&quot;</span>,    <span class="stringliteral">&quot;Micrometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">// micron too?</span>
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="comment">/* These get displayed because of float precision problems in the transform header,</span>
<a name="l00121"></a>00121 <span class="comment">     * could work around, but for now probably people wont use these */</span>
<a name="l00122"></a>00122 <span class="preprocessor">#if 0</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span>    {<span class="stringliteral">&quot;nanometer&quot;</span>, <span class="stringliteral">&quot;Nanometers&quot;</span>,     <span class="stringliteral">&quot;nm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.000000001, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00124"></a>00124     {<span class="stringliteral">&quot;picometer&quot;</span>, <span class="stringliteral">&quot;Picometers&quot;</span>,     <span class="stringliteral">&quot;pm&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.000000000001, 0.0,<a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00125"></a>00125 <span class="preprocessor">#endif</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>    {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00127"></a>00127 };
<a name="l00128"></a><a class="code" href="../../da/d1d/unit_8c.html#a002bc67b9bdc85b2259809a09923a119">00128</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a002bc67b9bdc85b2259809a09923a119">buMetricLenCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#ab7ed1e52c2f54d75550ace85951f78eb">buMetricLenDef</a>, 3, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#ab7ed1e52c2f54d75550ace85951f78eb">buMetricLenDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="../../da/d1d/unit_8c.html#a0af6078f9ba9ab4b117c5128e480d351">00130</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a0af6078f9ba9ab4b117c5128e480d351">buImperialLenDef</a>[] = {
<a name="l00131"></a>00131     {<span class="stringliteral">&quot;mile&quot;</span>, <span class="stringliteral">&quot;miles&quot;</span>,       <span class="stringliteral">&quot;mi&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>, <span class="stringliteral">&quot;Miles&quot;</span>,     <a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00132"></a>00132     {<span class="stringliteral">&quot;furlong&quot;</span>, <span class="stringliteral">&quot;furlongs&quot;</span>, <span class="stringliteral">&quot;fur&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Furlongs&quot;</span>,<a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00133"></a>00133     {<span class="stringliteral">&quot;chain&quot;</span>, <span class="stringliteral">&quot;chains&quot;</span>,     <span class="stringliteral">&quot;ch&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Chains&quot;</span>,   <a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00134"></a>00134     {<span class="stringliteral">&quot;yard&quot;</span>, <span class="stringliteral">&quot;yards&quot;</span>,       <span class="stringliteral">&quot;yd&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Yards&quot;</span>,    <a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00135"></a>00135     {<span class="stringliteral">&quot;foot&quot;</span>, <span class="stringliteral">&quot;feet&quot;</span>,        <span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;ft&quot;</span>, <span class="stringliteral">&quot;Feet&quot;</span>,      <a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00136"></a>00136     {<span class="stringliteral">&quot;inch&quot;</span>, <span class="stringliteral">&quot;inches&quot;</span>,      <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;in&quot;</span>, <span class="stringliteral">&quot;Inches&quot;</span>,   <a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00137"></a>00137     {<span class="stringliteral">&quot;thou&quot;</span>, <span class="stringliteral">&quot;thou&quot;</span>,        <span class="stringliteral">&quot;thou&quot;</span>, <span class="stringliteral">&quot;mil&quot;</span>, <span class="stringliteral">&quot;Thou&quot;</span>,  <a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* plural for thou has no &#39;s&#39; */</span>
<a name="l00138"></a>00138     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00139"></a>00139 };
<a name="l00140"></a><a class="code" href="../../da/d1d/unit_8c.html#a833b51a845ee0c5cce4a2409767114d8">00140</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a833b51a845ee0c5cce4a2409767114d8">buImperialLenCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a0af6078f9ba9ab4b117c5128e480d351">buImperialLenDef</a>, 4, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a0af6078f9ba9ab4b117c5128e480d351">buImperialLenDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/* Areas */</span>
<a name="l00143"></a><a class="code" href="../../da/d1d/unit_8c.html#a181b2c07b36513444aed2e49b060c6c2">00143</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a181b2c07b36513444aed2e49b060c6c2">buMetricAreaDef</a>[] = {
<a name="l00144"></a>00144     {<span class="stringliteral">&quot;square kilometer&quot;</span>, <span class="stringliteral">&quot;square kilometers&quot;</span>,   <span class="stringliteral">&quot;km²&quot;</span>, <span class="stringliteral">&quot;km2&quot;</span>,  <span class="stringliteral">&quot;Square Kilometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00145"></a>00145     {<span class="stringliteral">&quot;square hectometer&quot;</span>,<span class="stringliteral">&quot;square hectometers&quot;</span>,  <span class="stringliteral">&quot;hm²&quot;</span>, <span class="stringliteral">&quot;hm2&quot;</span>,  <span class="stringliteral">&quot;Square Hectometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>*<a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* hectare */</span>
<a name="l00146"></a>00146     {<span class="stringliteral">&quot;square dekameter&quot;</span>, <span class="stringliteral">&quot;square dekameters&quot;</span>,   <span class="stringliteral">&quot;dam²&quot;</span>,<span class="stringliteral">&quot;dam2&quot;</span>, <span class="stringliteral">&quot;Square Dekameters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>}, <span class="comment">/* are */</span>
<a name="l00147"></a>00147     {<span class="stringliteral">&quot;square meter&quot;</span>, <span class="stringliteral">&quot;square meters&quot;</span>,           <span class="stringliteral">&quot;m²&quot;</span>,  <span class="stringliteral">&quot;m2&quot;</span>,   <span class="stringliteral">&quot;Square Meters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>*<a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>, 0.0,          <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00148"></a>00148     {<span class="stringliteral">&quot;square decimetre&quot;</span>, <span class="stringliteral">&quot;square decimetres&quot;</span>,   <span class="stringliteral">&quot;dm²&quot;</span>, <span class="stringliteral">&quot;dm2&quot;</span>,  <span class="stringliteral">&quot;Square Decimetres&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00149"></a>00149     {<span class="stringliteral">&quot;square centimeter&quot;</span>, <span class="stringliteral">&quot;square centimeters&quot;</span>, <span class="stringliteral">&quot;cm²&quot;</span>, <span class="stringliteral">&quot;cm2&quot;</span>,  <span class="stringliteral">&quot;Square Centimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00150"></a>00150     {<span class="stringliteral">&quot;square millimeter&quot;</span>, <span class="stringliteral">&quot;square millimeters&quot;</span>, <span class="stringliteral">&quot;mm²&quot;</span>, <span class="stringliteral">&quot;mm2&quot;</span>,  <span class="stringliteral">&quot;Square Millimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00151"></a>00151     {<span class="stringliteral">&quot;square micrometer&quot;</span>, <span class="stringliteral">&quot;square micrometers&quot;</span>, <span class="stringliteral">&quot;µm²&quot;</span>, <span class="stringliteral">&quot;um2&quot;</span>, <span class="stringliteral">&quot;Square Micrometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00152"></a>00152     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00153"></a>00153 };
<a name="l00154"></a><a class="code" href="../../da/d1d/unit_8c.html#ac9a8fa370f29d1411f6aaf08e70a16cb">00154</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#ac9a8fa370f29d1411f6aaf08e70a16cb">buMetricAreaCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a181b2c07b36513444aed2e49b060c6c2">buMetricAreaDef</a>, 3, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a181b2c07b36513444aed2e49b060c6c2">buMetricAreaDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="../../da/d1d/unit_8c.html#ae98e99612b992e37d8069327794882c6">00156</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#ae98e99612b992e37d8069327794882c6">buImperialAreaDef</a>[] = {
<a name="l00157"></a>00157     {<span class="stringliteral">&quot;square mile&quot;</span>, <span class="stringliteral">&quot;square miles&quot;</span>,         <span class="stringliteral">&quot;sq mi&quot;</span>, <span class="stringliteral">&quot;sq m&quot;</span>,<span class="stringliteral">&quot;Square Miles&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>*<a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00158"></a>00158     {<span class="stringliteral">&quot;square furlong&quot;</span>, <span class="stringliteral">&quot;square furlongs&quot;</span>,   <span class="stringliteral">&quot;sq fur&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Furlongs&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>*<a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>, 0.0,<a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00159"></a>00159     {<span class="stringliteral">&quot;square chain&quot;</span>, <span class="stringliteral">&quot;square chains&quot;</span>,       <span class="stringliteral">&quot;sq ch&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Chains&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>*<a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00160"></a>00160     {<span class="stringliteral">&quot;square yard&quot;</span>, <span class="stringliteral">&quot;square yards&quot;</span>,         <span class="stringliteral">&quot;sq yd&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Yards&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>*<a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00161"></a>00161     {<span class="stringliteral">&quot;square foot&quot;</span>, <span class="stringliteral">&quot;square feet&quot;</span>,          <span class="stringliteral">&quot;sq ft&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Feet&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>, 0.0,      <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00162"></a>00162     {<span class="stringliteral">&quot;square inch&quot;</span>, <span class="stringliteral">&quot;square inches&quot;</span>,        <span class="stringliteral">&quot;sq in&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Inches&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>*<a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00163"></a>00163     {<span class="stringliteral">&quot;square thou&quot;</span>, <span class="stringliteral">&quot;square thous&quot;</span>,         <span class="stringliteral">&quot;sq mil&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Square Thous&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>*<a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00164"></a>00164     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00165"></a>00165 };
<a name="l00166"></a><a class="code" href="../../da/d1d/unit_8c.html#a8151ded885166a87fdd677887ba6ffe7">00166</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a8151ded885166a87fdd677887ba6ffe7">buImperialAreaCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#ae98e99612b992e37d8069327794882c6">buImperialAreaDef</a>, 4, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#ae98e99612b992e37d8069327794882c6">buImperialAreaDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">/* Volumes */</span>
<a name="l00169"></a><a class="code" href="../../da/d1d/unit_8c.html#ad9c65ca7dcbb06a6f97aeb69d0a944bb">00169</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#ad9c65ca7dcbb06a6f97aeb69d0a944bb">buMetricVolDef</a>[] = {
<a name="l00170"></a>00170     {<span class="stringliteral">&quot;cubic kilometer&quot;</span>, <span class="stringliteral">&quot;cubic kilometers&quot;</span>,     <span class="stringliteral">&quot;km³&quot;</span>, <span class="stringliteral">&quot;km3&quot;</span>,  <span class="stringliteral">&quot;Cubic Kilometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00171"></a>00171     {<span class="stringliteral">&quot;cubic hectometer&quot;</span>,<span class="stringliteral">&quot;cubic hectometers&quot;</span>,    <span class="stringliteral">&quot;hm³&quot;</span>, <span class="stringliteral">&quot;hm3&quot;</span>,  <span class="stringliteral">&quot;Cubic Hectometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>*<a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>*<a class="code" href="../../da/d1d/unit_8c.html#af70c0be39f1a49b05d2d2501ca6e9b26">UN_SC_HM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00172"></a>00172     {<span class="stringliteral">&quot;cubic dekameter&quot;</span>, <span class="stringliteral">&quot;cubic dekameters&quot;</span>,     <span class="stringliteral">&quot;dam³&quot;</span>,<span class="stringliteral">&quot;dam3&quot;</span>, <span class="stringliteral">&quot;Cubic Dekameters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a248bba730d54b022204615499a84d530">UN_SC_DAM</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00173"></a>00173     {<span class="stringliteral">&quot;cubic meter&quot;</span>, <span class="stringliteral">&quot;cubic meters&quot;</span>,             <span class="stringliteral">&quot;m³&quot;</span>,  <span class="stringliteral">&quot;m3&quot;</span>,   <span class="stringliteral">&quot;Cubic Meters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>*<a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>*<a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>, 0.0,           <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00174"></a>00174     {<span class="stringliteral">&quot;cubic decimetre&quot;</span>, <span class="stringliteral">&quot;cubic decimetres&quot;</span>,     <span class="stringliteral">&quot;dm³&quot;</span>, <span class="stringliteral">&quot;dm3&quot;</span>,  <span class="stringliteral">&quot;Cubic Decimetres&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2a085f1a38ebe09eee339daf12ee34c7">UN_SC_DM</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00175"></a>00175     {<span class="stringliteral">&quot;cubic centimeter&quot;</span>, <span class="stringliteral">&quot;cubic centimeters&quot;</span>,   <span class="stringliteral">&quot;cm³&quot;</span>, <span class="stringliteral">&quot;cm3&quot;</span>,  <span class="stringliteral">&quot;Cubic Centimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ad279ba0a5e987822a47e19e11b2283f2">UN_SC_CM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00176"></a>00176     {<span class="stringliteral">&quot;cubic millimeter&quot;</span>, <span class="stringliteral">&quot;cubic millimeters&quot;</span>,   <span class="stringliteral">&quot;mm³&quot;</span>, <span class="stringliteral">&quot;mm3&quot;</span>,  <span class="stringliteral">&quot;Cubic Millimeters&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ac9d6f355ce3825f858483b95b619e37b">UN_SC_MM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00177"></a>00177     {<span class="stringliteral">&quot;cubic micrometer&quot;</span>, <span class="stringliteral">&quot;cubic micrometers&quot;</span>,   <span class="stringliteral">&quot;µm³&quot;</span>, <span class="stringliteral">&quot;um3&quot;</span>, <span class="stringliteral">&quot;Cubic Micrometers&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>*<a class="code" href="../../da/d1d/unit_8c.html#ae8c559dcd5c71d361b838f41e38d5bde">UN_SC_UM</a>, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00178"></a>00178     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00179"></a>00179 };
<a name="l00180"></a><a class="code" href="../../da/d1d/unit_8c.html#aa6e82d93c0a9036ab5be0aaae785fc70">00180</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#aa6e82d93c0a9036ab5be0aaae785fc70">buMetricVolCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#ad9c65ca7dcbb06a6f97aeb69d0a944bb">buMetricVolDef</a>, 3, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#ad9c65ca7dcbb06a6f97aeb69d0a944bb">buMetricVolDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="../../da/d1d/unit_8c.html#ab09e0252bc5362f2ceb2756727f6e064">00182</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#ab09e0252bc5362f2ceb2756727f6e064">buImperialVolDef</a>[] = {
<a name="l00183"></a>00183     {<span class="stringliteral">&quot;cubic mile&quot;</span>, <span class="stringliteral">&quot;cubic miles&quot;</span>,       <span class="stringliteral">&quot;cu mi&quot;</span>, <span class="stringliteral">&quot;cu m&quot;</span>,<span class="stringliteral">&quot;Cubic Miles&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>*<a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>*<a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00184"></a>00184     {<span class="stringliteral">&quot;cubic furlong&quot;</span>, <span class="stringliteral">&quot;cubic furlongs&quot;</span>, <span class="stringliteral">&quot;cu fur&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Furlongs&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>*<a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>*<a class="code" href="../../da/d1d/unit_8c.html#a1af6e7e48bb7c84de8b7155eca982f8a">UN_SC_FUR</a>, 0.0,<a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00185"></a>00185     {<span class="stringliteral">&quot;cubic chain&quot;</span>, <span class="stringliteral">&quot;cubic chains&quot;</span>,     <span class="stringliteral">&quot;cu ch&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Chains&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>*<a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>*<a class="code" href="../../da/d1d/unit_8c.html#a85778b5a82726fe386a91b7496c3bed4">UN_SC_CH</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00186"></a>00186     {<span class="stringliteral">&quot;cubic yard&quot;</span>, <span class="stringliteral">&quot;cubic yards&quot;</span>,       <span class="stringliteral">&quot;cu yd&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Yards&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>*<a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>*<a class="code" href="../../da/d1d/unit_8c.html#aa57fd91d2c9e3d00c5ff53ad55c11950">UN_SC_YD</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00187"></a>00187     {<span class="stringliteral">&quot;cubic foot&quot;</span>, <span class="stringliteral">&quot;cubic feet&quot;</span>,        <span class="stringliteral">&quot;cu ft&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Feet&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>*<a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>, 0.0,      <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00188"></a>00188     {<span class="stringliteral">&quot;cubic inch&quot;</span>, <span class="stringliteral">&quot;cubic inches&quot;</span>,      <span class="stringliteral">&quot;cu in&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Inches&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>*<a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>*<a class="code" href="../../da/d1d/unit_8c.html#a559c214b5b979ea3d7458f32eb960956">UN_SC_IN</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00189"></a>00189     {<span class="stringliteral">&quot;cubic thou&quot;</span>, <span class="stringliteral">&quot;cubic thous&quot;</span>,       <span class="stringliteral">&quot;cu mil&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Cubic Thous&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>*<a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>*<a class="code" href="../../da/d1d/unit_8c.html#a644613982f8477f5854c4893c9dd67a2">UN_SC_MIL</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00190"></a>00190     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00191"></a>00191 };
<a name="l00192"></a><a class="code" href="../../da/d1d/unit_8c.html#ada4e53315940a00a9f33a4895d77efd2">00192</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#ada4e53315940a00a9f33a4895d77efd2">buImperialVolCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#ab09e0252bc5362f2ceb2756727f6e064">buImperialVolDef</a>, 4, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#ab09e0252bc5362f2ceb2756727f6e064">buImperialVolDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="comment">/* Mass */</span>
<a name="l00195"></a><a class="code" href="../../da/d1d/unit_8c.html#a33ee7409c748613c04ed3594a572756a">00195</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a33ee7409c748613c04ed3594a572756a">buMetricMassDef</a>[] = {
<a name="l00196"></a>00196     {<span class="stringliteral">&quot;ton&quot;</span>, <span class="stringliteral">&quot;tonnes&quot;</span>,           <span class="stringliteral">&quot;ton&quot;</span>, <span class="stringliteral">&quot;t&quot;</span>, <span class="stringliteral">&quot;1000 Kilograms&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a3f5e59f03f3d0736b1da0cfc4b673a1d">UN_SC_MTON</a>, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00197"></a>00197     {<span class="stringliteral">&quot;quintal&quot;</span>, <span class="stringliteral">&quot;quintals&quot;</span>,     <span class="stringliteral">&quot;ql&quot;</span>, <span class="stringliteral">&quot;q&quot;</span>,  <span class="stringliteral">&quot;100 Kilograms&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#abcc0abf76215b9a97704f332789d377c">UN_SC_QL</a>, 0.0,     <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00198"></a>00198     {<span class="stringliteral">&quot;kilogram&quot;</span>, <span class="stringliteral">&quot;kilograms&quot;</span>,   <span class="stringliteral">&quot;kg&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Kilograms&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ae9ff6ae1f6bf312e49228ab55816c48a">UN_SC_KG</a>, 0.0,         <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00199"></a>00199     {<span class="stringliteral">&quot;hectogram&quot;</span>, <span class="stringliteral">&quot;hectograms&quot;</span>, <span class="stringliteral">&quot;hg&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Hectograms&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a4581cc218006024cc814cbfcc2332b52">UN_SC_HG</a>, 0.0,        <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00200"></a>00200     {<span class="stringliteral">&quot;dekagram&quot;</span>, <span class="stringliteral">&quot;dekagrams&quot;</span>,   <span class="stringliteral">&quot;dag&quot;</span>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;10 Grams&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ac68cf336ce6027db77323b3fe945a080">UN_SC_DAG</a>, 0.0,         <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00201"></a>00201     {<span class="stringliteral">&quot;gram&quot;</span>, <span class="stringliteral">&quot;grams&quot;</span>,           <span class="stringliteral">&quot;g&quot;</span>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Grams&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a5146348d038c75cb14ac21a290c83c65">UN_SC_G</a>, 0.0,              <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00202"></a>00202     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00203"></a>00203 };
<a name="l00204"></a><a class="code" href="../../da/d1d/unit_8c.html#a4cdfc111575f03f3d2012e5c3f83db8f">00204</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a4cdfc111575f03f3d2012e5c3f83db8f">buMetricMassCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a33ee7409c748613c04ed3594a572756a">buMetricMassDef</a>, 2, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a33ee7409c748613c04ed3594a572756a">buMetricMassDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="../../da/d1d/unit_8c.html#aa1e9bfc607c4344e451655b9ea7670b8">00206</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#aa1e9bfc607c4344e451655b9ea7670b8">buImperialMassDef</a>[] = {
<a name="l00207"></a>00207     {<span class="stringliteral">&quot;ton&quot;</span>, <span class="stringliteral">&quot;tonnes&quot;</span>,   <span class="stringliteral">&quot;ton&quot;</span>, <span class="stringliteral">&quot;t&quot;</span>, <span class="stringliteral">&quot;Tonnes&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a10ed231178e8f1f70e00c2702dcde40c">UN_SC_ITON</a>, 0.0,      <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00208"></a>00208     {<span class="stringliteral">&quot;centum weight&quot;</span>, <span class="stringliteral">&quot;centum weights&quot;</span>, <span class="stringliteral">&quot;cwt&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Centum weights&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a296296b9595db3115bdbd9f3d4757512">UN_SC_CWT</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00209"></a>00209     {<span class="stringliteral">&quot;stone&quot;</span>, <span class="stringliteral">&quot;stones&quot;</span>, <span class="stringliteral">&quot;st&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,     <span class="stringliteral">&quot;Stones&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#ab1e9a3fff3a8fa03f4f182087030cb72">UN_SC_ST</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00210"></a>00210     {<span class="stringliteral">&quot;pound&quot;</span>, <span class="stringliteral">&quot;pounds&quot;</span>, <span class="stringliteral">&quot;lb&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,     <span class="stringliteral">&quot;Pounds&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a639e59e9f7fccc98fdae453b22cc8ff6">UN_SC_LB</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00211"></a>00211     {<span class="stringliteral">&quot;ounce&quot;</span>, <span class="stringliteral">&quot;ounces&quot;</span>, <span class="stringliteral">&quot;oz&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,     <span class="stringliteral">&quot;Ounces&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#abf7c5606e564f6821612412d4d6c56a8">UN_SC_OZ</a>, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00212"></a>00212     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00213"></a>00213 };
<a name="l00214"></a><a class="code" href="../../da/d1d/unit_8c.html#ad7230494eb9d50a7ab92a1604b5c03bc">00214</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#ad7230494eb9d50a7ab92a1604b5c03bc">buImperialMassCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#aa1e9bfc607c4344e451655b9ea7670b8">buImperialMassDef</a>, 3, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#aa1e9bfc607c4344e451655b9ea7670b8">buImperialMassDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="comment">/* Even if user scales the system to a point where km^3 is used, velocity and</span>
<a name="l00217"></a>00217 <span class="comment"> * acceleration aren&#39;t scaled: that&#39;s why we have so few units for them */</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">/* Velocity */</span>
<a name="l00220"></a><a class="code" href="../../da/d1d/unit_8c.html#a24f65f69dd6770b426e7a1252d0a57bf">00220</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a24f65f69dd6770b426e7a1252d0a57bf">buMetricVelDef</a>[] = {
<a name="l00221"></a>00221     {<span class="stringliteral">&quot;meter per second&quot;</span>, <span class="stringliteral">&quot;meters per second&quot;</span>,       <span class="stringliteral">&quot;m/s&quot;</span>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,   <span class="stringliteral">&quot;Meters per second&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>, 0.0,            <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00222"></a>00222     {<span class="stringliteral">&quot;kilometer per hour&quot;</span>, <span class="stringliteral">&quot;kilometers per hour&quot;</span>,   <span class="stringliteral">&quot;km/h&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,   <span class="stringliteral">&quot;Kilometers per hour&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a4c3f0818ecf8301b87b1fa95dcfa1ce2">UN_SC_KM</a>/3600.0f, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00223"></a>00223     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00224"></a>00224 };
<a name="l00225"></a><a class="code" href="../../da/d1d/unit_8c.html#adc9b173d62395a95216dad4ff7b51715">00225</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#adc9b173d62395a95216dad4ff7b51715">buMetricVelCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a24f65f69dd6770b426e7a1252d0a57bf">buMetricVelDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a24f65f69dd6770b426e7a1252d0a57bf">buMetricVelDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="../../da/d1d/unit_8c.html#adfd07fc027c864f6e4c39699626b44a3">00227</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#adfd07fc027c864f6e4c39699626b44a3">buImperialVelDef</a>[] = {
<a name="l00228"></a>00228     {<span class="stringliteral">&quot;foot per second&quot;</span>, <span class="stringliteral">&quot;feet per second&quot;</span>,  <span class="stringliteral">&quot;ft/s&quot;</span>, <span class="stringliteral">&quot;fps&quot;</span>,  <span class="stringliteral">&quot;Feet per second&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>, 0.0,       <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00229"></a>00229     {<span class="stringliteral">&quot;mile per hour&quot;</span>, <span class="stringliteral">&quot;miles per hour&quot;</span>,     <span class="stringliteral">&quot;mph&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,    <span class="stringliteral">&quot;Miles per hour&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a7f7286cb961db0d96c0bf1089c21db6c">UN_SC_MI</a>/3600.0f, 0.0,<a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>},
<a name="l00230"></a>00230     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00231"></a>00231 };
<a name="l00232"></a><a class="code" href="../../da/d1d/unit_8c.html#a2f378d8faee6768c7209e1641512527e">00232</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#a2f378d8faee6768c7209e1641512527e">buImperialVelCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#adfd07fc027c864f6e4c39699626b44a3">buImperialVelDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#adfd07fc027c864f6e4c39699626b44a3">buImperialVelDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 <span class="comment">/* Acceleration */</span>
<a name="l00235"></a><a class="code" href="../../da/d1d/unit_8c.html#a1c84b2653ac2d98c876b57ed48a6dda4">00235</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a1c84b2653ac2d98c876b57ed48a6dda4">buMetricAclDef</a>[] = {
<a name="l00236"></a>00236     {<span class="stringliteral">&quot;meter per second squared&quot;</span>, <span class="stringliteral">&quot;meters per second squared&quot;</span>, <span class="stringliteral">&quot;m/s²&quot;</span>, <span class="stringliteral">&quot;m/s2&quot;</span>, <span class="stringliteral">&quot;Meters per second squared&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#afd6ddf110a4a9c14105361a8a7313828">UN_SC_M</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00237"></a>00237     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00238"></a>00238 };
<a name="l00239"></a><a class="code" href="../../da/d1d/unit_8c.html#acbed69d6d32a5f76ea46449d334d4585">00239</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#acbed69d6d32a5f76ea46449d334d4585">buMetricAclCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a1c84b2653ac2d98c876b57ed48a6dda4">buMetricAclDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a1c84b2653ac2d98c876b57ed48a6dda4">buMetricAclDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="../../da/d1d/unit_8c.html#a86aaa18101d46275434fa17ca97be8b3">00241</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a86aaa18101d46275434fa17ca97be8b3">buImperialAclDef</a>[] = {
<a name="l00242"></a>00242     {<span class="stringliteral">&quot;foot per second squared&quot;</span>, <span class="stringliteral">&quot;feet per second squared&quot;</span>, <span class="stringliteral">&quot;ft/s²&quot;</span>, <span class="stringliteral">&quot;ft/s2&quot;</span>, <span class="stringliteral">&quot;Feet per second squared&quot;</span>, <a class="code" href="../../da/d1d/unit_8c.html#a2214f53551732f1959a7dd1d118dad4a">UN_SC_FT</a>, 0.0, <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00243"></a>00243     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00244"></a>00244 };
<a name="l00245"></a><a class="code" href="../../da/d1d/unit_8c.html#aad9260e5784b793f1c937e9090d2af80">00245</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#aad9260e5784b793f1c937e9090d2af80">buImperialAclCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a86aaa18101d46275434fa17ca97be8b3">buImperialAclDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a86aaa18101d46275434fa17ca97be8b3">buImperialAclDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="comment">/* Time */</span>
<a name="l00248"></a><a class="code" href="../../da/d1d/unit_8c.html#a819ab16b8231fab0246d26d7fcab3b6b">00248</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#a819ab16b8231fab0246d26d7fcab3b6b">buNaturalTimeDef</a>[] = {
<a name="l00249"></a>00249     <span class="comment">/* weeks? - probably not needed for blender */</span>
<a name="l00250"></a>00250     {<span class="stringliteral">&quot;day&quot;</span>, <span class="stringliteral">&quot;days&quot;</span>,                 <span class="stringliteral">&quot;d&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  <span class="stringliteral">&quot;Days&quot;</span>,         90000.0, 0.0,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00251"></a>00251     {<span class="stringliteral">&quot;hour&quot;</span>, <span class="stringliteral">&quot;hours&quot;</span>,               <span class="stringliteral">&quot;hr&quot;</span>, <span class="stringliteral">&quot;h&quot;</span>,  <span class="stringliteral">&quot;Hours&quot;</span>,        3600.0, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00252"></a>00252     {<span class="stringliteral">&quot;minute&quot;</span>, <span class="stringliteral">&quot;minutes&quot;</span>,           <span class="stringliteral">&quot;min&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>, <span class="stringliteral">&quot;Minutes&quot;</span>,      60.0, 0.0,      <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00253"></a>00253     {<span class="stringliteral">&quot;second&quot;</span>, <span class="stringliteral">&quot;seconds&quot;</span>,           <span class="stringliteral">&quot;sec&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>, <span class="stringliteral">&quot;Seconds&quot;</span>,      1.0, 0.0,       <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>}, <span class="comment">/* base unit */</span>
<a name="l00254"></a>00254     {<span class="stringliteral">&quot;millisecond&quot;</span>, <span class="stringliteral">&quot;milliseconds&quot;</span>, <span class="stringliteral">&quot;ms&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Milliseconds&quot;</span>, 0.001, 0.0  ,   <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00255"></a>00255     {<span class="stringliteral">&quot;microsecond&quot;</span>, <span class="stringliteral">&quot;microseconds&quot;</span>, <span class="stringliteral">&quot;µs&quot;</span>, <span class="stringliteral">&quot;us&quot;</span>,    <span class="stringliteral">&quot;Microseconds&quot;</span>, 0.000001, 0.0,  <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00256"></a>00256     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00257"></a>00257 };
<a name="l00258"></a><a class="code" href="../../da/d1d/unit_8c.html#ac2641430dc49b5a640f0184b45081c29">00258</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#ac2641430dc49b5a640f0184b45081c29">buNaturalTimeCollecton</a> = {<a class="code" href="../../da/d1d/unit_8c.html#a819ab16b8231fab0246d26d7fcab3b6b">buNaturalTimeDef</a>, 3, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#a819ab16b8231fab0246d26d7fcab3b6b">buNaturalTimeDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 
<a name="l00261"></a><a class="code" href="../../da/d1d/unit_8c.html#afa627aaed16654533560bd769ce0ebad">00261</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> <a class="code" href="../../da/d1d/unit_8c.html#afa627aaed16654533560bd769ce0ebad">buNaturalRotDef</a>[] = {
<a name="l00262"></a>00262     {<span class="stringliteral">&quot;degree&quot;</span>, <span class="stringliteral">&quot;degrees&quot;</span>,           <span class="stringliteral">&quot;°&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Degrees&quot;</span>,      <a class="code" href="../../d6/ddc/constraint_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>/180.0, 0.0,    <a class="code" href="../../da/d1d/unit_8c.html#a6efdeb2118e7d9376b19988c9a43220f">B_UNIT_DEF_NONE</a>},
<a name="l00263"></a>00263 <span class="comment">//  {&quot;radian&quot;, &quot;radians&quot;,           &quot;r&quot;, NULL, &quot;Radians&quot;,       1.0, 0.0,           B_UNIT_DEF_NONE},</span>
<a name="l00264"></a>00264 <span class="comment">//  {&quot;turn&quot;, &quot;turns&quot;,               &quot;t&quot;, NULL, &quot;Turns&quot;,         1.0/(M_PI*2.0), 0.0,B_UNIT_DEF_NONE},</span>
<a name="l00265"></a>00265     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0}
<a name="l00266"></a>00266 };
<a name="l00267"></a><a class="code" href="../../da/d1d/unit_8c.html#ae71419c1cc03ddee9cba771d74d8a24c">00267</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> <a class="code" href="../../da/d1d/unit_8c.html#ae71419c1cc03ddee9cba771d74d8a24c">buNaturalRotCollection</a> = {<a class="code" href="../../da/d1d/unit_8c.html#afa627aaed16654533560bd769ce0ebad">buNaturalRotDef</a>, 0, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d1d/unit_8c.html#afa627aaed16654533560bd769ce0ebad">buNaturalRotDef</a>)/<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a>)};
<a name="l00268"></a>00268 
<a name="l00269"></a><a class="code" href="../../da/d1d/unit_8c.html#affba8bd293c5c95a883a6176c6756d8f">00269</a> <span class="preprocessor">#define UNIT_SYSTEM_TOT (((sizeof(bUnitSystems) / 9) / sizeof(void *)) - 1)</span>
<a name="l00270"></a><a class="code" href="../../da/d1d/unit_8c.html#a80cf3d097de0a8f96061a782c96a0f2a">00270</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *<a class="code" href="../../da/d1d/unit_8c.html#a80cf3d097de0a8f96061a782c96a0f2a">bUnitSystems</a>[][9] = {
<a name="l00271"></a>00271     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ae71419c1cc03ddee9cba771d74d8a24c">buNaturalRotCollection</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ac2641430dc49b5a640f0184b45081c29">buNaturalTimeCollecton</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL},
<a name="l00272"></a>00272     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#a002bc67b9bdc85b2259809a09923a119">buMetricLenCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ac9a8fa370f29d1411f6aaf08e70a16cb">buMetricAreaCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#aa6e82d93c0a9036ab5be0aaae785fc70">buMetricVolCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#a4cdfc111575f03f3d2012e5c3f83db8f">buMetricMassCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ae71419c1cc03ddee9cba771d74d8a24c">buNaturalRotCollection</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ac2641430dc49b5a640f0184b45081c29">buNaturalTimeCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#adc9b173d62395a95216dad4ff7b51715">buMetricVelCollecton</a>, &amp;buMetricAclCollecton}, <span class="comment">/* metric */</span>
<a name="l00273"></a>00273     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#a833b51a845ee0c5cce4a2409767114d8">buImperialLenCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#a8151ded885166a87fdd677887ba6ffe7">buImperialAreaCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ada4e53315940a00a9f33a4895d77efd2">buImperialVolCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ad7230494eb9d50a7ab92a1604b5c03bc">buImperialMassCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ae71419c1cc03ddee9cba771d74d8a24c">buNaturalRotCollection</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#ac2641430dc49b5a640f0184b45081c29">buNaturalTimeCollecton</a>, &amp;<a class="code" href="../../da/d1d/unit_8c.html#a2f378d8faee6768c7209e1641512527e">buImperialVelCollecton</a>, &amp;buImperialAclCollecton}, <span class="comment">/* imperial */</span>
<a name="l00274"></a>00274     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}
<a name="l00275"></a>00275 };
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 <span class="comment">/* internal, has some option not exposed */</span>
<a name="l00280"></a><a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">00280</a> <span class="keyword">static</span> <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *<a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(<span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282     <a class="code" href="../../d5/d8e/Value_8h.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>((system &gt; -1) &amp;&amp; (system &lt; <a class="code" href="../../da/d1d/unit_8c.html#affba8bd293c5c95a883a6176c6756d8f">UNIT_SYSTEM_TOT</a>) &amp;&amp; (type &gt; -1) &amp;&amp; (type &lt; <a class="code" href="../../dd/d47/BKE__unit_8h.html#a14abf0ec28b70ba28865ff3f56594a7c">B_UNIT_TYPE_TOT</a>));
<a name="l00283"></a>00283     <span class="keywordflow">return</span> bUnitSystems[system][type]; <span class="comment">/* select system to use, metric/imperial/other? */</span>
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">00286</a> <span class="keyword">static</span> <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *<a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(<a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288     <span class="keywordflow">return</span> &amp;usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>[usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a0c88876e19acecdb3adc6304e749bc47">base_unit</a>];
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a><a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">00291</a> <span class="keyword">static</span> <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *<a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">unit_best_fit</a>(<span class="keywordtype">double</span> value, <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit_start, <span class="keywordtype">int</span> suppress)
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit;
<a name="l00294"></a>00294     <span class="keywordtype">double</span> value_abs = value &gt; 0.0 ? value : -value;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296     <span class="keywordflow">for</span> (unit = unit_start ? unit_start : usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>; unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>; unit++) {
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (suppress &amp;&amp; (unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a9fd186e343c85cea3f6f6bfef2edcb25">flag</a> &amp; <a class="code" href="../../da/d1d/unit_8c.html#aff3c1d8953e09934413785cb8d0a9776">B_UNIT_DEF_SUPPRESS</a>))
<a name="l00299"></a>00299             <span class="keywordflow">continue</span>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301         <span class="comment">/* scale down scalar so 1cm doesnt convert to 10mm because of float error */</span>
<a name="l00302"></a>00302         <span class="keywordflow">if</span> (value_abs &gt;= unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a> * (1.0 - <a class="code" href="../../da/d1d/unit_8c.html#a6ebf6899d6c1c8b7b9d09be872c05aae">EPS</a>))
<a name="l00303"></a>00303             <span class="keywordflow">return</span> unit;
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306     <span class="keywordflow">return</span> <a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(usys);
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309 <span class="comment">/* convert into 2 units and 2 values for &quot;2ft, 3inch&quot; syntax */</span>
<a name="l00310"></a><a class="code" href="../../da/d1d/unit_8c.html#a57ffa511ce0562acc828280a8d7f6bd0">00310</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d1d/unit_8c.html#a57ffa511ce0562acc828280a8d7f6bd0">unit_dual_convert</a>(<span class="keywordtype">double</span> value, <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> **unit_a, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> **unit_b,
<a name="l00311"></a>00311                               <span class="keywordtype">double</span> *value_a, <span class="keywordtype">double</span> *value_b)
<a name="l00312"></a>00312 {
<a name="l00313"></a>00313     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit = <a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">unit_best_fit</a>(value, usys, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     *value_a = (value &lt; 0.0 ? ceil : floor)(value / unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>) * unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>;
<a name="l00316"></a>00316     *value_b = value - (*value_a);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     *unit_a = unit;
<a name="l00319"></a>00319     *unit_b = <a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">unit_best_fit</a>(*value_b, usys, *unit_a, 1);
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00322"></a><a class="code" href="../../da/d1d/unit_8c.html#a1067279cc69b83cd759c3213372a305e">00322</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#a1067279cc69b83cd759c3213372a305e">unit_as_string</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keywordtype">double</span> value, <span class="keywordtype">int</span> prec, <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys,
<a name="l00323"></a>00323                           <span class="comment">/* non exposed options */</span>
<a name="l00324"></a>00324                           <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit, <span class="keywordtype">char</span> pad)
<a name="l00325"></a>00325 {
<a name="l00326"></a>00326     <span class="keywordtype">double</span> value_conv;
<a name="l00327"></a>00327     <span class="keywordtype">int</span> <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (unit) {
<a name="l00330"></a>00330         <span class="comment">/* use unit without finding the best one */</span>
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value == 0.0) {
<a name="l00333"></a>00333         <span class="comment">/* use the default units since there is no way to convert */</span>
<a name="l00334"></a>00334         unit = <a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(usys);
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336     <span class="keywordflow">else</span> {
<a name="l00337"></a>00337         unit = <a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">unit_best_fit</a>(value, usys, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     value_conv = value / unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="comment">/* Convert to a string */</span>
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344         len = <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(str, len_max, <span class="stringliteral">&quot;%.*f&quot;</span>, prec, value_conv);
<a name="l00345"></a>00345 
<a name="l00346"></a>00346         <span class="keywordflow">if</span> (len &gt;= len_max)
<a name="l00347"></a>00347             len = len_max;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="comment">/* Add unit prefix and strip zeros */</span>
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">/* replace trailing zero&#39;s with spaces</span>
<a name="l00353"></a>00353 <span class="comment">     * so the number is less complicated but allignment in a button wont</span>
<a name="l00354"></a>00354 <span class="comment">     * jump about while dragging */</span>
<a name="l00355"></a>00355     i = len - 1;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357     <span class="keywordflow">while</span> (i &gt; 0 &amp;&amp; str[i] == <span class="charliteral">&#39;0&#39;</span>) { <span class="comment">/* 4.300 -&gt; 4.3 */</span>
<a name="l00358"></a>00358         str[i--] = pad;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (i &gt; 0 &amp;&amp; str[i] == <span class="charliteral">&#39;.&#39;</span>) { <span class="comment">/* 10. -&gt; 10 */</span>
<a name="l00362"></a>00362         str[i--] = pad;
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="comment">/* Now add the suffix */</span>
<a name="l00366"></a>00366     <span class="keywordflow">if</span> (i &lt; len_max) {
<a name="l00367"></a>00367         <span class="keywordtype">int</span> j = 0;
<a name="l00368"></a>00368         i++;
<a name="l00369"></a>00369         <span class="keywordflow">while</span> (unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>[j] &amp;&amp; (i &lt; len_max)) {
<a name="l00370"></a>00370             str[i++] = unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>[j++];
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373         <span class="keywordflow">if</span> (pad) {
<a name="l00374"></a>00374             <span class="comment">/* this loop only runs if so many zeros were removed that</span>
<a name="l00375"></a>00375 <span class="comment">             * the unit name only used padded chars,</span>
<a name="l00376"></a>00376 <span class="comment">             * In that case add padding for the name. */</span>
<a name="l00377"></a>00377 
<a name="l00378"></a>00378             <span class="keywordflow">while</span> (i &lt;= len + j &amp;&amp; (i &lt; len_max)) {
<a name="l00379"></a>00379                 str[i++] = pad;
<a name="l00380"></a>00380             }
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="comment">/* terminate no matter whats done with padding above */</span>
<a name="l00385"></a>00385     <span class="keywordflow">if</span> (i &gt;= len_max)
<a name="l00386"></a>00386         i = len_max - 1;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     str[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00389"></a>00389     <span class="keywordflow">return</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 <span class="comment">/* Used for drawing number buttons, try keep fast */</span>
<a name="l00393"></a><a class="code" href="../../da/d1d/unit_8c.html#ab08be762576ac9db1443315105ccf396">00393</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#ab08be762576ac9db1443315105ccf396">bUnit_AsString</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keywordtype">double</span> value, <span class="keywordtype">int</span> prec, <span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> <a class="code" href="../../d8/d40/btDbvt_8cpp.html#ad08f07bba2ea0c5c64802b70c686fc68">split</a>, <span class="keywordtype">int</span> pad)
<a name="l00394"></a>00394 {
<a name="l00395"></a>00395     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="keywordflow">if</span> (usys == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>[0].<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00398"></a>00398         usys = &amp;<a class="code" href="../../da/d1d/unit_8c.html#a6f52b94d9ba412621693f275c8cb9c18">buDummyCollecton</a>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="comment">/* split output makes sense only for length, mass and time */</span>
<a name="l00401"></a>00401     <span class="keywordflow">if</span> (split &amp;&amp; (type == <a class="code" href="../../dd/d47/BKE__unit_8h.html#a4779c1dd27e30d714b820dfc6adfb66b">B_UNIT_LENGTH</a> || type == <a class="code" href="../../dd/d47/BKE__unit_8h.html#a21bae070be7569d51b24be5ba20b625c">B_UNIT_MASS</a> || type == <a class="code" href="../../dd/d47/BKE__unit_8h.html#a631bfd7f2ad15ec739df88e97018aa38">B_UNIT_TIME</a>)) {
<a name="l00402"></a>00402         <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit_a, *unit_b;
<a name="l00403"></a>00403         <span class="keywordtype">double</span> value_a, value_b;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405         <a class="code" href="../../da/d1d/unit_8c.html#a57ffa511ce0562acc828280a8d7f6bd0">unit_dual_convert</a>(value, usys, &amp;unit_a, &amp;unit_b, &amp;value_a, &amp;value_b);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407         <span class="comment">/* check the 2 is a smaller unit */</span>
<a name="l00408"></a>00408         <span class="keywordflow">if</span> (unit_b &gt; unit_a) {
<a name="l00409"></a>00409             <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="../../da/d1d/unit_8c.html#a1067279cc69b83cd759c3213372a305e">unit_as_string</a>(str, len_max, value_a, prec, usys, unit_a, <span class="charliteral">&#39;\0&#39;</span>);
<a name="l00410"></a>00410 
<a name="l00411"></a>00411             <span class="comment">/* is there enough space for at least 1 char of the next unit? */</span>
<a name="l00412"></a>00412             <span class="keywordflow">if</span> (i + 2 &lt; len_max) {
<a name="l00413"></a>00413                 str[i++] = <span class="charliteral">&#39; &#39;</span>;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415                 <span class="comment">/* use low precision since this is a smaller unit */</span>
<a name="l00416"></a>00416                 <a class="code" href="../../da/d1d/unit_8c.html#a1067279cc69b83cd759c3213372a305e">unit_as_string</a>(str + i, len_max - i, value_b, prec ? 1 : 0, usys, unit_b, <span class="charliteral">&#39;\0&#39;</span>);
<a name="l00417"></a>00417             }
<a name="l00418"></a>00418             <span class="keywordflow">return</span>;
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <a class="code" href="../../da/d1d/unit_8c.html#a1067279cc69b83cd759c3213372a305e">unit_as_string</a>(str, len_max, value, prec, usys, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, pad ? <span class="charliteral">&#39; &#39;</span> : <span class="charliteral">&#39;\0&#39;</span>);
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00425"></a><a class="code" href="../../da/d1d/unit_8c.html#a22b352d9034f677af2354b62c0d38412">00425</a> <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a8dc6b090e83d9a9851b90fc5a6452c56">BLI_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#a22b352d9034f677af2354b62c0d38412">isalpha_or_utf8</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> ch)
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427     <span class="keywordflow">return</span> (ch &gt;= 128 || isalpha(ch));
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">00430</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d22/stdosl_8h.html#a4619b814e3583fabb38a79cf267817ff">substr</a>)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432     <span class="keyword">const</span> <span class="keywordtype">char</span> *str_found;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="keywordflow">if</span> (substr &amp;&amp; substr[0] != <span class="charliteral">&#39;\0&#39;</span>) {
<a name="l00435"></a>00435         str_found = strstr(str, substr);
<a name="l00436"></a>00436         <span class="keywordflow">if</span> (str_found) {
<a name="l00437"></a>00437             <span class="comment">/* previous char cannot be a letter */</span>
<a name="l00438"></a>00438             <span class="keywordflow">if</span> (str_found == str ||
<a name="l00439"></a>00439                 <span class="comment">/* weak unicode support!, so &quot;µm&quot; won&#39;t match up be replaced by &quot;m&quot;</span>
<a name="l00440"></a>00440 <span class="comment">                 * since non ascii utf8 values will NEVER return TRUE */</span>
<a name="l00441"></a>00441                 <a class="code" href="../../da/d1d/unit_8c.html#a22b352d9034f677af2354b62c0d38412">isalpha_or_utf8</a>(*<a class="code" href="../../dd/d83/BLI__string__utf8_8h.html#afb12d109f4dfa123403c579cb1b46d24">BLI_str_prev_char_utf8</a>(str_found)) == 0)
<a name="l00442"></a>00442             {
<a name="l00443"></a>00443                 <span class="comment">/* next char cannot be alphanum */</span>
<a name="l00444"></a>00444                 <span class="keywordtype">int</span> len_name = <a class="code" href="../../d1/d22/stdosl_8h.html#af902ac638d8127503ad64a0eacb3a7e8">strlen</a>(substr);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446                 <span class="keywordflow">if</span> (!<a class="code" href="../../da/d1d/unit_8c.html#a22b352d9034f677af2354b62c0d38412">isalpha_or_utf8</a>(*(str_found + len_name))) {
<a name="l00447"></a>00447                     <span class="keywordflow">return</span> str_found;
<a name="l00448"></a>00448                 }
<a name="l00449"></a>00449             }
<a name="l00450"></a>00450         }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="comment">/* Note that numbers are added within brackets</span>
<a name="l00458"></a>00458 <span class="comment"> * &quot;) &quot; - is used to detect numbers we added so we can detect if commas need to be added</span>
<a name="l00459"></a>00459 <span class="comment"> *</span>
<a name="l00460"></a>00460 <span class="comment"> * &quot;1m1cm+2mm&quot;              - Original value</span>
<a name="l00461"></a>00461 <span class="comment"> * &quot;1*1#1*0.01#+2*0.001#&quot;   - Replace numbers</span>
<a name="l00462"></a>00462 <span class="comment"> * &quot;1*1,1*0.01 +2*0.001 &quot;   - Add comma&#39;s if ( - + * / % ^ &lt; &gt; ) not found in between</span>
<a name="l00463"></a>00463 <span class="comment"> *</span>
<a name="l00464"></a>00464 <span class="comment"> */</span>
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="comment">/* not too strict, (- = * /) are most common  */</span>
<a name="l00467"></a><a class="code" href="../../da/d1d/unit_8c.html#ab244e602b03f34e4a07b617930f47c4d">00467</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#ab244e602b03f34e4a07b617930f47c4d">ch_is_op</a>(<span class="keywordtype">char</span> op)
<a name="l00468"></a>00468 {
<a name="l00469"></a>00469     <span class="keywordflow">switch</span> (op) {
<a name="l00470"></a>00470         <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:
<a name="l00471"></a>00471         <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:
<a name="l00472"></a>00472         <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:
<a name="l00473"></a>00473         <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:
<a name="l00474"></a>00474         <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:
<a name="l00475"></a>00475         <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:
<a name="l00476"></a>00476         <span class="keywordflow">case</span> <span class="charliteral">&#39;~&#39;</span>:
<a name="l00477"></a>00477         <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:
<a name="l00478"></a>00478         <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:
<a name="l00479"></a>00479         <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>:
<a name="l00480"></a>00480         <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>:
<a name="l00481"></a>00481         <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>:
<a name="l00482"></a>00482         <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:
<a name="l00483"></a>00483             <span class="keywordflow">return</span> 1;
<a name="l00484"></a>00484         <span class="keywordflow">default</span>:
<a name="l00485"></a>00485             <span class="keywordflow">return</span> 0;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00489"></a><a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">00489</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">unit_scale_str</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keywordtype">char</span> *str_tmp, <span class="keywordtype">double</span> scale_pref, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit,
<a name="l00490"></a>00490                           <span class="keyword">const</span> <span class="keywordtype">char</span> *replace_str)
<a name="l00491"></a>00491 {
<a name="l00492"></a>00492     <span class="keywordtype">char</span> *str_found;
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <span class="keywordflow">if</span> ((len_max &gt; 0) &amp;&amp; (str_found = (<span class="keywordtype">char</span> *)<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(str, replace_str))) {
<a name="l00495"></a>00495         <span class="comment">/* XXX - investigate, does not respect len_max properly  */</span>
<a name="l00496"></a>00496 
<a name="l00497"></a>00497         <span class="keywordtype">int</span> <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>, len_num, len_name, len_move, found_ofs;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499         found_ofs = (int)(str_found - str);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501         len = <a class="code" href="../../d1/d22/stdosl_8h.html#af902ac638d8127503ad64a0eacb3a7e8">strlen</a>(str);
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         len_name = <a class="code" href="../../d1/d22/stdosl_8h.html#af902ac638d8127503ad64a0eacb3a7e8">strlen</a>(replace_str);
<a name="l00504"></a>00504         len_move = (len - (found_ofs + len_name)) + 1; <span class="comment">/* 1+ to copy the string terminator */</span>
<a name="l00505"></a>00505         len_num = <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(str_tmp, <a class="code" href="../../da/d1d/unit_8c.html#a662c2b90a66ba7c1bbad554a5646bc65">TEMP_STR_SIZE</a>, <span class="stringliteral">&quot;*%g&quot;</span><a class="code" href="../../da/d1d/unit_8c.html#afca78395a53c9a778bfd9f8ea89bdcab">SEP_STR</a>, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a> / scale_pref); <span class="comment">/* # removed later */</span>
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         <span class="keywordflow">if</span> (len_num &gt; len_max)
<a name="l00508"></a>00508             len_num = len_max;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         <span class="keywordflow">if</span> (found_ofs + len_num + len_move &gt; len_max) {
<a name="l00511"></a>00511             <span class="comment">/* can&#39;t move the whole string, move just as much as will fit */</span>
<a name="l00512"></a>00512             len_move -= (found_ofs + len_num + len_move) - len_max;
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (len_move &gt; 0) {
<a name="l00516"></a>00516             <span class="comment">/* resize the last part of the string */</span>
<a name="l00517"></a>00517             memmove(str_found + len_num, str_found + len_name, len_move); <span class="comment">/* may grow or shrink the string */</span>
<a name="l00518"></a>00518         }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <span class="keywordflow">if</span> (found_ofs + len_num &gt; len_max) {
<a name="l00521"></a>00521             <span class="comment">/* not even the number will fit into the string, only copy part of it */</span>
<a name="l00522"></a>00522             len_num -= (found_ofs + len_num) - len_max;
<a name="l00523"></a>00523         }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         <span class="keywordflow">if</span> (len_num &gt; 0) {
<a name="l00526"></a>00526             <span class="comment">/* its possible none of the number could be copied in */</span>
<a name="l00527"></a>00527             memcpy(str_found, str_tmp, len_num); <span class="comment">/* without the string terminator */</span>
<a name="l00528"></a>00528         }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530         <span class="comment">/* since the null terminator wont be moved if the stringlen_max</span>
<a name="l00531"></a>00531 <span class="comment">         * was not long enough to fit everything in it */</span>
<a name="l00532"></a>00532         str[len_max - 1] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00533"></a>00533         <span class="keywordflow">return</span> found_ofs + len_num;
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <span class="keywordflow">return</span> 0;
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="../../da/d1d/unit_8c.html#a117f0fd5369074af5ce589aaaf26eada">00538</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#a117f0fd5369074af5ce589aaaf26eada">unit_replace</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keywordtype">char</span> *str_tmp, <span class="keywordtype">double</span> scale_pref, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit)
<a name="l00539"></a>00539 {
<a name="l00540"></a>00540     <span class="keywordtype">int</span> ofs = 0;
<a name="l00541"></a>00541     ofs += <a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">unit_scale_str</a>(str + ofs, len_max - ofs, str_tmp, scale_pref, unit, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>);
<a name="l00542"></a>00542     ofs += <a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">unit_scale_str</a>(str + ofs, len_max - ofs, str_tmp, scale_pref, unit, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#ab0bd311d1ed70e33d1dec931a0b709f3">name_plural</a>);
<a name="l00543"></a>00543     ofs += <a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">unit_scale_str</a>(str + ofs, len_max - ofs, str_tmp, scale_pref, unit, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a>);
<a name="l00544"></a>00544     ofs += <a class="code" href="../../da/d1d/unit_8c.html#a462c568cee1e0bf15982bd6477af5053">unit_scale_str</a>(str + ofs, len_max - ofs, str_tmp, scale_pref, unit, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>);
<a name="l00545"></a>00545     <span class="keywordflow">return</span> ofs;
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00548"></a><a class="code" href="../../da/d1d/unit_8c.html#acc094983de31e91350d52d3bf373baf9">00548</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/d1d/unit_8c.html#acc094983de31e91350d52d3bf373baf9">unit_find</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit)
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550     <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>))   <span class="keywordflow">return</span> 1;
<a name="l00551"></a>00551     <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#ab0bd311d1ed70e33d1dec931a0b709f3">name_plural</a>))  <span class="keywordflow">return</span> 1;
<a name="l00552"></a>00552     <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a>))     <span class="keywordflow">return</span> 1;
<a name="l00553"></a>00553     <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>))         <span class="keywordflow">return</span> 1;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555     <span class="keywordflow">return</span> 0;
<a name="l00556"></a>00556 }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 <span class="comment">/* make a copy of the string that replaces the units with numbers</span>
<a name="l00559"></a>00559 <span class="comment"> * this is used before parsing</span>
<a name="l00560"></a>00560 <span class="comment"> * This is only used when evaluating user input and can afford to be a bit slower</span>
<a name="l00561"></a>00561 <span class="comment"> *</span>
<a name="l00562"></a>00562 <span class="comment"> * This is to be used before python evaluation so..</span>
<a name="l00563"></a>00563 <span class="comment"> * 10.1km -&gt; 10.1*1000.0</span>
<a name="l00564"></a>00564 <span class="comment"> * ...will be resolved by python.</span>
<a name="l00565"></a>00565 <span class="comment"> *</span>
<a name="l00566"></a>00566 <span class="comment"> * values will be split by a comma&#39;s</span>
<a name="l00567"></a>00567 <span class="comment"> * 5&#39;2&quot; -&gt; 5&#39;0.0254, 2*0.3048</span>
<a name="l00568"></a>00568 <span class="comment"> *</span>
<a name="l00569"></a>00569 <span class="comment"> * str_prev is optional, when valid it is used to get a base unit when none is set.</span>
<a name="l00570"></a>00570 <span class="comment"> *</span>
<a name="l00571"></a>00571 <span class="comment"> * return true of a change was made.</span>
<a name="l00572"></a>00572 <span class="comment"> */</span>
<a name="l00573"></a><a class="code" href="../../da/d1d/unit_8c.html#a495c07d93f690f3d0d1f0f847a93933f">00573</a> <span class="keywordtype">int</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a495c07d93f690f3d0d1f0f847a93933f">bUnit_ReplaceString</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keyword">const</span> <span class="keywordtype">char</span> *str_prev, <span class="keywordtype">double</span> scale_pref, <span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00574"></a>00574 {
<a name="l00575"></a>00575     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit;
<a name="l00578"></a>00578     <span class="keywordtype">char</span> str_tmp[<a class="code" href="../../da/d1d/unit_8c.html#a662c2b90a66ba7c1bbad554a5646bc65">TEMP_STR_SIZE</a>];
<a name="l00579"></a>00579     <span class="keywordtype">int</span> change = 0;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="keywordflow">if</span> (usys == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>[0].<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00582"></a>00582         <span class="keywordflow">return</span> 0;
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     { <span class="comment">/* make lowercase */</span>
<a name="l00586"></a>00586         <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00587"></a>00587         <span class="keywordtype">char</span> *ch = <a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589         <span class="keywordflow">for</span> (i = 0; (i &gt;= len_max || *ch == <span class="charliteral">&#39;\0&#39;</span>); i++, ch++)
<a name="l00590"></a>00590             <span class="keywordflow">if</span> ((*ch &gt;= <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (*ch &lt;= <span class="charliteral">&#39;Z&#39;</span>))
<a name="l00591"></a>00591                 *ch += (<span class="charliteral">&#39;a&#39;</span> - <span class="charliteral">&#39;A&#39;</span>);
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="keywordflow">for</span> (unit = usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>; unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>; unit++) {
<a name="l00595"></a>00595         <span class="comment">/* in case there are multiple instances */</span>
<a name="l00596"></a>00596         <span class="keywordflow">while</span> (<a class="code" href="../../da/d1d/unit_8c.html#a117f0fd5369074af5ce589aaaf26eada">unit_replace</a>(str, len_max, str_tmp, scale_pref, unit))
<a name="l00597"></a>00597             change = 1;
<a name="l00598"></a>00598     }
<a name="l00599"></a>00599     unit = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601     {
<a name="l00602"></a>00602         <span class="comment">/* try other unit systems now, so we can evaluate imperial when metric is set for eg. */</span>
<a name="l00603"></a>00603         <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys_iter;
<a name="l00604"></a>00604         <span class="keywordtype">int</span> system_iter;
<a name="l00605"></a>00605 
<a name="l00606"></a>00606         <span class="keywordflow">for</span> (system_iter = 0; system_iter &lt; <a class="code" href="../../da/d1d/unit_8c.html#affba8bd293c5c95a883a6176c6756d8f">UNIT_SYSTEM_TOT</a>; system_iter++) {
<a name="l00607"></a>00607             <span class="keywordflow">if</span> (system_iter != system) {
<a name="l00608"></a>00608                 usys_iter = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system_iter, type);
<a name="l00609"></a>00609                 <span class="keywordflow">if</span> (usys_iter) {
<a name="l00610"></a>00610                     <span class="keywordflow">for</span> (unit = usys_iter-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>; unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>; unit++) {
<a name="l00611"></a>00611                         <span class="keywordtype">int</span> ofs = 0;
<a name="l00612"></a>00612                         <span class="comment">/* in case there are multiple instances */</span>
<a name="l00613"></a>00613                         <span class="keywordflow">while</span> ((ofs = <a class="code" href="../../da/d1d/unit_8c.html#a117f0fd5369074af5ce589aaaf26eada">unit_replace</a>(str + ofs, len_max - ofs, str_tmp, scale_pref, unit)))
<a name="l00614"></a>00614                             change = 1;
<a name="l00615"></a>00615                     }
<a name="l00616"></a>00616                 }
<a name="l00617"></a>00617             }
<a name="l00618"></a>00618         }
<a name="l00619"></a>00619     }
<a name="l00620"></a>00620     unit = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="keywordflow">if</span> (change == 0) {
<a name="l00623"></a>00623         <span class="comment">/* no units given so infer a unit from the previous string or default */</span>
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (str_prev) {
<a name="l00625"></a>00625             <span class="comment">/* see which units the original value had */</span>
<a name="l00626"></a>00626             <span class="keywordflow">for</span> (unit = usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>; unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>; unit++) {
<a name="l00627"></a>00627                 <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#acc094983de31e91350d52d3bf373baf9">unit_find</a>(str_prev, unit))
<a name="l00628"></a>00628                     <span class="keywordflow">break</span>;
<a name="l00629"></a>00629             }
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632         <span class="keywordflow">if</span> (unit == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00633"></a>00633             unit = <a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(usys);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635         <span class="comment">/* add the unit prefix and re-run, use brackets in case there was an expression given */</span>
<a name="l00636"></a>00636         <span class="keywordflow">if</span> (<a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(str_tmp, <span class="keyword">sizeof</span>(str_tmp), <span class="stringliteral">&quot;(%s)%s&quot;</span>, str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>) &lt; <span class="keyword">sizeof</span>(str_tmp)) {
<a name="l00637"></a>00637             strncpy(str, str_tmp, len_max);
<a name="l00638"></a>00638             <span class="keywordflow">return</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a495c07d93f690f3d0d1f0f847a93933f">bUnit_ReplaceString</a>(str, len_max, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, scale_pref, system, type);
<a name="l00639"></a>00639         }
<a name="l00640"></a>00640         <span class="keywordflow">else</span> {
<a name="l00641"></a>00641             <span class="comment">/* BLI_snprintf would not fit into str_tmp, cant do much in this case</span>
<a name="l00642"></a>00642 <span class="comment">             * check for this because otherwise bUnit_ReplaceString could call its self forever */</span>
<a name="l00643"></a>00643             <span class="keywordflow">return</span> 0;
<a name="l00644"></a>00644         }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="comment">/* replace # with commas when there is no operator between it and the next number</span>
<a name="l00649"></a>00649 <span class="comment">     *</span>
<a name="l00650"></a>00650 <span class="comment">     * &quot;1*1# 3*100# * 3&quot;  -&gt;  &quot;1 *1, 3 *100  * 3&quot;</span>
<a name="l00651"></a>00651 <span class="comment">     *</span>
<a name="l00652"></a>00652 <span class="comment">     * */</span>
<a name="l00653"></a>00653     {
<a name="l00654"></a>00654         <span class="keywordtype">char</span> *str_found = <a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;
<a name="l00655"></a>00655         <span class="keywordtype">char</span> *ch = <a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657         <span class="keywordflow">while</span> ((str_found = strchr(str_found, <a class="code" href="../../da/d1d/unit_8c.html#a48d1e1f72bb85f5f6befd3a4fe0b8baf">SEP_CHR</a>))) {
<a name="l00658"></a>00658 
<a name="l00659"></a>00659             <span class="keywordtype">int</span> op_found = 0;
<a name="l00660"></a>00660             <span class="comment">/* any operators after this?*/</span>
<a name="l00661"></a>00661             <span class="keywordflow">for</span> (ch = str_found + 1; *ch != <span class="charliteral">&#39;\0&#39;</span>; ch++) {
<a name="l00662"></a>00662 
<a name="l00663"></a>00663                 <span class="keywordflow">if</span> (*ch == <span class="charliteral">&#39; &#39;</span> || *ch == <span class="charliteral">&#39;\t&#39;</span>) {
<a name="l00664"></a>00664                     <span class="comment">/* do nothing */</span>
<a name="l00665"></a>00665                 }
<a name="l00666"></a>00666                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d1d/unit_8c.html#ab244e602b03f34e4a07b617930f47c4d">ch_is_op</a>(*ch) || *ch == <span class="charliteral">&#39;,&#39;</span>) { <span class="comment">/* found an op, no need to insert a ,*/</span>
<a name="l00667"></a>00667                     op_found = 1;
<a name="l00668"></a>00668                     <span class="keywordflow">break</span>;
<a name="l00669"></a>00669                 }
<a name="l00670"></a>00670                 <span class="keywordflow">else</span> { <span class="comment">/* found a non-op character */</span>
<a name="l00671"></a>00671                     op_found = 0;
<a name="l00672"></a>00672                     <span class="keywordflow">break</span>;
<a name="l00673"></a>00673                 }
<a name="l00674"></a>00674             }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676             *str_found++ = op_found ? <span class="charliteral">&#39; &#39;</span> : <span class="charliteral">&#39;,&#39;</span>;
<a name="l00677"></a>00677         }
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     <span class="keywordflow">return</span> change;
<a name="l00681"></a>00681 }
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 <span class="comment">/* 45µm --&gt; 45um */</span>
<a name="l00684"></a><a class="code" href="../../da/d1d/unit_8c.html#a4c1935f03d3f48effa55104757adbc7f">00684</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a4c1935f03d3f48effa55104757adbc7f">bUnit_ToUnitAltName</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keywordtype">int</span> len_max, <span class="keyword">const</span> <span class="keywordtype">char</span> *orig_str, <span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00685"></a>00685 {
<a name="l00686"></a>00686     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit;
<a name="l00689"></a>00689     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit_def = <a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(usys);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     <span class="comment">/* find and substitute all units */</span>
<a name="l00692"></a>00692     <span class="keywordflow">for</span> (unit = usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a2717972fc50a5e78ea8951bca5d34b0c">units</a>; unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#aaf7a46c37d602a14ca297f40b46f9ef8">name</a>; unit++) {
<a name="l00693"></a>00693         <span class="keywordflow">if</span> (len_max &gt; 0 &amp;&amp; (unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a> || unit == unit_def)) {
<a name="l00694"></a>00694             <span class="keyword">const</span> <span class="keywordtype">char</span> *found = <a class="code" href="../../da/d1d/unit_8c.html#a1f89ff7a018e5906d538db9b9a73dae7">unit_find_str</a>(orig_str, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>);
<a name="l00695"></a>00695             <span class="keywordflow">if</span> (found) {
<a name="l00696"></a>00696                 <span class="keywordtype">int</span> offset = (int)(found - orig_str);
<a name="l00697"></a>00697                 <span class="keywordtype">int</span> len_name = 0;
<a name="l00698"></a>00698 
<a name="l00699"></a>00699                 <span class="comment">/* copy everything before the unit */</span>
<a name="l00700"></a>00700                 offset = (offset &lt; len_max ? offset : len_max);
<a name="l00701"></a>00701                 strncpy(str, orig_str, offset);
<a name="l00702"></a>00702 
<a name="l00703"></a>00703                 str += offset;
<a name="l00704"></a>00704                 orig_str += offset + <a class="code" href="../../d1/d22/stdosl_8h.html#af902ac638d8127503ad64a0eacb3a7e8">strlen</a>(unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a327c1afc40d27260650d2f716f9fcbe6">name_short</a>);
<a name="l00705"></a>00705                 len_max -= offset;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707                 <span class="comment">/* print the alt_name */</span>
<a name="l00708"></a>00708                 <span class="keywordflow">if</span> (unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a>)
<a name="l00709"></a>00709                     len_name = <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(str, len_max, <span class="stringliteral">&quot;%s&quot;</span>, unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a55439e99ffe684a7f16f03778a14f2a5">name_alt</a>);
<a name="l00710"></a>00710                 <span class="keywordflow">else</span>
<a name="l00711"></a>00711                     len_name = 0;
<a name="l00712"></a>00712 
<a name="l00713"></a>00713                 len_name = (len_name &lt; len_max ? len_name : len_max);
<a name="l00714"></a>00714                 str += len_name;
<a name="l00715"></a>00715                 len_max -= len_name;
<a name="l00716"></a>00716             }
<a name="l00717"></a>00717         }
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <span class="comment">/* finally copy the rest of the string */</span>
<a name="l00721"></a>00721     strncpy(str, orig_str, len_max);
<a name="l00722"></a>00722 }
<a name="l00723"></a>00723 
<a name="l00724"></a><a class="code" href="../../da/d1d/unit_8c.html#a141583e8c796ad7e0b97446f75ffd663">00724</a> <span class="keywordtype">double</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a141583e8c796ad7e0b97446f75ffd663">bUnit_ClosestScalar</a>(<span class="keywordtype">double</span> value, <span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00727"></a>00727     <a class="code" href="../../d1/d6a/structbUnitDef.html">bUnitDef</a> *unit;
<a name="l00728"></a>00728 
<a name="l00729"></a>00729     <span class="keywordflow">if</span> (usys == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00730"></a>00730         <span class="keywordflow">return</span> -1;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732     unit = <a class="code" href="../../da/d1d/unit_8c.html#aeee1cd70bb7a5331798fcf85f5eed039">unit_best_fit</a>(value, usys, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);
<a name="l00733"></a>00733     <span class="keywordflow">if</span> (unit == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00734"></a>00734         <span class="keywordflow">return</span> -1;
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="keywordflow">return</span> unit-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>;
<a name="l00737"></a>00737 }
<a name="l00738"></a>00738 
<a name="l00739"></a><a class="code" href="../../da/d1d/unit_8c.html#a05fafd6a1d78f61f631c09b13a6e129d">00739</a> <span class="keywordtype">double</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a05fafd6a1d78f61f631c09b13a6e129d">bUnit_BaseScalar</a>(<span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00742"></a>00742     <span class="keywordflow">return</span> <a class="code" href="../../da/d1d/unit_8c.html#a09cb3a4f7046e955184dd0b77c1ac8b3">unit_default</a>(usys)-&gt;<a class="code" href="../../d1/d6a/structbUnitDef.html#a92f01246971368e72ce21fcc1d40778e">scalar</a>;
<a name="l00743"></a>00743 }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 <span class="comment">/* external access */</span>
<a name="l00746"></a><a class="code" href="../../da/d1d/unit_8c.html#a4806446b79ed8fcd75d8a87cc204d789">00746</a> <span class="keywordtype">int</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a4806446b79ed8fcd75d8a87cc204d789">bUnit_IsValid</a>(<span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00747"></a>00747 {
<a name="l00748"></a>00748     <span class="keywordflow">return</span> !(system &lt; 0 || system &gt; <a class="code" href="../../da/d1d/unit_8c.html#affba8bd293c5c95a883a6176c6756d8f">UNIT_SYSTEM_TOT</a> || type &lt; 0 || type &gt; <a class="code" href="../../dd/d47/BKE__unit_8h.html#a14abf0ec28b70ba28865ff3f56594a7c">B_UNIT_TYPE_TOT</a>);
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 
<a name="l00751"></a><a class="code" href="../../da/d1d/unit_8c.html#a9bceacecd685b282f5dbd4eb47daba64">00751</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a9bceacecd685b282f5dbd4eb47daba64">bUnit_GetSystem</a>(<span class="keywordtype">void</span> **usys_pt, <span class="keywordtype">int</span> *<a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>, <span class="keywordtype">int</span> system, <span class="keywordtype">int</span> type)
<a name="l00752"></a>00752 {
<a name="l00753"></a>00753     <a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *usys = <a class="code" href="../../da/d1d/unit_8c.html#a67fbe7e6b7a357beb8addcf596a4609a">unit_get_system</a>(system, type);
<a name="l00754"></a>00754     *usys_pt = usys;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     <span class="keywordflow">if</span> (usys == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00757"></a>00757         *len = 0;
<a name="l00758"></a>00758         <span class="keywordflow">return</span>;
<a name="l00759"></a>00759     }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761     *len = usys-&gt;<a class="code" href="../../d6/d4b/structbUnitCollection.html#a4641bc543bf82e85eb52aaca5f559ecf">length</a>;
<a name="l00762"></a>00762 }
<a name="l00763"></a>00763 
<a name="l00764"></a><a class="code" href="../../da/d1d/unit_8c.html#a721e61cb6935c5690589506832567956">00764</a> <span class="keywordtype">int</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a721e61cb6935c5690589506832567956">bUnit_GetBaseUnit</a>(<span class="keywordtype">void</span> *usys_pt)
<a name="l00765"></a>00765 {
<a name="l00766"></a>00766     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *)usys_pt)-&gt;base_unit;
<a name="l00767"></a>00767 }
<a name="l00768"></a>00768 
<a name="l00769"></a><a class="code" href="../../da/d1d/unit_8c.html#acd32a9d3339d2f64c06883329c5e9d64">00769</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d47/BKE__unit_8h.html#acd32a9d3339d2f64c06883329c5e9d64">bUnit_GetName</a>(<span class="keywordtype">void</span> *usys_pt, <span class="keywordtype">int</span> index)
<a name="l00770"></a>00770 {
<a name="l00771"></a>00771     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *)usys_pt)-&gt;units[index].name;
<a name="l00772"></a>00772 }
<a name="l00773"></a><a class="code" href="../../da/d1d/unit_8c.html#a994876bbf5847e8e99102e3093bdc754">00773</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d47/BKE__unit_8h.html#a994876bbf5847e8e99102e3093bdc754">bUnit_GetNameDisplay</a>(<span class="keywordtype">void</span> *usys_pt, <span class="keywordtype">int</span> index)
<a name="l00774"></a>00774 {
<a name="l00775"></a>00775     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *)usys_pt)-&gt;units[index].name_display;
<a name="l00776"></a>00776 }
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="../../da/d1d/unit_8c.html#a13a6f3cdbc2ba7ce961a663a3bb3610a">00778</a> <span class="keywordtype">double</span> <a class="code" href="../../dd/d47/BKE__unit_8h.html#a13a6f3cdbc2ba7ce961a663a3bb3610a">bUnit_GetScaler</a>(<span class="keywordtype">void</span> *usys_pt, <span class="keywordtype">int</span> index)
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d4b/structbUnitCollection.html">bUnitCollection</a> *)usys_pt)-&gt;units[index].scalar;
<a name="l00781"></a>00781 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:55:01 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
