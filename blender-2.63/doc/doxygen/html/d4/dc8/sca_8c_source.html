<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: sca.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">sca.c</div>  </div>
</div>
<div class="contents">
<a href="../../d4/dc8/sca_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2001-2002 by NaN Holding BV.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * The Original Code is: all of this file.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * Contributor(s): none yet.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00026"></a>00026 <span class="comment"> * these all are linked to objects (listbase)</span>
<a name="l00027"></a>00027 <span class="comment"> * all data is &#39;direct data&#39;, not Blender lib data.</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d3e/DNA__controller__types_8h.html">DNA_controller_types.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html">DNA_sensor_types.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html">DNA_actuator_types.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd9/DNA__object__types_8h.html" title="Object is a sort of wrapper for general info.">DNA_object_types.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/dde/BKE__utildefines_8h.html" title="blender format specific macros">BKE_utildefines.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/BKE__global_8h.html">BKE_global.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/db1/BKE__library_8h.html">BKE_library.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/de8/BKE__sca_8h.html">BKE_sca.h</a>&quot;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">/* ******************* SENSORS ************************ */</span>
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="../../d4/dc8/sca_8c.html#a1a015815e53a7da7308cf2aa66a12ac6">00055</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9ba003d53a3bdadf07eceb130f795f46">free_sensor</a>(<a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens)
<a name="l00056"></a>00056 {
<a name="l00057"></a>00057     <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>);
<a name="l00058"></a>00058     <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>);
<a name="l00059"></a>00059     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(sens);
<a name="l00060"></a>00060     
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="../../d4/dc8/sca_8c.html#a66a330da21e9db336ee2424df42dd95f">00063</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9da0ba10eaef0fc1f44d31a9cfd5c2cc">free_sensors</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lb)
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00066"></a>00066     
<a name="l00067"></a>00067     <span class="keywordflow">while</span> ((sens= lb-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>)) {
<a name="l00068"></a>00068         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(lb, sens);
<a name="l00069"></a>00069         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9ba003d53a3bdadf07eceb130f795f46">free_sensor</a>(sens);
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="../../d4/dc8/sca_8c.html#a8f785a5dbba8d472b241511120d1ad69">00073</a> <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#a0a7a4e59fdbb8b9b042841cf581f82b7">copy_sensor</a>(<a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens)
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sensn;
<a name="l00076"></a>00076     
<a name="l00077"></a>00077     sensn= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(sens);
<a name="l00078"></a>00078     sensn-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a> |= <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a95d0be53c0dcd8e5932aade953638613">SENS_NEW</a>;
<a name="l00079"></a>00079     <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>) {
<a name="l00080"></a>00080         sensn-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>);
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>) sensn-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>);
<a name="l00084"></a>00084     
<a name="l00085"></a>00085     <span class="keywordflow">return</span> sensn;
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="../../d4/dc8/sca_8c.html#a6252f8989cd5ec9596cd733274325e04">00088</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9d8c6c58d7bfbcc4fe44773ff1cb66c5">copy_sensors</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbn, <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbo)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens, *sensn;
<a name="l00091"></a>00091     
<a name="l00092"></a>00092     lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>= lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#a46f89850aad8cd09b34b5bdc3aa8f91a">last</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00093"></a>00093     sens= lbo-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00094"></a>00094     <span class="keywordflow">while</span> (sens) {
<a name="l00095"></a>00095         sensn= <a class="code" href="../../dd/de8/BKE__sca_8h.html#a0a7a4e59fdbb8b9b042841cf581f82b7">copy_sensor</a>(sens);
<a name="l00096"></a>00096         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(lbn, sensn);
<a name="l00097"></a>00097         sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099 }
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="../../d4/dc8/sca_8c.html#a4637a26d2f143c8bdf873c3cd0036c16">00101</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a4ac36cceb8cc663fac63436aa02d17fc">init_sensor</a>(<a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens)
<a name="l00102"></a>00102 {
<a name="l00103"></a>00103     <span class="comment">/* also use when sensor changes type */</span>
<a name="l00104"></a>00104     <a class="code" href="../../dd/d92/structbNearSensor.html">bNearSensor</a> *ns;
<a name="l00105"></a>00105     <a class="code" href="../../d4/d24/structbMouseSensor.html">bMouseSensor</a> *ms;
<a name="l00106"></a>00106     <a class="code" href="../../da/db2/structbJoystickSensor.html">bJoystickSensor</a> *js;
<a name="l00107"></a>00107     <a class="code" href="../../d5/dc2/structbRaySensor.html">bRaySensor</a> *rs;
<a name="l00108"></a>00108     
<a name="l00109"></a>00109     <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>);
<a name="l00110"></a>00110     sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00111"></a>00111     sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a3bdbc1cab6699b85590130a9a157d9f0">pulse</a> = 0;
<a name="l00112"></a>00112     
<a name="l00113"></a>00113     <span class="keywordflow">switch</span>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac325f3e6e74414e2539a8324902ca1ce">type</a>) {
<a name="l00114"></a>00114     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a77b83bb50a4e8694b2e0cc9a099eedff">SENS_ALWAYS</a>:
<a name="l00115"></a>00115         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a3bdbc1cab6699b85590130a9a157d9f0">pulse</a> = 0;
<a name="l00116"></a>00116         <span class="keywordflow">break</span>;
<a name="l00117"></a>00117     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a7c4f8e3b1bd33b18ebc913c6663a088a">SENS_TOUCH</a>:
<a name="l00118"></a>00118         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d04/structbTouchSensor.html">bTouchSensor</a>), <span class="stringliteral">&quot;touchsens&quot;</span>);
<a name="l00119"></a>00119         <span class="keywordflow">break</span>;
<a name="l00120"></a>00120     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a427f4a07862a9666e0af5c27b0af6605">SENS_NEAR</a>:
<a name="l00121"></a>00121         ns=sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d92/structbNearSensor.html">bNearSensor</a>), <span class="stringliteral">&quot;nearsens&quot;</span>);
<a name="l00122"></a>00122         ns-&gt;<a class="code" href="../../dd/d92/structbNearSensor.html#a2fb199cc050277c7b1b6563d667554c0">dist</a>= 1.0;
<a name="l00123"></a>00123         ns-&gt;<a class="code" href="../../dd/d92/structbNearSensor.html#a5c8421f1ec4e5e89865c819e9f7d304f">resetdist</a>= 2.0;
<a name="l00124"></a>00124         <span class="keywordflow">break</span>;
<a name="l00125"></a>00125     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#ae40bccbe24a73af641991ecb2b04a76d">SENS_KEYBOARD</a>:
<a name="l00126"></a>00126         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d26/structbKeyboardSensor.html">bKeyboardSensor</a>), <span class="stringliteral">&quot;keysens&quot;</span>);
<a name="l00127"></a>00127         <span class="keywordflow">break</span>;
<a name="l00128"></a>00128     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a69a52944a12b330d112d5e6a27224405">SENS_PROPERTY</a>:
<a name="l00129"></a>00129         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/da1/structbPropertySensor.html">bPropertySensor</a>), <span class="stringliteral">&quot;propsens&quot;</span>);
<a name="l00130"></a>00130         <span class="keywordflow">break</span>;
<a name="l00131"></a>00131     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a8202a6024a568afc54209c0733b079e2">SENS_ARMATURE</a>:
<a name="l00132"></a>00132         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../db/dcb/structbArmatureSensor.html">bArmatureSensor</a>), <span class="stringliteral">&quot;armsens&quot;</span>);
<a name="l00133"></a>00133         <span class="keywordflow">break</span>;
<a name="l00134"></a>00134     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#ac6765d8c832550dd76e5218c7ce14dff">SENS_ACTUATOR</a>:
<a name="l00135"></a>00135         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/db1/structbActuatorSensor.html">bActuatorSensor</a>), <span class="stringliteral">&quot;actsens&quot;</span>);
<a name="l00136"></a>00136         <span class="keywordflow">break</span>;
<a name="l00137"></a>00137     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a2584e2a6621338e40001bffd133632c3">SENS_DELAY</a>:
<a name="l00138"></a>00138         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/dca/structbDelaySensor.html">bDelaySensor</a>), <span class="stringliteral">&quot;delaysens&quot;</span>);
<a name="l00139"></a>00139         <span class="keywordflow">break</span>;
<a name="l00140"></a>00140     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#ab123c332858e33a8799f7306a07e5dd0">SENS_MOUSE</a>:
<a name="l00141"></a>00141         ms=sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d24/structbMouseSensor.html">bMouseSensor</a>), <span class="stringliteral">&quot;mousesens&quot;</span>);
<a name="l00142"></a>00142         ms-&gt;<a class="code" href="../../d4/d24/structbMouseSensor.html#aafb03d65a9a04e609691bce9746fe00d">type</a>= 1; <span class="comment">// LEFTMOUSE workaround because Mouse Sensor types enum starts in 1</span>
<a name="l00143"></a>00143         <span class="keywordflow">break</span>;
<a name="l00144"></a>00144     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a00aa646b78d2304aca726b78bd2d1aa4">SENS_COLLISION</a>:
<a name="l00145"></a>00145         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/dc1/structbCollisionSensor.html">bCollisionSensor</a>), <span class="stringliteral">&quot;colsens&quot;</span>);
<a name="l00146"></a>00146         <span class="keywordflow">break</span>;
<a name="l00147"></a>00147     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a4666337cbfd0e85ec0b32f3e43a671aa">SENS_RADAR</a>:
<a name="l00148"></a>00148         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d9b/structbRadarSensor.html">bRadarSensor</a>), <span class="stringliteral">&quot;radarsens&quot;</span>);
<a name="l00149"></a>00149         <span class="keywordflow">break</span>;
<a name="l00150"></a>00150     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a382dbe972ac8762d427c600197c275d5">SENS_RANDOM</a>:
<a name="l00151"></a>00151         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../de/dfd/structbRandomSensor.html">bRandomSensor</a>), <span class="stringliteral">&quot;randomsens&quot;</span>);
<a name="l00152"></a>00152         <span class="keywordflow">break</span>;
<a name="l00153"></a>00153     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a5ed95c49510097f187cd28aeeddd1491">SENS_RAY</a>:
<a name="l00154"></a>00154         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d5/dc2/structbRaySensor.html">bRaySensor</a>), <span class="stringliteral">&quot;raysens&quot;</span>);
<a name="l00155"></a>00155         rs = sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>;
<a name="l00156"></a>00156         rs-&gt;<a class="code" href="../../d5/dc2/structbRaySensor.html#a8e4885a7ea6e1356dcdf2d0b0299d627">range</a> = 0.01f;
<a name="l00157"></a>00157         <span class="keywordflow">break</span>;
<a name="l00158"></a>00158     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#aedf7477b9ae594464a6164c3b18fb4d6">SENS_MESSAGE</a>:
<a name="l00159"></a>00159         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d60/structbMessageSensor.html">bMessageSensor</a>), <span class="stringliteral">&quot;messagesens&quot;</span>);
<a name="l00160"></a>00160         <span class="keywordflow">break</span>;
<a name="l00161"></a>00161     <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a46d75e870befe13f2f71edbf9c4d4578">SENS_JOYSTICK</a>:
<a name="l00162"></a>00162         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../da/db2/structbJoystickSensor.html">bJoystickSensor</a>), <span class="stringliteral">&quot;joysticksens&quot;</span>);
<a name="l00163"></a>00163         js= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>;
<a name="l00164"></a>00164         js-&gt;<a class="code" href="../../da/db2/structbJoystickSensor.html#a361eb26de917e5404b37db828786f811">hatf</a> = <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a3561b1a4555755c610d3698ddf40c7ff">SENS_JOY_HAT_UP</a>;
<a name="l00165"></a>00165         js-&gt;<a class="code" href="../../da/db2/structbJoystickSensor.html#a59c72111e94ef71cb26fc5acad2c74d6">axis</a> = 1;
<a name="l00166"></a>00166         js-&gt;<a class="code" href="../../da/db2/structbJoystickSensor.html#a0ec85e675166384e73b4cb6f9ba5b4e3">hat</a> = 1;
<a name="l00167"></a>00167         <span class="keywordflow">break</span>;
<a name="l00168"></a>00168     <span class="keywordflow">default</span>:
<a name="l00169"></a>00169         ; <span class="comment">/* this is very severe... I cannot make any memory for this        */</span>
<a name="l00170"></a>00170         <span class="comment">/* logic brick...                                                    */</span>
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="../../d4/dc8/sca_8c.html#a718d05600219f9039c0fafb7094a9e74">00174</a> <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#a417c316b589159cd8f059aeaf4f7f56d">new_sensor</a>(<span class="keywordtype">int</span> type)
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     sens= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../db/d09/structbSensor.html">bSensor</a>), <span class="stringliteral">&quot;Sensor&quot;</span>);
<a name="l00179"></a>00179     sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac325f3e6e74414e2539a8324902ca1ce">type</a>= type;
<a name="l00180"></a>00180     sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a>= <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a09d2f3f4c7d2d5f0fcf13ebc8117209f">SENS_SHOW</a>;
<a name="l00181"></a>00181     
<a name="l00182"></a>00182     <a class="code" href="../../dd/de8/BKE__sca_8h.html#a4ac36cceb8cc663fac63436aa02d17fc">init_sensor</a>(sens);
<a name="l00183"></a>00183     
<a name="l00184"></a>00184     strcpy(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a0f2dba4e692dbffbe64fd2ab5f4d5444">name</a>, <span class="stringliteral">&quot;sensor&quot;</span>);
<a name="l00185"></a>00185 <span class="comment">// XXX  make_unique_prop_names(sens-&gt;name);</span>
<a name="l00186"></a>00186     
<a name="l00187"></a>00187     <span class="keywordflow">return</span> sens;
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/* ******************* CONTROLLERS ************************ */</span>
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="../../d4/dc8/sca_8c.html#a2b9b824c885d6d22cd65d0a9e6256621">00192</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a5dfc55c34fc9bb6e43f2fb34a06bd3cb">unlink_controller</a>(<a class="code" href="../../dd/d82/structbController.html">bController</a> *cont)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00195"></a>00195     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00196"></a>00196     
<a name="l00197"></a>00197     <span class="comment">/* check for controller pointers in sensors */</span>
<a name="l00198"></a>00198     ob= <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object.first;
<a name="l00199"></a>00199     <span class="keywordflow">while</span> (ob) {
<a name="l00200"></a>00200         sens= ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00201"></a>00201         <span class="keywordflow">while</span> (sens) {
<a name="l00202"></a>00202             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a224c81c1d0c95d3b792d440c23e12e07">unlink_logicbricks</a>((<span class="keywordtype">void</span> **)&amp;cont, (<span class="keywordtype">void</span> ***)&amp;(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>), &amp;sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#afa554e662911829345d321e1719bcaeb">totlinks</a>);
<a name="l00203"></a>00203             sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00204"></a>00204         }
<a name="l00205"></a>00205         ob= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>;
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="../../d4/dc8/sca_8c.html#a7927e7a5ba0cf950efa1e72df9bf061a">00209</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac898d6a27dae6861dfe111b34e25dba5">unlink_controllers</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lb)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00212"></a>00212     
<a name="l00213"></a>00213     <span class="keywordflow">for</span> (cont= lb-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; cont; cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>)
<a name="l00214"></a>00214         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a5dfc55c34fc9bb6e43f2fb34a06bd3cb">unlink_controller</a>(cont);    
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="../../d4/dc8/sca_8c.html#a807865d0238a5c36fed23d9cc79650ae">00217</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a1a67789e307e076842466e03de1c12c9">free_controller</a>(<a class="code" href="../../dd/d82/structbController.html">bController</a> *cont)
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">/* the controller itself */</span>
<a name="l00222"></a>00222     <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>);
<a name="l00223"></a>00223     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(cont);
<a name="l00224"></a>00224     
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="../../d4/dc8/sca_8c.html#af060ea6bfab442ed7e8886b12f7b6851">00227</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#adef0684ec8735f2c5494a2a531df2fdb">free_controllers</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lb)
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00230"></a>00230     
<a name="l00231"></a>00231     <span class="keywordflow">while</span> ((cont= lb-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>)) {
<a name="l00232"></a>00232         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(lb, cont);
<a name="l00233"></a>00233         <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ade0458a32c1ed86d466773921d47effd">slinks</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ade0458a32c1ed86d466773921d47effd">slinks</a>);
<a name="l00234"></a>00234         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a1a67789e307e076842466e03de1c12c9">free_controller</a>(cont);
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="../../d4/dc8/sca_8c.html#aa55ce375db4133499a10eb9267505b9e">00238</a> <a class="code" href="../../dd/d82/structbController.html">bController</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#af34521685416615c1228bf22eb7e50d8">copy_controller</a>(<a class="code" href="../../dd/d82/structbController.html">bController</a> *cont)
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240     <a class="code" href="../../dd/d82/structbController.html">bController</a> *contn;
<a name="l00241"></a>00241     
<a name="l00242"></a>00242     cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a7e2140acf718f5435fc12cb00d8f2004">mynew</a>=contn= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(cont);
<a name="l00243"></a>00243     contn-&gt;<a class="code" href="../../dd/d82/structbController.html#a8c1d27e5f4de158a05339eee4f43a4d3">flag</a> |= <a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#a8d3b0ad265ac9fd6250060eb51163154">CONT_NEW</a>;
<a name="l00244"></a>00244     <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>) {
<a name="l00245"></a>00245         contn-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>);
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>) contn-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>);
<a name="l00249"></a>00249     contn-&gt;<a class="code" href="../../dd/d82/structbController.html#ade0458a32c1ed86d466773921d47effd">slinks</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00250"></a>00250     contn-&gt;<a class="code" href="../../dd/d82/structbController.html#a8ff4d03794fff7a2b4541b52161c89e1">totslinks</a>= 0;
<a name="l00251"></a>00251     
<a name="l00252"></a>00252     <span class="keywordflow">return</span> contn;
<a name="l00253"></a>00253 }
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="../../d4/dc8/sca_8c.html#aa7fb7b5a8235af80705e57a2ef97b5d0">00255</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a59c062adc4fd81c4e87d338de5115499">copy_controllers</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbn, <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbo)
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont, *contn;
<a name="l00258"></a>00258     
<a name="l00259"></a>00259     lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>= lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#a46f89850aad8cd09b34b5bdc3aa8f91a">last</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00260"></a>00260     cont= lbo-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00261"></a>00261     <span class="keywordflow">while</span> (cont) {
<a name="l00262"></a>00262         contn= <a class="code" href="../../dd/de8/BKE__sca_8h.html#af34521685416615c1228bf22eb7e50d8">copy_controller</a>(cont);
<a name="l00263"></a>00263         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(lbn, contn);
<a name="l00264"></a>00264         cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="../../d4/dc8/sca_8c.html#a454f9228e8a4952d19c0d00d42c5442e">00268</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a255100cedb914c7526c73ccd2c2443af">init_controller</a>(<a class="code" href="../../dd/d82/structbController.html">bController</a> *cont)
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270     <span class="comment">/* also use when controller changes type, leave actuators... */</span>
<a name="l00271"></a>00271     
<a name="l00272"></a>00272     <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>);
<a name="l00273"></a>00273     cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00274"></a>00274     
<a name="l00275"></a>00275     <span class="keywordflow">switch</span>(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a48474985990dd426df0fa0816b06d3b2">type</a>) {
<a name="l00276"></a>00276     <span class="keywordflow">case</span> <a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#a095f4216092a99cc5977595f3592dec8">CONT_EXPRESSION</a>:
<a name="l00277"></a>00277         cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d43/structbExpressionCont.html">bExpressionCont</a>), <span class="stringliteral">&quot;expcont&quot;</span>);
<a name="l00278"></a>00278         <span class="keywordflow">break</span>;
<a name="l00279"></a>00279     <span class="keywordflow">case</span> <a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#addf43c3897e74c7dc474df500fb02898">CONT_PYTHON</a>:
<a name="l00280"></a>00280         cont-&gt;<a class="code" href="../../dd/d82/structbController.html#af6c30d2aedadc64bc687eb503a44b800">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d8/d6d/structbPythonCont.html">bPythonCont</a>), <span class="stringliteral">&quot;pycont&quot;</span>);
<a name="l00281"></a>00281         <span class="keywordflow">break</span>;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00285"></a><a class="code" href="../../d4/dc8/sca_8c.html#aed75ebdb2651d22db68075e472789ed7">00285</a> <a class="code" href="../../dd/d82/structbController.html">bController</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#a835428cb5ab04dc87fa1175eaa6cf77a">new_controller</a>(<span class="keywordtype">int</span> type)
<a name="l00286"></a>00286 {
<a name="l00287"></a>00287     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     cont= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dd/d82/structbController.html">bController</a>), <span class="stringliteral">&quot;Controller&quot;</span>);
<a name="l00290"></a>00290     cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a48474985990dd426df0fa0816b06d3b2">type</a>= type;
<a name="l00291"></a>00291     cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8c1d27e5f4de158a05339eee4f43a4d3">flag</a>= <a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#a9c51daf0a953b37ca6a977d43e46bcfb">CONT_SHOW</a>;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <a class="code" href="../../dd/de8/BKE__sca_8h.html#a255100cedb914c7526c73ccd2c2443af">init_controller</a>(cont);
<a name="l00294"></a>00294     
<a name="l00295"></a>00295     strcpy(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ae9c7bee82178408ddc13a31f7a83512f">name</a>, <span class="stringliteral">&quot;cont&quot;</span>);
<a name="l00296"></a>00296 <span class="comment">// XXX  make_unique_prop_names(cont-&gt;name);</span>
<a name="l00297"></a>00297     
<a name="l00298"></a>00298     <span class="keywordflow">return</span> cont;
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 <span class="comment">/* ******************* ACTUATORS ************************ */</span>
<a name="l00302"></a>00302 
<a name="l00303"></a><a class="code" href="../../d4/dc8/sca_8c.html#a2cabe24a9dcba0781c6c0fcfe8546117">00303</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a292ee24c58612ecc5a9094c1113cde25">unlink_actuator</a>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act)
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00306"></a>00306     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00307"></a>00307     
<a name="l00308"></a>00308     <span class="comment">/* check for actuator pointers in controllers */</span>
<a name="l00309"></a>00309     ob= <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object.first;
<a name="l00310"></a>00310     <span class="keywordflow">while</span> (ob) {
<a name="l00311"></a>00311         cont= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00312"></a>00312         <span class="keywordflow">while</span> (cont) {
<a name="l00313"></a>00313             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a224c81c1d0c95d3b792d440c23e12e07">unlink_logicbricks</a>((<span class="keywordtype">void</span> **)&amp;act, (<span class="keywordtype">void</span> ***)&amp;(cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>), &amp;cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ac94b351dbb56572b804b3abf08d568f1">totlinks</a>);
<a name="l00314"></a>00314             cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316         ob= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>;
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318 }
<a name="l00319"></a>00319 
<a name="l00320"></a><a class="code" href="../../d4/dc8/sca_8c.html#a4fa7a68d926c5c040a6096cb2fa06da8">00320</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a45b6959bf13b90403d898be456245994">unlink_actuators</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lb)
<a name="l00321"></a>00321 {
<a name="l00322"></a>00322     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00323"></a>00323     
<a name="l00324"></a>00324     <span class="keywordflow">for</span> (act= lb-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; act; act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>)
<a name="l00325"></a>00325         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a292ee24c58612ecc5a9094c1113cde25">unlink_actuator</a>(act);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="../../d4/dc8/sca_8c.html#a41fab348f6d30b1360c1dd6f8fafe882">00328</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a96daa84673565b5d97abdd092959f819">free_actuator</a>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act)
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330     <a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a> *sa;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>) {
<a name="l00333"></a>00333         <span class="keywordflow">switch</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>) {
<a name="l00334"></a>00334         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a8886ccc844380010702d2a9cbb991ee3">ACT_SOUND</a>:
<a name="l00335"></a>00335             sa = (<a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a> *) act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00336"></a>00336             <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> (sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#a4d73983f46d44a780d3a82a310c327ca">sound</a>)
<a name="l00337"></a>00337                 <a class="code" href="../../d8/db1/BKE__library_8h.html#a2caead3c3bda9441d1a4affbbe0d328b">id_us_min</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *) sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#a4d73983f46d44a780d3a82a310c327ca">sound</a>);
<a name="l00338"></a>00338             <span class="keywordflow">break</span>;
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>);
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(act);
<a name="l00344"></a>00344 }
<a name="l00345"></a>00345 
<a name="l00346"></a><a class="code" href="../../d4/dc8/sca_8c.html#ae457234982dac7153cf5121ff71d1e7e">00346</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a87d1ec59ffaffa8ac63caf7fbf97acce">free_actuators</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lb)
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00349"></a>00349     
<a name="l00350"></a>00350     <span class="keywordflow">while</span> ((act= lb-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>)) {
<a name="l00351"></a>00351         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(lb, act);
<a name="l00352"></a>00352         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a96daa84673565b5d97abdd092959f819">free_actuator</a>(act);
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 }
<a name="l00355"></a>00355 
<a name="l00356"></a><a class="code" href="../../d4/dc8/sca_8c.html#a7627052f63b724edbdbc411301379e06">00356</a> <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#aa1d5a5d31aac7a91c2456761d455d6fc">copy_actuator</a>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act)
<a name="l00357"></a>00357 {
<a name="l00358"></a>00358     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *actn;
<a name="l00359"></a>00359     <a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a> *sa;
<a name="l00360"></a>00360     
<a name="l00361"></a>00361     act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a24a057b655fbe1640f429283b1729ffc">mynew</a>=actn= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(act);
<a name="l00362"></a>00362     actn-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a> |= <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#acee290c5dbeb4e45464c174664297ab2">ACT_NEW</a>;
<a name="l00363"></a>00363     <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>) {
<a name="l00364"></a>00364         actn-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>);
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366     
<a name="l00367"></a>00367     <span class="keywordflow">switch</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>) {
<a name="l00368"></a>00368         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a8886ccc844380010702d2a9cbb991ee3">ACT_SOUND</a>:
<a name="l00369"></a>00369             sa= (<a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a> *)act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00370"></a>00370             <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> (sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#a4d73983f46d44a780d3a82a310c327ca">sound</a>)
<a name="l00371"></a>00371                 <a class="code" href="../../d8/db1/BKE__library_8h.html#a967d1ceef29b2612ef6e03194c512ad6">id_us_plus</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *) sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#a4d73983f46d44a780d3a82a310c327ca">sound</a>);
<a name="l00372"></a>00372             <span class="keywordflow">break</span>;
<a name="l00373"></a>00373     }
<a name="l00374"></a>00374     <span class="keywordflow">return</span> actn;
<a name="l00375"></a>00375 }
<a name="l00376"></a>00376 
<a name="l00377"></a><a class="code" href="../../d4/dc8/sca_8c.html#a711ecc652a400dc61ce7852e5a0bd402">00377</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a98f9830489678544d33ee07fe97acb46">copy_actuators</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbn, <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *lbo)
<a name="l00378"></a>00378 {
<a name="l00379"></a>00379     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act, *actn;
<a name="l00380"></a>00380     
<a name="l00381"></a>00381     lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>= lbn-&gt;<a class="code" href="../../d6/d85/structListBase.html#a46f89850aad8cd09b34b5bdc3aa8f91a">last</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00382"></a>00382     act= lbo-&gt;<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00383"></a>00383     <span class="keywordflow">while</span> (act) {
<a name="l00384"></a>00384         actn= <a class="code" href="../../dd/de8/BKE__sca_8h.html#aa1d5a5d31aac7a91c2456761d455d6fc">copy_actuator</a>(act);
<a name="l00385"></a>00385         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(lbn, actn);
<a name="l00386"></a>00386         act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>;
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 }
<a name="l00389"></a>00389 
<a name="l00390"></a><a class="code" href="../../d4/dc8/sca_8c.html#a9ce9993dd7ac5ec21e7dd2fc61d9a5c4">00390</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac597de50da403f2cc1d568d35a3b9abb">init_actuator</a>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act)
<a name="l00391"></a>00391 {
<a name="l00392"></a>00392     <span class="comment">/* also use when actuator changes type */</span>
<a name="l00393"></a>00393     <a class="code" href="../../d3/d76/structbCameraActuator.html">bCameraActuator</a> *ca;
<a name="l00394"></a>00394     <a class="code" href="../../d0/d35/structbObjectActuator.html">bObjectActuator</a> *oa;
<a name="l00395"></a>00395     <a class="code" href="../../dc/d87/structbRandomActuator.html">bRandomActuator</a> *ra;
<a name="l00396"></a>00396     <a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a> *sa;
<a name="l00397"></a>00397     <a class="code" href="../../dc/dbe/structbSteeringActuator.html">bSteeringActuator</a> *sta;
<a name="l00398"></a>00398     <a class="code" href="../../db/d53/structbArmatureActuator.html">bArmatureActuator</a> *arma;
<a name="l00399"></a>00399     
<a name="l00400"></a>00400     <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>);
<a name="l00401"></a>00401     act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00402"></a>00402     
<a name="l00403"></a>00403     <span class="keywordflow">switch</span>(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>) {
<a name="l00404"></a>00404     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a64df7df8bf7e040450f186a4ac9c3753">ACT_ACTION</a>:
<a name="l00405"></a>00405     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af3367e7ebe5e98e65421b9a957c6ccb8">ACT_SHAPEACTION</a>:
<a name="l00406"></a>00406         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d15/structbActionActuator.html">bActionActuator</a>), <span class="stringliteral">&quot;actionact&quot;</span>);
<a name="l00407"></a>00407         <span class="keywordflow">break</span>;
<a name="l00408"></a>00408     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a8886ccc844380010702d2a9cbb991ee3">ACT_SOUND</a>:
<a name="l00409"></a>00409         sa = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/da3/structbSoundActuator.html">bSoundActuator</a>), <span class="stringliteral">&quot;soundact&quot;</span>);
<a name="l00410"></a>00410         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#adbd7f3a297549818be9239b1530650d0">volume</a> = 1.0f;
<a name="l00411"></a>00411         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#acc49f3d0252578f1b55733998d9eb6ad">rolloff_factor</a> = 1.0f;
<a name="l00412"></a>00412         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#aee38aca48e841c716b0de6a61e9b0408">reference_distance</a> = 1.0f;
<a name="l00413"></a>00413         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#ac93039b4596f60a72306a05fcb7d3328">max_gain</a> = 1.0f;
<a name="l00414"></a>00414         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#a64b8bcb6e3f60cfee59703780903290e">cone_inner_angle</a> = 360.0f;
<a name="l00415"></a>00415         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#a25404b7ac91920499b61867845c93768">cone_outer_angle</a> = 360.0f;
<a name="l00416"></a>00416         sa-&gt;<a class="code" href="../../d1/da3/structbSoundActuator.html#ad5af94cd60a90c8c9d55c1682c943dfd">sound3D</a>.<a class="code" href="../../d4/ddb/structSound3D.html#a028efb0927a03661c7647881c9b58c7e">max_distance</a> = <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>;
<a name="l00417"></a>00417         <span class="keywordflow">break</span>;
<a name="l00418"></a>00418     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ab0aeb55ae4abd7843939f507c688af75">ACT_OBJECT</a>:
<a name="l00419"></a>00419         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d35/structbObjectActuator.html">bObjectActuator</a>), <span class="stringliteral">&quot;objectact&quot;</span>);
<a name="l00420"></a>00420         oa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00421"></a>00421         oa-&gt;<a class="code" href="../../d0/d35/structbObjectActuator.html#a9fb09fe389a9461bb9aef79a8850da06">flag</a>= 15;
<a name="l00422"></a>00422         <span class="keywordflow">break</span>;
<a name="l00423"></a>00423     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a548a3bb674b346430996bd2431126833">ACT_IPO</a>:
<a name="l00424"></a>00424         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d86/structbIpoActuator.html">bIpoActuator</a>), <span class="stringliteral">&quot;ipoact&quot;</span>);
<a name="l00425"></a>00425         <span class="keywordflow">break</span>;
<a name="l00426"></a>00426     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a3adf808ddc137a603bc4d0d92b31882a">ACT_PROPERTY</a>:
<a name="l00427"></a>00427         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d13/structbPropertyActuator.html">bPropertyActuator</a>), <span class="stringliteral">&quot;propact&quot;</span>);
<a name="l00428"></a>00428         <span class="keywordflow">break</span>;
<a name="l00429"></a>00429     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ad0a80e945d2f9f52b83f903c6f0a8bcd">ACT_CAMERA</a>:
<a name="l00430"></a>00430         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d3/d76/structbCameraActuator.html">bCameraActuator</a>), <span class="stringliteral">&quot;camact&quot;</span>);
<a name="l00431"></a>00431         ca = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00432"></a>00432         ca-&gt;<a class="code" href="../../d3/d76/structbCameraActuator.html#a2017686b6e0c0a6fdc040669d0288747">axis</a> = <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a3a0ed013002b178c9387599704a33991">OB_POSX</a>;
<a name="l00433"></a>00433         ca-&gt;<a class="code" href="../../d3/d76/structbCameraActuator.html#ae48b4bcec0a8f915245cea4b90960c9e">damping</a> = 1.0/32.0;
<a name="l00434"></a>00434         <span class="keywordflow">break</span>;
<a name="l00435"></a>00435     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a0fc0c7354c3624cb0a4b65934480a969">ACT_EDIT_OBJECT</a>:
<a name="l00436"></a>00436         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d5c/structbEditObjectActuator.html">bEditObjectActuator</a>), <span class="stringliteral">&quot;editobact&quot;</span>);
<a name="l00437"></a>00437         <span class="keywordflow">break</span>;
<a name="l00438"></a>00438     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af4219f856735c8b17e378aa709b9a180">ACT_CONSTRAINT</a>:
<a name="l00439"></a>00439         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../de/d82/structbConstraintActuator.html">bConstraintActuator</a>), <span class="stringliteral">&quot;cons act&quot;</span>);
<a name="l00440"></a>00440         <span class="keywordflow">break</span>;
<a name="l00441"></a>00441     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af24723332b675766ad1d11f031ac6cd4">ACT_SCENE</a>:
<a name="l00442"></a>00442         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d8/d6b/structbSceneActuator.html">bSceneActuator</a>), <span class="stringliteral">&quot;scene act&quot;</span>);
<a name="l00443"></a>00443         <span class="keywordflow">break</span>;
<a name="l00444"></a>00444     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a65e355c94eb65ce0605cd1725be6f069">ACT_GROUP</a>:
<a name="l00445"></a>00445         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../da/dc4/structbGroupActuator.html">bGroupActuator</a>), <span class="stringliteral">&quot;group act&quot;</span>);
<a name="l00446"></a>00446         <span class="keywordflow">break</span>;
<a name="l00447"></a>00447     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#afa534426fa168b7b34a19736feb1f963">ACT_RANDOM</a>:
<a name="l00448"></a>00448         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d87/structbRandomActuator.html">bRandomActuator</a>), <span class="stringliteral">&quot;random act&quot;</span>);
<a name="l00449"></a>00449         ra=act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00450"></a>00450         ra-&gt;<a class="code" href="../../dc/d87/structbRandomActuator.html#aae7dcf22b7e19ae09b30f179033e84ed">float_arg_1</a> = 0.1f;
<a name="l00451"></a>00451         <span class="keywordflow">break</span>;
<a name="l00452"></a>00452     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ae4015d5dd2b07f1caedc5039e7dd3753">ACT_MESSAGE</a>:
<a name="l00453"></a>00453         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../df/d12/structbMessageActuator.html">bMessageActuator</a>), <span class="stringliteral">&quot;message act&quot;</span>);
<a name="l00454"></a>00454         <span class="keywordflow">break</span>;
<a name="l00455"></a>00455     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#adb174945b18d2f92217fcec653650608">ACT_GAME</a>:
<a name="l00456"></a>00456         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d9d/structbGameActuator.html">bGameActuator</a>), <span class="stringliteral">&quot;game act&quot;</span>);
<a name="l00457"></a>00457         <span class="keywordflow">break</span>;
<a name="l00458"></a>00458     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a73675ab4080c6848799f85d363aa8278">ACT_VISIBILITY</a>:
<a name="l00459"></a>00459         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d5/d18/structbVisibilityActuator.html">bVisibilityActuator</a>), <span class="stringliteral">&quot;visibility act&quot;</span>);
<a name="l00460"></a>00460         <span class="keywordflow">break</span>;
<a name="l00461"></a>00461     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a6b9525822dbf86e1fbd601a18a27dcfb">ACT_2DFILTER</a>:
<a name="l00462"></a>00462         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>( <a class="code" href="../../d1/dd9/structbTwoDFilterActuator.html">bTwoDFilterActuator</a> ), <span class="stringliteral">&quot;2d filter act&quot;</span>);
<a name="l00463"></a>00463         <span class="keywordflow">break</span>;
<a name="l00464"></a>00464     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aff16c55b5a12651b7c6902a240530c24">ACT_PARENT</a>:
<a name="l00465"></a>00465         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>( <a class="code" href="../../de/d83/structbParentActuator.html">bParentActuator</a> ), <span class="stringliteral">&quot;parent act&quot;</span>);
<a name="l00466"></a>00466         <span class="keywordflow">break</span>;
<a name="l00467"></a>00467     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a0dc1d9f49f038a2f6dade9ba8a8e34ba">ACT_STATE</a>:
<a name="l00468"></a>00468         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>( <a class="code" href="../../db/dab/structbStateActuator.html">bStateActuator</a> ), <span class="stringliteral">&quot;state act&quot;</span>);
<a name="l00469"></a>00469         <span class="keywordflow">break</span>;
<a name="l00470"></a>00470     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aee9a04f8f07032f50c4743a6499405e7">ACT_ARMATURE</a>:
<a name="l00471"></a>00471         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>( <a class="code" href="../../db/d53/structbArmatureActuator.html">bArmatureActuator</a> ), <span class="stringliteral">&quot;armature act&quot;</span>);
<a name="l00472"></a>00472         arma = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00473"></a>00473         arma-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#a33f4e979d5f258785407fcd833859b42">influence</a> = 1.f;
<a name="l00474"></a>00474         <span class="keywordflow">break</span>;
<a name="l00475"></a>00475     <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a68b54400142bd60b87940076e4d92471">ACT_STEERING</a>:
<a name="l00476"></a>00476         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>( <a class="code" href="../../dc/dbe/structbSteeringActuator.html">bSteeringActuator</a>), <span class="stringliteral">&quot;steering act&quot;</span>);
<a name="l00477"></a>00477         sta = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00478"></a>00478         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#ad9864b40fd890cf22d388b3f24b019fb">acceleration</a> = 3.f;
<a name="l00479"></a>00479         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#a1d2d2d40ca3a8a1fb9dd16074113a2e1">turnspeed</a> = 120.f;
<a name="l00480"></a>00480         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#a18b23c51df490631c4173572ec2d11aa">dist</a> = 1.f;
<a name="l00481"></a>00481         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#a83662fa35f108c751db07c1985173eed">velocity</a>= 3.f;
<a name="l00482"></a>00482         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#a9af08bbb7891820845dffcdd248ea09f">flag</a> = <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af905884699d959d88ef2ce063fade29c">ACT_STEERING_AUTOMATICFACING</a>;
<a name="l00483"></a>00483         sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#ace2105076960660d1c2af9e2b68210f2">facingaxis</a> = 1;
<a name="l00484"></a>00484         <span class="keywordflow">break</span>;
<a name="l00485"></a>00485     <span class="keywordflow">default</span>:
<a name="l00486"></a>00486         ; <span class="comment">/* this is very severe... I cannot make any memory for this        */</span>
<a name="l00487"></a>00487         <span class="comment">/* logic brick...                                                    */</span>
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 
<a name="l00491"></a><a class="code" href="../../d4/dc8/sca_8c.html#a4fdb030e4de85366b03dc79d3f646782">00491</a> <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *<a class="code" href="../../dd/de8/BKE__sca_8h.html#a0086733ceda7061a330e40fd12d68883">new_actuator</a>(<span class="keywordtype">int</span> type)
<a name="l00492"></a>00492 {
<a name="l00493"></a>00493     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     act= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a>), <span class="stringliteral">&quot;Actuator&quot;</span>);
<a name="l00496"></a>00496     act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>= type;
<a name="l00497"></a>00497     act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a>= <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af290c048ff3901802712e7988e04c504">ACT_SHOW</a>;
<a name="l00498"></a>00498     
<a name="l00499"></a>00499     <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac597de50da403f2cc1d568d35a3b9abb">init_actuator</a>(act);
<a name="l00500"></a>00500     
<a name="l00501"></a>00501     strcpy(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae607df0accd08c1136438a06dd2eb92e">name</a>, <span class="stringliteral">&quot;act&quot;</span>);
<a name="l00502"></a>00502 <span class="comment">// XXX  make_unique_prop_names(act-&gt;name);</span>
<a name="l00503"></a>00503     
<a name="l00504"></a>00504     <span class="keywordflow">return</span> act;
<a name="l00505"></a>00505 }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 <span class="comment">/* ******************** GENERAL ******************* */</span>
<a name="l00508"></a><a class="code" href="../../d4/dc8/sca_8c.html#a1fe233c364b628d68c98423517436234">00508</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#aa0b67a9ebe3379d4b145d8a27c8763b4">clear_sca_new_poins_ob</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00509"></a>00509 {
<a name="l00510"></a>00510     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00511"></a>00511     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00512"></a>00512     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00513"></a>00513     
<a name="l00514"></a>00514     sens= ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00515"></a>00515     <span class="keywordflow">while</span> (sens) {
<a name="l00516"></a>00516         sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a> &amp;= ~<a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a95d0be53c0dcd8e5932aade953638613">SENS_NEW</a>;
<a name="l00517"></a>00517         sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519     cont= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00520"></a>00520     <span class="keywordflow">while</span> (cont) {
<a name="l00521"></a>00521         cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a7e2140acf718f5435fc12cb00d8f2004">mynew</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00522"></a>00522         cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8c1d27e5f4de158a05339eee4f43a4d3">flag</a> &amp;= ~<a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#a8d3b0ad265ac9fd6250060eb51163154">CONT_NEW</a>;
<a name="l00523"></a>00523         cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00524"></a>00524     }
<a name="l00525"></a>00525     act= ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00526"></a>00526     <span class="keywordflow">while</span> (act) {
<a name="l00527"></a>00527         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a24a057b655fbe1640f429283b1729ffc">mynew</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00528"></a>00528         act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a> &amp;= ~<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#acee290c5dbeb4e45464c174664297ab2">ACT_NEW</a>;
<a name="l00529"></a>00529         act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 }
<a name="l00532"></a>00532 
<a name="l00533"></a><a class="code" href="../../d4/dc8/sca_8c.html#ac8251847e28914f67c84cd5d058b057a">00533</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac8251847e28914f67c84cd5d058b057a">clear_sca_new_poins</a>(<span class="keywordtype">void</span>)
<a name="l00534"></a>00534 {
<a name="l00535"></a>00535     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00536"></a>00536     
<a name="l00537"></a>00537     ob= <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object.first;
<a name="l00538"></a>00538     <span class="keywordflow">while</span> (ob) {
<a name="l00539"></a>00539         <a class="code" href="../../dd/de8/BKE__sca_8h.html#aa0b67a9ebe3379d4b145d8a27c8763b4">clear_sca_new_poins_ob</a>(ob);
<a name="l00540"></a>00540         ob= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>;    
<a name="l00541"></a>00541     }
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="../../d4/dc8/sca_8c.html#addcc35a542cb85b1dfbc82592c82caef">00544</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a29b7641c21f294b91158ea8082004c84">set_sca_new_poins_ob</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00547"></a>00547     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont;
<a name="l00548"></a>00548     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00549"></a>00549     <span class="keywordtype">int</span> a;
<a name="l00550"></a>00550     
<a name="l00551"></a>00551     sens= ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00552"></a>00552     <span class="keywordflow">while</span> (sens) {
<a name="l00553"></a>00553         <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a> &amp; <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a95d0be53c0dcd8e5932aade953638613">SENS_NEW</a>) {
<a name="l00554"></a>00554             <span class="keywordflow">for</span> (a=0; a&lt;sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#afa554e662911829345d321e1719bcaeb">totlinks</a>; a++) {
<a name="l00555"></a>00555                 <span class="keywordflow">if</span> (sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>[a] &amp;&amp; sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>[a]-&gt;<a class="code" href="../../dd/d82/structbController.html#a7e2140acf718f5435fc12cb00d8f2004">mynew</a>)
<a name="l00556"></a>00556                     sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>[a]= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a2ddf48bee4a768a2232ed032f5c2226a">links</a>[a]-&gt;<a class="code" href="../../dd/d82/structbController.html#a7e2140acf718f5435fc12cb00d8f2004">mynew</a>;
<a name="l00557"></a>00557             }
<a name="l00558"></a>00558         }
<a name="l00559"></a>00559         sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     cont= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00563"></a>00563     <span class="keywordflow">while</span> (cont) {
<a name="l00564"></a>00564         <span class="keywordflow">if</span> (cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8c1d27e5f4de158a05339eee4f43a4d3">flag</a> &amp; <a class="code" href="../../d0/d3e/DNA__controller__types_8h.html#a8d3b0ad265ac9fd6250060eb51163154">CONT_NEW</a>) {
<a name="l00565"></a>00565             <span class="keywordflow">for</span> (a=0; a&lt;cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ac94b351dbb56572b804b3abf08d568f1">totlinks</a>; a++) {
<a name="l00566"></a>00566                 <span class="keywordflow">if</span> ( cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>[a] &amp;&amp; cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>[a]-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a24a057b655fbe1640f429283b1729ffc">mynew</a>)
<a name="l00567"></a>00567                     cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>[a]= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a8547b3b1dc994585185196bdaaf063b7">links</a>[a]-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a24a057b655fbe1640f429283b1729ffc">mynew</a>;
<a name="l00568"></a>00568             }
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570         cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572     
<a name="l00573"></a>00573     
<a name="l00574"></a>00574     act= ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00575"></a>00575     <span class="keywordflow">while</span> (act) {
<a name="l00576"></a>00576         <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a> &amp; <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#acee290c5dbeb4e45464c174664297ab2">ACT_NEW</a>) {
<a name="l00577"></a>00577             <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a0fc0c7354c3624cb0a4b65934480a969">ACT_EDIT_OBJECT</a>) {
<a name="l00578"></a>00578                 <a class="code" href="../../d4/d5c/structbEditObjectActuator.html">bEditObjectActuator</a> *eoa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00579"></a>00579                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(eoa-&gt;<a class="code" href="../../d4/d5c/structbEditObjectActuator.html#a92767cd10e4f3f3564b295d418714088">ob</a>);
<a name="l00580"></a>00580             }
<a name="l00581"></a>00581             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af24723332b675766ad1d11f031ac6cd4">ACT_SCENE</a>) {
<a name="l00582"></a>00582                 <a class="code" href="../../d8/d6b/structbSceneActuator.html">bSceneActuator</a> *sca= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00583"></a>00583                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(sca-&gt;<a class="code" href="../../d8/d6b/structbSceneActuator.html#af681370aee48700269f4b544b4d23484">camera</a>);
<a name="l00584"></a>00584             }
<a name="l00585"></a>00585             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ad0a80e945d2f9f52b83f903c6f0a8bcd">ACT_CAMERA</a>) {
<a name="l00586"></a>00586                 <a class="code" href="../../d3/d76/structbCameraActuator.html">bCameraActuator</a> *ca= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00587"></a>00587                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(ca-&gt;<a class="code" href="../../d3/d76/structbCameraActuator.html#a24ae0fc57a2890a5d6c062bb9c038fbd">ob</a>);
<a name="l00588"></a>00588             }
<a name="l00589"></a>00589             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ab0aeb55ae4abd7843939f507c688af75">ACT_OBJECT</a>) {
<a name="l00590"></a>00590                 <a class="code" href="../../d0/d35/structbObjectActuator.html">bObjectActuator</a> *oa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00591"></a>00591                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(oa-&gt;<a class="code" href="../../d0/d35/structbObjectActuator.html#a9cda7111b23b488749f0c8fa2933446e">reference</a>);
<a name="l00592"></a>00592             }
<a name="l00593"></a>00593             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ae4015d5dd2b07f1caedc5039e7dd3753">ACT_MESSAGE</a>) {
<a name="l00594"></a>00594                 <a class="code" href="../../df/d12/structbMessageActuator.html">bMessageActuator</a> *ma= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00595"></a>00595                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(ma-&gt;<a class="code" href="../../df/d12/structbMessageActuator.html#a132d37e6ba7d93be7eb4d5816a04ee41">toObject</a>);
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aff16c55b5a12651b7c6902a240530c24">ACT_PARENT</a>) {
<a name="l00598"></a>00598                 <a class="code" href="../../de/d83/structbParentActuator.html">bParentActuator</a> *para = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00599"></a>00599                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(para-&gt;<a class="code" href="../../de/d83/structbParentActuator.html#a3aca4b9991a861728d6a1cac3ef6ccea">ob</a>);
<a name="l00600"></a>00600             }
<a name="l00601"></a>00601             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aee9a04f8f07032f50c4743a6499405e7">ACT_ARMATURE</a>) {
<a name="l00602"></a>00602                 <a class="code" href="../../db/d53/structbArmatureActuator.html">bArmatureActuator</a> *aa = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00603"></a>00603                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#af047ecce453fd3fbef5b0b512539af34">target</a>);
<a name="l00604"></a>00604                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#a888253390affbd36ba9574c2be7ace25">subtarget</a>);
<a name="l00605"></a>00605             }
<a name="l00606"></a>00606             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a3adf808ddc137a603bc4d0d92b31882a">ACT_PROPERTY</a>) {
<a name="l00607"></a>00607                 <a class="code" href="../../dc/d13/structbPropertyActuator.html">bPropertyActuator</a> *pa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00608"></a>00608                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(pa-&gt;<a class="code" href="../../dc/d13/structbPropertyActuator.html#aeee0b9339f26d6bfcd93549cd6cac816">ob</a>);
<a name="l00609"></a>00609             }
<a name="l00610"></a>00610             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>==<a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a68b54400142bd60b87940076e4d92471">ACT_STEERING</a>) {
<a name="l00611"></a>00611                 <a class="code" href="../../dc/dbe/structbSteeringActuator.html">bSteeringActuator</a> *sta = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00612"></a>00612                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#aa72e26ca2f5e0aa5806c211e5d15ea35">navmesh</a>);
<a name="l00613"></a>00613                 <a class="code" href="../../d3/dde/BKE__utildefines_8h.html#ab1eef3c4c614c6b8c9d873721bec217e">ID_NEW</a>(sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#ab3d481511001e61afb4eda90ce4edb49">target</a>);
<a name="l00614"></a>00614             }
<a name="l00615"></a>00615         }
<a name="l00616"></a>00616         act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>;
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618 }
<a name="l00619"></a>00619 
<a name="l00620"></a>00620 
<a name="l00621"></a><a class="code" href="../../d4/dc8/sca_8c.html#afd48f9d960e8bc0d7c139f2e223c91fd">00621</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#afd48f9d960e8bc0d7c139f2e223c91fd">set_sca_new_poins</a>(<span class="keywordtype">void</span>)
<a name="l00622"></a>00622 {
<a name="l00623"></a>00623     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00624"></a>00624     
<a name="l00625"></a>00625     ob= <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object.first;
<a name="l00626"></a>00626     <span class="keywordflow">while</span> (ob) {
<a name="l00627"></a>00627         <a class="code" href="../../dd/de8/BKE__sca_8h.html#a29b7641c21f294b91158ea8082004c84">set_sca_new_poins_ob</a>(ob);
<a name="l00628"></a>00628         ob= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>;    
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630 }
<a name="l00631"></a>00631 
<a name="l00632"></a><a class="code" href="../../d4/dc8/sca_8c.html#a0aa6fdc6402305b7a426757d575164e6">00632</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#afb5bd2388c65ec692c51daea4cfa6c30">sca_remove_ob_poin</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *obt, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00633"></a>00633 {
<a name="l00634"></a>00634     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens;
<a name="l00635"></a>00635     <a class="code" href="../../dc/d60/structbMessageSensor.html">bMessageSensor</a> *ms;
<a name="l00636"></a>00636     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act;
<a name="l00637"></a>00637     <a class="code" href="../../d3/d76/structbCameraActuator.html">bCameraActuator</a> *ca;
<a name="l00638"></a>00638     <a class="code" href="../../d0/d35/structbObjectActuator.html">bObjectActuator</a> *oa;
<a name="l00639"></a>00639     <a class="code" href="../../d8/d6b/structbSceneActuator.html">bSceneActuator</a> *sa;
<a name="l00640"></a>00640     <a class="code" href="../../d4/d5c/structbEditObjectActuator.html">bEditObjectActuator</a> *eoa;
<a name="l00641"></a>00641     <a class="code" href="../../dc/d13/structbPropertyActuator.html">bPropertyActuator</a> *pa;
<a name="l00642"></a>00642     <a class="code" href="../../df/d12/structbMessageActuator.html">bMessageActuator</a> *ma;
<a name="l00643"></a>00643     <a class="code" href="../../de/d83/structbParentActuator.html">bParentActuator</a> *para;
<a name="l00644"></a>00644     <a class="code" href="../../db/d53/structbArmatureActuator.html">bArmatureActuator</a> *aa;
<a name="l00645"></a>00645     <a class="code" href="../../dc/dbe/structbSteeringActuator.html">bSteeringActuator</a> *sta;
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     sens= obt-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00649"></a>00649     <span class="keywordflow">while</span> (sens) {
<a name="l00650"></a>00650         <span class="keywordflow">switch</span>(sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac325f3e6e74414e2539a8324902ca1ce">type</a>) {
<a name="l00651"></a>00651         <span class="keywordflow">case</span> <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#aedf7477b9ae594464a6164c3b18fb4d6">SENS_MESSAGE</a>:
<a name="l00652"></a>00652             ms= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a446dcd67bf7b052661b148284882bcf1">data</a>;
<a name="l00653"></a>00653             <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="../../dc/d60/structbMessageSensor.html#af836ea3b8de2f362e40258b7dbbffc15">fromObject</a>==ob) ms-&gt;<a class="code" href="../../dc/d60/structbMessageSensor.html#af836ea3b8de2f362e40258b7dbbffc15">fromObject</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655         sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     act= obt-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00659"></a>00659     <span class="keywordflow">while</span> (act) {
<a name="l00660"></a>00660         <span class="keywordflow">switch</span>(act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a545155415fccfa9b962b1d56471edd71">type</a>) {
<a name="l00661"></a>00661         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ad0a80e945d2f9f52b83f903c6f0a8bcd">ACT_CAMERA</a>:
<a name="l00662"></a>00662             ca= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00663"></a>00663             <span class="keywordflow">if</span> (ca-&gt;<a class="code" href="../../d3/d76/structbCameraActuator.html#a24ae0fc57a2890a5d6c062bb9c038fbd">ob</a>==ob) ca-&gt;<a class="code" href="../../d3/d76/structbCameraActuator.html#a24ae0fc57a2890a5d6c062bb9c038fbd">ob</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00664"></a>00664             <span class="keywordflow">break</span>;
<a name="l00665"></a>00665         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ab0aeb55ae4abd7843939f507c688af75">ACT_OBJECT</a>:
<a name="l00666"></a>00666             oa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00667"></a>00667             <span class="keywordflow">if</span> (oa-&gt;<a class="code" href="../../d0/d35/structbObjectActuator.html#a9cda7111b23b488749f0c8fa2933446e">reference</a>==ob) oa-&gt;<a class="code" href="../../d0/d35/structbObjectActuator.html#a9cda7111b23b488749f0c8fa2933446e">reference</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00668"></a>00668             <span class="keywordflow">break</span>;
<a name="l00669"></a>00669         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a3adf808ddc137a603bc4d0d92b31882a">ACT_PROPERTY</a>:
<a name="l00670"></a>00670             pa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00671"></a>00671             <span class="keywordflow">if</span> (pa-&gt;<a class="code" href="../../dc/d13/structbPropertyActuator.html#aeee0b9339f26d6bfcd93549cd6cac816">ob</a>==ob) pa-&gt;<a class="code" href="../../dc/d13/structbPropertyActuator.html#aeee0b9339f26d6bfcd93549cd6cac816">ob</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00672"></a>00672             <span class="keywordflow">break</span>;
<a name="l00673"></a>00673         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#af24723332b675766ad1d11f031ac6cd4">ACT_SCENE</a>:
<a name="l00674"></a>00674             sa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00675"></a>00675             <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d8/d6b/structbSceneActuator.html#af681370aee48700269f4b544b4d23484">camera</a>==ob) sa-&gt;<a class="code" href="../../d8/d6b/structbSceneActuator.html#af681370aee48700269f4b544b4d23484">camera</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00676"></a>00676             <span class="keywordflow">break</span>;
<a name="l00677"></a>00677         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a0fc0c7354c3624cb0a4b65934480a969">ACT_EDIT_OBJECT</a>:
<a name="l00678"></a>00678             eoa= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00679"></a>00679             <span class="keywordflow">if</span> (eoa-&gt;<a class="code" href="../../d4/d5c/structbEditObjectActuator.html#a92767cd10e4f3f3564b295d418714088">ob</a>==ob) eoa-&gt;<a class="code" href="../../d4/d5c/structbEditObjectActuator.html#a92767cd10e4f3f3564b295d418714088">ob</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00680"></a>00680             <span class="keywordflow">break</span>;
<a name="l00681"></a>00681         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#ae4015d5dd2b07f1caedc5039e7dd3753">ACT_MESSAGE</a>:
<a name="l00682"></a>00682             ma= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00683"></a>00683             <span class="keywordflow">if</span> (ma-&gt;<a class="code" href="../../df/d12/structbMessageActuator.html#a132d37e6ba7d93be7eb4d5816a04ee41">toObject</a>==ob) ma-&gt;<a class="code" href="../../df/d12/structbMessageActuator.html#a132d37e6ba7d93be7eb4d5816a04ee41">toObject</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00684"></a>00684             <span class="keywordflow">break</span>;
<a name="l00685"></a>00685         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aff16c55b5a12651b7c6902a240530c24">ACT_PARENT</a>:
<a name="l00686"></a>00686             para = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00687"></a>00687             <span class="keywordflow">if</span> (para-&gt;<a class="code" href="../../de/d83/structbParentActuator.html#a3aca4b9991a861728d6a1cac3ef6ccea">ob</a>==ob) para-&gt;<a class="code" href="../../de/d83/structbParentActuator.html#a3aca4b9991a861728d6a1cac3ef6ccea">ob</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00688"></a>00688             <span class="keywordflow">break</span>;
<a name="l00689"></a>00689         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aee9a04f8f07032f50c4743a6499405e7">ACT_ARMATURE</a>:
<a name="l00690"></a>00690             aa = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00691"></a>00691             <span class="keywordflow">if</span> (aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#af047ecce453fd3fbef5b0b512539af34">target</a> == ob) aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#af047ecce453fd3fbef5b0b512539af34">target</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00692"></a>00692             <span class="keywordflow">if</span> (aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#a888253390affbd36ba9574c2be7ace25">subtarget</a> == ob) aa-&gt;<a class="code" href="../../db/d53/structbArmatureActuator.html#a888253390affbd36ba9574c2be7ace25">subtarget</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00693"></a>00693             <span class="keywordflow">break</span>;
<a name="l00694"></a>00694         <span class="keywordflow">case</span> <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#a68b54400142bd60b87940076e4d92471">ACT_STEERING</a>:
<a name="l00695"></a>00695             sta = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a60fe5eef63561b5c639ee582054ea933">data</a>;
<a name="l00696"></a>00696             <span class="keywordflow">if</span> (sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#aa72e26ca2f5e0aa5806c211e5d15ea35">navmesh</a> == ob) sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#aa72e26ca2f5e0aa5806c211e5d15ea35">navmesh</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00697"></a>00697             <span class="keywordflow">if</span> (sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#ab3d481511001e61afb4eda90ce4edb49">target</a> == ob) sta-&gt;<a class="code" href="../../dc/dbe/structbSteeringActuator.html#ab3d481511001e61afb4eda90ce4edb49">target</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00698"></a>00698         }
<a name="l00699"></a>00699         act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>;
<a name="l00700"></a>00700     }   
<a name="l00701"></a>00701 }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703 <span class="comment">/* ******************** INTERFACE ******************* */</span>
<a name="l00704"></a><a class="code" href="../../d4/dc8/sca_8c.html#a80eb4380ad96f8091a9c791d7f16210d">00704</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a059443023f62e30cd6b9b2933f53f602">sca_move_sensor</a>(<a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens_to_move, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> move_up)
<a name="l00705"></a>00705 {
<a name="l00706"></a>00706     <a class="code" href="../../db/d09/structbSensor.html">bSensor</a> *sens, *tmp;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     <span class="keywordtype">int</span> val;
<a name="l00709"></a>00709     val = move_up ? 1:2;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711     <span class="comment">/* make sure this sensor belongs to this object */</span>
<a name="l00712"></a>00712     sens= ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00713"></a>00713     <span class="keywordflow">while</span> (sens) {
<a name="l00714"></a>00714         <span class="keywordflow">if</span> (sens == sens_to_move) <span class="keywordflow">break</span>;
<a name="l00715"></a>00715         sens= sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>;
<a name="l00716"></a>00716     }
<a name="l00717"></a>00717     <span class="keywordflow">if</span> (!sens) <span class="keywordflow">return</span>;
<a name="l00718"></a>00718 
<a name="l00719"></a>00719     <span class="comment">/* move up */</span>
<a name="l00720"></a>00720     <span class="keywordflow">if</span> ( val==1 &amp;&amp; sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac92af9e4e759d77aacdaceeed5a1a384">prev</a>) {
<a name="l00721"></a>00721         <span class="keywordflow">for</span> (tmp=sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac92af9e4e759d77aacdaceeed5a1a384">prev</a>; tmp; tmp=tmp-&gt;<a class="code" href="../../db/d09/structbSensor.html#ac92af9e4e759d77aacdaceeed5a1a384">prev</a>) {
<a name="l00722"></a>00722             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a> &amp; <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a8fe6b18690b68cf919309f7047718b11">SENS_VISIBLE</a>)
<a name="l00723"></a>00723                 <span class="keywordflow">break</span>;
<a name="l00724"></a>00724         }
<a name="l00725"></a>00725         <span class="keywordflow">if</span> (tmp) {
<a name="l00726"></a>00726             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>, sens);
<a name="l00727"></a>00727             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a168dc4cffe5e3a86086f3cfc4f7b95e6">BLI_insertlinkbefore</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>, tmp, sens);
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730     <span class="comment">/* move down */</span>
<a name="l00731"></a>00731     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( val==2 &amp;&amp; sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>) {
<a name="l00732"></a>00732         <span class="keywordflow">for</span> (tmp=sens-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>; tmp; tmp=tmp-&gt;<a class="code" href="../../db/d09/structbSensor.html#a844da30cb7517bfebab4ec4e960e4ef1">next</a>) {
<a name="l00733"></a>00733             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../db/d09/structbSensor.html#a91a1005cdaaf9ac63c856b949d185bd6">flag</a> &amp; <a class="code" href="../../d6/dc4/DNA__sensor__types_8h.html#a8fe6b18690b68cf919309f7047718b11">SENS_VISIBLE</a>)
<a name="l00734"></a>00734                 <span class="keywordflow">break</span>;
<a name="l00735"></a>00735         }
<a name="l00736"></a>00736         <span class="keywordflow">if</span> (tmp) {
<a name="l00737"></a>00737             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>, sens);
<a name="l00738"></a>00738             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a99b54e021279f92d4a31afd7ade4153c">BLI_insertlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>, tmp, sens);
<a name="l00739"></a>00739         }
<a name="l00740"></a>00740     }
<a name="l00741"></a>00741 }
<a name="l00742"></a>00742 
<a name="l00743"></a><a class="code" href="../../d4/dc8/sca_8c.html#adc8cd478f0edc1984420f58fd5d58a78">00743</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a5cd8f0c7431afa8bcbeeaa3f48c62073">sca_move_controller</a>(<a class="code" href="../../dd/d82/structbController.html">bController</a> *cont_to_move, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> move_up)
<a name="l00744"></a>00744 {
<a name="l00745"></a>00745     <a class="code" href="../../dd/d82/structbController.html">bController</a> *cont, *tmp;
<a name="l00746"></a>00746 
<a name="l00747"></a>00747     <span class="keywordtype">int</span> val;
<a name="l00748"></a>00748     val = move_up ? 1:2;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750     <span class="comment">/* make sure this controller belongs to this object */</span>
<a name="l00751"></a>00751     cont= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00752"></a>00752     <span class="keywordflow">while</span> (cont) {
<a name="l00753"></a>00753         <span class="keywordflow">if</span> (cont == cont_to_move) <span class="keywordflow">break</span>;
<a name="l00754"></a>00754         cont= cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00755"></a>00755     }
<a name="l00756"></a>00756     <span class="keywordflow">if</span> (!cont) <span class="keywordflow">return</span>;
<a name="l00757"></a>00757 
<a name="l00758"></a>00758     <span class="comment">/* move up */</span>
<a name="l00759"></a>00759     <span class="keywordflow">if</span> ( val==1 &amp;&amp; cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a3bb06b5bd262586ca9bc4a24b5bd7473">prev</a>) {
<a name="l00760"></a>00760         <span class="comment">/* locate the controller that has the same state mask but is earlier in the list */</span>
<a name="l00761"></a>00761         tmp = cont-&gt;<a class="code" href="../../dd/d82/structbController.html#a3bb06b5bd262586ca9bc4a24b5bd7473">prev</a>;
<a name="l00762"></a>00762         <span class="keywordflow">while</span> (tmp) {
<a name="l00763"></a>00763             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../dd/d82/structbController.html#ad6f52ffd576755d8622aa22ee126551e">state_mask</a> &amp; cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ad6f52ffd576755d8622aa22ee126551e">state_mask</a>) 
<a name="l00764"></a>00764                 <span class="keywordflow">break</span>;
<a name="l00765"></a>00765             tmp = tmp-&gt;<a class="code" href="../../dd/d82/structbController.html#a3bb06b5bd262586ca9bc4a24b5bd7473">prev</a>;
<a name="l00766"></a>00766         }
<a name="l00767"></a>00767         <span class="keywordflow">if</span> (tmp) {
<a name="l00768"></a>00768             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>, cont);
<a name="l00769"></a>00769             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a168dc4cffe5e3a86086f3cfc4f7b95e6">BLI_insertlinkbefore</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>, tmp, cont);
<a name="l00770"></a>00770         }
<a name="l00771"></a>00771     }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773     <span class="comment">/* move down */</span>
<a name="l00774"></a>00774     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( val==2 &amp;&amp; cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>) {
<a name="l00775"></a>00775         tmp = cont-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00776"></a>00776         <span class="keywordflow">while</span> (tmp) {
<a name="l00777"></a>00777             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../dd/d82/structbController.html#ad6f52ffd576755d8622aa22ee126551e">state_mask</a> &amp; cont-&gt;<a class="code" href="../../dd/d82/structbController.html#ad6f52ffd576755d8622aa22ee126551e">state_mask</a>) 
<a name="l00778"></a>00778                 <span class="keywordflow">break</span>;
<a name="l00779"></a>00779             tmp = tmp-&gt;<a class="code" href="../../dd/d82/structbController.html#abd185fdf6022047bfd51966024e3820b">next</a>;
<a name="l00780"></a>00780         }
<a name="l00781"></a>00781         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>, cont);
<a name="l00782"></a>00782         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a99b54e021279f92d4a31afd7ade4153c">BLI_insertlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>, tmp, cont);
<a name="l00783"></a>00783     }
<a name="l00784"></a>00784 }
<a name="l00785"></a>00785 
<a name="l00786"></a><a class="code" href="../../d4/dc8/sca_8c.html#a6955309b1f86584a045b3ae1655f169d">00786</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a521da223143c0d70690e87ed415f45c7">sca_move_actuator</a>(<a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act_to_move, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> move_up)
<a name="l00787"></a>00787 {
<a name="l00788"></a>00788     <a class="code" href="../../d0/d4a/structbActuator.html">bActuator</a> *act, *tmp;
<a name="l00789"></a>00789     <span class="keywordtype">int</span> val;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     val = move_up ? 1:2;
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     <span class="comment">/* make sure this actuator belongs to this object */</span>
<a name="l00794"></a>00794     act= ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00795"></a>00795     <span class="keywordflow">while</span> (act) {
<a name="l00796"></a>00796         <span class="keywordflow">if</span> (act == act_to_move) <span class="keywordflow">break</span>;
<a name="l00797"></a>00797         act= act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799     <span class="keywordflow">if</span> (!act) <span class="keywordflow">return</span>;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801     <span class="comment">/* move up */</span>
<a name="l00802"></a>00802     <span class="keywordflow">if</span> ( val==1 &amp;&amp; act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a29cbb154cf0e889e92b85c443c5469c1">prev</a>) {
<a name="l00803"></a>00803         <span class="comment">/* locate the first visible actuators before this one */</span>
<a name="l00804"></a>00804         <span class="keywordflow">for</span> (tmp = act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a29cbb154cf0e889e92b85c443c5469c1">prev</a>; tmp; tmp=tmp-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#a29cbb154cf0e889e92b85c443c5469c1">prev</a>) {
<a name="l00805"></a>00805             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a> &amp; <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aa4c38868c9c4a50e425f0164c774e14b">ACT_VISIBLE</a>)
<a name="l00806"></a>00806                 <span class="keywordflow">break</span>;
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808         <span class="keywordflow">if</span> (tmp) {
<a name="l00809"></a>00809             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>, act);
<a name="l00810"></a>00810             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a168dc4cffe5e3a86086f3cfc4f7b95e6">BLI_insertlinkbefore</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>, tmp, act);
<a name="l00811"></a>00811         }
<a name="l00812"></a>00812     }
<a name="l00813"></a>00813     <span class="comment">/* move down */</span>
<a name="l00814"></a>00814     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( val==2 &amp;&amp; act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>) {
<a name="l00815"></a>00815         <span class="comment">/* locate the first visible actuators after this one */</span>
<a name="l00816"></a>00816         <span class="keywordflow">for</span> (tmp=act-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>; tmp; tmp=tmp-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#ae77790d6a497010e1a250dcbc94e92c5">next</a>) {
<a name="l00817"></a>00817             <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../d0/d4a/structbActuator.html#af0e337c47de5cfbe0923d421b5f8a6a0">flag</a> &amp; <a class="code" href="../../dd/de2/DNA__actuator__types_8h.html#aa4c38868c9c4a50e425f0164c774e14b">ACT_VISIBLE</a>)
<a name="l00818"></a>00818                 <span class="keywordflow">break</span>;
<a name="l00819"></a>00819         }
<a name="l00820"></a>00820         <span class="keywordflow">if</span> (tmp) {
<a name="l00821"></a>00821             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>, act);
<a name="l00822"></a>00822             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a99b54e021279f92d4a31afd7ade4153c">BLI_insertlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>, tmp, act);
<a name="l00823"></a>00823         }
<a name="l00824"></a>00824     }
<a name="l00825"></a>00825 }
<a name="l00826"></a>00826 
<a name="l00827"></a><a class="code" href="../../d4/dc8/sca_8c.html#a7b023c9f485b52090df7cea4a7e5173f">00827</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a7b023c9f485b52090df7cea4a7e5173f">link_logicbricks</a>(<span class="keywordtype">void</span> **poin, <span class="keywordtype">void</span> ***ppoin, <span class="keywordtype">short</span> *tot, <span class="keywordtype">short</span> <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>)
<a name="l00828"></a>00828 {
<a name="l00829"></a>00829     <span class="keywordtype">void</span> **old_links= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00830"></a>00830     
<a name="l00831"></a>00831     <span class="keywordtype">int</span> ibrick;
<a name="l00832"></a>00832 
<a name="l00833"></a>00833     <span class="comment">/* check if the bricks are already linked */</span>
<a name="l00834"></a>00834     <span class="keywordflow">for</span> (ibrick=0; ibrick &lt; *tot; ibrick++) {
<a name="l00835"></a>00835         <span class="keywordflow">if</span> ((*ppoin)[ibrick] == *poin)
<a name="l00836"></a>00836             <span class="keywordflow">return</span>;
<a name="l00837"></a>00837     }
<a name="l00838"></a>00838 
<a name="l00839"></a>00839     <span class="keywordflow">if</span> (*ppoin) {
<a name="l00840"></a>00840         old_links= *ppoin;
<a name="l00841"></a>00841 
<a name="l00842"></a>00842         (*tot) ++;
<a name="l00843"></a>00843         *ppoin = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>((*tot)*size, <span class="stringliteral">&quot;new link&quot;</span>);
<a name="l00844"></a>00844     
<a name="l00845"></a>00845         <span class="keywordflow">for</span> (ibrick=0; ibrick &lt; *(tot) - 1; ibrick++) {
<a name="l00846"></a>00846             (*ppoin)[ibrick] = old_links[ibrick];
<a name="l00847"></a>00847         }
<a name="l00848"></a>00848         (*ppoin)[ibrick] = *poin;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850         <span class="keywordflow">if</span> (old_links) <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(old_links);
<a name="l00851"></a>00851     }
<a name="l00852"></a>00852     <span class="keywordflow">else</span> {
<a name="l00853"></a>00853         (*tot) = 1;
<a name="l00854"></a>00854         *ppoin = <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>((*tot)*size, <span class="stringliteral">&quot;new link&quot;</span>);
<a name="l00855"></a>00855         (*ppoin)[0] = *poin;
<a name="l00856"></a>00856     }
<a name="l00857"></a>00857 }
<a name="l00858"></a>00858 
<a name="l00859"></a><a class="code" href="../../d4/dc8/sca_8c.html#a224c81c1d0c95d3b792d440c23e12e07">00859</a> <span class="keywordtype">void</span> <a class="code" href="../../dd/de8/BKE__sca_8h.html#a224c81c1d0c95d3b792d440c23e12e07">unlink_logicbricks</a>(<span class="keywordtype">void</span> **poin, <span class="keywordtype">void</span> ***ppoin, <span class="keywordtype">short</span> *tot)
<a name="l00860"></a>00860 {
<a name="l00861"></a>00861     <span class="keywordtype">int</span> ibrick, removed;
<a name="l00862"></a>00862 
<a name="l00863"></a>00863     removed= 0;
<a name="l00864"></a>00864     <span class="keywordflow">for</span> (ibrick=0; ibrick &lt; *tot; ibrick++) {
<a name="l00865"></a>00865         <span class="keywordflow">if</span> (removed) (*ppoin)[ibrick - removed] = (*ppoin)[ibrick];
<a name="l00866"></a>00866         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*ppoin)[ibrick] == *poin) removed = 1;
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868 
<a name="l00869"></a>00869     <span class="keywordflow">if</span> (removed) {
<a name="l00870"></a>00870         (*tot) --;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872         <span class="keywordflow">if</span> (*tot == 0) {
<a name="l00873"></a>00873             <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(*ppoin);
<a name="l00874"></a>00874             (*ppoin)= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00875"></a>00875         }
<a name="l00876"></a>00876         <span class="keywordflow">return</span>;
<a name="l00877"></a>00877     }
<a name="l00878"></a>00878 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:52 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
