<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: KX_GameObject.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">KX_GameObject.cpp</div>  </div>
</div>
<div class="contents">
<a href="../../d4/d0e/KX__GameObject_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2001-2002 by NaN Holding BV.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * The Original Code is: all of this file.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * Contributor(s): none yet.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00026"></a>00026 <span class="comment"> * Game object wrapper</span>
<a name="l00027"></a>00027 <span class="comment"> */</span>
<a name="l00028"></a>00028 
<a name="l00034"></a>00034 <span class="preprocessor">#if defined(_WIN64) &amp;&amp; !defined(FREE_WINDOWS64)</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int64 <a class="code" href="../../d2/d18/KX__CameraIpoSGController_8cpp.html#a2eb1fb66a120c05cbede798531972c0e">uint_ptr</a>;
<a name="l00036"></a>00036 <span class="preprocessor">#else</span>
<a name="l00037"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a2eb1fb66a120c05cbede798531972c0e">00037</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d2/d18/KX__CameraIpoSGController_8cpp.html#a2eb1fb66a120c05cbede798531972c0e">uint_ptr</a>;
<a name="l00038"></a>00038 <span class="preprocessor">#endif</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#if defined(WIN32) &amp;&amp; !defined(FREE_WINDOWS)</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="comment">// This warning tells us about truncation of __long__ stl-generated names.</span>
<a name="l00042"></a>00042 <span class="comment">// It can occasionally cause DevStudio to have internal compiler warnings.</span>
<a name="l00043"></a>00043 <span class="preprocessor">#pragma warning( disable : 4786 )     </span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a84f7fe77583734eeecde7bab2f7e95b4">00047</a> <span class="preprocessor">#define KX_INERTIA_INFINITE 10000</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/da4/RAS__IPolygonMaterial_8h.html">RAS_IPolygonMaterial.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d9b/KX__BlenderMaterial_8h.html">KX_BlenderMaterial.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/dc5/KX__GameObject_8h.html" title="General KX game object.">KX_GameObject.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d17/KX__Camera_8h.html" title="Camera in the gameengine. Cameras are also used for views.">KX_Camera.h</a>&quot;</span> <span class="comment">// only for their ::Type</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d58/KX__Light_8h.html">KX_Light.h</a>&quot;</span>  <span class="comment">// only for their ::Type</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/d81/KX__FontObject_8h.html">KX_FontObject.h</a>&quot;</span>  <span class="comment">// only for their ::Type</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d62/RAS__MeshObject_8h.html">RAS_MeshObject.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d4e/KX__MeshProxy_8h.html">KX_MeshProxy.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d86/KX__PolyProxy_8h.html">KX_PolyProxy.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;stdio.h&gt;</span> <span class="comment">// printf</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/dcb/SG__Controller_8h.html">SG_Controller.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/df8/KX__IPhysicsController_8h.html">KX_IPhysicsController.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d88/PHY__IGraphicController_8h.html">PHY_IGraphicController.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d3b/SG__Node_8h.html">SG_Node.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/dcb/SG__Controller_8h.html">SG_Controller.h</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/db9/KX__ClientObjectInfo_8h.html">KX_ClientObjectInfo.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../db/dfd/RAS__BucketManager_8h.html">RAS_BucketManager.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d2a/KX__RayCast_8h.html">KX_RayCast.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/de4/KX__PythonInit_8h.html">KX_PythonInit.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d0a/KX__PyMath_8h.html" title="Initialize Python thingies.">KX_PyMath.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d54/KX__PythonSeq_8h.html" title="Readonly sequence wrapper for lookups on logic bricks.">KX_PythonSeq.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/d65/KX__ConvertPhysicsObject_8h.html">KX_ConvertPhysicsObject.h</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d75/SCA__IActuator_8h.html">SCA_IActuator.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d2e/SCA__ISensor_8h.html">SCA_ISensor.h</a>&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d9a/SCA__IController_8h.html" title="Interface for input devices. The defines for keyboard/system/mouse events here are for internal use i...">SCA_IController.h</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d3c/NG__NetworkScene_8h.html" title="NetworkSceneManagement generic class.">NG_NetworkScene.h</a>&quot;</span> <span class="comment">//Needed for sendMessage()</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="../../da/dbc/KX__ObstacleSimulation_8h.html">KX_ObstacleSimulation.h</a>&quot;</span>
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d5d/BL__ActionManager_8h.html">BL_ActionManager.h</a>&quot;</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/db2/PyObjectPlus_8h.html">PyObjectPlus.h</a>&quot;</span> <span class="comment">/* python stuff */</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">// This file defines relationships between parents and children</span>
<a name="l00081"></a>00081 <span class="comment">// in the game engine.</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/dca/KX__SG__NodeRelationships_8h.html">KX_SG_NodeRelationships.h</a>&quot;</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#acee6b011c82b6f5cb90b28d833546ffa">00087</a> <span class="keyword">static</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#acee6b011c82b6f5cb90b28d833546ffa">dummy_point</a>= <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(0.0, 0.0, 0.0);
<a name="l00088"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a2d9103c9a69dfb1ee40f67e3c7e2d7c9">00088</a> <span class="keyword">static</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a2d9103c9a69dfb1ee40f67e3c7e2d7c9">dummy_scaling</a> = <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(1.0, 1.0, 1.0);
<a name="l00089"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe0783880f26055247c706b6470276d8">00089</a> <span class="keyword">static</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe0783880f26055247c706b6470276d8">dummy_orientation</a> = <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>(1.0, 0.0, 0.0,
<a name="l00090"></a>00090                                                      0.0, 1.0, 0.0,
<a name="l00091"></a>00091                                                      0.0, 0.0, 1.0);
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ad4e4c000357f3e54e5d5c58fbb97349c">00093</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#ad4e4c000357f3e54e5d5c58fbb97349c">KX_GameObject::KX_GameObject</a>(
<a name="l00094"></a>00094         <span class="keywordtype">void</span>* sgReplicationInfo,
<a name="l00095"></a>00095         <a class="code" href="../../dc/d81/structSG__Callbacks.html">SG_Callbacks</a> callbacks)
<a name="l00096"></a>00096     : <a class="code" href="../../da/d68/classSCA__IObject.html">SCA_IObject</a>(),
<a name="l00097"></a>00097       m_bDyna(false),
<a name="l00098"></a>00098       m_layer(0),
<a name="l00099"></a>00099       m_pBlenderObject(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00100"></a>00100       m_pBlenderGroupObject(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00101"></a>00101       m_bSuspendDynamics(false),
<a name="l00102"></a>00102       m_bUseObjectColor(false),
<a name="l00103"></a>00103       m_bIsNegativeScaling(false),
<a name="l00104"></a>00104       m_bVisible(true),
<a name="l00105"></a>00105       m_bCulled(true),
<a name="l00106"></a>00106       m_bOccluder(false),
<a name="l00107"></a>00107       m_pPhysicsController1(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00108"></a>00108       m_pGraphicController(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00109"></a>00109       m_xray(false),
<a name="l00110"></a>00110       m_pHitObject(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00111"></a>00111       m_pObstacleSimulation(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00112"></a>00112       m_actionManager(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
<a name="l00113"></a>00113       m_isDeformable(false)
<a name="l00114"></a>00114 #ifdef <a class="code" href="../../d4/df8/bpy_8c.html#adbd43bd550d510a977cb71346dc56440">WITH_PYTHON</a>
<a name="l00115"></a>00115     , m_attr_dict(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00116"></a>00116 #endif
<a name="l00117"></a>00117 {
<a name="l00118"></a>00118     <a class="code" href="../../da/d68/classSCA__IObject.html#aa894e6874d8108f63078a9d9e0a97302">m_ignore_activity_culling</a> = <span class="keyword">false</span>;
<a name="l00119"></a>00119     <a class="code" href="../../d1/d73/classKX__GameObject.html#a7a9d80df1ab5b8d89da0e5286c2e0e29">m_pClient_info</a> = <span class="keyword">new</span> <a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html">KX_ClientObjectInfo</a>(<span class="keyword">this</span>, <a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a71f6d446903dada2386a86bc137929cda47e0cd2575250e6f4404b4f45e3faf00">KX_ClientObjectInfo::ACTOR</a>);
<a name="l00120"></a>00120     <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a> = <span class="keyword">new</span> <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>(<span class="keyword">this</span>,sgReplicationInfo,callbacks);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="comment">// define the relationship between this node and it&#39;s parent.</span>
<a name="l00123"></a>00123     
<a name="l00124"></a>00124     <a class="code" href="../../d6/d0a/classKX__NormalParentRelation.html">KX_NormalParentRelation</a> * parent_relation = 
<a name="l00125"></a>00125         <a class="code" href="../../d6/d0a/classKX__NormalParentRelation.html#a6e0ee2e5d68fc3d5a2c1589670793ef4">KX_NormalParentRelation::New</a>();
<a name="l00126"></a>00126     <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a>-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#afd81adaab4e510163b91952ea4777d8e">SetParentRelation</a>(parent_relation);
<a name="l00127"></a>00127 };
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a7fae3a05a4ec9cc222963c8d389d07d4">00131</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#a7fae3a05a4ec9cc222963c8d389d07d4">KX_GameObject::~KX_GameObject</a>()
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133     <a class="code" href="../../d1/d73/classKX__GameObject.html#adc5a6f8bb55a78231a8a5c86de7cc10d">RemoveMeshes</a>();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="comment">// is this delete somewhere ?</span>
<a name="l00136"></a>00136     <span class="comment">//if (m_sumoObj)</span>
<a name="l00137"></a>00137     <span class="comment">//  delete m_sumoObj;</span>
<a name="l00138"></a>00138     <span class="keyword">delete</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a7a9d80df1ab5b8d89da0e5286c2e0e29">m_pClient_info</a>;
<a name="l00139"></a>00139     <span class="comment">//if (m_pSGNode)</span>
<a name="l00140"></a>00140     <span class="comment">//  delete m_pSGNode;</span>
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a>)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         <span class="comment">// must go through controllers and make sure they will not use us anymore</span>
<a name="l00144"></a>00144         <span class="comment">// This is important for KX_BulletPhysicsControllers that unregister themselves</span>
<a name="l00145"></a>00145         <span class="comment">// from the object when they are deleted.</span>
<a name="l00146"></a>00146         SGControllerList::iterator contit;
<a name="l00147"></a>00147         <a class="code" href="../../d0/d93/SG__IObject_8h.html#aad4346341d8a820b9434848b5cc4ec64">SGControllerList</a>&amp; controllers = <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a>-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a65ffd2fdff176c9b9708b7638d35a367" title="Needed for replication.">GetSGControllerList</a>();
<a name="l00148"></a>00148         <span class="keywordflow">for</span> (contit = controllers.begin();contit!=controllers.end();++contit)
<a name="l00149"></a>00149         {
<a name="l00150"></a>00150             (*contit)-&gt;ClearObject();
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152         <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a>-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#afd60e11ade3b1302b072eba65fc8a911">SetSGClientObject</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154         <span class="comment">/* m_pSGNode is freed in KX_Scene::RemoveNodeDestructObject */</span>
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>)
<a name="l00157"></a>00157     {
<a name="l00158"></a>00158         <span class="keyword">delete</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>;
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a1eafea21db450c5e023459bd1ca8ec9a">m_pObstacleSimulation</a>)
<a name="l00162"></a>00162     {
<a name="l00163"></a>00163         <a class="code" href="../../d1/d73/classKX__GameObject.html#a1eafea21db450c5e023459bd1ca8ec9a">m_pObstacleSimulation</a>-&gt;<a class="code" href="../../d7/d8d/classKX__ObstacleSimulation.html#af7f8dff2bb9a4bfa4a6f06761ae4e69b">DestroyObstacleForObj</a>(<span class="keyword">this</span>);
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a>)
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168         <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>()-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a75ae03479beddf0984b1c1047bb0478e">RemoveAnimatedObject</a>(<span class="keyword">this</span>);
<a name="l00169"></a>00169         <span class="keyword">delete</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a>;
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 <span class="preprocessor">#ifdef WITH_PYTHON</span>
<a name="l00172"></a>00172 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (m_attr_dict) {
<a name="l00173"></a>00173         PyDict_Clear(m_attr_dict); <span class="comment">/* in case of circular refs or other weird cases */</span>
<a name="l00174"></a>00174         <span class="comment">/* Py_CLEAR: Py_DECREF&#39;s and NULL&#39;s */</span>
<a name="l00175"></a>00175         Py_CLEAR(m_attr_dict);
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 <span class="preprocessor">#endif // WITH_PYTHON</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>}
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#afa8d01f4656a56957355f23a3abc7f5f">00180</a> <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#afa8d01f4656a56957355f23a3abc7f5f">KX_GameObject::GetClientObject</a>(<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html">KX_ClientObjectInfo</a>* info)
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182     <span class="keywordflow">if</span> (!info)
<a name="l00183"></a>00183         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00184"></a>00184     <span class="keywordflow">return</span> info-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a4e09a739c17776b2ae907664321ba114">m_gameobject</a>;
<a name="l00185"></a>00185 }
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a269ac0a328b66c78ed698934e9ad9475">00187</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#a269ac0a328b66c78ed698934e9ad9475">KX_GameObject::	Calc</a>(<a class="code" href="../../d5/d8e/Value_8h.html#a53728733f70bc051a7f0fe6f820e0afb">VALUE_OPERATOR</a> op, <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val) 
<a name="l00188"></a>00188 {
<a name="l00189"></a>00189     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a7f9a724f5fd9d172f947e7383e4f7d15">00194</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#a7f9a724f5fd9d172f947e7383e4f7d15">KX_GameObject::CalcFinal</a>(<a class="code" href="../../d5/d8e/Value_8h.html#a16f8e19dd66c5875dc88ae14ac8c9821">VALUE_DATA_TYPE</a> dtype, <a class="code" href="../../d5/d8e/Value_8h.html#a53728733f70bc051a7f0fe6f820e0afb">VALUE_OPERATOR</a> op, <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val)
<a name="l00195"></a>00195 {
<a name="l00196"></a>00196     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 
<a name="l00201"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a2778642096f01a64acecb3ee2095fa76">00201</a> <span class="keyword">const</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a> &amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#a2778642096f01a64acecb3ee2095fa76">KX_GameObject::GetText</a>()
<a name="l00202"></a>00202 {
<a name="l00203"></a>00203     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a8bea51b4a651071bafb4278db34aa90d">m_text</a>;
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aa46a8d3deda293be3b470a42348b6ca7">00208</a> <span class="keywordtype">double</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa46a8d3deda293be3b470a42348b6ca7">KX_GameObject::GetNumber</a>()
<a name="l00209"></a>00209 {
<a name="l00210"></a>00210     <span class="keywordflow">return</span> 0;
<a name="l00211"></a>00211 }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a268fb3bcc390cd18830e91113693eb40">00215</a> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#a268fb3bcc390cd18830e91113693eb40">KX_GameObject::GetName</a>()
<a name="l00216"></a>00216 {
<a name="l00217"></a>00217     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a72450f3520b5578660e9ec93270a99c4">m_name</a>;
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00222"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a43c0693d1745f2b6cbe31d0ef691d3a5">00222</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a43c0693d1745f2b6cbe31d0ef691d3a5">KX_GameObject::SetName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224     <a class="code" href="../../d1/d73/classKX__GameObject.html#a72450f3520b5578660e9ec93270a99c4">m_name</a> = name;
<a name="l00225"></a>00225 };                              <span class="comment">// Set the name of the value</span>
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">00227</a> <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">KX_GameObject::GetPhysicsController</a>()
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a4554e5e42a4f3b02e8b56284edfdb611">00232</a> <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#a4554e5e42a4f3b02e8b56284edfdb611">KX_GameObject::GetParent</a>()
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* result = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00235"></a>00235     <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node = <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a>;
<a name="l00236"></a>00236     
<a name="l00237"></a>00237     <span class="keywordflow">while</span> (node &amp;&amp; !result)
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239         node = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>();
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (node)
<a name="l00241"></a>00241             result = (<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)node-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a5d43f7a1fb6fde5b37fa17b639095af1">GetSGClientObject</a>();
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243     
<a name="l00244"></a>00244     <span class="keywordflow">if</span> (result)
<a name="l00245"></a>00245         result-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>();
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="keywordflow">return</span> result;
<a name="l00248"></a>00248     
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a982f1f3dc931568448edb647414c91db">00251</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a982f1f3dc931568448edb647414c91db">KX_GameObject::SetParent</a>(<a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* obj, <span class="keywordtype">bool</span> addToCompound, <span class="keywordtype">bool</span> ghost)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l00254"></a>00254     <span class="keywordflow">if</span> (obj &amp;&amp; 
<a name="l00255"></a>00255         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>() &amp;&amp;          <span class="comment">// object is not zombi</span>
<a name="l00256"></a>00256         obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>() &amp;&amp;     <span class="comment">// object is not zombi</span>
<a name="l00257"></a>00257         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>() != obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>() &amp;&amp;   <span class="comment">// not already parented to same object</span>
<a name="l00258"></a>00258         !<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a4c8a1ddeb84e0ad1af4cce37fce88029">IsAncessor</a>(obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) &amp;&amp;       <span class="comment">// no parenting loop</span>
<a name="l00259"></a>00259         <span class="keyword">this</span> != obj)                                        <span class="comment">// not the object itself</span>
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261         <span class="comment">// Make sure the objects have some scale</span>
<a name="l00262"></a>00262         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scale1 = <a class="code" href="../../d1/d73/classKX__GameObject.html#a214226e36095439d638bb17d0057f88c">NodeGetWorldScaling</a>();
<a name="l00263"></a>00263         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scale2 = obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a214226e36095439d638bb17d0057f88c">NodeGetWorldScaling</a>();
<a name="l00264"></a>00264         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale2[0]) &lt; FLT_EPSILON || 
<a name="l00265"></a>00265             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale2[1]) &lt; FLT_EPSILON || 
<a name="l00266"></a>00266             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale2[2]) &lt; FLT_EPSILON || 
<a name="l00267"></a>00267             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale1[0]) &lt; FLT_EPSILON || 
<a name="l00268"></a>00268             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale1[1]) &lt; FLT_EPSILON || 
<a name="l00269"></a>00269             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale1[2]) &lt; FLT_EPSILON) { <span class="keywordflow">return</span>; }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271         <span class="comment">// Remove us from our old parent and set our new parent</span>
<a name="l00272"></a>00272         <a class="code" href="../../d1/d73/classKX__GameObject.html#a1ee8f226e79c48de476e184805ad9a52">RemoveParent</a>(scene);
<a name="l00273"></a>00273         obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a2e527abc6716de94e2bc551c69a9ae52">AddChild</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>());
<a name="l00274"></a>00274 
<a name="l00275"></a>00275         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) 
<a name="l00276"></a>00276         {
<a name="l00277"></a>00277             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a362c4e09be80f9690fbacbc11830fda5">SuspendDynamics</a>(ghost);
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         <span class="comment">// Set us to our new scale, position, and orientation</span>
<a name="l00280"></a>00280         scale2[0] = 1.0/scale2[0];
<a name="l00281"></a>00281         scale2[1] = 1.0/scale2[1];
<a name="l00282"></a>00282         scale2[2] = 1.0/scale2[2];
<a name="l00283"></a>00283         scale1 = scale1 * scale2;
<a name="l00284"></a>00284         <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> invori = obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>().<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#acf25f88b7ef601ba7cd69b0afb495b89">inverse</a>();
<a name="l00285"></a>00285         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> newpos = invori*(<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>()-obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>())*scale2;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <a class="code" href="../../d1/d73/classKX__GameObject.html#acfffcf209f87bf7bad4a25d0bfcfd2a8">NodeSetLocalScale</a>(scale1);
<a name="l00288"></a>00288         <a class="code" href="../../d1/d73/classKX__GameObject.html#a22d183aca27dacd2942c7eb428fa0eb7">NodeSetLocalPosition</a>(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(newpos[0],newpos[1],newpos[2]));
<a name="l00289"></a>00289         <a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">NodeSetLocalOrientation</a>(invori*<a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>());
<a name="l00290"></a>00290         <a class="code" href="../../d1/d73/classKX__GameObject.html#abd94bbbcf52249812ac7ddd8d61b079c">NodeUpdateGS</a>(0.f);
<a name="l00291"></a>00291         <span class="comment">// object will now be a child, it must be removed from the parent list</span>
<a name="l00292"></a>00292         <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* rootlist = scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#ac0b0e3bb47162d2022402d0126f0f9ba">GetRootParentList</a>();
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (rootlist-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a18acf9a41b6ed927d931143806bd1852">RemoveValue</a>(<span class="keyword">this</span>))
<a name="l00294"></a>00294             <span class="comment">// the object was in parent list, decrement ref count as it&#39;s now removed</span>
<a name="l00295"></a>00295             <a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00296"></a>00296         <span class="comment">// if the new parent is a compound object, add this object shape to the compound shape.</span>
<a name="l00297"></a>00297         <span class="comment">// step 0: verify this object has physical controller</span>
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; addToCompound)
<a name="l00299"></a>00299         {
<a name="l00300"></a>00300             <span class="comment">// step 1: find the top parent (not necessarily obj)</span>
<a name="l00301"></a>00301             <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* rootobj = (<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)obj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a567f2f8e61a1fe15cfee58bb47f18c06">GetRootSGParent</a>()-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a5d43f7a1fb6fde5b37fa17b639095af1">GetSGClientObject</a>();
<a name="l00302"></a>00302             <span class="comment">// step 2: verify it has a physical controller and compound shape</span>
<a name="l00303"></a>00303             <span class="keywordflow">if</span> (rootobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; 
<a name="l00304"></a>00304                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
<a name="l00305"></a>00305                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aadf71ea4a920eea8867e3c3542aa36fa">IsCompound</a>())
<a name="l00306"></a>00306             {
<a name="l00307"></a>00307                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a3f5b04fdf77c341b1c6139b585e29007">AddCompoundChild</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>);
<a name="l00308"></a>00308             }
<a name="l00309"></a>00309         }
<a name="l00310"></a>00310         <span class="comment">// graphically, the object hasn&#39;t change place, no need to update m_pGraphicController</span>
<a name="l00311"></a>00311     }
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a1ee8f226e79c48de476e184805ad9a52">00314</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a1ee8f226e79c48de476e184805ad9a52">KX_GameObject::RemoveParent</a>(<a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene)
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l00317"></a>00317     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>() &amp;&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent())
<a name="l00318"></a>00318     {
<a name="l00319"></a>00319         <span class="comment">// get the root object to remove us from compound object if needed</span>
<a name="l00320"></a>00320         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* rootobj = (<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a567f2f8e61a1fe15cfee58bb47f18c06">GetRootSGParent</a>()-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a5d43f7a1fb6fde5b37fa17b639095af1">GetSGClientObject</a>();
<a name="l00321"></a>00321         <span class="comment">// Set us to the right spot </span>
<a name="l00322"></a>00322         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ae9c53084a510b513b02dfe6f0448f34a">SetLocalScale</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetWorldScaling());
<a name="l00323"></a>00323         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a589c6b5ec03b113430cd912d5bd0fdc1">SetLocalOrientation</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetWorldOrientation());
<a name="l00324"></a>00324         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a30d80c0a5ade811c461435a6875aa77f">SetLocalPosition</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetWorldPosition());
<a name="l00325"></a>00325 
<a name="l00326"></a>00326         <span class="comment">// Remove us from our parent</span>
<a name="l00327"></a>00327         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a8090fb062d17a47fa1d4e320332ea2b4">DisconnectFromParent</a>();
<a name="l00328"></a>00328         <a class="code" href="../../d1/d73/classKX__GameObject.html#abd94bbbcf52249812ac7ddd8d61b079c">NodeUpdateGS</a>(0.f);
<a name="l00329"></a>00329         <span class="comment">// the object is now a root object, add it to the parentlist</span>
<a name="l00330"></a>00330         <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* rootlist = scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#ac0b0e3bb47162d2022402d0126f0f9ba">GetRootParentList</a>();
<a name="l00331"></a>00331         <span class="keywordflow">if</span> (!rootlist-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a42ec90a1f7c5e78b8262b948a1c823d1">SearchValue</a>(<span class="keyword">this</span>))
<a name="l00332"></a>00332             <span class="comment">// object was not in root list, add it now and increment ref count</span>
<a name="l00333"></a>00333             rootlist-&gt;<a class="code" href="../../d6/de7/classCListValue.html#ab20ce4d43a9f9aec11731aa4abddb059">Add</a>(<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l00334"></a>00334         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) 
<a name="l00335"></a>00335         {
<a name="l00336"></a>00336             <span class="comment">// in case this controller was added as a child shape to the parent</span>
<a name="l00337"></a>00337             <span class="keywordflow">if</span> (rootobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; 
<a name="l00338"></a>00338                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
<a name="l00339"></a>00339                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aadf71ea4a920eea8867e3c3542aa36fa">IsCompound</a>())
<a name="l00340"></a>00340             {
<a name="l00341"></a>00341                 rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#ad02bfa3c8ebece83d562a3f5cf0bcbfc">RemoveCompoundChild</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>);
<a name="l00342"></a>00342             }
<a name="l00343"></a>00343             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a0bb8514ac70d02aa453ff7675f9952e9">RestoreDynamics</a>();
<a name="l00344"></a>00344             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a02730ae51047d31eef0a5ba3c10e3665">IsDyna</a>() &amp;&amp; (rootobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>))
<a name="l00345"></a>00345             {
<a name="l00346"></a>00346                 <span class="comment">// dynamic object should remember the velocity they had while being parented</span>
<a name="l00347"></a>00347                 <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> childPoint = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1bbc34fe0c2345e55900eaa5943dfc51">GetWorldPosition</a>();
<a name="l00348"></a>00348                 <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> rootPoint = rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1bbc34fe0c2345e55900eaa5943dfc51">GetWorldPosition</a>();
<a name="l00349"></a>00349                 <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> relPoint;
<a name="l00350"></a>00350                 relPoint = (childPoint-rootPoint);
<a name="l00351"></a>00351                 <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> linVel = rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a2e7f39b6df8f5c71c5d1c1c79cc5d92a">GetVelocity</a>(relPoint);
<a name="l00352"></a>00352                 <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> angVel = rootobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a940aa1ad7b870ebfb2f30caa8dfa281e">GetAngularVelocity</a>();
<a name="l00353"></a>00353                 <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a630b2e7da0a606f8b40b178b889fbf17">SetLinearVelocity</a>(linVel, <span class="keyword">false</span>);
<a name="l00354"></a>00354                 <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aae9198ac97d35e91123a4e8d91d5a815">SetAngularVelocity</a>(angVel, <span class="keyword">false</span>);
<a name="l00355"></a>00355             }
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357         <span class="comment">// graphically, the object hasn&#39;t change place, no need to update m_pGraphicController</span>
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359 }
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">00361</a> <a class="code" href="../../de/dde/classBL__ActionManager.html">BL_ActionManager</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">KX_GameObject::GetActionManager</a>()
<a name="l00362"></a>00362 {
<a name="l00363"></a>00363     <span class="comment">// We only want to create an action manager if we need it</span>
<a name="l00364"></a>00364     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a>)
<a name="l00365"></a>00365     {       
<a name="l00366"></a>00366         <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>()-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a4fceb73cf9935594261572c31357bae3">AddAnimatedObject</a>(<span class="keyword">this</span>);
<a name="l00367"></a>00367         <a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a> = <span class="keyword">new</span> <a class="code" href="../../de/dde/classBL__ActionManager.html">BL_ActionManager</a>(<span class="keyword">this</span>);
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a>;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a5f4dce0366c2a87519c4deb3fc7b7e4e">00372</a> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a5f4dce0366c2a87519c4deb3fc7b7e4e">KX_GameObject::PlayAction</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name,
<a name="l00373"></a>00373                                 <span class="keywordtype">float</span> start,
<a name="l00374"></a>00374                                 <span class="keywordtype">float</span> end,
<a name="l00375"></a>00375                                 <span class="keywordtype">short</span> layer,
<a name="l00376"></a>00376                                 <span class="keywordtype">short</span> priority,
<a name="l00377"></a>00377                                 <span class="keywordtype">float</span> blendin,
<a name="l00378"></a>00378                                 <span class="keywordtype">short</span> play_mode,
<a name="l00379"></a>00379                                 <span class="keywordtype">float</span> layer_weight,
<a name="l00380"></a>00380                                 <span class="keywordtype">short</span> ipo_flags,
<a name="l00381"></a>00381                                 <span class="keywordtype">float</span> playback_speed)
<a name="l00382"></a>00382 {
<a name="l00383"></a>00383     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#ae4a8a633bb5162ca826a258b0ebefdaf">PlayAction</a>(name, start, end, layer, priority, blendin, play_mode, layer_weight, ipo_flags, playback_speed);
<a name="l00384"></a>00384 }
<a name="l00385"></a>00385 
<a name="l00386"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a4b37829b782ed6569bd55f3bc35c14e4">00386</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a4b37829b782ed6569bd55f3bc35c14e4">KX_GameObject::StopAction</a>(<span class="keywordtype">short</span> layer)
<a name="l00387"></a>00387 {
<a name="l00388"></a>00388     <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#a32a7e67c479b03e570bd766ca10ef461">StopAction</a>(layer);
<a name="l00389"></a>00389 }
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a0f16e6461da0ea7ddb1e018a7c89c63c">00391</a> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0f16e6461da0ea7ddb1e018a7c89c63c">KX_GameObject::IsActionDone</a>(<span class="keywordtype">short</span> layer)
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#a58a6a598b880acedafc3ac761bd5412d">IsActionDone</a>(layer);
<a name="l00394"></a>00394 }
<a name="l00395"></a>00395 
<a name="l00396"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#af9ad30f29c3160f0a40dc3774bd78ab3">00396</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#af9ad30f29c3160f0a40dc3774bd78ab3">KX_GameObject::UpdateActionManager</a>(<span class="keywordtype">float</span> curtime)
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398     <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#a18b68c804648b21509d3cdaf8d48be41">Update</a>(curtime);
<a name="l00399"></a>00399 }
<a name="l00400"></a>00400 
<a name="l00401"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#abeb6ef1f5d1c18a1d0fb27473112b203">00401</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#abeb6ef1f5d1c18a1d0fb27473112b203">KX_GameObject::GetActionFrame</a>(<span class="keywordtype">short</span> layer)
<a name="l00402"></a>00402 {
<a name="l00403"></a>00403     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#acd0ea3a598c92831e768d69e7f0debeb">GetActionFrame</a>(layer);
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00406"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aec7225a5879af36797da75138d4780ff">00406</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aec7225a5879af36797da75138d4780ff">KX_GameObject::SetActionFrame</a>(<span class="keywordtype">short</span> layer, <span class="keywordtype">float</span> frame)
<a name="l00407"></a>00407 {
<a name="l00408"></a>00408     <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#ac260b713d0ca7876337f30f0a6596ff7">SetActionFrame</a>(layer, frame);
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac0923f14c79806680ae456077894c7a6">00411</a> <a class="code" href="../../d1/d48/structbAction.html">bAction</a> *<a class="code" href="../../d1/d73/classKX__GameObject.html#ac0923f14c79806680ae456077894c7a6">KX_GameObject::GetCurrentAction</a>(<span class="keywordtype">short</span> layer)
<a name="l00412"></a>00412 {
<a name="l00413"></a>00413     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#a4597fa8b05c968f673fcd100e38c4407">GetCurrentAction</a>(layer);
<a name="l00414"></a>00414 }
<a name="l00415"></a>00415 
<a name="l00416"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac4a8e5ada33ed0580de3fb1d049384d5">00416</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4a8e5ada33ed0580de3fb1d049384d5">KX_GameObject::SetPlayMode</a>(<span class="keywordtype">short</span> layer, <span class="keywordtype">short</span> mode)
<a name="l00417"></a>00417 {
<a name="l00418"></a>00418     <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#af8dd06438bdda9a481c8cc0b0fff5b76">SetPlayMode</a>(layer, mode);
<a name="l00419"></a>00419 }
<a name="l00420"></a>00420 
<a name="l00421"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#abd1c4f3878da5f95e24bc080990fd7ad">00421</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#abd1c4f3878da5f95e24bc080990fd7ad">KX_GameObject::SetTimes</a>(<span class="keywordtype">short</span> layer, <span class="keywordtype">float</span> start, <span class="keywordtype">float</span> end)
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423     <a class="code" href="../../d1/d73/classKX__GameObject.html#aa432f00009fdbad0d92b51df9ae97755">GetActionManager</a>()-&gt;<a class="code" href="../../de/dde/classBL__ActionManager.html#a1d029e4ae7687f39a9fb2bda793825ec">SetTimes</a>(layer, start, end);
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a7e3ab49a8632923a1ab9ffcfd9afd729">00426</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a7e3ab49a8632923a1ab9ffcfd9afd729">KX_GameObject::ProcessReplica</a>()
<a name="l00427"></a>00427 {
<a name="l00428"></a>00428     <a class="code" href="../../d1/d73/classKX__GameObject.html#a7e3ab49a8632923a1ab9ffcfd9afd729">SCA_IObject::ProcessReplica</a>();
<a name="l00429"></a>00429     
<a name="l00430"></a>00430     <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00431"></a>00431     <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00432"></a>00432     <a class="code" href="../../d1/d73/classKX__GameObject.html#aafd469636369ecf524ce33f599d57752">m_pSGNode</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00433"></a>00433     <a class="code" href="../../d1/d73/classKX__GameObject.html#a7a9d80df1ab5b8d89da0e5286c2e0e29">m_pClient_info</a> = <span class="keyword">new</span> <a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html">KX_ClientObjectInfo</a>(*<a class="code" href="../../d1/d73/classKX__GameObject.html#a7a9d80df1ab5b8d89da0e5286c2e0e29">m_pClient_info</a>);
<a name="l00434"></a>00434     <a class="code" href="../../d1/d73/classKX__GameObject.html#a7a9d80df1ab5b8d89da0e5286c2e0e29">m_pClient_info</a>-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a4e09a739c17776b2ae907664321ba114">m_gameobject</a> = <span class="keyword">this</span>;
<a name="l00435"></a>00435     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a>)
<a name="l00436"></a>00436         <a class="code" href="../../d1/d73/classKX__GameObject.html#ac6943c9f2c878fddb466eecfecda4061">m_actionManager</a> = <span class="keyword">new</span> <a class="code" href="../../de/dde/classBL__ActionManager.html">BL_ActionManager</a>(<span class="keyword">this</span>);
<a name="l00437"></a>00437     <a class="code" href="../../da/d68/classSCA__IObject.html#a4a0cb89cb5b69c7ae747749ef2ee1eec">m_state</a> = 0;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a>* scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l00440"></a>00440     <a class="code" href="../../d7/d8d/classKX__ObstacleSimulation.html">KX_ObstacleSimulation</a>* obssimulation = scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a4bffcb8da9793ef6c6d42b707de79edc">GetObstacleSimulation</a>();
<a name="l00441"></a>00441     <span class="keyword">struct </span><a class="code" href="../../de/de7/structObject.html">Object</a>* blenderobject = <a class="code" href="../../d1/d73/classKX__GameObject.html#a33f8953dd41b83078db209e44d448b7c">GetBlenderObject</a>();
<a name="l00442"></a>00442     <span class="keywordflow">if</span> (obssimulation &amp;&amp; (blenderobject-&gt;<a class="code" href="../../de/de7/structObject.html#aa98e0216a27ddd692f1ec329ce4a4db4">gameflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a99cbfef9c9f13a669a05c058ef16a152">OB_HASOBSTACLE</a>))
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         obssimulation-&gt;<a class="code" href="../../d7/d8d/classKX__ObstacleSimulation.html#a9e47ed5ec91bc82b06e1e7bacafb822e">AddObstacleForObj</a>(<span class="keyword">this</span>);
<a name="l00445"></a>00445     }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="preprocessor">#ifdef WITH_PYTHON</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (m_attr_dict)
<a name="l00449"></a>00449         m_attr_dict= PyDict_Copy(m_attr_dict);
<a name="l00450"></a>00450 <span class="preprocessor">#endif</span>
<a name="l00451"></a>00451 <span class="preprocessor"></span>        
<a name="l00452"></a>00452 }
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a5625ae1686488778912e7065f57fffcf">00454</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a5625ae1686488778912e7065f57fffcf">setGraphicController_recursive</a>(<a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456     <a class="code" href="../../df/d3b/SG__Node_8h.html#a8ae32373b02caa826276c36fe07ecb76">NodeList</a>&amp; children = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#aa0d15b7e05705e40a1525864cd7499d1">GetSGChildren</a>();
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     <span class="keywordflow">for</span> (NodeList::iterator childit = children.begin();!(childit==children.end());++childit)
<a name="l00459"></a>00459     {
<a name="l00460"></a>00460         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* childnode = (*childit);
<a name="l00461"></a>00461         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *clientgameobj = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>( (*childit)-&gt;GetSGClientObject());
<a name="l00462"></a>00462         <span class="keywordflow">if</span> (clientgameobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// This is a GameObject</span>
<a name="l00463"></a>00463             clientgameobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#adc5ba175fb7d47e8ece0d54992d41ffb">ActivateGraphicController</a>(<span class="keyword">false</span>);
<a name="l00464"></a>00464         
<a name="l00465"></a>00465         <span class="comment">// if the childobj is NULL then this may be an inverse parent link</span>
<a name="l00466"></a>00466         <span class="comment">// so a non recursive search should still look down this node.</span>
<a name="l00467"></a>00467         <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a5625ae1686488778912e7065f57fffcf">setGraphicController_recursive</a>(childnode);
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469 }
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#adc5ba175fb7d47e8ece0d54992d41ffb">00472</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#adc5ba175fb7d47e8ece0d54992d41ffb">KX_GameObject::ActivateGraphicController</a>(<span class="keywordtype">bool</span> recurse)
<a name="l00473"></a>00473 {
<a name="l00474"></a>00474     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>)
<a name="l00475"></a>00475     {
<a name="l00476"></a>00476         <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>-&gt;<a class="code" href="../../db/d53/classPHY__IGraphicController.html#aeb87c88c5ad6969fc57d4e0f01a267db">Activate</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a>);
<a name="l00477"></a>00477     }
<a name="l00478"></a>00478     <span class="keywordflow">if</span> (recurse)
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480         <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a5625ae1686488778912e7065f57fffcf">setGraphicController_recursive</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>());
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aeb79cf6bfe56d46df56d7f83c8b5c6f4">00485</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#aeb79cf6bfe56d46df56d7f83c8b5c6f4">KX_GameObject::GetReplica</a>()
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* replica = <span class="keyword">new</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ad4e4c000357f3e54e5d5c58fbb97349c">KX_GameObject</a>(*<span class="keyword">this</span>);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489     <span class="comment">// this will copy properties and so on...</span>
<a name="l00490"></a>00490     replica-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a7e3ab49a8632923a1ab9ffcfd9afd729">ProcessReplica</a>();
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <span class="keywordflow">return</span> replica;
<a name="l00493"></a>00493 }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a764954cfdd4f3703564be0d0415344a7">00497</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a764954cfdd4f3703564be0d0415344a7">KX_GameObject::ApplyForce</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; force,<span class="keywordtype">bool</span> local)
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00500"></a>00500         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aba43538fdc3720523d42a30833a36a53">ApplyForce</a>(force,local);
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 
<a name="l00504"></a>00504 
<a name="l00505"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a53765d33d915637560480a5e1353e727">00505</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a53765d33d915637560480a5e1353e727">KX_GameObject::ApplyTorque</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; torque,<span class="keywordtype">bool</span> local)
<a name="l00506"></a>00506 {
<a name="l00507"></a>00507     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00508"></a>00508         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a5246198d1329f303a51ca9440fde4a5e">ApplyTorque</a>(torque,local);
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a646c733ca94464318da5ea80ef6cb023">00513</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a646c733ca94464318da5ea80ef6cb023">KX_GameObject::ApplyMovement</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; <a class="code" href="../../de/de7/structObject.html#a64775ee54d6d8362df47b69bc7e07873">dloc</a>,<span class="keywordtype">bool</span> local)
<a name="l00514"></a>00514 {
<a name="l00515"></a>00515     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) 
<a name="l00516"></a>00516     {
<a name="l00517"></a>00517         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) <span class="comment">// (IsDynamic())</span>
<a name="l00518"></a>00518         {
<a name="l00519"></a>00519             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a03d2c09bb2c73164591f5402afbc8e5f">RelativeTranslate</a>(dloc,local);
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a8d6d4a64d101b9d05c574202019c83af">RelativeTranslate</a>(dloc,<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent(),local);
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00527"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a220a14fb8b9b7cf8749492d31f02ae44">00527</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a220a14fb8b9b7cf8749492d31f02ae44">KX_GameObject::ApplyRotation</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; <a class="code" href="../../de/de7/structObject.html#a31c1663b026c3fdc7861f0b37dc1dfc2">drot</a>,<span class="keywordtype">bool</span> local)
<a name="l00528"></a>00528 {
<a name="l00529"></a>00529     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> rotmat(drot);
<a name="l00530"></a>00530     
<a name="l00531"></a>00531     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) {
<a name="l00532"></a>00532         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a202e119878338df632f2b583a2196a03">RelativeRotate</a>(rotmat,local);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) { <span class="comment">// (IsDynamic())</span>
<a name="l00535"></a>00535             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a2457c2ad424ccc8f785e5a7228c30fb3">RelativeRotate</a>(rotmat,local); 
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538 }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 
<a name="l00545"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a8557640aa39c9a672ecefe6ea69c0fbb">00545</a> <span class="keywordtype">double</span>* <a class="code" href="../../d1/d73/classKX__GameObject.html#a8557640aa39c9a672ecefe6ea69c0fbb">KX_GameObject::GetOpenGLMatrix</a>()
<a name="l00546"></a>00546 {
<a name="l00547"></a>00547     <span class="comment">// todo: optimize and only update if necessary</span>
<a name="l00548"></a>00548     <span class="keywordtype">double</span>* fl = <a class="code" href="../../d1/d73/classKX__GameObject.html#ad26279d75b4ced5c575fc528d3bd6535">m_OpenGL_4x4Matrix</a>.<a class="code" href="../../d5/de3/classMT__CmMatrix4x4.html#a20173f0ca48270c3c8588906d399fd10">getPointer</a>();
<a name="l00549"></a>00549     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) {
<a name="l00550"></a>00550         <a class="code" href="../../d0/df9/classMT__Transform.html">MT_Transform</a> trans;
<a name="l00551"></a>00551     
<a name="l00552"></a>00552         trans.<a class="code" href="../../d0/df9/classMT__Transform.html#adaa5cc295f079b768267b53420477665">setOrigin</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetWorldPosition());
<a name="l00553"></a>00553         trans.<a class="code" href="../../d0/df9/classMT__Transform.html#a3186dc6aa9e13a4c11970787b4b39645">setBasis</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetWorldOrientation());
<a name="l00554"></a>00554     
<a name="l00555"></a>00555         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scaling = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a3078d7872c2ae7a194546c96b09ff301">GetWorldScaling</a>();
<a name="l00556"></a>00556         <a class="code" href="../../d1/d73/classKX__GameObject.html#aa20e61411f63bf9faf1ad1ecc9c0befd">m_bIsNegativeScaling</a> = ((scaling[0] &lt; 0.0) ^ (scaling[1] &lt; 0.0) ^ (scaling[2] &lt; 0.0)) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l00557"></a>00557         trans.<a class="code" href="../../d0/df9/classMT__Transform.html#a09ee6fe7457642e03156c859d6156ca5">scale</a>(scaling[0], scaling[1], scaling[2]);
<a name="l00558"></a>00558         trans.<a class="code" href="../../d0/df9/classMT__Transform.html#af38baef2750c4e2867f13a61afb9cef4">getValue</a>(fl);
<a name="l00559"></a>00559         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#aa371c31f0a6c412231248408158defe0">ClearDirty</a>();
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561     <span class="keywordflow">return</span> fl;
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a004d0978382497838a3481de3c57cf3d">00564</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a004d0978382497838a3481de3c57cf3d">KX_GameObject::UpdateBlenderObjectMatrix</a>(<a class="code" href="../../de/de7/structObject.html">Object</a>* blendobj)
<a name="l00565"></a>00565 {
<a name="l00566"></a>00566     <span class="keywordflow">if</span> (!blendobj)
<a name="l00567"></a>00567         blendobj = <a class="code" href="../../d1/d73/classKX__GameObject.html#a4a69b67118324dff113873fad95aef32">m_pBlenderObject</a>;
<a name="l00568"></a>00568     <span class="keywordflow">if</span> (blendobj) {
<a name="l00569"></a>00569         <span class="keyword">const</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>&amp; <a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>();
<a name="l00570"></a>00570         <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; scale = <a class="code" href="../../d1/d73/classKX__GameObject.html#a214226e36095439d638bb17d0057f88c">NodeGetWorldScaling</a>();
<a name="l00571"></a>00571         <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; pos = <a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>();
<a name="l00572"></a>00572         rot.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a7f3657640cc6d479d1d965262a560f9c">getValue</a>(blendobj-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[0]);
<a name="l00573"></a>00573         pos.<a class="code" href="../../d8/da2/classMT__Tuple3.html#a860fc415de033c454f55d115fcb0210f">getValue</a>(blendobj-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[3]);
<a name="l00574"></a>00574         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a614c21caf4e6d770c7a49006a7f734b4">mul_v3_fl</a>(blendobj-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[0], scale[0]);
<a name="l00575"></a>00575         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a614c21caf4e6d770c7a49006a7f734b4">mul_v3_fl</a>(blendobj-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[1], scale[1]);
<a name="l00576"></a>00576         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a614c21caf4e6d770c7a49006a7f734b4">mul_v3_fl</a>(blendobj-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[2], scale[2]);
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578 }
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a1a018532e6f4b42433f05a130d4c2f6a">00580</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a1a018532e6f4b42433f05a130d4c2f6a">KX_GameObject::AddMeshUser</a>()
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>.size();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00583"></a>00583     {
<a name="l00584"></a>00584         <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;AddMeshUser(<span class="keyword">this</span>, &amp;<a class="code" href="../../d1/d73/classKX__GameObject.html#a87cafa3a8c6df40de6840dfd9286ebe6">m_meshSlots</a>, <a class="code" href="../../d1/d73/classKX__GameObject.html#abb4098bf9868e54fc875379eb10009f7">GetDeformer</a>());
<a name="l00585"></a>00585     }
<a name="l00586"></a>00586     <span class="comment">// set the part of the mesh slot that never change</span>
<a name="l00587"></a>00587     <span class="keywordtype">double</span>* fl = <a class="code" href="../../d1/d73/classKX__GameObject.html#abcaefb574b7112915f1a2e9f23650cdc">GetOpenGLMatrixPtr</a>()-&gt;<a class="code" href="../../d5/de3/classMT__CmMatrix4x4.html#a20173f0ca48270c3c8588906d399fd10">getPointer</a>();
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     <a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html">SG_QList::iterator&lt;RAS_MeshSlot&gt;</a> mit(<a class="code" href="../../d1/d73/classKX__GameObject.html#a87cafa3a8c6df40de6840dfd9286ebe6">m_meshSlots</a>);
<a name="l00590"></a>00590 <span class="comment">//  RAS_MeshSlot* ms;</span>
<a name="l00591"></a>00591     <span class="keywordflow">for</span> (mit.<a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html#a28f1e18aed260785e9c0f8f0479a702d">begin</a>(); !mit.<a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html#a2e4dfe373e9c9d824f985a78e201068a">end</a>(); ++mit)
<a name="l00592"></a>00592     {
<a name="l00593"></a>00593         (*mit)-&gt;m_OpenGLMatrix = fl;
<a name="l00594"></a>00594     }
<a name="l00595"></a>00595     <a class="code" href="../../d1/d73/classKX__GameObject.html#a79d8df09113d6a4bf14420b92503f0f3">UpdateBuckets</a>(<span class="keyword">false</span>);
<a name="l00596"></a>00596 }
<a name="l00597"></a>00597 
<a name="l00598"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a7ac51b5e286a6a320f30dc5796596921">00598</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a7ac51b5e286a6a320f30dc5796596921">UpdateBuckets_recursive</a>(<a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node)
<a name="l00599"></a>00599 {
<a name="l00600"></a>00600     <a class="code" href="../../df/d3b/SG__Node_8h.html#a8ae32373b02caa826276c36fe07ecb76">NodeList</a>&amp; children = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#aa0d15b7e05705e40a1525864cd7499d1">GetSGChildren</a>();
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     <span class="keywordflow">for</span> (NodeList::iterator childit = children.begin();!(childit==children.end());++childit)
<a name="l00603"></a>00603     {
<a name="l00604"></a>00604         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* childnode = (*childit);
<a name="l00605"></a>00605         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *clientgameobj = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>( (*childit)-&gt;GetSGClientObject());
<a name="l00606"></a>00606         <span class="keywordflow">if</span> (clientgameobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// This is a GameObject</span>
<a name="l00607"></a>00607             clientgameobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a79d8df09113d6a4bf14420b92503f0f3">UpdateBuckets</a>(0);
<a name="l00608"></a>00608         
<a name="l00609"></a>00609         <span class="comment">// if the childobj is NULL then this may be an inverse parent link</span>
<a name="l00610"></a>00610         <span class="comment">// so a non recursive search should still look down this node.</span>
<a name="l00611"></a>00611         <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a7ac51b5e286a6a320f30dc5796596921">UpdateBuckets_recursive</a>(childnode);
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 
<a name="l00615"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a79d8df09113d6a4bf14420b92503f0f3">00615</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a79d8df09113d6a4bf14420b92503f0f3">KX_GameObject::UpdateBuckets</a>( <span class="keywordtype">bool</span> recursive )
<a name="l00616"></a>00616 {
<a name="l00617"></a>00617     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) {
<a name="l00618"></a>00618         <a class="code" href="../../d2/d4a/classRAS__MeshSlot.html">RAS_MeshSlot</a> *ms;
<a name="l00619"></a>00619 
<a name="l00620"></a>00620         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;IsDirty())
<a name="l00621"></a>00621             <a class="code" href="../../d1/d73/classKX__GameObject.html#a8557640aa39c9a672ecefe6ea69c0fbb">GetOpenGLMatrix</a>();
<a name="l00622"></a>00622 
<a name="l00623"></a>00623         <a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html">SG_QList::iterator&lt;RAS_MeshSlot&gt;</a> mit(<a class="code" href="../../d1/d73/classKX__GameObject.html#a87cafa3a8c6df40de6840dfd9286ebe6">m_meshSlots</a>);
<a name="l00624"></a>00624         <span class="keywordflow">for</span> (mit.<a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html#a28f1e18aed260785e9c0f8f0479a702d">begin</a>(); !mit.<a class="code" href="../../d9/d55/classSG__QList_1_1iterator.html#a2e4dfe373e9c9d824f985a78e201068a">end</a>(); ++mit)
<a name="l00625"></a>00625         {
<a name="l00626"></a>00626             ms = *mit;
<a name="l00627"></a>00627             ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a4a1b12cde4cf7bf8d7d2e9099a84e6bd">m_bObjectColor</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a98907f6dc070636e840f249c55e453fc">m_bUseObjectColor</a>;
<a name="l00628"></a>00628             ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a93fb5e5b42aeb0f5463bc3fc8d11cc43">m_RGBAcolor</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a2ae26615234a4f04db5f871ee99c89e4">m_objectColor</a>;
<a name="l00629"></a>00629             ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#ad2fcd88a1b96d0005c88712524b5cbb6">m_bVisible</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a>;
<a name="l00630"></a>00630             ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a50825f3590226f5ec298d8bc67a1831d">m_bCulled</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0e0d9a0580d3b5040dd29a6c4697a992">m_bCulled</a> || !<a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a>;
<a name="l00631"></a>00631             <span class="keywordflow">if</span> (!ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a50825f3590226f5ec298d8bc67a1831d">m_bCulled</a>) 
<a name="l00632"></a>00632                 ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a951323c52b7fd959bc54d838f8571843">m_bucket</a>-&gt;<a class="code" href="../../de/dc6/classRAS__MaterialBucket.html#af7582d1c523bd3a8bb51eec52ea86910">ActivateMesh</a>(ms);
<a name="l00633"></a>00633             
<a name="l00634"></a>00634             <span class="comment">/* split if necessary */</span>
<a name="l00635"></a>00635 <span class="preprocessor">#ifdef USE_SPLIT</span>
<a name="l00636"></a>00636 <span class="preprocessor"></span>            ms-&gt;<a class="code" href="../../d2/d4a/classRAS__MeshSlot.html#a096144eedb2850ecb1d97e095c30c201">Split</a>();
<a name="l00637"></a>00637 <span class="preprocessor">#endif</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span>        }
<a name="l00639"></a>00639     
<a name="l00640"></a>00640         <span class="keywordflow">if</span> (recursive) {
<a name="l00641"></a>00641             <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a7ac51b5e286a6a320f30dc5796596921">UpdateBuckets_recursive</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>());
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#adc5a6f8bb55a78231a8a5c86de7cc10d">00646</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#adc5a6f8bb55a78231a8a5c86de7cc10d">KX_GameObject::RemoveMeshes</a>()
<a name="l00647"></a>00647 {
<a name="l00648"></a>00648     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>.size();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00649"></a>00649         <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;RemoveFromBuckets(<span class="keyword">this</span>);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651     <span class="comment">//note: meshes can be shared, and are deleted by KX_BlenderSceneConverter</span>
<a name="l00652"></a>00652 
<a name="l00653"></a>00653     <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>.clear();
<a name="l00654"></a>00654 }
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a35d788740b1df08beecc2375c371de26">00656</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a35d788740b1df08beecc2375c371de26">KX_GameObject::UpdateTransform</a>()
<a name="l00657"></a>00657 {
<a name="l00658"></a>00658     <span class="comment">// HACK: saves function call for dynamic object, they are handled differently</span>
<a name="l00659"></a>00659     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; !<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a02730ae51047d31eef0a5ba3c10e3665">IsDyna</a>())
<a name="l00660"></a>00660         <span class="comment">// Note that for Bullet, this does not even update the transform of static object</span>
<a name="l00661"></a>00661         <span class="comment">// but merely sets there collision flag to &quot;kinematic&quot; because the synchronization is </span>
<a name="l00662"></a>00662         <span class="comment">// done during physics simulation</span>
<a name="l00663"></a>00663         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#af5bd36f215ed5086ff3a52469180dbbe">SetSumoTransform</a>(<span class="keyword">true</span>);
<a name="l00664"></a>00664     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>)
<a name="l00665"></a>00665         <span class="comment">// update the culling tree</span>
<a name="l00666"></a>00666         <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>-&gt;<a class="code" href="../../db/d53/classPHY__IGraphicController.html#aff0e0a235a77a40865bdb4ca3969d8aa">SetGraphicTransform</a>();
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 }
<a name="l00669"></a>00669 
<a name="l00670"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a87a54772e4db69c1605def878723b495">00670</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a87a54772e4db69c1605def878723b495">KX_GameObject::UpdateTransformFunc</a>(<a class="code" href="../../da/d03/classSG__IObject.html">SG_IObject</a>* node, <span class="keywordtype">void</span>* gameobj, <span class="keywordtype">void</span>* scene)
<a name="l00671"></a>00671 {
<a name="l00672"></a>00672     ((<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)gameobj)-&gt;UpdateTransform();
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aa3a4dbbd2213ecc666cf02e0278eb6d1">00675</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa3a4dbbd2213ecc666cf02e0278eb6d1">KX_GameObject::SynchronizeTransform</a>()
<a name="l00676"></a>00676 {
<a name="l00677"></a>00677     <span class="comment">// only used for sensor object, do full synchronization as bullet doesn&#39;t do it</span>
<a name="l00678"></a>00678     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00679"></a>00679         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a9bcf40baf3c5935e552a567dc1fab4a9">SetTransform</a>();
<a name="l00680"></a>00680     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>)
<a name="l00681"></a>00681         <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>-&gt;<a class="code" href="../../db/d53/classPHY__IGraphicController.html#aff0e0a235a77a40865bdb4ca3969d8aa">SetGraphicTransform</a>();
<a name="l00682"></a>00682 }
<a name="l00683"></a>00683 
<a name="l00684"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aec6ef245bc2b5d836c239d2f8886711d">00684</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aec6ef245bc2b5d836c239d2f8886711d">KX_GameObject::SynchronizeTransformFunc</a>(<a class="code" href="../../da/d03/classSG__IObject.html">SG_IObject</a>* node, <span class="keywordtype">void</span>* gameobj, <span class="keywordtype">void</span>* scene)
<a name="l00685"></a>00685 {
<a name="l00686"></a>00686     ((<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)gameobj)-&gt;SynchronizeTransform();
<a name="l00687"></a>00687 }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689 
<a name="l00690"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a97fcb2e7a782fe7f6b497531aaf36208">00690</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a97fcb2e7a782fe7f6b497531aaf36208">KX_GameObject::SetDebugColor</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bgra)
<a name="l00691"></a>00691 {
<a name="l00692"></a>00692     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>.size();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00693"></a>00693         <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;DebugColor(bgra);  
<a name="l00694"></a>00694 }
<a name="l00695"></a>00695 
<a name="l00696"></a>00696 
<a name="l00697"></a>00697 
<a name="l00698"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a2f86c3d64587f6621dede2f929c9a1a7">00698</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a2f86c3d64587f6621dede2f929c9a1a7">KX_GameObject::ResetDebugColor</a>()
<a name="l00699"></a>00699 {
<a name="l00700"></a>00700     <a class="code" href="../../d1/d73/classKX__GameObject.html#a97fcb2e7a782fe7f6b497531aaf36208">SetDebugColor</a>(0xff000000);
<a name="l00701"></a>00701 }
<a name="l00702"></a>00702 
<a name="l00703"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a169c86e336956d2f66cb1adedb1f86dd">00703</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a169c86e336956d2f66cb1adedb1f86dd">KX_GameObject::InitIPO</a>(<span class="keywordtype">bool</span> ipo_as_force,
<a name="l00704"></a>00704                             <span class="keywordtype">bool</span> ipo_add,
<a name="l00705"></a>00705                             <span class="keywordtype">bool</span> ipo_local)
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707     SGControllerList::iterator it = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a65ffd2fdff176c9b9708b7638d35a367" title="Needed for replication.">GetSGControllerList</a>().begin();
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <span class="keywordflow">while</span> (it != <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGControllerList().end()) {
<a name="l00710"></a>00710         (*it)-&gt;SetOption(<a class="code" href="../../d6/d9e/classSG__Controller.html#a54fb83ad7d92444b864cb5841cb31ddea941cc04c28ff196c1c6a38fb4101a7f2">SG_Controller::SG_CONTR_IPO_RESET</a>, <span class="keyword">true</span>);
<a name="l00711"></a>00711         (*it)-&gt;SetOption(<a class="code" href="../../d6/d9e/classSG__Controller.html#a54fb83ad7d92444b864cb5841cb31ddea2919951cf159c83863223f6e6defb4bc">SG_Controller::SG_CONTR_IPO_IPO_AS_FORCE</a>, ipo_as_force);
<a name="l00712"></a>00712         (*it)-&gt;SetOption(<a class="code" href="../../d6/d9e/classSG__Controller.html#a54fb83ad7d92444b864cb5841cb31ddea6b197403d2c01ea765d8092634216d72">SG_Controller::SG_CONTR_IPO_IPO_ADD</a>, ipo_add);
<a name="l00713"></a>00713         (*it)-&gt;SetOption(<a class="code" href="../../d6/d9e/classSG__Controller.html#a54fb83ad7d92444b864cb5841cb31ddea88bae788b3f64a7387ea69ccf6da7ce1">SG_Controller::SG_CONTR_IPO_LOCAL</a>, ipo_local);
<a name="l00714"></a>00714         it++;
<a name="l00715"></a>00715     }
<a name="l00716"></a>00716 } 
<a name="l00717"></a>00717 
<a name="l00718"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a19d6e2020cb8c5060e29acbcaed9aa4b">00718</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a19d6e2020cb8c5060e29acbcaed9aa4b">KX_GameObject::UpdateIPO</a>(<span class="keywordtype">float</span> curframetime,
<a name="l00719"></a>00719                               <span class="keywordtype">bool</span> recurse) 
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721     <span class="comment">// just the &#39;normal&#39; update procedure.</span>
<a name="l00722"></a>00722     <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a64b7e1dafecaa31087f9b75a40bb8e20">SetSimulatedTime</a>(curframetime,recurse);
<a name="l00723"></a>00723     <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a791ba43c770c33dc637bb61f93152745">UpdateWorldData</a>(curframetime);
<a name="l00724"></a>00724     <a class="code" href="../../d1/d73/classKX__GameObject.html#a35d788740b1df08beecc2375c371de26">UpdateTransform</a>();
<a name="l00725"></a>00725 }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 <span class="comment">// IPO update</span>
<a name="l00728"></a>00728 <span class="keywordtype">void</span> 
<a name="l00729"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac7b9b655d6949f08117997ee70e6ac7a">00729</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac7b9b655d6949f08117997ee70e6ac7a">KX_GameObject::UpdateMaterialData</a>(
<a name="l00730"></a>00730         <a class="code" href="../../db/d05/STR__String_8h.html#a74cb93d430006e784da73b8ca406ee6e">dword</a> matname_hash,
<a name="l00731"></a>00731         <a class="code" href="../../d2/dfc/classMT__Vector4.html">MT_Vector4</a> rgba,
<a name="l00732"></a>00732         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> specrgb,
<a name="l00733"></a>00733         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> hard,
<a name="l00734"></a>00734         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> <a class="code" href="../../d1/ddb/shadeoutput_8c.html#ad41f5027c52d07f258337a69bddd7ded">spec</a>,
<a name="l00735"></a>00735         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> ref,
<a name="l00736"></a>00736         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> emit,
<a name="l00737"></a>00737         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> alpha
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     )
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741     <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#ad755772f4633cd0ef94a05738ffb5e84">mesh</a> = 0;
<a name="l00742"></a>00742     <span class="keywordflow">if</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)mesh &lt; <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>.size()) &amp;&amp; mesh &gt;= 0) {
<a name="l00743"></a>00743         list&lt;RAS_MeshMaterial&gt;::iterator mit = <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../de/de7/structObject.html#ad755772f4633cd0ef94a05738ffb5e84">mesh</a>]-&gt;GetFirstMaterial();
<a name="l00744"></a>00744 
<a name="l00745"></a>00745         <span class="keywordflow">for</span> (; mit != <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../de/de7/structObject.html#ad755772f4633cd0ef94a05738ffb5e84">mesh</a>]-&gt;GetLastMaterial(); ++mit)
<a name="l00746"></a>00746         {
<a name="l00747"></a>00747             <a class="code" href="../../d1/d00/classRAS__IPolyMaterial.html">RAS_IPolyMaterial</a>* poly = mit-&gt;m_bucket-&gt;GetPolyMaterial();
<a name="l00748"></a>00748 
<a name="l00749"></a>00749             <span class="keywordflow">if</span> (poly-&gt;<a class="code" href="../../d1/d00/classRAS__IPolyMaterial.html#a7bd4304a59852b7735385966fc4d6092">GetFlag</a>() &amp; <a class="code" href="../../dc/da4/RAS__IPolygonMaterial_8h.html#ad7eead3344431dbbe01a27f3df2eb14fa7f731696da676a0b2f7bb0dec1210248">RAS_BLENDERMAT</a> )
<a name="l00750"></a>00750             {
<a name="l00751"></a>00751                 <a class="code" href="../../d2/d90/classKX__BlenderMaterial.html">KX_BlenderMaterial</a> *m =  <span class="keyword">static_cast&lt;</span><a class="code" href="../../d2/d90/classKX__BlenderMaterial.html">KX_BlenderMaterial</a>*<span class="keyword">&gt;</span>(poly);
<a name="l00752"></a>00752                 
<a name="l00753"></a>00753                 <span class="keywordflow">if</span> (matname_hash == 0)
<a name="l00754"></a>00754                 {
<a name="l00755"></a>00755                     m-&gt;<a class="code" href="../../d2/d90/classKX__BlenderMaterial.html#a8d6948dd21dd1192381747306c778070">UpdateIPO</a>(rgba, specrgb,hard,spec,ref,emit, alpha);
<a name="l00756"></a>00756                     <span class="comment">// if mesh has only one material attached to it then use original hack with no need to edit vertices (better performance)</span>
<a name="l00757"></a>00757                     <a class="code" href="../../d1/d73/classKX__GameObject.html#a95fa44d6d2c10d00fdb0534a0cfb6496">SetObjectColor</a>(rgba);
<a name="l00758"></a>00758                 }
<a name="l00759"></a>00759                 <span class="keywordflow">else</span>
<a name="l00760"></a>00760                 {
<a name="l00761"></a>00761                     <span class="keywordflow">if</span> (matname_hash == poly-&gt;<a class="code" href="../../d1/d00/classRAS__IPolyMaterial.html#a32174e3ea468e203a44fce249842bc76">GetMaterialNameHash</a>())
<a name="l00762"></a>00762                     {
<a name="l00763"></a>00763                         m-&gt;<a class="code" href="../../d2/d90/classKX__BlenderMaterial.html#a8d6948dd21dd1192381747306c778070">UpdateIPO</a>(rgba, specrgb,hard,spec,ref,emit, alpha);
<a name="l00764"></a>00764                         <a class="code" href="../../d1/d73/classKX__GameObject.html#ae4c341ccab0cbc380f8336509310d0cf">m_meshes</a>[<a class="code" href="../../de/de7/structObject.html#ad755772f4633cd0ef94a05738ffb5e84">mesh</a>]-&gt;SetVertexColor(poly,rgba);
<a name="l00765"></a>00765                         
<a name="l00766"></a>00766                         <span class="comment">// no break here, because one blender material can be split into several game engine materials</span>
<a name="l00767"></a>00767                         <span class="comment">// (e.g. one uvsphere material is split into one material at poles with ras_mode TRIANGLE and one material for the body</span>
<a name="l00768"></a>00768                         <span class="comment">// if here was a break then would miss some vertices if material was split</span>
<a name="l00769"></a>00769                     }
<a name="l00770"></a>00770                 }
<a name="l00771"></a>00771             }
<a name="l00772"></a>00772         }
<a name="l00773"></a>00773     }
<a name="l00774"></a>00774 }
<a name="l00775"></a>00775 <span class="keywordtype">bool</span>
<a name="l00776"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aaeabe9e8554e43eb8d62fa25d3808bc3">00776</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#aaeabe9e8554e43eb8d62fa25d3808bc3">KX_GameObject::GetVisible</a>(
<a name="l00777"></a>00777     <span class="keywordtype">void</span>
<a name="l00778"></a>00778     )
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a>;
<a name="l00781"></a>00781 }
<a name="l00782"></a>00782 
<a name="l00783"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a3dfcf5f0132a7af9d3b592f115d134e1">00783</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a3dfcf5f0132a7af9d3b592f115d134e1">setVisible_recursive</a>(<a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node, <span class="keywordtype">bool</span> v)
<a name="l00784"></a>00784 {
<a name="l00785"></a>00785     <a class="code" href="../../df/d3b/SG__Node_8h.html#a8ae32373b02caa826276c36fe07ecb76">NodeList</a>&amp; children = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#aa0d15b7e05705e40a1525864cd7499d1">GetSGChildren</a>();
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     <span class="keywordflow">for</span> (NodeList::iterator childit = children.begin();!(childit==children.end());++childit)
<a name="l00788"></a>00788     {
<a name="l00789"></a>00789         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* childnode = (*childit);
<a name="l00790"></a>00790         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *clientgameobj = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>( (*childit)-&gt;GetSGClientObject());
<a name="l00791"></a>00791         <span class="keywordflow">if</span> (clientgameobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// This is a GameObject</span>
<a name="l00792"></a>00792             clientgameobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ad375ebbacffde2939f5eadfe86c4e1d7">SetVisible</a>(v, 0);
<a name="l00793"></a>00793         
<a name="l00794"></a>00794         <span class="comment">// if the childobj is NULL then this may be an inverse parent link</span>
<a name="l00795"></a>00795         <span class="comment">// so a non recursive search should still look down this node.</span>
<a name="l00796"></a>00796         <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a3dfcf5f0132a7af9d3b592f115d134e1">setVisible_recursive</a>(childnode, v);
<a name="l00797"></a>00797     }
<a name="l00798"></a>00798 }
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 <span class="keywordtype">void</span>
<a name="l00802"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ad375ebbacffde2939f5eadfe86c4e1d7">00802</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#ad375ebbacffde2939f5eadfe86c4e1d7">KX_GameObject::SetVisible</a>(
<a name="l00803"></a>00803     <span class="keywordtype">bool</span> v,
<a name="l00804"></a>00804     <span class="keywordtype">bool</span> recursive
<a name="l00805"></a>00805     )
<a name="l00806"></a>00806 {
<a name="l00807"></a>00807     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) {
<a name="l00808"></a>00808         <a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a> = v;
<a name="l00809"></a>00809         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>)
<a name="l00810"></a>00810             <a class="code" href="../../d1/d73/classKX__GameObject.html#a31adf3bca24e15ace3e75484c12c1dbf">m_pGraphicController</a>-&gt;<a class="code" href="../../db/d53/classPHY__IGraphicController.html#aeb87c88c5ad6969fc57d4e0f01a267db">Activate</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a64c73e790701031d8240ea6d8733188b">m_bVisible</a>);
<a name="l00811"></a>00811         <span class="keywordflow">if</span> (recursive)
<a name="l00812"></a>00812             <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a3dfcf5f0132a7af9d3b592f115d134e1">setVisible_recursive</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>(), v);
<a name="l00813"></a>00813     }
<a name="l00814"></a>00814 }
<a name="l00815"></a>00815 
<a name="l00816"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#ae8c72bdbfe616145d5ba6bfe6a3da727">00816</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#ae8c72bdbfe616145d5ba6bfe6a3da727">setOccluder_recursive</a>(<a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node, <span class="keywordtype">bool</span> v)
<a name="l00817"></a>00817 {
<a name="l00818"></a>00818     <a class="code" href="../../df/d3b/SG__Node_8h.html#a8ae32373b02caa826276c36fe07ecb76">NodeList</a>&amp; children = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#aa0d15b7e05705e40a1525864cd7499d1">GetSGChildren</a>();
<a name="l00819"></a>00819 
<a name="l00820"></a>00820     <span class="keywordflow">for</span> (NodeList::iterator childit = children.begin();!(childit==children.end());++childit)
<a name="l00821"></a>00821     {
<a name="l00822"></a>00822         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* childnode = (*childit);
<a name="l00823"></a>00823         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *clientgameobj = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>( (*childit)-&gt;GetSGClientObject());
<a name="l00824"></a>00824         <span class="keywordflow">if</span> (clientgameobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// This is a GameObject</span>
<a name="l00825"></a>00825             clientgameobj-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a1fae7b469d6f4bcbd4e4aa10ddc76a67">SetOccluder</a>(v, <span class="keyword">false</span>);
<a name="l00826"></a>00826         
<a name="l00827"></a>00827         <span class="comment">// if the childobj is NULL then this may be an inverse parent link</span>
<a name="l00828"></a>00828         <span class="comment">// so a non recursive search should still look down this node.</span>
<a name="l00829"></a>00829         <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#ae8c72bdbfe616145d5ba6bfe6a3da727">setOccluder_recursive</a>(childnode, v);
<a name="l00830"></a>00830     }
<a name="l00831"></a>00831 }
<a name="l00832"></a>00832 
<a name="l00833"></a>00833 <span class="keywordtype">void</span>
<a name="l00834"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a1fae7b469d6f4bcbd4e4aa10ddc76a67">00834</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#a1fae7b469d6f4bcbd4e4aa10ddc76a67">KX_GameObject::SetOccluder</a>(
<a name="l00835"></a>00835     <span class="keywordtype">bool</span> v,
<a name="l00836"></a>00836     <span class="keywordtype">bool</span> recursive
<a name="l00837"></a>00837     )
<a name="l00838"></a>00838 {
<a name="l00839"></a>00839     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()) {
<a name="l00840"></a>00840         <a class="code" href="../../d1/d73/classKX__GameObject.html#abee4e624e5a961e1f40a392a3ec002fe">m_bOccluder</a> = v;
<a name="l00841"></a>00841         <span class="keywordflow">if</span> (recursive)
<a name="l00842"></a>00842             <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#ae8c72bdbfe616145d5ba6bfe6a3da727">setOccluder_recursive</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>(), v);
<a name="l00843"></a>00843     }
<a name="l00844"></a>00844 }
<a name="l00845"></a>00845 
<a name="l00846"></a>00846 <span class="keywordtype">void</span>
<a name="l00847"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a8ff32fac7cda49c0ed9e72639f8f8fd4">00847</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#a8ff32fac7cda49c0ed9e72639f8f8fd4">KX_GameObject::SetLayer</a>(
<a name="l00848"></a>00848     <span class="keywordtype">int</span> l
<a name="l00849"></a>00849     )
<a name="l00850"></a>00850 {
<a name="l00851"></a>00851     <a class="code" href="../../d1/d73/classKX__GameObject.html#ae699e8f64fe2473e81a839282bc5e87f">m_layer</a> = l;
<a name="l00852"></a>00852 }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854 <span class="keywordtype">int</span>
<a name="l00855"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ab7670c9020e12b589c96374262e769eb">00855</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#ab7670c9020e12b589c96374262e769eb">KX_GameObject::GetLayer</a>(
<a name="l00856"></a>00856     <span class="keywordtype">void</span>
<a name="l00857"></a>00857     )
<a name="l00858"></a>00858 {
<a name="l00859"></a>00859     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ae699e8f64fe2473e81a839282bc5e87f">m_layer</a>;
<a name="l00860"></a>00860 }
<a name="l00861"></a>00861 
<a name="l00862"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a80eec8afaaa35f15fc5b3de52f8f894d">00862</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a80eec8afaaa35f15fc5b3de52f8f894d">KX_GameObject::addLinearVelocity</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; lin_vel,<span class="keywordtype">bool</span> local)
<a name="l00863"></a>00863 {
<a name="l00864"></a>00864     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) 
<a name="l00865"></a>00865     {
<a name="l00866"></a>00866         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> lv = local ? <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>() * lin_vel : lin_vel;
<a name="l00867"></a>00867         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a630b2e7da0a606f8b40b178b889fbf17">SetLinearVelocity</a>(lv + <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a641739e409c42d754664f5c5a772e9c3">GetLinearVelocity</a>(), 0);
<a name="l00868"></a>00868     }
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 
<a name="l00872"></a>00872 
<a name="l00873"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a9c1bd81668d74e90fefec57084a525c3">00873</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a9c1bd81668d74e90fefec57084a525c3">KX_GameObject::setLinearVelocity</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; lin_vel,<span class="keywordtype">bool</span> local)
<a name="l00874"></a>00874 {
<a name="l00875"></a>00875     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00876"></a>00876         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a630b2e7da0a606f8b40b178b889fbf17">SetLinearVelocity</a>(lin_vel,local);
<a name="l00877"></a>00877 }
<a name="l00878"></a>00878 
<a name="l00879"></a>00879 
<a name="l00880"></a>00880 
<a name="l00881"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a99a8ebf937afd9d80dd72a12f5f8b695">00881</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a99a8ebf937afd9d80dd72a12f5f8b695">KX_GameObject::setAngularVelocity</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; ang_vel,<span class="keywordtype">bool</span> local)
<a name="l00882"></a>00882 {
<a name="l00883"></a>00883     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00884"></a>00884         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aae9198ac97d35e91123a4e8d91d5a815">SetAngularVelocity</a>(ang_vel,local);
<a name="l00885"></a>00885 }
<a name="l00886"></a>00886 
<a name="l00887"></a>00887 
<a name="l00888"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a5410019275d53da764123841013aafb2">00888</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a5410019275d53da764123841013aafb2">KX_GameObject::ResolveCombinedVelocities</a>(
<a name="l00889"></a>00889     <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> &amp; lin_vel,
<a name="l00890"></a>00890     <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> &amp; ang_vel,
<a name="l00891"></a>00891     <span class="keywordtype">bool</span> lin_vel_local,
<a name="l00892"></a>00892     <span class="keywordtype">bool</span> ang_vel_local
<a name="l00893"></a>00893 ) {
<a name="l00894"></a>00894     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l00895"></a>00895     {
<a name="l00896"></a>00896 
<a name="l00897"></a>00897         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> lv = lin_vel_local ? <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>() * lin_vel : lin_vel;
<a name="l00898"></a>00898         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> av = ang_vel_local ? <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>() * ang_vel : ang_vel;
<a name="l00899"></a>00899         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a90e273578d2627a88c0ce6d2b2025639">resolveCombinedVelocities</a>(
<a name="l00900"></a>00900             lv.<a class="code" href="../../d8/da2/classMT__Tuple3.html#a4fc6295783618921127b9c2fc50f1886">x</a>(),lv.<a class="code" href="../../d8/da2/classMT__Tuple3.html#a1f96a6c8175338f515073fa85b922275">y</a>(),lv.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af9fc03727b4886fdc3492c2e4f3c8d79">z</a>(),av.<a class="code" href="../../d8/da2/classMT__Tuple3.html#a4fc6295783618921127b9c2fc50f1886">x</a>(),av.<a class="code" href="../../d8/da2/classMT__Tuple3.html#a1f96a6c8175338f515073fa85b922275">y</a>(),av.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af9fc03727b4886fdc3492c2e4f3c8d79">z</a>());
<a name="l00901"></a>00901     }
<a name="l00902"></a>00902 }
<a name="l00903"></a>00903 
<a name="l00904"></a>00904 
<a name="l00905"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a95fa44d6d2c10d00fdb0534a0cfb6496">00905</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a95fa44d6d2c10d00fdb0534a0cfb6496">KX_GameObject::SetObjectColor</a>(<span class="keyword">const</span> <a class="code" href="../../d2/dfc/classMT__Vector4.html">MT_Vector4</a>&amp; rgbavec)
<a name="l00906"></a>00906 {
<a name="l00907"></a>00907     <a class="code" href="../../d1/d73/classKX__GameObject.html#a98907f6dc070636e840f249c55e453fc">m_bUseObjectColor</a> = <span class="keyword">true</span>;
<a name="l00908"></a>00908     <a class="code" href="../../d1/d73/classKX__GameObject.html#a2ae26615234a4f04db5f871ee99c89e4">m_objectColor</a> = rgbavec;
<a name="l00909"></a>00909 }
<a name="l00910"></a>00910 
<a name="l00911"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#abc5460b21578a816df26409285f961da">00911</a> <span class="keyword">const</span> <a class="code" href="../../d2/dfc/classMT__Vector4.html">MT_Vector4</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#abc5460b21578a816df26409285f961da">KX_GameObject::GetObjectColor</a>()
<a name="l00912"></a>00912 {
<a name="l00913"></a>00913     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a2ae26615234a4f04db5f871ee99c89e4">m_objectColor</a>;
<a name="l00914"></a>00914 }
<a name="l00915"></a>00915 
<a name="l00916"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a8e3d58b7cbfc2df00f7449d23688e072">00916</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a8e3d58b7cbfc2df00f7449d23688e072">KX_GameObject::AlignAxisToVect</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; dir, <span class="keywordtype">int</span> axis, <span class="keywordtype">float</span> fac)
<a name="l00917"></a>00917 {
<a name="l00918"></a>00918     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> orimat;
<a name="l00919"></a>00919     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> vect,ori,z,x,y;
<a name="l00920"></a>00920     <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>;
<a name="l00921"></a>00921 
<a name="l00922"></a>00922     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l00923"></a>00923     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l00924"></a>00924         <span class="keywordflow">return</span>;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     vect = dir;
<a name="l00927"></a>00927     len = vect.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a2a961afdd0baa69b75b8184086b8e922">length</a>();
<a name="l00928"></a>00928     <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(len))
<a name="l00929"></a>00929     {
<a name="l00930"></a>00930         cout &lt;&lt; <span class="stringliteral">&quot;alignAxisToVect() Error: Null vector!\n&quot;</span>;
<a name="l00931"></a>00931         <span class="keywordflow">return</span>;
<a name="l00932"></a>00932     }
<a name="l00933"></a>00933     
<a name="l00934"></a>00934     <span class="keywordflow">if</span> (fac&lt;=0.0) {
<a name="l00935"></a>00935         <span class="keywordflow">return</span>;
<a name="l00936"></a>00936     }
<a name="l00937"></a>00937     
<a name="l00938"></a>00938     <span class="comment">// normalize</span>
<a name="l00939"></a>00939     vect /= <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>;
<a name="l00940"></a>00940     orimat = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>();
<a name="l00941"></a>00941     <span class="keywordflow">switch</span> (axis)
<a name="l00942"></a>00942     {   
<a name="l00943"></a>00943         <span class="keywordflow">case</span> 0: <span class="comment">//x axis</span>
<a name="l00944"></a>00944             ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][2], orimat[1][2], orimat[2][2]); <span class="comment">//pivot axis</span>
<a name="l00945"></a>00945             <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#ab28604edee28143e759a0e1da5ce6d07">MT_abs</a>(vect.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a46a95b173394ecf471432277a14135df">dot</a>(ori)) &gt; 1.0-3.0*<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a9e8f584a2baa77c2b24d1c00e54708ab">MT_EPSILON</a>) <span class="comment">//is the vector parallel to the pivot?</span>
<a name="l00946"></a>00946                 ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][1], orimat[1][1], orimat[2][1]); <span class="comment">//change the pivot!</span>
<a name="l00947"></a>00947             <span class="keywordflow">if</span> (fac == 1.0) {
<a name="l00948"></a>00948                 x = vect;
<a name="l00949"></a>00949             } <span class="keywordflow">else</span> {
<a name="l00950"></a>00950                 x = (vect * fac) + ((orimat * <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(1.0, 0.0, 0.0)) * (1-fac));
<a name="l00951"></a>00951                 len = x.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a2a961afdd0baa69b75b8184086b8e922">length</a>();
<a name="l00952"></a>00952                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(len)) x = vect;
<a name="l00953"></a>00953                 <span class="keywordflow">else</span> x /= <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>;
<a name="l00954"></a>00954             }
<a name="l00955"></a>00955             y = ori.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(x);
<a name="l00956"></a>00956             z = x.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(y);
<a name="l00957"></a>00957             <span class="keywordflow">break</span>;
<a name="l00958"></a>00958         <span class="keywordflow">case</span> 1: <span class="comment">//y axis</span>
<a name="l00959"></a>00959             ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][0], orimat[1][0], orimat[2][0]);
<a name="l00960"></a>00960             <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#ab28604edee28143e759a0e1da5ce6d07">MT_abs</a>(vect.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a46a95b173394ecf471432277a14135df">dot</a>(ori)) &gt; 1.0-3.0*<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a9e8f584a2baa77c2b24d1c00e54708ab">MT_EPSILON</a>)
<a name="l00961"></a>00961                 ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][2], orimat[1][2], orimat[2][2]);
<a name="l00962"></a>00962             <span class="keywordflow">if</span> (fac == 1.0) {
<a name="l00963"></a>00963                 y = vect;
<a name="l00964"></a>00964             } <span class="keywordflow">else</span> {
<a name="l00965"></a>00965                 y = (vect * fac) + ((orimat * <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(0.0, 1.0, 0.0)) * (1-fac));
<a name="l00966"></a>00966                 len = y.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a2a961afdd0baa69b75b8184086b8e922">length</a>();
<a name="l00967"></a>00967                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(len)) y = vect;
<a name="l00968"></a>00968                 <span class="keywordflow">else</span> y /= <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>;
<a name="l00969"></a>00969             }
<a name="l00970"></a>00970             z = ori.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(y);
<a name="l00971"></a>00971             x = y.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(z);
<a name="l00972"></a>00972             <span class="keywordflow">break</span>;
<a name="l00973"></a>00973         <span class="keywordflow">case</span> 2: <span class="comment">//z axis</span>
<a name="l00974"></a>00974             ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][1], orimat[1][1], orimat[2][1]);
<a name="l00975"></a>00975             <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#ab28604edee28143e759a0e1da5ce6d07">MT_abs</a>(vect.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a46a95b173394ecf471432277a14135df">dot</a>(ori)) &gt; 1.0-3.0*<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a9e8f584a2baa77c2b24d1c00e54708ab">MT_EPSILON</a>)
<a name="l00976"></a>00976                 ori.<a class="code" href="../../d8/da2/classMT__Tuple3.html#af98629114dfe61b7e4c27dee89d7e94d">setValue</a>(orimat[0][0], orimat[1][0], orimat[2][0]);
<a name="l00977"></a>00977             <span class="keywordflow">if</span> (fac == 1.0) {
<a name="l00978"></a>00978                 z = vect;
<a name="l00979"></a>00979             } <span class="keywordflow">else</span> {
<a name="l00980"></a>00980                 z = (vect * fac) + ((orimat * <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(0.0, 0.0, 1.0)) * (1-fac));
<a name="l00981"></a>00981                 len = z.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a2a961afdd0baa69b75b8184086b8e922">length</a>();
<a name="l00982"></a>00982                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(len)) z = vect;
<a name="l00983"></a>00983                 <span class="keywordflow">else</span> z /= <a class="code" href="../../d9/d90/util__math_8h.html#aa4232e576aca913870e7753393b82894">len</a>;
<a name="l00984"></a>00984             }
<a name="l00985"></a>00985             x = ori.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(z);
<a name="l00986"></a>00986             y = z.<a class="code" href="../../d6/d9d/classMT__Vector3.html#ac59c854987e49d18361e2bf452e222fe">cross</a>(x);
<a name="l00987"></a>00987             <span class="keywordflow">break</span>;
<a name="l00988"></a>00988         <span class="keywordflow">default</span>: <span class="comment">//wrong input?</span>
<a name="l00989"></a>00989             cout &lt;&lt; <span class="stringliteral">&quot;alignAxisToVect(): Wrong axis &#39;&quot;</span> &lt;&lt; axis &lt;&lt;<span class="stringliteral">&quot;&#39;\n&quot;</span>;
<a name="l00990"></a>00990             <span class="keywordflow">return</span>;
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992     x.<a class="code" href="../../d6/d9d/classMT__Vector3.html#aa66212d19d24858f68eb80d4cadf71aa">normalize</a>(); <span class="comment">//normalize the vectors</span>
<a name="l00993"></a>00993     y.<a class="code" href="../../d6/d9d/classMT__Vector3.html#aa66212d19d24858f68eb80d4cadf71aa">normalize</a>();
<a name="l00994"></a>00994     z.<a class="code" href="../../d6/d9d/classMT__Vector3.html#aa66212d19d24858f68eb80d4cadf71aa">normalize</a>();
<a name="l00995"></a>00995     orimat.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a67a7fc7c5323847f553bea1e37fa1f70">setValue</a>(    x[0],y[0],z[0],
<a name="l00996"></a>00996                         x[1],y[1],z[1],
<a name="l00997"></a>00997                         x[2],y[2],z[2]);
<a name="l00998"></a>00998     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent() != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00999"></a>00999     {
<a name="l01000"></a>01000         <span class="comment">// the object is a child, adapt its local orientation so that </span>
<a name="l01001"></a>01001         <span class="comment">// the global orientation is aligned as we want.</span>
<a name="l01002"></a>01002         <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> invori = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>().<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#acf25f88b7ef601ba7cd69b0afb495b89">inverse</a>();
<a name="l01003"></a>01003         <a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">NodeSetLocalOrientation</a>(invori*orimat);
<a name="l01004"></a>01004     }
<a name="l01005"></a>01005     <span class="keywordflow">else</span>
<a name="l01006"></a>01006         <a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">NodeSetLocalOrientation</a>(orimat);
<a name="l01007"></a>01007 }
<a name="l01008"></a>01008 
<a name="l01009"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#add398de40872c93dfa6fab8a3e53590e">01009</a> <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#add398de40872c93dfa6fab8a3e53590e">KX_GameObject::GetMass</a>()
<a name="l01010"></a>01010 {
<a name="l01011"></a>01011     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l01012"></a>01012     {
<a name="l01013"></a>01013         <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a4a4d403ac3537fc1433a5be52ff65f04">GetMass</a>();
<a name="l01014"></a>01014     }
<a name="l01015"></a>01015     <span class="keywordflow">return</span> 0.0;
<a name="l01016"></a>01016 }
<a name="l01017"></a>01017 
<a name="l01018"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac7a627522c07b688717c53a30967de52">01018</a> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac7a627522c07b688717c53a30967de52">KX_GameObject::GetLocalInertia</a>()
<a name="l01019"></a>01019 {
<a name="l01020"></a>01020     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> local_inertia(0.0,0.0,0.0);
<a name="l01021"></a>01021     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l01022"></a>01022     {
<a name="l01023"></a>01023         local_inertia = <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a5cda868a65ef4bf54d2206cfc3bf8e0c">GetLocalInertia</a>();
<a name="l01024"></a>01024     }
<a name="l01025"></a>01025     <span class="keywordflow">return</span> local_inertia;
<a name="l01026"></a>01026 }
<a name="l01027"></a>01027 
<a name="l01028"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#afca1281b03a024a167327c7344ec0812">01028</a> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#afca1281b03a024a167327c7344ec0812">KX_GameObject::GetLinearVelocity</a>(<span class="keywordtype">bool</span> local)
<a name="l01029"></a>01029 {
<a name="l01030"></a>01030     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity(0.0,0.0,0.0), locvel;
<a name="l01031"></a>01031     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> ori;
<a name="l01032"></a>01032     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l01033"></a>01033     {
<a name="l01034"></a>01034         velocity = <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a641739e409c42d754664f5c5a772e9c3">GetLinearVelocity</a>();
<a name="l01035"></a>01035         
<a name="l01036"></a>01036         <span class="keywordflow">if</span> (local)
<a name="l01037"></a>01037         {
<a name="l01038"></a>01038             ori = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>();
<a name="l01039"></a>01039             
<a name="l01040"></a>01040             locvel = velocity * ori;
<a name="l01041"></a>01041             <span class="keywordflow">return</span> locvel;
<a name="l01042"></a>01042         }
<a name="l01043"></a>01043     }
<a name="l01044"></a>01044     <span class="keywordflow">return</span> velocity;    
<a name="l01045"></a>01045 }
<a name="l01046"></a>01046 
<a name="l01047"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a2cded0f4ea85f595c63e42eeb2cf2bdf">01047</a> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#a2cded0f4ea85f595c63e42eeb2cf2bdf">KX_GameObject::GetAngularVelocity</a>(<span class="keywordtype">bool</span> local)
<a name="l01048"></a>01048 {
<a name="l01049"></a>01049     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity(0.0,0.0,0.0), locvel;
<a name="l01050"></a>01050     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> ori;
<a name="l01051"></a>01051     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053         velocity = <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a940aa1ad7b870ebfb2f30caa8dfa281e">GetAngularVelocity</a>();
<a name="l01054"></a>01054         
<a name="l01055"></a>01055         <span class="keywordflow">if</span> (local)
<a name="l01056"></a>01056         {
<a name="l01057"></a>01057             ori = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>();
<a name="l01058"></a>01058             
<a name="l01059"></a>01059             locvel = velocity * ori;
<a name="l01060"></a>01060             <span class="keywordflow">return</span> locvel;
<a name="l01061"></a>01061         }
<a name="l01062"></a>01062     }
<a name="l01063"></a>01063     <span class="keywordflow">return</span> velocity;    
<a name="l01064"></a>01064 }
<a name="l01065"></a>01065 
<a name="l01066"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a24699a00da4bb57c90eb23a2d2673847">01066</a> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> <a class="code" href="../../d1/d73/classKX__GameObject.html#a24699a00da4bb57c90eb23a2d2673847">KX_GameObject::GetVelocity</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>&amp; <a class="code" href="../../d8/dae/structpoint.html">point</a>)
<a name="l01067"></a>01067 {
<a name="l01068"></a>01068     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l01069"></a>01069     {
<a name="l01070"></a>01070         <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a2e7f39b6df8f5c71c5d1c1c79cc5d92a">GetVelocity</a>(point);
<a name="l01071"></a>01071     }
<a name="l01072"></a>01072     <span class="keywordflow">return</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(0.0,0.0,0.0);
<a name="l01073"></a>01073 }
<a name="l01074"></a>01074 
<a name="l01075"></a>01075 <span class="comment">// scenegraph node stuff</span>
<a name="l01076"></a>01076 
<a name="l01077"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a22d183aca27dacd2942c7eb428fa0eb7">01077</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a22d183aca27dacd2942c7eb428fa0eb7">KX_GameObject::NodeSetLocalPosition</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>&amp; trans)
<a name="l01078"></a>01078 {
<a name="l01079"></a>01079     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01080"></a>01080     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01081"></a>01081         <span class="keywordflow">return</span>;
<a name="l01082"></a>01082 
<a name="l01083"></a>01083     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; !<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent())
<a name="l01084"></a>01084     {
<a name="l01085"></a>01085         <span class="comment">// don&#39;t update physic controller if the object is a child:</span>
<a name="l01086"></a>01086         <span class="comment">// 1) the transformation will not be right</span>
<a name="l01087"></a>01087         <span class="comment">// 2) in this case, the physic controller is necessarily a static object</span>
<a name="l01088"></a>01088         <span class="comment">//    that is updated from the normal kinematic synchronization</span>
<a name="l01089"></a>01089         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a459a5813041b01bc05e1190890dee4d5">setPosition</a>(trans);
<a name="l01090"></a>01090     }
<a name="l01091"></a>01091 
<a name="l01092"></a>01092     <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a30d80c0a5ade811c461435a6875aa77f">SetLocalPosition</a>(trans);
<a name="l01093"></a>01093 
<a name="l01094"></a>01094 }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096 
<a name="l01097"></a>01097 
<a name="l01098"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">01098</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">KX_GameObject::NodeSetLocalOrientation</a>(<span class="keyword">const</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>&amp; <a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>)
<a name="l01099"></a>01099 {
<a name="l01100"></a>01100     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01101"></a>01101     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01102"></a>01102         <span class="keywordflow">return</span>;
<a name="l01103"></a>01103 
<a name="l01104"></a>01104     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; !<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent())
<a name="l01105"></a>01105     {
<a name="l01106"></a>01106         <span class="comment">// see note above</span>
<a name="l01107"></a>01107         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a56c989a4937ab52cdacc104251b01f06">setOrientation</a>(rot);
<a name="l01108"></a>01108     }
<a name="l01109"></a>01109     <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a589c6b5ec03b113430cd912d5bd0fdc1">SetLocalOrientation</a>(rot);
<a name="l01110"></a>01110 }
<a name="l01111"></a>01111 
<a name="l01112"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a321a2e7ac03500560df1a5529be8473f">01112</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a321a2e7ac03500560df1a5529be8473f">KX_GameObject::NodeSetGlobalOrientation</a>(<span class="keyword">const</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>&amp; <a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>)
<a name="l01113"></a>01113 {
<a name="l01114"></a>01114     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01115"></a>01115     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01116"></a>01116         <span class="keywordflow">return</span>;
<a name="l01117"></a>01117 
<a name="l01118"></a>01118     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent())
<a name="l01119"></a>01119         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a589c6b5ec03b113430cd912d5bd0fdc1">SetLocalOrientation</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent()-&gt;GetWorldOrientation().<a class="code" href="../../d9/d42/btQuaternion_8h.html#ae51e49cc6a687e7b1534a6a03fafe2c8" title="Return the inverse of a quaternion.">inverse</a>()*rot);
<a name="l01120"></a>01120     <span class="keywordflow">else</span>
<a name="l01121"></a>01121         <a class="code" href="../../d1/d73/classKX__GameObject.html#a3832f5baf84b55a2b3d71b98a85ac7b1">NodeSetLocalOrientation</a>(rot);
<a name="l01122"></a>01122 }
<a name="l01123"></a>01123 
<a name="l01124"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#acfffcf209f87bf7bad4a25d0bfcfd2a8">01124</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#acfffcf209f87bf7bad4a25d0bfcfd2a8">KX_GameObject::NodeSetLocalScale</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; scale)
<a name="l01125"></a>01125 {
<a name="l01126"></a>01126     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01127"></a>01127     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01128"></a>01128         <span class="keywordflow">return</span>;
<a name="l01129"></a>01129 
<a name="l01130"></a>01130     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; !<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent())
<a name="l01131"></a>01131     {
<a name="l01132"></a>01132         <span class="comment">// see note above</span>
<a name="l01133"></a>01133         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aa67f058187708c752b76a61a69846f5e">setScaling</a>(scale);
<a name="l01134"></a>01134     }
<a name="l01135"></a>01135     <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ae9c53084a510b513b02dfe6f0448f34a">SetLocalScale</a>(scale);
<a name="l01136"></a>01136 }
<a name="l01137"></a>01137 
<a name="l01138"></a>01138 
<a name="l01139"></a>01139 
<a name="l01140"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a9c0d7951e0c48b05064d04a3c303fe44">01140</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a9c0d7951e0c48b05064d04a3c303fe44">KX_GameObject::NodeSetRelativeScale</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; scale)
<a name="l01141"></a>01141 {
<a name="l01142"></a>01142     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01143"></a>01143     {
<a name="l01144"></a>01144         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a2b201a7def248984fc96a4ce09ccc8c2">RelativeScale</a>(scale);
<a name="l01145"></a>01145         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a> &amp;&amp; (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;GetSGParent()))
<a name="l01146"></a>01146         {
<a name="l01147"></a>01147             <span class="comment">// see note above</span>
<a name="l01148"></a>01148             <span class="comment">// we can use the local scale: it&#39;s the same thing for a root object </span>
<a name="l01149"></a>01149             <span class="comment">// and the world scale is not yet updated</span>
<a name="l01150"></a>01150             <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> newscale = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ab2a2369819619117a9ea73555b0e7646">GetLocalScale</a>();
<a name="l01151"></a>01151             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aa67f058187708c752b76a61a69846f5e">setScaling</a>(newscale);
<a name="l01152"></a>01152         }
<a name="l01153"></a>01153     }
<a name="l01154"></a>01154 }
<a name="l01155"></a>01155 
<a name="l01156"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac692e33c135bcc0defa8607de4e3b5ff">01156</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ac692e33c135bcc0defa8607de4e3b5ff">KX_GameObject::NodeSetWorldScale</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; scale)
<a name="l01157"></a>01157 {
<a name="l01158"></a>01158     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01159"></a>01159         <span class="keywordflow">return</span>;
<a name="l01160"></a>01160     <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* <a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>();
<a name="l01161"></a>01161     <span class="keywordflow">if</span> (parent != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01162"></a>01162     {
<a name="l01163"></a>01163         <span class="comment">// Make sure the objects have some scale</span>
<a name="l01164"></a>01164         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> p_scale = parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a3078d7872c2ae7a194546c96b09ff301">GetWorldScaling</a>();
<a name="l01165"></a>01165         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(p_scale[0]) &lt; FLT_EPSILON || 
<a name="l01166"></a>01166             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(p_scale[1]) &lt; FLT_EPSILON || 
<a name="l01167"></a>01167             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(p_scale[2]) &lt; FLT_EPSILON)
<a name="l01168"></a>01168         { 
<a name="l01169"></a>01169             <span class="keywordflow">return</span>; 
<a name="l01170"></a>01170         }
<a name="l01171"></a>01171 
<a name="l01172"></a>01172         p_scale[0] = 1/p_scale[0];
<a name="l01173"></a>01173         p_scale[1] = 1/p_scale[1];
<a name="l01174"></a>01174         p_scale[2] = 1/p_scale[2];
<a name="l01175"></a>01175 
<a name="l01176"></a>01176         <a class="code" href="../../d1/d73/classKX__GameObject.html#acfffcf209f87bf7bad4a25d0bfcfd2a8">NodeSetLocalScale</a>(scale * p_scale);
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178     <span class="keywordflow">else</span>
<a name="l01179"></a>01179     {
<a name="l01180"></a>01180         <a class="code" href="../../d1/d73/classKX__GameObject.html#acfffcf209f87bf7bad4a25d0bfcfd2a8">NodeSetLocalScale</a>(scale);
<a name="l01181"></a>01181     }
<a name="l01182"></a>01182 }
<a name="l01183"></a>01183 
<a name="l01184"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a916ddeb2f63193787e80e54828cef9da">01184</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a916ddeb2f63193787e80e54828cef9da">KX_GameObject::NodeSetWorldPosition</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>&amp; trans)
<a name="l01185"></a>01185 {
<a name="l01186"></a>01186     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01187"></a>01187         <span class="keywordflow">return</span>;
<a name="l01188"></a>01188     <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* <a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a> = <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>();
<a name="l01189"></a>01189     <span class="keywordflow">if</span> (parent != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01190"></a>01190     {
<a name="l01191"></a>01191         <span class="comment">// Make sure the objects have some scale</span>
<a name="l01192"></a>01192         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scale = parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a3078d7872c2ae7a194546c96b09ff301">GetWorldScaling</a>();
<a name="l01193"></a>01193         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale[0]) &lt; FLT_EPSILON || 
<a name="l01194"></a>01194             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale[1]) &lt; FLT_EPSILON || 
<a name="l01195"></a>01195             <a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(scale[2]) &lt; FLT_EPSILON)
<a name="l01196"></a>01196         { 
<a name="l01197"></a>01197             <span class="keywordflow">return</span>; 
<a name="l01198"></a>01198         }
<a name="l01199"></a>01199         scale[0] = 1.0/scale[0];
<a name="l01200"></a>01200         scale[1] = 1.0/scale[1];
<a name="l01201"></a>01201         scale[2] = 1.0/scale[2];
<a name="l01202"></a>01202         <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> invori = parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>().<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#acf25f88b7ef601ba7cd69b0afb495b89">inverse</a>();
<a name="l01203"></a>01203         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> newpos = invori*(trans-parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1bbc34fe0c2345e55900eaa5943dfc51">GetWorldPosition</a>())*scale;
<a name="l01204"></a>01204         <a class="code" href="../../d1/d73/classKX__GameObject.html#a22d183aca27dacd2942c7eb428fa0eb7">NodeSetLocalPosition</a>(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(newpos[0],newpos[1],newpos[2]));
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206     <span class="keywordflow">else</span> 
<a name="l01207"></a>01207     {
<a name="l01208"></a>01208         <a class="code" href="../../d1/d73/classKX__GameObject.html#a22d183aca27dacd2942c7eb428fa0eb7">NodeSetLocalPosition</a>(trans);
<a name="l01209"></a>01209     }
<a name="l01210"></a>01210 }
<a name="l01211"></a>01211 
<a name="l01212"></a>01212 
<a name="l01213"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#abd94bbbcf52249812ac7ddd8d61b079c">01213</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#abd94bbbcf52249812ac7ddd8d61b079c">KX_GameObject::NodeUpdateGS</a>(<span class="keywordtype">double</span> time)
<a name="l01214"></a>01214 {
<a name="l01215"></a>01215     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01216"></a>01216         <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a791ba43c770c33dc637bb61f93152745">UpdateWorldData</a>(time);
<a name="l01217"></a>01217 }
<a name="l01218"></a>01218 
<a name="l01219"></a>01219 
<a name="l01220"></a>01220 
<a name="l01221"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">01221</a> <span class="keyword">const</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">KX_GameObject::NodeGetWorldOrientation</a>()<span class="keyword"> const</span>
<a name="l01222"></a>01222 <span class="keyword"></span>{
<a name="l01223"></a>01223     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01224"></a>01224     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01225"></a>01225         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe0783880f26055247c706b6470276d8">dummy_orientation</a>;
<a name="l01226"></a>01226     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1da2a4c264204b135154f815f41d637e">GetWorldOrientation</a>();
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aa3854a2240bd2b899bd3f4a2108b2764">01229</a> <span class="keyword">const</span> <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#aa3854a2240bd2b899bd3f4a2108b2764">KX_GameObject::NodeGetLocalOrientation</a>()<span class="keyword"> const</span>
<a name="l01230"></a>01230 <span class="keyword"></span>{
<a name="l01231"></a>01231     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01232"></a>01232     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01233"></a>01233         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe0783880f26055247c706b6470276d8">dummy_orientation</a>;
<a name="l01234"></a>01234     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a3cd273e73f81331ee753a9611b6377b7">GetLocalOrientation</a>();
<a name="l01235"></a>01235 }
<a name="l01236"></a>01236 
<a name="l01237"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a214226e36095439d638bb17d0057f88c">01237</a> <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#a214226e36095439d638bb17d0057f88c">KX_GameObject::NodeGetWorldScaling</a>()<span class="keyword"> const</span>
<a name="l01238"></a>01238 <span class="keyword"></span>{
<a name="l01239"></a>01239     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01240"></a>01240     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01241"></a>01241         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a2d9103c9a69dfb1ee40f67e3c7e2d7c9">dummy_scaling</a>;
<a name="l01242"></a>01242 
<a name="l01243"></a>01243     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a3078d7872c2ae7a194546c96b09ff301">GetWorldScaling</a>();
<a name="l01244"></a>01244 }
<a name="l01245"></a>01245 
<a name="l01246"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a55a059ab6913a282bf8e0efe8af89872">01246</a> <span class="keyword">const</span> <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#a55a059ab6913a282bf8e0efe8af89872">KX_GameObject::NodeGetLocalScaling</a>()<span class="keyword"> const</span>
<a name="l01247"></a>01247 <span class="keyword"></span>{
<a name="l01248"></a>01248     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01249"></a>01249     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01250"></a>01250         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#a2d9103c9a69dfb1ee40f67e3c7e2d7c9">dummy_scaling</a>;
<a name="l01251"></a>01251 
<a name="l01252"></a>01252     <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ab2a2369819619117a9ea73555b0e7646">GetLocalScale</a>();
<a name="l01253"></a>01253 }
<a name="l01254"></a>01254 
<a name="l01255"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">01255</a> <span class="keyword">const</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">KX_GameObject::NodeGetWorldPosition</a>()<span class="keyword"> const</span>
<a name="l01256"></a>01256 <span class="keyword"></span>{
<a name="l01257"></a>01257     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01258"></a>01258     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01259"></a>01259         <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a1bbc34fe0c2345e55900eaa5943dfc51">GetWorldPosition</a>();
<a name="l01260"></a>01260     <span class="keywordflow">else</span>
<a name="l01261"></a>01261         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#acee6b011c82b6f5cb90b28d833546ffa">dummy_point</a>;
<a name="l01262"></a>01262 }
<a name="l01263"></a>01263 
<a name="l01264"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#aad36a3ed6277a6997bbaf58ec23d13d6">01264</a> <span class="keyword">const</span> <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>&amp; <a class="code" href="../../d1/d73/classKX__GameObject.html#aad36a3ed6277a6997bbaf58ec23d13d6">KX_GameObject::NodeGetLocalPosition</a>()<span class="keyword"> const</span>
<a name="l01265"></a>01265 <span class="keyword"></span>{
<a name="l01266"></a>01266     <span class="comment">// check on valid node in case a python controller holds a reference to a deleted object</span>
<a name="l01267"></a>01267     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>())
<a name="l01268"></a>01268         <span class="keywordflow">return</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>()-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#a251ddaf5cd0b1d48662cba5960712b23">GetLocalPosition</a>();
<a name="l01269"></a>01269     <span class="keywordflow">else</span>
<a name="l01270"></a>01270         <span class="keywordflow">return</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#acee6b011c82b6f5cb90b28d833546ffa">dummy_point</a>;
<a name="l01271"></a>01271 }
<a name="l01272"></a>01272 
<a name="l01273"></a>01273 
<a name="l01274"></a>01274 <span class="comment">/* Suspend/ resume: for the dynamic behavior, there is a simple</span>
<a name="l01275"></a>01275 <span class="comment"> * method. For the residual motion, there is not. I wonder what the</span>
<a name="l01276"></a>01276 <span class="comment"> * correct solution is for Sumo. Remove from the motion-update tree?</span>
<a name="l01277"></a>01277 <span class="comment"> *</span>
<a name="l01278"></a>01278 <span class="comment"> * So far, only switch the physics and logic.</span>
<a name="l01279"></a>01279 <span class="comment"> * */</span>
<a name="l01280"></a>01280 
<a name="l01281"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ae9254128296ba80bf66711883f96dba6">01281</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#ae9254128296ba80bf66711883f96dba6">KX_GameObject::Resume</a>(<span class="keywordtype">void</span>)
<a name="l01282"></a>01282 {
<a name="l01283"></a>01283     <span class="keywordflow">if</span> (<a class="code" href="../../da/d68/classSCA__IObject.html#acdc88ab5260dd03ea02d7f0ddd5454b0">m_suspended</a>) {
<a name="l01284"></a>01284         <a class="code" href="../../d1/d73/classKX__GameObject.html#ae9254128296ba80bf66711883f96dba6">SCA_IObject::Resume</a>();
<a name="l01285"></a>01285         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>())
<a name="l01286"></a>01286             <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>()-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a0bb8514ac70d02aa453ff7675f9952e9">RestoreDynamics</a>();
<a name="l01287"></a>01287 
<a name="l01288"></a>01288         <a class="code" href="../../da/d68/classSCA__IObject.html#acdc88ab5260dd03ea02d7f0ddd5454b0">m_suspended</a> = <span class="keyword">false</span>;
<a name="l01289"></a>01289     }
<a name="l01290"></a>01290 }
<a name="l01291"></a>01291 
<a name="l01292"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#a2df7beba5df062f732b24d6b69a010b8">01292</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a2df7beba5df062f732b24d6b69a010b8">KX_GameObject::Suspend</a>()
<a name="l01293"></a>01293 {
<a name="l01294"></a>01294     <span class="keywordflow">if</span> ((!<a class="code" href="../../da/d68/classSCA__IObject.html#aa894e6874d8108f63078a9d9e0a97302">m_ignore_activity_culling</a>) 
<a name="l01295"></a>01295         &amp;&amp; (!<a class="code" href="../../da/d68/classSCA__IObject.html#acdc88ab5260dd03ea02d7f0ddd5454b0">m_suspended</a>))  {
<a name="l01296"></a>01296         <a class="code" href="../../d1/d73/classKX__GameObject.html#a2df7beba5df062f732b24d6b69a010b8">SCA_IObject::Suspend</a>();
<a name="l01297"></a>01297         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>())
<a name="l01298"></a>01298             <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>()-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a362c4e09be80f9690fbacbc11830fda5">SuspendDynamics</a>();
<a name="l01299"></a>01299         <a class="code" href="../../da/d68/classSCA__IObject.html#acdc88ab5260dd03ea02d7f0ddd5454b0">m_suspended</a> = <span class="keyword">true</span>;
<a name="l01300"></a>01300     }
<a name="l01301"></a>01301 }
<a name="l01302"></a>01302 
<a name="l01303"></a><a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe94f6619efdd7c668d610415dc88e92">01303</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe94f6619efdd7c668d610415dc88e92">walk_children</a>(<a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* node, <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* list, <span class="keywordtype">bool</span> recursive)
<a name="l01304"></a>01304 {
<a name="l01305"></a>01305     <span class="keywordflow">if</span> (!node)
<a name="l01306"></a>01306         <span class="keywordflow">return</span>;
<a name="l01307"></a>01307     <a class="code" href="../../df/d3b/SG__Node_8h.html#a8ae32373b02caa826276c36fe07ecb76">NodeList</a>&amp; children = node-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#aa0d15b7e05705e40a1525864cd7499d1">GetSGChildren</a>();
<a name="l01308"></a>01308 
<a name="l01309"></a>01309     <span class="keywordflow">for</span> (NodeList::iterator childit = children.begin();!(childit==children.end());++childit)
<a name="l01310"></a>01310     {
<a name="l01311"></a>01311         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* childnode = (*childit);
<a name="l01312"></a>01312         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* childobj = (<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>*)childnode-&gt;<a class="code" href="../../da/d03/classSG__IObject.html#a5d43f7a1fb6fde5b37fa17b639095af1">GetSGClientObject</a>();
<a name="l01313"></a>01313         <span class="keywordflow">if</span> (childobj != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// This is a GameObject</span>
<a name="l01314"></a>01314         {
<a name="l01315"></a>01315             <span class="comment">// add to the list</span>
<a name="l01316"></a>01316             list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#ab20ce4d43a9f9aec11731aa4abddb059">Add</a>(childobj-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l01317"></a>01317         }
<a name="l01318"></a>01318         
<a name="l01319"></a>01319         <span class="comment">// if the childobj is NULL then this may be an inverse parent link</span>
<a name="l01320"></a>01320         <span class="comment">// so a non recursive search should still look down this node.</span>
<a name="l01321"></a>01321         <span class="keywordflow">if</span> (recursive || childobj==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01322"></a>01322             <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe94f6619efdd7c668d610415dc88e92">walk_children</a>(childnode, list, recursive);
<a name="l01323"></a>01323         }
<a name="l01324"></a>01324     }
<a name="l01325"></a>01325 }
<a name="l01326"></a>01326 
<a name="l01327"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ab9dfccf0807cdb6e83bdd63b9d17bce4">01327</a> <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#ab9dfccf0807cdb6e83bdd63b9d17bce4">KX_GameObject::GetChildren</a>()
<a name="l01328"></a>01328 {
<a name="l01329"></a>01329     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* list = <span class="keyword">new</span> <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>();
<a name="l01330"></a>01330     <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe94f6619efdd7c668d610415dc88e92">walk_children</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>(), list, 0); <span class="comment">/* GetSGNode() is always valid or it would have raised an exception before this */</span>
<a name="l01331"></a>01331     <span class="keywordflow">return</span> list;
<a name="l01332"></a>01332 }
<a name="l01333"></a>01333 
<a name="l01334"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#ab59f0870740e13bfc776c236d48e5cf0">01334</a> <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* <a class="code" href="../../d1/d73/classKX__GameObject.html#ab59f0870740e13bfc776c236d48e5cf0">KX_GameObject::GetChildrenRecursive</a>()
<a name="l01335"></a>01335 {
<a name="l01336"></a>01336     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* list = <span class="keyword">new</span> <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>();
<a name="l01337"></a>01337     <a class="code" href="../../d4/d0e/KX__GameObject_8cpp.html#afe94f6619efdd7c668d610415dc88e92">walk_children</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a0be04ac2ce18c262fd28cb92f5c296b7">GetSGNode</a>(), list, 1);
<a name="l01338"></a>01338     <span class="keywordflow">return</span> list;
<a name="l01339"></a>01339 }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341 <span class="comment">/* ---------------------------------------------------------------------</span>
<a name="l01342"></a>01342 <span class="comment"> * Some stuff taken from the header</span>
<a name="l01343"></a>01343 <span class="comment"> * --------------------------------------------------------------------- */</span>
<a name="l01344"></a><a class="code" href="../../d1/d73/classKX__GameObject.html#abd0f8a8c1aa09e28caf5697d9aaea334">01344</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#abd0f8a8c1aa09e28caf5697d9aaea334">KX_GameObject::Relink</a>(<a class="code" href="../../d8/d8a/classCTR__Map.html">CTR_Map&lt;CTR_HashedPtr, void*&gt;</a> *map_parameter)
<a name="l01345"></a>01345 {
<a name="l01346"></a>01346     <span class="comment">// we will relink the sensors and actuators that use object references</span>
<a name="l01347"></a>01347     <span class="comment">// if the object is part of the replicated hierarchy, use the new</span>
<a name="l01348"></a>01348     <span class="comment">// object reference instead</span>
<a name="l01349"></a>01349     <a class="code" href="../../dc/de6/SCA__IObject_8h.html#a928978f9ec8ed536dd9b74298801e562">SCA_SensorList</a>&amp; sensorlist = <a class="code" href="../../da/d68/classSCA__IObject.html#a6931c6c819b8de336843073edc93e9c5">GetSensors</a>();
<a name="l01350"></a>01350     SCA_SensorList::iterator sit;
<a name="l01351"></a>01351     <span class="keywordflow">for</span> (sit=sensorlist.begin(); sit != sensorlist.end(); sit++)
<a name="l01352"></a>01352     {
<a name="l01353"></a>01353         (*sit)-&gt;Relink(map_parameter);
<a name="l01354"></a>01354     }
<a name="l01355"></a>01355     <a class="code" href="../../dc/de6/SCA__IObject_8h.html#a6d9d58fbf8bcf0bbeecdd3473a21b408">SCA_ActuatorList</a>&amp; actuatorlist = <a class="code" href="../../da/d68/classSCA__IObject.html#a8a1d0ac6bdbc54738fb30fbcf8fe67da">GetActuators</a>();
<a name="l01356"></a>01356     SCA_ActuatorList::iterator ait;
<a name="l01357"></a>01357     <span class="keywordflow">for</span> (ait=actuatorlist.begin(); ait != actuatorlist.end(); ait++)
<a name="l01358"></a>01358     {
<a name="l01359"></a>01359         (*ait)-&gt;Relink(map_parameter);
<a name="l01360"></a>01360     }
<a name="l01361"></a>01361 }
<a name="l01362"></a>01362 
<a name="l01363"></a>01363 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l01364"></a>01364 <span class="preprocessor"></span>
<a name="l01365"></a>01365 <span class="comment">/* These require an SGNode */</span>
<a name="l01366"></a>01366 <span class="preprocessor">#define MATHUTILS_VEC_CB_POS_LOCAL 1</span>
<a name="l01367"></a>01367 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_POS_GLOBAL 2</span>
<a name="l01368"></a>01368 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_SCALE_LOCAL 3</span>
<a name="l01369"></a>01369 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_SCALE_GLOBAL 4</span>
<a name="l01370"></a>01370 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_INERTIA_LOCAL 5</span>
<a name="l01371"></a>01371 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_OBJECT_COLOR 6</span>
<a name="l01372"></a>01372 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_LINVEL_LOCAL 7</span>
<a name="l01373"></a>01373 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_LINVEL_GLOBAL 8</span>
<a name="l01374"></a>01374 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_ANGVEL_LOCAL 9</span>
<a name="l01375"></a>01375 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_VEC_CB_ANGVEL_GLOBAL 10</span>
<a name="l01376"></a>01376 <span class="preprocessor"></span>
<a name="l01377"></a>01377 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mathutils_kxgameob_vector_cb_index= -1; <span class="comment">/* index for our callbacks */</span>
<a name="l01378"></a>01378 
<a name="l01379"></a>01379 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_generic_check(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo)
<a name="l01380"></a>01380 {
<a name="l01381"></a>01381     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(bmo-&gt;cb_user);
<a name="l01382"></a>01382     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01383"></a>01383         <span class="keywordflow">return</span> -1;
<a name="l01384"></a>01384     
<a name="l01385"></a>01385     <span class="keywordflow">return</span> 0;
<a name="l01386"></a>01386 }
<a name="l01387"></a>01387 
<a name="l01388"></a>01388 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_vector_get(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype)
<a name="l01389"></a>01389 {
<a name="l01390"></a>01390     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(bmo-&gt;cb_user);
<a name="l01391"></a>01391     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01392"></a>01392         <span class="keywordflow">return</span> -1;
<a name="l01393"></a>01393 
<a name="l01394"></a>01394 <span class="preprocessor">#define PHYS_ERR(attr) PyErr_SetString(PyExc_AttributeError, &quot;KX_GameObject.&quot; attr &quot;, is missing a physics controller&quot;)</span>
<a name="l01395"></a>01395 <span class="preprocessor"></span>
<a name="l01396"></a>01396     <span class="keywordflow">switch</span>(subtype) {
<a name="l01397"></a>01397         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_POS_LOCAL:
<a name="l01398"></a>01398             <span class="keyword">self</span>-&gt;NodeGetLocalPosition().getValue(bmo-&gt;data);
<a name="l01399"></a>01399             <span class="keywordflow">break</span>;
<a name="l01400"></a>01400         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_POS_GLOBAL:
<a name="l01401"></a>01401             <span class="keyword">self</span>-&gt;NodeGetWorldPosition().getValue(bmo-&gt;data);
<a name="l01402"></a>01402             <span class="keywordflow">break</span>;
<a name="l01403"></a>01403         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_SCALE_LOCAL:
<a name="l01404"></a>01404             <span class="keyword">self</span>-&gt;NodeGetLocalScaling().getValue(bmo-&gt;data);
<a name="l01405"></a>01405             <span class="keywordflow">break</span>;
<a name="l01406"></a>01406         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_SCALE_GLOBAL:
<a name="l01407"></a>01407             <span class="keyword">self</span>-&gt;NodeGetWorldScaling().getValue(bmo-&gt;data);
<a name="l01408"></a>01408             <span class="keywordflow">break</span>;
<a name="l01409"></a>01409         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_INERTIA_LOCAL:
<a name="l01410"></a>01410             <span class="keywordflow">if</span> (!self-&gt;GetPhysicsController()) <span class="keywordflow">return</span> PHYS_ERR(<span class="stringliteral">&quot;localInertia&quot;</span>), -1;
<a name="l01411"></a>01411             <span class="keyword">self</span>-&gt;GetPhysicsController()-&gt;GetLocalInertia().getValue(bmo-&gt;data);
<a name="l01412"></a>01412             <span class="keywordflow">break</span>;
<a name="l01413"></a>01413         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_OBJECT_COLOR:
<a name="l01414"></a>01414             <span class="keyword">self</span>-&gt;GetObjectColor().getValue(bmo-&gt;data);
<a name="l01415"></a>01415             <span class="keywordflow">break</span>;
<a name="l01416"></a>01416         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_LINVEL_LOCAL:
<a name="l01417"></a>01417             <span class="keywordflow">if</span> (!self-&gt;GetPhysicsController()) <span class="keywordflow">return</span> PHYS_ERR(<span class="stringliteral">&quot;localLinearVelocity&quot;</span>), -1;
<a name="l01418"></a>01418             <span class="keyword">self</span>-&gt;GetLinearVelocity(<span class="keyword">true</span>).getValue(bmo-&gt;data);
<a name="l01419"></a>01419             <span class="keywordflow">break</span>;
<a name="l01420"></a>01420         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_LINVEL_GLOBAL:
<a name="l01421"></a>01421             <span class="keywordflow">if</span> (!self-&gt;GetPhysicsController()) <span class="keywordflow">return</span> PHYS_ERR(<span class="stringliteral">&quot;worldLinearVelocity&quot;</span>), -1;
<a name="l01422"></a>01422             <span class="keyword">self</span>-&gt;GetLinearVelocity(<span class="keyword">false</span>).getValue(bmo-&gt;data);
<a name="l01423"></a>01423             <span class="keywordflow">break</span>;
<a name="l01424"></a>01424         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_ANGVEL_LOCAL:
<a name="l01425"></a>01425             <span class="keywordflow">if</span> (!self-&gt;GetPhysicsController()) <span class="keywordflow">return</span> PHYS_ERR(<span class="stringliteral">&quot;localLinearVelocity&quot;</span>), -1;
<a name="l01426"></a>01426             <span class="keyword">self</span>-&gt;GetAngularVelocity(<span class="keyword">true</span>).getValue(bmo-&gt;data);
<a name="l01427"></a>01427             <span class="keywordflow">break</span>;
<a name="l01428"></a>01428         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_ANGVEL_GLOBAL:
<a name="l01429"></a>01429             <span class="keywordflow">if</span> (!self-&gt;GetPhysicsController()) <span class="keywordflow">return</span> PHYS_ERR(<span class="stringliteral">&quot;worldLinearVelocity&quot;</span>), -1;
<a name="l01430"></a>01430             <span class="keyword">self</span>-&gt;GetAngularVelocity(<span class="keyword">false</span>).getValue(bmo-&gt;data);
<a name="l01431"></a>01431             <span class="keywordflow">break</span>;
<a name="l01432"></a>01432             
<a name="l01433"></a>01433     }
<a name="l01434"></a>01434     
<a name="l01435"></a>01435 <span class="preprocessor">#undef PHYS_ERR</span>
<a name="l01436"></a>01436 <span class="preprocessor"></span>    
<a name="l01437"></a>01437     <span class="keywordflow">return</span> 0;
<a name="l01438"></a>01438 }
<a name="l01439"></a>01439 
<a name="l01440"></a>01440 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_vector_set(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype)
<a name="l01441"></a>01441 {
<a name="l01442"></a>01442     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(bmo-&gt;cb_user);
<a name="l01443"></a>01443     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01444"></a>01444         <span class="keywordflow">return</span> -1;
<a name="l01445"></a>01445     
<a name="l01446"></a>01446     <span class="keywordflow">switch</span>(subtype) {
<a name="l01447"></a>01447         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_POS_LOCAL:
<a name="l01448"></a>01448             <span class="keyword">self</span>-&gt;NodeSetLocalPosition(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data));
<a name="l01449"></a>01449             <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l01450"></a>01450             <span class="keywordflow">break</span>;
<a name="l01451"></a>01451         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_POS_GLOBAL:
<a name="l01452"></a>01452             <span class="keyword">self</span>-&gt;NodeSetWorldPosition(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data));
<a name="l01453"></a>01453             <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l01454"></a>01454             <span class="keywordflow">break</span>;
<a name="l01455"></a>01455         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_SCALE_LOCAL:
<a name="l01456"></a>01456             <span class="keyword">self</span>-&gt;NodeSetLocalScale(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data));
<a name="l01457"></a>01457             <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l01458"></a>01458             <span class="keywordflow">break</span>;
<a name="l01459"></a>01459         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_SCALE_GLOBAL:
<a name="l01460"></a>01460             PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;KX_GameObject.worldScale is read-only&quot;</span>);
<a name="l01461"></a>01461             <span class="keywordflow">return</span> -1;
<a name="l01462"></a>01462         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_INERTIA_LOCAL:
<a name="l01463"></a>01463             <span class="comment">/* read only */</span>
<a name="l01464"></a>01464             <span class="keywordflow">break</span>;
<a name="l01465"></a>01465         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_OBJECT_COLOR:
<a name="l01466"></a>01466             <span class="keyword">self</span>-&gt;SetObjectColor(<a class="code" href="../../d2/dfc/classMT__Vector4.html">MT_Vector4</a>(bmo-&gt;data));
<a name="l01467"></a>01467             <span class="keywordflow">break</span>;
<a name="l01468"></a>01468         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_LINVEL_LOCAL:
<a name="l01469"></a>01469             <span class="keyword">self</span>-&gt;setLinearVelocity(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data),<span class="keyword">true</span>);
<a name="l01470"></a>01470             <span class="keywordflow">break</span>;
<a name="l01471"></a>01471         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_LINVEL_GLOBAL:
<a name="l01472"></a>01472             <span class="keyword">self</span>-&gt;setLinearVelocity(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data),<span class="keyword">false</span>);
<a name="l01473"></a>01473             <span class="keywordflow">break</span>;
<a name="l01474"></a>01474         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_ANGVEL_LOCAL:
<a name="l01475"></a>01475             <span class="keyword">self</span>-&gt;setAngularVelocity(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data),<span class="keyword">true</span>);
<a name="l01476"></a>01476             <span class="keywordflow">break</span>;
<a name="l01477"></a>01477         <span class="keywordflow">case</span> MATHUTILS_VEC_CB_ANGVEL_GLOBAL:
<a name="l01478"></a>01478             <span class="keyword">self</span>-&gt;setAngularVelocity(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(bmo-&gt;data),<span class="keyword">false</span>);
<a name="l01479"></a>01479             <span class="keywordflow">break</span>;
<a name="l01480"></a>01480     }
<a name="l01481"></a>01481     
<a name="l01482"></a>01482     <span class="keywordflow">return</span> 0;
<a name="l01483"></a>01483 }
<a name="l01484"></a>01484 
<a name="l01485"></a>01485 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_vector_get_index(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype, <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>)
<a name="l01486"></a>01486 {
<a name="l01487"></a>01487     <span class="comment">/* lazy, avoid repeteing the case statement */</span>
<a name="l01488"></a>01488     <span class="keywordflow">if</span> (mathutils_kxgameob_vector_get(bmo, subtype) == -1)
<a name="l01489"></a>01489         <span class="keywordflow">return</span> -1;
<a name="l01490"></a>01490     <span class="keywordflow">return</span> 0;
<a name="l01491"></a>01491 }
<a name="l01492"></a>01492 
<a name="l01493"></a>01493 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_vector_set_index(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype, <span class="keywordtype">int</span> index)
<a name="l01494"></a>01494 {
<a name="l01495"></a>01495     <span class="keywordtype">float</span> f= bmo-&gt;data[<a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>];
<a name="l01496"></a>01496     
<a name="l01497"></a>01497     <span class="comment">/* lazy, avoid repeteing the case statement */</span>
<a name="l01498"></a>01498     <span class="keywordflow">if</span> (mathutils_kxgameob_vector_get(bmo, subtype) == -1)
<a name="l01499"></a>01499         <span class="keywordflow">return</span> -1;
<a name="l01500"></a>01500     
<a name="l01501"></a>01501     bmo-&gt;data[<a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>]= f;
<a name="l01502"></a>01502     <span class="keywordflow">return</span> mathutils_kxgameob_vector_set(bmo, subtype);
<a name="l01503"></a>01503 }
<a name="l01504"></a>01504 
<a name="l01505"></a>01505 <a class="code" href="../../df/dbc/structMathutils__Callback.html">Mathutils_Callback</a> mathutils_kxgameob_vector_cb = {
<a name="l01506"></a>01506     mathutils_kxgameob_generic_check,
<a name="l01507"></a>01507     mathutils_kxgameob_vector_get,
<a name="l01508"></a>01508     mathutils_kxgameob_vector_set,
<a name="l01509"></a>01509     mathutils_kxgameob_vector_get_index,
<a name="l01510"></a>01510     mathutils_kxgameob_vector_set_index
<a name="l01511"></a>01511 };
<a name="l01512"></a>01512 
<a name="l01513"></a>01513 <span class="comment">/* Matrix */</span>
<a name="l01514"></a>01514 <span class="preprocessor">#define MATHUTILS_MAT_CB_ORI_LOCAL 1</span>
<a name="l01515"></a>01515 <span class="preprocessor"></span><span class="preprocessor">#define MATHUTILS_MAT_CB_ORI_GLOBAL 2</span>
<a name="l01516"></a>01516 <span class="preprocessor"></span>
<a name="l01517"></a>01517 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mathutils_kxgameob_matrix_cb_index= -1; <span class="comment">/* index for our callbacks */</span>
<a name="l01518"></a>01518 
<a name="l01519"></a>01519 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_matrix_get(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype)
<a name="l01520"></a>01520 {
<a name="l01521"></a>01521     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(bmo-&gt;cb_user);
<a name="l01522"></a>01522     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01523"></a>01523         <span class="keywordflow">return</span> -1;
<a name="l01524"></a>01524 
<a name="l01525"></a>01525     <span class="keywordflow">switch</span>(subtype) {
<a name="l01526"></a>01526         <span class="keywordflow">case</span> MATHUTILS_MAT_CB_ORI_LOCAL:
<a name="l01527"></a>01527             <span class="keyword">self</span>-&gt;NodeGetLocalOrientation().getValue3x3(bmo-&gt;data);
<a name="l01528"></a>01528             <span class="keywordflow">break</span>;
<a name="l01529"></a>01529         <span class="keywordflow">case</span> MATHUTILS_MAT_CB_ORI_GLOBAL:
<a name="l01530"></a>01530             <span class="keyword">self</span>-&gt;NodeGetWorldOrientation().getValue3x3(bmo-&gt;data);
<a name="l01531"></a>01531             <span class="keywordflow">break</span>;
<a name="l01532"></a>01532     }
<a name="l01533"></a>01533     
<a name="l01534"></a>01534     <span class="keywordflow">return</span> 0;
<a name="l01535"></a>01535 }
<a name="l01536"></a>01536 
<a name="l01537"></a>01537 
<a name="l01538"></a>01538 <span class="keyword">static</span> <span class="keywordtype">int</span> mathutils_kxgameob_matrix_set(<a class="code" href="../../d5/d6d/structBaseMathObject.html">BaseMathObject</a> *bmo, <span class="keywordtype">int</span> subtype)
<a name="l01539"></a>01539 {
<a name="l01540"></a>01540     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(bmo-&gt;cb_user);
<a name="l01541"></a>01541     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01542"></a>01542         <span class="keywordflow">return</span> -1;
<a name="l01543"></a>01543     
<a name="l01544"></a>01544     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> mat3x3;
<a name="l01545"></a>01545     <span class="keywordflow">switch</span>(subtype) {
<a name="l01546"></a>01546         <span class="keywordflow">case</span> MATHUTILS_MAT_CB_ORI_LOCAL:
<a name="l01547"></a>01547             mat3x3.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a58c435ca9f5bcb53cf4c6c052ed554b6">setValue3x3</a>(bmo-&gt;data);
<a name="l01548"></a>01548             <span class="keyword">self</span>-&gt;NodeSetLocalOrientation(mat3x3);
<a name="l01549"></a>01549             <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l01550"></a>01550             <span class="keywordflow">break</span>;
<a name="l01551"></a>01551         <span class="keywordflow">case</span> MATHUTILS_MAT_CB_ORI_GLOBAL:
<a name="l01552"></a>01552             mat3x3.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a58c435ca9f5bcb53cf4c6c052ed554b6">setValue3x3</a>(bmo-&gt;data);
<a name="l01553"></a>01553             <span class="keyword">self</span>-&gt;NodeSetLocalOrientation(mat3x3);
<a name="l01554"></a>01554             <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l01555"></a>01555             <span class="keywordflow">break</span>;
<a name="l01556"></a>01556     }
<a name="l01557"></a>01557     
<a name="l01558"></a>01558     <span class="keywordflow">return</span> 0;
<a name="l01559"></a>01559 }
<a name="l01560"></a>01560 
<a name="l01561"></a>01561 <a class="code" href="../../df/dbc/structMathutils__Callback.html">Mathutils_Callback</a> mathutils_kxgameob_matrix_cb = {
<a name="l01562"></a>01562     mathutils_kxgameob_generic_check,
<a name="l01563"></a>01563     mathutils_kxgameob_matrix_get,
<a name="l01564"></a>01564     mathutils_kxgameob_matrix_set,
<a name="l01565"></a>01565     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01566"></a>01566     NULL
<a name="l01567"></a>01567 };
<a name="l01568"></a>01568 
<a name="l01569"></a>01569 
<a name="l01570"></a>01570 <span class="keywordtype">void</span> KX_GameObject_Mathutils_Callback_Init(<span class="keywordtype">void</span>)
<a name="l01571"></a>01571 {
<a name="l01572"></a>01572     <span class="comment">// register mathutils callbacks, ok to run more then once.</span>
<a name="l01573"></a>01573     mathutils_kxgameob_vector_cb_index= <a class="code" href="../../d1/d8a/mathutils_8c.html#aeec0cdd1186f71a2cd61ee3bb710eb14">Mathutils_RegisterCallback</a>(&amp;mathutils_kxgameob_vector_cb);
<a name="l01574"></a>01574     mathutils_kxgameob_matrix_cb_index= <a class="code" href="../../d1/d8a/mathutils_8c.html#aeec0cdd1186f71a2cd61ee3bb710eb14">Mathutils_RegisterCallback</a>(&amp;mathutils_kxgameob_matrix_cb);
<a name="l01575"></a>01575 }
<a name="l01576"></a>01576 
<a name="l01577"></a>01577 <span class="preprocessor">#endif // USE_MATHUTILS</span>
<a name="l01578"></a>01578 <span class="preprocessor"></span>
<a name="l01579"></a>01579 <span class="preprocessor">#ifdef WITH_PYTHON</span>
<a name="l01580"></a>01580 <span class="preprocessor"></span><span class="comment">/* ------- python stuff ---------------------------------------------------*/</span>
<a name="l01581"></a>01581 PyMethodDef KX_GameObject::Methods[] = {
<a name="l01582"></a>01582     {<span class="stringliteral">&quot;applyForce&quot;</span>, (PyCFunction)    KX_GameObject::sPyApplyForce, METH_VARARGS},
<a name="l01583"></a>01583     {<span class="stringliteral">&quot;applyTorque&quot;</span>, (PyCFunction)   KX_GameObject::sPyApplyTorque, METH_VARARGS},
<a name="l01584"></a>01584     {<span class="stringliteral">&quot;applyRotation&quot;</span>, (PyCFunction) KX_GameObject::sPyApplyRotation, METH_VARARGS},
<a name="l01585"></a>01585     {<span class="stringliteral">&quot;applyMovement&quot;</span>, (PyCFunction) KX_GameObject::sPyApplyMovement, METH_VARARGS},
<a name="l01586"></a>01586     {<span class="stringliteral">&quot;getLinearVelocity&quot;</span>, (PyCFunction) KX_GameObject::sPyGetLinearVelocity, METH_VARARGS},
<a name="l01587"></a>01587     {<span class="stringliteral">&quot;setLinearVelocity&quot;</span>, (PyCFunction) KX_GameObject::sPySetLinearVelocity, METH_VARARGS},
<a name="l01588"></a>01588     {<span class="stringliteral">&quot;getAngularVelocity&quot;</span>, (PyCFunction) KX_GameObject::sPyGetAngularVelocity, METH_VARARGS},
<a name="l01589"></a>01589     {<span class="stringliteral">&quot;setAngularVelocity&quot;</span>, (PyCFunction) KX_GameObject::sPySetAngularVelocity, METH_VARARGS},
<a name="l01590"></a>01590     {<span class="stringliteral">&quot;getVelocity&quot;</span>, (PyCFunction) KX_GameObject::sPyGetVelocity, METH_VARARGS},
<a name="l01591"></a>01591     {<span class="stringliteral">&quot;getReactionForce&quot;</span>, (PyCFunction) KX_GameObject::sPyGetReactionForce, METH_NOARGS},
<a name="l01592"></a>01592     {<span class="stringliteral">&quot;alignAxisToVect&quot;</span>,(PyCFunction) KX_GameObject::sPyAlignAxisToVect, METH_VARARGS},
<a name="l01593"></a>01593     {<span class="stringliteral">&quot;getAxisVect&quot;</span>,(PyCFunction) KX_GameObject::sPyGetAxisVect, METH_O},
<a name="l01594"></a>01594     {<span class="stringliteral">&quot;suspendDynamics&quot;</span>, (PyCFunction)KX_GameObject::sPySuspendDynamics,METH_NOARGS},
<a name="l01595"></a>01595     {<span class="stringliteral">&quot;restoreDynamics&quot;</span>, (PyCFunction)KX_GameObject::sPyRestoreDynamics,METH_NOARGS},
<a name="l01596"></a>01596     {<span class="stringliteral">&quot;enableRigidBody&quot;</span>, (PyCFunction)KX_GameObject::sPyEnableRigidBody,METH_NOARGS},
<a name="l01597"></a>01597     {<span class="stringliteral">&quot;disableRigidBody&quot;</span>, (PyCFunction)KX_GameObject::sPyDisableRigidBody,METH_NOARGS},
<a name="l01598"></a>01598     {<span class="stringliteral">&quot;applyImpulse&quot;</span>, (PyCFunction) KX_GameObject::sPyApplyImpulse, METH_VARARGS},
<a name="l01599"></a>01599     {<span class="stringliteral">&quot;setCollisionMargin&quot;</span>, (PyCFunction) KX_GameObject::sPySetCollisionMargin, METH_O},
<a name="l01600"></a>01600     {<span class="stringliteral">&quot;setParent&quot;</span>, (PyCFunction)KX_GameObject::sPySetParent,METH_VARARGS},
<a name="l01601"></a>01601     {<span class="stringliteral">&quot;setVisible&quot;</span>,(PyCFunction) KX_GameObject::sPySetVisible, METH_VARARGS},
<a name="l01602"></a>01602     {<span class="stringliteral">&quot;setOcclusion&quot;</span>,(PyCFunction) KX_GameObject::sPySetOcclusion, METH_VARARGS},
<a name="l01603"></a>01603     {<span class="stringliteral">&quot;removeParent&quot;</span>, (PyCFunction)KX_GameObject::sPyRemoveParent,METH_NOARGS},
<a name="l01604"></a>01604 
<a name="l01605"></a>01605 
<a name="l01606"></a>01606     {<span class="stringliteral">&quot;getPhysicsId&quot;</span>, (PyCFunction)KX_GameObject::sPyGetPhysicsId,METH_NOARGS},
<a name="l01607"></a>01607     {<span class="stringliteral">&quot;getPropertyNames&quot;</span>, (PyCFunction)KX_GameObject::sPyGetPropertyNames,METH_NOARGS},
<a name="l01608"></a>01608     {<span class="stringliteral">&quot;replaceMesh&quot;</span>,(PyCFunction) KX_GameObject::sPyReplaceMesh, METH_VARARGS},
<a name="l01609"></a>01609     {<span class="stringliteral">&quot;endObject&quot;</span>,(PyCFunction) KX_GameObject::sPyEndObject, METH_NOARGS},
<a name="l01610"></a>01610     {<span class="stringliteral">&quot;reinstancePhysicsMesh&quot;</span>, (PyCFunction)KX_GameObject::sPyReinstancePhysicsMesh,METH_VARARGS},
<a name="l01611"></a>01611     
<a name="l01612"></a>01612     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, rayCastTo),
<a name="l01613"></a>01613     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, rayCast),
<a name="l01614"></a>01614     KX_PYMETHODTABLE_O(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getDistanceTo),
<a name="l01615"></a>01615     KX_PYMETHODTABLE_O(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getVectTo),
<a name="l01616"></a>01616     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, sendMessage),
<a name="l01617"></a>01617 
<a name="l01618"></a>01618     KX_PYMETHODTABLE_KEYWORDS(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, playAction),
<a name="l01619"></a>01619     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, stopAction),
<a name="l01620"></a>01620     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getActionFrame),
<a name="l01621"></a>01621     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, setActionFrame),
<a name="l01622"></a>01622     KX_PYMETHODTABLE(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, isPlayingAction),
<a name="l01623"></a>01623     
<a name="l01624"></a>01624     <span class="comment">// dict style access for props</span>
<a name="l01625"></a>01625     {<span class="stringliteral">&quot;get&quot;</span>,(PyCFunction) KX_GameObject::sPyget, METH_VARARGS},
<a name="l01626"></a>01626     
<a name="l01627"></a>01627     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>} <span class="comment">//Sentinel</span>
<a name="l01628"></a>01628 };
<a name="l01629"></a>01629 
<a name="l01630"></a>01630 PyAttributeDef KX_GameObject::Attributes[] = {
<a name="l01631"></a>01631     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;name&quot;</span>,      <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_name),
<a name="l01632"></a>01632     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;parent&quot;</span>,    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_parent),
<a name="l01633"></a>01633     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;life&quot;</span>,      <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_life),
<a name="l01634"></a>01634     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;mass&quot;</span>,      <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_mass,     pyattr_set_mass),
<a name="l01635"></a>01635     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;linVelocityMin&quot;</span>,        <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_lin_vel_min, pyattr_set_lin_vel_min),
<a name="l01636"></a>01636     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;linVelocityMax&quot;</span>,        <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_lin_vel_max, pyattr_set_lin_vel_max),
<a name="l01637"></a>01637     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;visible&quot;</span>,   <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_visible,  pyattr_set_visible),
<a name="l01638"></a>01638     KX_PYATTRIBUTE_BOOL_RW    (<span class="stringliteral">&quot;occlusion&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, m_bOccluder),
<a name="l01639"></a>01639     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;position&quot;</span>,  <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldPosition,    pyattr_set_localPosition),
<a name="l01640"></a>01640     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;localInertia&quot;</span>,  <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localInertia),
<a name="l01641"></a>01641     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;orientation&quot;</span>,<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>,pyattr_get_worldOrientation,pyattr_set_localOrientation),
<a name="l01642"></a>01642     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;scaling&quot;</span>,   <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldScaling, pyattr_set_localScaling),
<a name="l01643"></a>01643     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;timeOffset&quot;</span>,<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_timeOffset,pyattr_set_timeOffset),
<a name="l01644"></a>01644     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;state&quot;</span>,     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_state,    pyattr_set_state),
<a name="l01645"></a>01645     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;meshes&quot;</span>,    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_meshes),
<a name="l01646"></a>01646     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localOrientation&quot;</span>,<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>,pyattr_get_localOrientation,pyattr_set_localOrientation),
<a name="l01647"></a>01647     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldOrientation&quot;</span>,<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>,pyattr_get_worldOrientation,pyattr_set_worldOrientation),
<a name="l01648"></a>01648     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localPosition&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localPosition,    pyattr_set_localPosition),
<a name="l01649"></a>01649     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldPosition&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldPosition,    pyattr_set_worldPosition),
<a name="l01650"></a>01650     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localScale&quot;</span>,    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localScaling, pyattr_set_localScaling),
<a name="l01651"></a>01651     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldScale&quot;</span>,    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldScaling, pyattr_set_worldScaling),
<a name="l01652"></a>01652     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localTransform&quot;</span>,        <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localTransform, pyattr_set_localTransform),
<a name="l01653"></a>01653     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldTransform&quot;</span>,        <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldTransform, pyattr_set_worldTransform),
<a name="l01654"></a>01654     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;linearVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localLinearVelocity, pyattr_set_worldLinearVelocity),
<a name="l01655"></a>01655     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localLinearVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localLinearVelocity, pyattr_set_localLinearVelocity),
<a name="l01656"></a>01656     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldLinearVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldLinearVelocity, pyattr_set_worldLinearVelocity),
<a name="l01657"></a>01657     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;angularVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localAngularVelocity, pyattr_set_worldAngularVelocity),
<a name="l01658"></a>01658     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;localAngularVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_localAngularVelocity, pyattr_set_localAngularVelocity),
<a name="l01659"></a>01659     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;worldAngularVelocity&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_worldAngularVelocity, pyattr_set_worldAngularVelocity),
<a name="l01660"></a>01660     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;children&quot;</span>,  <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_children),
<a name="l01661"></a>01661     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;childrenRecursive&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_children_recursive),
<a name="l01662"></a>01662     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;attrDict&quot;</span>,  <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_attrDict),
<a name="l01663"></a>01663     KX_PYATTRIBUTE_RW_FUNCTION(<span class="stringliteral">&quot;color&quot;</span>, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_obcolor, pyattr_set_obcolor),
<a name="l01664"></a>01664     
<a name="l01665"></a>01665     <span class="comment">/* experimental, don&#39;t rely on these yet */</span>
<a name="l01666"></a>01666     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;sensors&quot;</span>,       <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_sensors),
<a name="l01667"></a>01667     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;controllers&quot;</span>,   <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_controllers),
<a name="l01668"></a>01668     KX_PYATTRIBUTE_RO_FUNCTION(<span class="stringliteral">&quot;actuators&quot;</span>,     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, pyattr_get_actuators),
<a name="l01669"></a>01669     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>} <span class="comment">//Sentinel</span>
<a name="l01670"></a>01670 };
<a name="l01671"></a>01671 
<a name="l01672"></a>01672 PyObject* KX_GameObject::PyReplaceMesh(PyObject* args)
<a name="l01673"></a>01673 {
<a name="l01674"></a>01674     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l01675"></a>01675     
<a name="l01676"></a>01676     PyObject *value;
<a name="l01677"></a>01677     <span class="keywordtype">int</span> use_gfx= 1, use_phys= 0;
<a name="l01678"></a>01678     <a class="code" href="../../d5/d85/classRAS__MeshObject.html">RAS_MeshObject</a> *new_mesh;
<a name="l01679"></a>01679     
<a name="l01680"></a>01680     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|ii:replaceMesh&quot;</span>, &amp;value, &amp;use_gfx, &amp;use_phys))
<a name="l01681"></a>01681         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01682"></a>01682     
<a name="l01683"></a>01683     <span class="keywordflow">if</span> (!ConvertPythonToMesh(value, &amp;new_mesh, <span class="keyword">false</span>, <span class="stringliteral">&quot;gameOb.replaceMesh(value): KX_GameObject&quot;</span>))
<a name="l01684"></a>01684         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01685"></a>01685     
<a name="l01686"></a>01686     scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a8c98cded27cde1ff0bfc3e5a54b9e53d">ReplaceMesh</a>(<span class="keyword">this</span>, new_mesh, (<span class="keywordtype">bool</span>)use_gfx, (<span class="keywordtype">bool</span>)use_phys);
<a name="l01687"></a>01687     Py_RETURN_NONE;
<a name="l01688"></a>01688 }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690 PyObject* KX_GameObject::PyEndObject()
<a name="l01691"></a>01691 {
<a name="l01692"></a>01692     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l01693"></a>01693     
<a name="l01694"></a>01694     scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a5b5f17f9ad24ad20d6770447b8368a3f">DelayedRemoveObject</a>(<span class="keyword">this</span>);
<a name="l01695"></a>01695     
<a name="l01696"></a>01696     Py_RETURN_NONE;
<a name="l01697"></a>01697 
<a name="l01698"></a>01698 }
<a name="l01699"></a>01699 
<a name="l01700"></a>01700 PyObject* KX_GameObject::PyReinstancePhysicsMesh(PyObject* args)
<a name="l01701"></a>01701 {
<a name="l01702"></a>01702     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *gameobj= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01703"></a>01703     <a class="code" href="../../d5/d85/classRAS__MeshObject.html">RAS_MeshObject</a> *<a class="code" href="../../de/de7/structObject.html#ad755772f4633cd0ef94a05738ffb5e84">mesh</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01704"></a>01704     
<a name="l01705"></a>01705     PyObject *gameobj_py= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01706"></a>01706     PyObject *mesh_py= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01707"></a>01707 
<a name="l01708"></a>01708     <span class="keywordflow">if</span> (    !PyArg_ParseTuple(args,<span class="stringliteral">&quot;|OO:reinstancePhysicsMesh&quot;</span>,&amp;gameobj_py, &amp;mesh_py) ||
<a name="l01709"></a>01709             (gameobj_py &amp;&amp; !ConvertPythonToGameObject(gameobj_py, &amp;gameobj, <span class="keyword">true</span>, <span class="stringliteral">&quot;gameOb.reinstancePhysicsMesh(obj, mesh): KX_GameObject&quot;</span>)) || 
<a name="l01710"></a>01710             (mesh_py &amp;&amp; !ConvertPythonToMesh(mesh_py, &amp;mesh, <span class="keyword">true</span>, <span class="stringliteral">&quot;gameOb.reinstancePhysicsMesh(obj, mesh): KX_GameObject&quot;</span>))
<a name="l01711"></a>01711         ) {
<a name="l01712"></a>01712         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01713"></a>01713     }
<a name="l01714"></a>01714 <span class="preprocessor">#ifdef USE_BULLET</span>
<a name="l01715"></a>01715 <span class="preprocessor"></span>    <span class="comment">/* gameobj and mesh can be NULL */</span>
<a name="l01716"></a>01716     <span class="keywordflow">if</span> (KX_ReInstanceBulletShapeFromMesh(<span class="keyword">this</span>, gameobj, mesh))
<a name="l01717"></a>01717         Py_RETURN_TRUE;
<a name="l01718"></a>01718 <span class="preprocessor">#endif</span>
<a name="l01719"></a>01719 <span class="preprocessor"></span>    Py_RETURN_FALSE;
<a name="l01720"></a>01720 }
<a name="l01721"></a>01721 
<a name="l01722"></a>01722 <span class="keyword">static</span> PyObject *Map_GetItem(PyObject *self_v, PyObject *item)
<a name="l01723"></a>01723 {
<a name="l01724"></a>01724     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(self_v);
<a name="l01725"></a>01725     <span class="keyword">const</span> <span class="keywordtype">char</span> *attr_str= _PyUnicode_AsString(item);
<a name="l01726"></a>01726     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* resultattr;
<a name="l01727"></a>01727     PyObject* pyconvert;
<a name="l01728"></a>01728     
<a name="l01729"></a>01729     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01730"></a>01730         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;val = gameOb[key]: KX_GameObject, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l01731"></a>01731         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01732"></a>01732     }
<a name="l01733"></a>01733     
<a name="l01734"></a>01734     <span class="comment">/* first see if the attributes a string and try get the cvalue attribute */</span>
<a name="l01735"></a>01735     <span class="keywordflow">if</span> (attr_str &amp;&amp; (resultattr=self-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(attr_str))) {
<a name="l01736"></a>01736         pyconvert = resultattr-&gt;ConvertValueToPython();         
<a name="l01737"></a>01737         <span class="keywordflow">return</span> pyconvert ? pyconvert:resultattr-&gt;GetProxy();
<a name="l01738"></a>01738     }
<a name="l01739"></a>01739     <span class="comment">/* no CValue attribute, try get the python only m_attr_dict attribute */</span>
<a name="l01740"></a>01740     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (self-&gt;m_attr_dict &amp;&amp; (pyconvert=PyDict_GetItem(self-&gt;m_attr_dict, item))) {
<a name="l01741"></a>01741         
<a name="l01742"></a>01742         <span class="keywordflow">if</span> (attr_str)
<a name="l01743"></a>01743             PyErr_Clear();
<a name="l01744"></a>01744         Py_INCREF(pyconvert);
<a name="l01745"></a>01745         <span class="keywordflow">return</span> pyconvert;
<a name="l01746"></a>01746     }
<a name="l01747"></a>01747     <span class="keywordflow">else</span> {
<a name="l01748"></a>01748         <span class="keywordflow">if</span> (attr_str)   PyErr_Format(PyExc_KeyError, <span class="stringliteral">&quot;value = gameOb[key]: KX_GameObject, key \&quot;%s\&quot; does not exist&quot;</span>, attr_str);
<a name="l01749"></a>01749         <span class="keywordflow">else</span>            PyErr_SetString(PyExc_KeyError, <span class="stringliteral">&quot;value = gameOb[key]: KX_GameObject, key does not exist&quot;</span>);
<a name="l01750"></a>01750         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01751"></a>01751     }
<a name="l01752"></a>01752         
<a name="l01753"></a>01753 }
<a name="l01754"></a>01754 
<a name="l01755"></a>01755 
<a name="l01756"></a>01756 <span class="keyword">static</span> <span class="keywordtype">int</span> Map_SetItem(PyObject *self_v, PyObject *key, PyObject *val)
<a name="l01757"></a>01757 {
<a name="l01758"></a>01758     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(self_v);
<a name="l01759"></a>01759     <span class="keyword">const</span> <span class="keywordtype">char</span> *attr_str= _PyUnicode_AsString(key);
<a name="l01760"></a>01760     <span class="keywordflow">if</span> (attr_str==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01761"></a>01761         PyErr_Clear();
<a name="l01762"></a>01762     
<a name="l01763"></a>01763     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01764"></a>01764         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;gameOb[key] = value: KX_GameObject, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l01765"></a>01765         <span class="keywordflow">return</span> -1;
<a name="l01766"></a>01766     }
<a name="l01767"></a>01767     
<a name="l01768"></a>01768     <span class="keywordflow">if</span> (val==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) { <span class="comment">/* del ob[&quot;key&quot;] */</span>
<a name="l01769"></a>01769         <span class="keywordtype">int</span> del= 0;
<a name="l01770"></a>01770         
<a name="l01771"></a>01771         <span class="comment">/* try remove both just in case */</span>
<a name="l01772"></a>01772         <span class="keywordflow">if</span> (attr_str)
<a name="l01773"></a>01773             del |= (<span class="keyword">self</span>-&gt;RemoveProperty(attr_str)==<span class="keyword">true</span>) ? 1:0;
<a name="l01774"></a>01774         
<a name="l01775"></a>01775         <span class="keywordflow">if</span> (self-&gt;m_attr_dict)
<a name="l01776"></a>01776             del |= (PyDict_DelItem(self-&gt;m_attr_dict, key)==0) ? 1:0;
<a name="l01777"></a>01777         
<a name="l01778"></a>01778         <span class="keywordflow">if</span> (del==0) {
<a name="l01779"></a>01779             <span class="keywordflow">if</span> (attr_str)   PyErr_Format(PyExc_KeyError, <span class="stringliteral">&quot;gameOb[key] = value: KX_GameObject, key \&quot;%s\&quot; could not be set&quot;</span>, attr_str);
<a name="l01780"></a>01780             <span class="keywordflow">else</span>            PyErr_SetString(PyExc_KeyError, <span class="stringliteral">&quot;del gameOb[key]: KX_GameObject, key could not be deleted&quot;</span>);
<a name="l01781"></a>01781             <span class="keywordflow">return</span> -1;
<a name="l01782"></a>01782         }
<a name="l01783"></a>01783         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (self-&gt;m_attr_dict) {
<a name="l01784"></a>01784             PyErr_Clear(); <span class="comment">/* PyDict_DelItem sets an error when it fails */</span>
<a name="l01785"></a>01785         }
<a name="l01786"></a>01786     }
<a name="l01787"></a>01787     <span class="keywordflow">else</span> { <span class="comment">/* ob[&quot;key&quot;] = value */</span>
<a name="l01788"></a>01788         <span class="keywordtype">int</span> <span class="keyword">set</span>= 0;
<a name="l01789"></a>01789         
<a name="l01790"></a>01790         <span class="comment">/* as CValue */</span>
<a name="l01791"></a>01791         <span class="keywordflow">if</span> (attr_str &amp;&amp; PyObject_TypeCheck(val, &amp;PyObjectPlus::Type)==0) <span class="comment">/* don&#39;t allow GameObjects for eg to be assigned to CValue props */</span>
<a name="l01792"></a>01792         {
<a name="l01793"></a>01793             <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* vallie = <span class="keyword">self</span>-&gt;ConvertPythonToValue(val, <span class="stringliteral">&quot;&quot;</span>); <span class="comment">/* error unused */</span>
<a name="l01794"></a>01794             
<a name="l01795"></a>01795             <span class="keywordflow">if</span> (vallie)
<a name="l01796"></a>01796             {
<a name="l01797"></a>01797                 <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* oldprop = <span class="keyword">self</span>-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(attr_str);
<a name="l01798"></a>01798                 
<a name="l01799"></a>01799                 <span class="keywordflow">if</span> (oldprop)
<a name="l01800"></a>01800                     oldprop-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a26ba33f1bfa27182e57e70f13c43963b">SetValue</a>(vallie);
<a name="l01801"></a>01801                 <span class="keywordflow">else</span>
<a name="l01802"></a>01802                     <span class="keyword">self</span>-&gt;SetProperty(attr_str, vallie);
<a name="l01803"></a>01803                 
<a name="l01804"></a>01804                 vallie-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l01805"></a>01805                 <span class="keyword">set</span>= 1;
<a name="l01806"></a>01806                 
<a name="l01807"></a>01807                 <span class="comment">/* try remove dict value to avoid double ups */</span>
<a name="l01808"></a>01808                 <span class="keywordflow">if</span> (self-&gt;m_attr_dict) {
<a name="l01809"></a>01809                     <span class="keywordflow">if</span> (PyDict_DelItem(self-&gt;m_attr_dict, key) != 0)
<a name="l01810"></a>01810                         PyErr_Clear();
<a name="l01811"></a>01811                 }
<a name="l01812"></a>01812             }
<a name="l01813"></a>01813             <span class="keywordflow">else</span> {
<a name="l01814"></a>01814                 PyErr_Clear();
<a name="l01815"></a>01815             }
<a name="l01816"></a>01816         }
<a name="l01817"></a>01817         
<a name="l01818"></a>01818         <span class="keywordflow">if</span> (<span class="keyword">set</span>==0)
<a name="l01819"></a>01819         {
<a name="l01820"></a>01820             <span class="keywordflow">if</span> (self-&gt;m_attr_dict==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">/* lazy init */</span>
<a name="l01821"></a>01821                 <span class="keyword">self</span>-&gt;m_attr_dict= PyDict_New();
<a name="l01822"></a>01822             
<a name="l01823"></a>01823             
<a name="l01824"></a>01824             <span class="keywordflow">if</span> (PyDict_SetItem(self-&gt;m_attr_dict, key, val)==0)
<a name="l01825"></a>01825             {
<a name="l01826"></a>01826                 <span class="keywordflow">if</span> (attr_str)
<a name="l01827"></a>01827                     <span class="keyword">self</span>-&gt;RemoveProperty(attr_str); <span class="comment">/* overwrite the CValue if it exists */</span>
<a name="l01828"></a>01828                 <span class="keyword">set</span>= 1;
<a name="l01829"></a>01829             }
<a name="l01830"></a>01830             <span class="keywordflow">else</span> {
<a name="l01831"></a>01831                 <span class="keywordflow">if</span> (attr_str)   PyErr_Format(PyExc_KeyError, <span class="stringliteral">&quot;gameOb[key] = value: KX_GameObject, key \&quot;%s\&quot; not be added to internal dictionary&quot;</span>, attr_str);
<a name="l01832"></a>01832                 <span class="keywordflow">else</span>            PyErr_SetString(PyExc_KeyError, <span class="stringliteral">&quot;gameOb[key] = value: KX_GameObject, key not be added to internal dictionary&quot;</span>);
<a name="l01833"></a>01833             }
<a name="l01834"></a>01834         }
<a name="l01835"></a>01835         
<a name="l01836"></a>01836         <span class="keywordflow">if</span> (<span class="keyword">set</span>==0)
<a name="l01837"></a>01837             <span class="keywordflow">return</span> -1; <span class="comment">/* pythons error value */</span>
<a name="l01838"></a>01838         
<a name="l01839"></a>01839     }
<a name="l01840"></a>01840     
<a name="l01841"></a>01841     <span class="keywordflow">return</span> 0; <span class="comment">/* success */</span>
<a name="l01842"></a>01842 }
<a name="l01843"></a>01843 
<a name="l01844"></a>01844 <span class="keyword">static</span> <span class="keywordtype">int</span> Seq_Contains(PyObject *self_v, PyObject *value)
<a name="l01845"></a>01845 {
<a name="l01846"></a>01846     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(self_v);
<a name="l01847"></a>01847     
<a name="l01848"></a>01848     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01849"></a>01849         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;val in gameOb: KX_GameObject, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l01850"></a>01850         <span class="keywordflow">return</span> -1;
<a name="l01851"></a>01851     }
<a name="l01852"></a>01852     
<a name="l01853"></a>01853     <span class="keywordflow">if</span> (PyUnicode_Check(value) &amp;&amp; self-&gt;GetProperty(_PyUnicode_AsString(value)))
<a name="l01854"></a>01854         <span class="keywordflow">return</span> 1;
<a name="l01855"></a>01855     
<a name="l01856"></a>01856     <span class="keywordflow">if</span> (self-&gt;m_attr_dict &amp;&amp; PyDict_GetItem(self-&gt;m_attr_dict, value))
<a name="l01857"></a>01857         <span class="keywordflow">return</span> 1;
<a name="l01858"></a>01858     
<a name="l01859"></a>01859     <span class="keywordflow">return</span> 0;
<a name="l01860"></a>01860 }
<a name="l01861"></a>01861 
<a name="l01862"></a>01862 
<a name="l01863"></a>01863 PyMappingMethods KX_GameObject::Mapping = {
<a name="l01864"></a>01864     (lenfunc)<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>                   ,           <span class="comment">/*inquiry mp_length */</span>
<a name="l01865"></a>01865     (binaryfunc)Map_GetItem,        <span class="comment">/*binaryfunc mp_subscript */</span>
<a name="l01866"></a>01866     (objobjargproc)Map_SetItem, <span class="comment">/*objobjargproc mp_ass_subscript */</span>
<a name="l01867"></a>01867 };
<a name="l01868"></a>01868 
<a name="l01869"></a>01869 PySequenceMethods <a class="code" href="../../d7/da9/DNA__sequence__types_8h.html#ae911188ac1b461f468687bd5a1e70307">KX_GameObject::Sequence</a> = {
<a name="l01870"></a>01870     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* Cant set the len otherwise it can evaluate as false */</span>
<a name="l01871"></a>01871     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_concat */</span>
<a name="l01872"></a>01872     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_repeat */</span>
<a name="l01873"></a>01873     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_item */</span>
<a name="l01874"></a>01874     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_slice */</span>
<a name="l01875"></a>01875     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_ass_item */</span>
<a name="l01876"></a>01876     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,       <span class="comment">/* sq_ass_slice */</span>
<a name="l01877"></a>01877     (objobjproc)Seq_Contains,   <span class="comment">/* sq_contains */</span>
<a name="l01878"></a>01878     (binaryfunc) <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">/* sq_inplace_concat */</span>
<a name="l01879"></a>01879     (ssizeargfunc) NULL, <span class="comment">/* sq_inplace_repeat */</span>
<a name="l01880"></a>01880 };
<a name="l01881"></a>01881 
<a name="l01882"></a>01882 PyTypeObject KX_GameObject::Type = {
<a name="l01883"></a>01883     PyVarObject_HEAD_INIT(NULL, 0)
<a name="l01884"></a>01884     <span class="stringliteral">&quot;KX_GameObject&quot;</span>,
<a name="l01885"></a>01885     <span class="keyword">sizeof</span>(PyObjectPlus_Proxy),
<a name="l01886"></a>01886     0,
<a name="l01887"></a>01887     py_base_dealloc,
<a name="l01888"></a>01888     0,
<a name="l01889"></a>01889     0,
<a name="l01890"></a>01890     0,
<a name="l01891"></a>01891     0,
<a name="l01892"></a>01892     py_base_repr,
<a name="l01893"></a>01893     0,
<a name="l01894"></a>01894     &amp;<a class="code" href="../../dd/d1a/structSequence.html">Sequence</a>,
<a name="l01895"></a>01895     &amp;Mapping,
<a name="l01896"></a>01896     0,0,0,
<a name="l01897"></a>01897     NULL,
<a name="l01898"></a>01898     NULL,
<a name="l01899"></a>01899     0,
<a name="l01900"></a>01900     Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE,
<a name="l01901"></a>01901     0,0,0,0,0,0,0,
<a name="l01902"></a>01902     Methods,
<a name="l01903"></a>01903     0,
<a name="l01904"></a>01904     0,
<a name="l01905"></a>01905     &amp;SCA_IObject::Type,
<a name="l01906"></a>01906     0,0,0,0,0,0,
<a name="l01907"></a>01907     py_base_new
<a name="l01908"></a>01908 };
<a name="l01909"></a>01909 
<a name="l01910"></a>01910 PyObject* KX_GameObject::pyattr_get_name(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01911"></a>01911 {
<a name="l01912"></a>01912     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01913"></a>01913     <span class="keywordflow">return</span> PyUnicode_From_STR_String(self-&gt;GetName());
<a name="l01914"></a>01914 }
<a name="l01915"></a>01915 
<a name="l01916"></a>01916 PyObject* KX_GameObject::pyattr_get_parent(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01917"></a>01917 {
<a name="l01918"></a>01918     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01919"></a>01919     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a> = <span class="keyword">self</span>-&gt;GetParent();
<a name="l01920"></a>01920     <span class="keywordflow">if</span> (parent) {
<a name="l01921"></a>01921         parent-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>(); <span class="comment">/* self-&gt;GetParent() AddRef&#39;s */</span>
<a name="l01922"></a>01922         <span class="keywordflow">return</span> parent-&gt;GetProxy();
<a name="l01923"></a>01923     }
<a name="l01924"></a>01924     Py_RETURN_NONE;
<a name="l01925"></a>01925 }
<a name="l01926"></a>01926 
<a name="l01927"></a>01927 PyObject* KX_GameObject::pyattr_get_life(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01928"></a>01928 {
<a name="l01929"></a>01929     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01930"></a>01930 
<a name="l01931"></a>01931     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *life = <span class="keyword">self</span>-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(<span class="stringliteral">&quot;::timebomb&quot;</span>);
<a name="l01932"></a>01932     <span class="keywordflow">if</span> (life)
<a name="l01933"></a>01933         <span class="comment">// this convert the timebomb seconds to frames, hard coded 50.0 (assuming 50fps)</span>
<a name="l01934"></a>01934         <span class="comment">// value hardcoded in KX_Scene::AddReplicaObject()</span>
<a name="l01935"></a>01935         <span class="keywordflow">return</span> PyFloat_FromDouble(life-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a27179e0b20a0ae13b7b0d56f4b4b9696">GetNumber</a>() * 50.0);
<a name="l01936"></a>01936     <span class="keywordflow">else</span>
<a name="l01937"></a>01937         Py_RETURN_NONE;
<a name="l01938"></a>01938 }
<a name="l01939"></a>01939 
<a name="l01940"></a>01940 PyObject* KX_GameObject::pyattr_get_mass(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01941"></a>01941 {
<a name="l01942"></a>01942     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01943"></a>01943     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01944"></a>01944     <span class="keywordflow">return</span> PyFloat_FromDouble(spc ? spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a4a4d403ac3537fc1433a5be52ff65f04">GetMass</a>() : 0.0f);
<a name="l01945"></a>01945 }
<a name="l01946"></a>01946 
<a name="l01947"></a>01947 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_mass(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l01948"></a>01948 {
<a name="l01949"></a>01949     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01950"></a>01950     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01951"></a>01951     <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> val = PyFloat_AsDouble(value);
<a name="l01952"></a>01952     <span class="keywordflow">if</span> (val &lt; 0.0f) { <span class="comment">/* also accounts for non float */</span>
<a name="l01953"></a>01953         PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.mass = float: KX_GameObject, expected a float zero or above&quot;</span>);
<a name="l01954"></a>01954         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l01955"></a>01955     }
<a name="l01956"></a>01956 
<a name="l01957"></a>01957     <span class="keywordflow">if</span> (spc)
<a name="l01958"></a>01958         spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a175e6081973bea167d6c8dca8678b5ed">SetMass</a>(val);
<a name="l01959"></a>01959 
<a name="l01960"></a>01960     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l01961"></a>01961 }
<a name="l01962"></a>01962 
<a name="l01963"></a>01963 PyObject* KX_GameObject::pyattr_get_lin_vel_min(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01964"></a>01964 {
<a name="l01965"></a>01965     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01966"></a>01966     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01967"></a>01967     <span class="keywordflow">return</span> PyFloat_FromDouble(spc ? spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a9cb77b0785cde2da48568733b3ca6e8d">GetLinVelocityMin</a>() : 0.0f);
<a name="l01968"></a>01968 }
<a name="l01969"></a>01969 
<a name="l01970"></a>01970 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_lin_vel_min(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l01971"></a>01971 {
<a name="l01972"></a>01972     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01973"></a>01973     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01974"></a>01974     <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> val = PyFloat_AsDouble(value);
<a name="l01975"></a>01975     <span class="keywordflow">if</span> (val &lt; 0.0f) { <span class="comment">/* also accounts for non float */</span>
<a name="l01976"></a>01976         PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.linVelocityMin = float: KX_GameObject, expected a float zero or above&quot;</span>);
<a name="l01977"></a>01977         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l01978"></a>01978     }
<a name="l01979"></a>01979 
<a name="l01980"></a>01980     <span class="keywordflow">if</span> (spc)
<a name="l01981"></a>01981         spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#ac6f7bed507c646cc11b9c811909c54f3">SetLinVelocityMin</a>(val);
<a name="l01982"></a>01982 
<a name="l01983"></a>01983     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l01984"></a>01984 }
<a name="l01985"></a>01985 
<a name="l01986"></a>01986 PyObject* KX_GameObject::pyattr_get_lin_vel_max(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l01987"></a>01987 {
<a name="l01988"></a>01988     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01989"></a>01989     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01990"></a>01990     <span class="keywordflow">return</span> PyFloat_FromDouble(spc ? spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#aa128fa52beeb4ee9b10e9a9f602b49c6">GetLinVelocityMax</a>() : 0.0f);
<a name="l01991"></a>01991 }
<a name="l01992"></a>01992 
<a name="l01993"></a>01993 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_lin_vel_max(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l01994"></a>01994 {
<a name="l01995"></a>01995     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l01996"></a>01996     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = <span class="keyword">self</span>-&gt;GetPhysicsController();
<a name="l01997"></a>01997     <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> val = PyFloat_AsDouble(value);
<a name="l01998"></a>01998     <span class="keywordflow">if</span> (val &lt; 0.0f) { <span class="comment">/* also accounts for non float */</span>
<a name="l01999"></a>01999         PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.linVelocityMax = float: KX_GameObject, expected a float zero or above&quot;</span>);
<a name="l02000"></a>02000         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02001"></a>02001     }
<a name="l02002"></a>02002 
<a name="l02003"></a>02003     <span class="keywordflow">if</span> (spc)
<a name="l02004"></a>02004         spc-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#ae698c240971ec5616838a65838339091">SetLinVelocityMax</a>(val);
<a name="l02005"></a>02005 
<a name="l02006"></a>02006     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02007"></a>02007 }
<a name="l02008"></a>02008 
<a name="l02009"></a>02009 
<a name="l02010"></a>02010 PyObject* KX_GameObject::pyattr_get_visible(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02011"></a>02011 {
<a name="l02012"></a>02012     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02013"></a>02013     <span class="keywordflow">return</span> PyBool_FromLong(self-&gt;GetVisible());
<a name="l02014"></a>02014 }
<a name="l02015"></a>02015 
<a name="l02016"></a>02016 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_visible(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02017"></a>02017 {
<a name="l02018"></a>02018     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02019"></a>02019     <span class="keywordtype">int</span> param = PyObject_IsTrue( value );
<a name="l02020"></a>02020     <span class="keywordflow">if</span> (param == -1) {
<a name="l02021"></a>02021         PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.visible = bool: KX_GameObject, expected True or False&quot;</span>);
<a name="l02022"></a>02022         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02023"></a>02023     }
<a name="l02024"></a>02024 
<a name="l02025"></a>02025     <span class="keyword">self</span>-&gt;SetVisible(param, <span class="keyword">false</span>);
<a name="l02026"></a>02026     <span class="keyword">self</span>-&gt;UpdateBuckets(<span class="keyword">false</span>);
<a name="l02027"></a>02027     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02028"></a>02028 }
<a name="l02029"></a>02029 
<a name="l02030"></a>02030 PyObject* KX_GameObject::pyattr_get_worldPosition(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02031"></a>02031 {
<a name="l02032"></a>02032 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02033"></a>02033 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_POS_GLOBAL);
<a name="l02034"></a>02034 <span class="preprocessor">#else</span>
<a name="l02035"></a>02035 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02036"></a>02036     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetWorldPosition());
<a name="l02037"></a>02037 <span class="preprocessor">#endif</span>
<a name="l02038"></a>02038 <span class="preprocessor"></span>}
<a name="l02039"></a>02039 
<a name="l02040"></a>02040 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldPosition(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02041"></a>02041 {
<a name="l02042"></a>02042     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02043"></a>02043     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> pos;
<a name="l02044"></a>02044     <span class="keywordflow">if</span> (!PyVecTo(value, pos))
<a name="l02045"></a>02045         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02046"></a>02046     
<a name="l02047"></a>02047     <span class="keyword">self</span>-&gt;NodeSetWorldPosition(pos);
<a name="l02048"></a>02048     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02049"></a>02049     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02050"></a>02050 }
<a name="l02051"></a>02051 
<a name="l02052"></a>02052 PyObject* KX_GameObject::pyattr_get_localPosition(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02053"></a>02053 {
<a name="l02054"></a>02054 <span class="preprocessor">#ifdef USE_MATHUTILS    </span>
<a name="l02055"></a>02055 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_POS_LOCAL);
<a name="l02056"></a>02056 <span class="preprocessor">#else   </span>
<a name="l02057"></a>02057 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02058"></a>02058     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetLocalPosition());
<a name="l02059"></a>02059 <span class="preprocessor">#endif</span>
<a name="l02060"></a>02060 <span class="preprocessor"></span>}
<a name="l02061"></a>02061 
<a name="l02062"></a>02062 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localPosition(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02063"></a>02063 {
<a name="l02064"></a>02064     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02065"></a>02065     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> pos;
<a name="l02066"></a>02066     <span class="keywordflow">if</span> (!PyVecTo(value, pos))
<a name="l02067"></a>02067         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02068"></a>02068     
<a name="l02069"></a>02069     <span class="keyword">self</span>-&gt;NodeSetLocalPosition(pos);
<a name="l02070"></a>02070     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02071"></a>02071     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02072"></a>02072 }
<a name="l02073"></a>02073 
<a name="l02074"></a>02074 PyObject* KX_GameObject::pyattr_get_localInertia(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02075"></a>02075 {
<a name="l02076"></a>02076 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02077"></a>02077 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_INERTIA_LOCAL);
<a name="l02078"></a>02078 <span class="preprocessor">#else</span>
<a name="l02079"></a>02079 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02080"></a>02080     <span class="keywordflow">if</span> (self-&gt;GetPhysicsController())
<a name="l02081"></a>02081         <span class="keywordflow">return</span> PyObjectFrom(self-&gt;GetPhysicsController()-&gt;GetLocalInertia());
<a name="l02082"></a>02082     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">&quot;fff&quot;</span>, 0.0f, 0.0f, 0.0f);
<a name="l02083"></a>02083 <span class="preprocessor">#endif</span>
<a name="l02084"></a>02084 <span class="preprocessor"></span>}
<a name="l02085"></a>02085 
<a name="l02086"></a>02086 PyObject* KX_GameObject::pyattr_get_worldOrientation(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02087"></a>02087 {
<a name="l02088"></a>02088 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02089"></a>02089 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/daa/mathutils__Matrix_8c.html#a751ca08f4e577570b8e9aebdb5c45a40">Matrix_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, 3, mathutils_kxgameob_matrix_cb_index, MATHUTILS_MAT_CB_ORI_GLOBAL);
<a name="l02090"></a>02090 <span class="preprocessor">#else</span>
<a name="l02091"></a>02091 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02092"></a>02092     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetWorldOrientation());
<a name="l02093"></a>02093 <span class="preprocessor">#endif</span>
<a name="l02094"></a>02094 <span class="preprocessor"></span>}
<a name="l02095"></a>02095 
<a name="l02096"></a>02096 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldOrientation(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02097"></a>02097 {
<a name="l02098"></a>02098     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02099"></a>02099     
<a name="l02100"></a>02100     <span class="comment">/* if value is not a sequence PyOrientationTo makes an error */</span>
<a name="l02101"></a>02101     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> <a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>;
<a name="l02102"></a>02102     <span class="keywordflow">if</span> (!PyOrientationTo(value, rot, <span class="stringliteral">&quot;gameOb.worldOrientation = sequence: KX_GameObject, &quot;</span>))
<a name="l02103"></a>02103         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02104"></a>02104 
<a name="l02105"></a>02105     <span class="keyword">self</span>-&gt;NodeSetGlobalOrientation(rot);
<a name="l02106"></a>02106     
<a name="l02107"></a>02107     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02108"></a>02108     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02109"></a>02109 }
<a name="l02110"></a>02110 
<a name="l02111"></a>02111 PyObject* KX_GameObject::pyattr_get_localOrientation(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02112"></a>02112 {
<a name="l02113"></a>02113 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02114"></a>02114 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/daa/mathutils__Matrix_8c.html#a751ca08f4e577570b8e9aebdb5c45a40">Matrix_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, 3, mathutils_kxgameob_matrix_cb_index, MATHUTILS_MAT_CB_ORI_LOCAL);
<a name="l02115"></a>02115 <span class="preprocessor">#else</span>
<a name="l02116"></a>02116 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02117"></a>02117     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetLocalOrientation());
<a name="l02118"></a>02118 <span class="preprocessor">#endif</span>
<a name="l02119"></a>02119 <span class="preprocessor"></span>}
<a name="l02120"></a>02120 
<a name="l02121"></a>02121 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localOrientation(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02122"></a>02122 {
<a name="l02123"></a>02123     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02124"></a>02124     
<a name="l02125"></a>02125     <span class="comment">/* if value is not a sequence PyOrientationTo makes an error */</span>
<a name="l02126"></a>02126     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> <a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>;
<a name="l02127"></a>02127     <span class="keywordflow">if</span> (!PyOrientationTo(value, rot, <span class="stringliteral">&quot;gameOb.localOrientation = sequence: KX_GameObject, &quot;</span>))
<a name="l02128"></a>02128         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02129"></a>02129 
<a name="l02130"></a>02130     <span class="keyword">self</span>-&gt;NodeSetLocalOrientation(rot);
<a name="l02131"></a>02131     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02132"></a>02132     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02133"></a>02133 }
<a name="l02134"></a>02134 
<a name="l02135"></a>02135 PyObject* KX_GameObject::pyattr_get_worldScaling(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02136"></a>02136 {
<a name="l02137"></a>02137 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02138"></a>02138 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_SCALE_GLOBAL);
<a name="l02139"></a>02139 <span class="preprocessor">#else</span>
<a name="l02140"></a>02140 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02141"></a>02141     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetWorldScaling());
<a name="l02142"></a>02142 <span class="preprocessor">#endif</span>
<a name="l02143"></a>02143 <span class="preprocessor"></span>}
<a name="l02144"></a>02144 
<a name="l02145"></a>02145 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldScaling(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02146"></a>02146 {
<a name="l02147"></a>02147     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02148"></a>02148     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scale;
<a name="l02149"></a>02149     <span class="keywordflow">if</span> (!PyVecTo(value, scale))
<a name="l02150"></a>02150         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02151"></a>02151 
<a name="l02152"></a>02152     <span class="keyword">self</span>-&gt;NodeSetWorldScale(scale);
<a name="l02153"></a>02153     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02154"></a>02154     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02155"></a>02155 }
<a name="l02156"></a>02156 
<a name="l02157"></a>02157 PyObject* KX_GameObject::pyattr_get_localScaling(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02158"></a>02158 {
<a name="l02159"></a>02159 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02160"></a>02160 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_SCALE_LOCAL);
<a name="l02161"></a>02161 <span class="preprocessor">#else</span>
<a name="l02162"></a>02162 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02163"></a>02163     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;NodeGetLocalScaling());
<a name="l02164"></a>02164 <span class="preprocessor">#endif</span>
<a name="l02165"></a>02165 <span class="preprocessor"></span>}
<a name="l02166"></a>02166 
<a name="l02167"></a>02167 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localScaling(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02168"></a>02168 {
<a name="l02169"></a>02169     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02170"></a>02170     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scale;
<a name="l02171"></a>02171     <span class="keywordflow">if</span> (!PyVecTo(value, scale))
<a name="l02172"></a>02172         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02173"></a>02173 
<a name="l02174"></a>02174     <span class="keyword">self</span>-&gt;NodeSetLocalScale(scale);
<a name="l02175"></a>02175     <span class="keyword">self</span>-&gt;NodeUpdateGS(0.f);
<a name="l02176"></a>02176     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02177"></a>02177 }
<a name="l02178"></a>02178 
<a name="l02179"></a>02179 PyObject* KX_GameObject::pyattr_get_localTransform(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02180"></a>02180 {
<a name="l02181"></a>02181     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02182"></a>02182 
<a name="l02183"></a>02183     <span class="keywordtype">double</span> *<a class="code" href="../../de/de7/structObject.html#a545b54048d299d5d9b5f49d6a80f1a9f">mat</a> = <a class="code" href="../../d5/de3/classMT__CmMatrix4x4.html">MT_CmMatrix4x4</a>().<a class="code" href="../../d5/de3/classMT__CmMatrix4x4.html#a20173f0ca48270c3c8588906d399fd10">getPointer</a>();
<a name="l02184"></a>02184 
<a name="l02185"></a>02185     <a class="code" href="../../d0/df9/classMT__Transform.html">MT_Transform</a> trans;
<a name="l02186"></a>02186     
<a name="l02187"></a>02187     trans.<a class="code" href="../../d0/df9/classMT__Transform.html#adaa5cc295f079b768267b53420477665">setOrigin</a>(self-&gt;GetSGNode()-&gt;GetLocalPosition());
<a name="l02188"></a>02188     trans.<a class="code" href="../../d0/df9/classMT__Transform.html#a3186dc6aa9e13a4c11970787b4b39645">setBasis</a>(self-&gt;GetSGNode()-&gt;GetLocalOrientation());
<a name="l02189"></a>02189     
<a name="l02190"></a>02190     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> scaling = <span class="keyword">self</span>-&gt;GetSGNode()-&gt;GetLocalScale();
<a name="l02191"></a>02191     trans.<a class="code" href="../../d0/df9/classMT__Transform.html#a09ee6fe7457642e03156c859d6156ca5">scale</a>(scaling[0], scaling[1], scaling[2]);
<a name="l02192"></a>02192 
<a name="l02193"></a>02193     trans.<a class="code" href="../../d0/df9/classMT__Transform.html#af38baef2750c4e2867f13a61afb9cef4">getValue</a>(mat);
<a name="l02194"></a>02194 
<a name="l02195"></a>02195     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d0/d08/classMT__Matrix4x4.html">MT_Matrix4x4</a>(mat));
<a name="l02196"></a>02196 }
<a name="l02197"></a>02197 
<a name="l02198"></a>02198 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localTransform(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02199"></a>02199 {
<a name="l02200"></a>02200     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02201"></a>02201     <a class="code" href="../../d0/d08/classMT__Matrix4x4.html">MT_Matrix4x4</a> temp;
<a name="l02202"></a>02202     <span class="keywordflow">if</span> (!PyMatTo(value, temp))
<a name="l02203"></a>02203         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02204"></a>02204 
<a name="l02205"></a>02205     <span class="keywordtype">float</span> <a class="code" href="../../d1/d22/stdosl_8h.html#ae86ec281d92a1a2e071e373b444a0d13">transform</a>[4][4];
<a name="l02206"></a>02206     <span class="keywordtype">float</span> <a class="code" href="../../de/de7/structObject.html#a56283253ed00c7461cae7602135fbba9">loc</a>[3], <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>[3];
<a name="l02207"></a>02207     <span class="keywordtype">float</span> rot[3][3];
<a name="l02208"></a>02208     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> orientation;
<a name="l02209"></a>02209 
<a name="l02210"></a>02210     temp.<a class="code" href="../../d0/d08/classMT__Matrix4x4.html#a47e3d6e86c9890338667fed35c86ad0a">getValue</a>(*transform);
<a name="l02211"></a>02211     <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2626c6f2192bb7a832177be746dc9f08">mat4_to_loc_rot_size</a>(loc, rot, size, transform);
<a name="l02212"></a>02212 
<a name="l02213"></a>02213     <span class="keyword">self</span>-&gt;NodeSetLocalPosition(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(loc));
<a name="l02214"></a>02214 
<a name="l02215"></a>02215     <span class="comment">//MT_Matrix3x3&#39;s constructor expects a 4x4 matrix</span>
<a name="l02216"></a>02216     orientation = <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>();
<a name="l02217"></a>02217     orientation.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a58c435ca9f5bcb53cf4c6c052ed554b6">setValue3x3</a>(*rot);
<a name="l02218"></a>02218     <span class="keyword">self</span>-&gt;NodeSetLocalOrientation(orientation);
<a name="l02219"></a>02219 
<a name="l02220"></a>02220     <span class="keyword">self</span>-&gt;NodeSetLocalScale(<a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(size));
<a name="l02221"></a>02221 
<a name="l02222"></a>02222     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02223"></a>02223 }
<a name="l02224"></a>02224 
<a name="l02225"></a>02225 PyObject* KX_GameObject::pyattr_get_worldTransform(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02226"></a>02226 {
<a name="l02227"></a>02227     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02228"></a>02228 
<a name="l02229"></a>02229     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d0/d08/classMT__Matrix4x4.html">MT_Matrix4x4</a>(self-&gt;GetOpenGLMatrix()));
<a name="l02230"></a>02230 }
<a name="l02231"></a>02231 
<a name="l02232"></a>02232 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldTransform(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02233"></a>02233 {
<a name="l02234"></a>02234     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02235"></a>02235     <a class="code" href="../../d0/d08/classMT__Matrix4x4.html">MT_Matrix4x4</a> temp;
<a name="l02236"></a>02236     <span class="keywordflow">if</span> (!PyMatTo(value, temp))
<a name="l02237"></a>02237         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02238"></a>02238 
<a name="l02239"></a>02239     <span class="keywordtype">float</span> transform[4][4];
<a name="l02240"></a>02240     <span class="keywordtype">float</span> loc[3], size[3];
<a name="l02241"></a>02241     <span class="keywordtype">float</span> rot[3][3];
<a name="l02242"></a>02242     <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a> orientation;
<a name="l02243"></a>02243 
<a name="l02244"></a>02244     temp.<a class="code" href="../../d0/d08/classMT__Matrix4x4.html#a47e3d6e86c9890338667fed35c86ad0a">getValue</a>(*transform);
<a name="l02245"></a>02245     <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2626c6f2192bb7a832177be746dc9f08">mat4_to_loc_rot_size</a>(loc, rot, size, transform);
<a name="l02246"></a>02246 
<a name="l02247"></a>02247     <span class="keyword">self</span>-&gt;NodeSetWorldPosition(<a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>(loc));
<a name="l02248"></a>02248 
<a name="l02249"></a>02249     <span class="comment">//MT_Matrix3x3&#39;s constructor expects a 4x4 matrix</span>
<a name="l02250"></a>02250     orientation = <a class="code" href="../../dd/d6f/classMT__Matrix3x3.html">MT_Matrix3x3</a>();
<a name="l02251"></a>02251     orientation.<a class="code" href="../../dd/d6f/classMT__Matrix3x3.html#a58c435ca9f5bcb53cf4c6c052ed554b6">setValue3x3</a>(*rot);
<a name="l02252"></a>02252     <span class="keyword">self</span>-&gt;NodeSetGlobalOrientation(orientation);
<a name="l02253"></a>02253 
<a name="l02254"></a>02254     <span class="keyword">self</span>-&gt;NodeSetWorldScale(<a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(size));
<a name="l02255"></a>02255 
<a name="l02256"></a>02256     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02257"></a>02257 }
<a name="l02258"></a>02258 
<a name="l02259"></a>02259 PyObject* KX_GameObject::pyattr_get_worldLinearVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02260"></a>02260 {
<a name="l02261"></a>02261 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02262"></a>02262 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_LINVEL_GLOBAL);
<a name="l02263"></a>02263 <span class="preprocessor">#else</span>
<a name="l02264"></a>02264 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02265"></a>02265     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#afca1281b03a024a167327c7344ec0812">GetLinearVelocity</a>(<span class="keyword">false</span>));
<a name="l02266"></a>02266 <span class="preprocessor">#endif</span>
<a name="l02267"></a>02267 <span class="preprocessor"></span>}
<a name="l02268"></a>02268 
<a name="l02269"></a>02269 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldLinearVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02270"></a>02270 {
<a name="l02271"></a>02271     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02272"></a>02272     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02273"></a>02273     <span class="keywordflow">if</span> (!PyVecTo(value, velocity))
<a name="l02274"></a>02274         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02275"></a>02275 
<a name="l02276"></a>02276     <span class="keyword">self</span>-&gt;setLinearVelocity(velocity, <span class="keyword">false</span>);
<a name="l02277"></a>02277 
<a name="l02278"></a>02278     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02279"></a>02279 }
<a name="l02280"></a>02280 
<a name="l02281"></a>02281 PyObject* KX_GameObject::pyattr_get_localLinearVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02282"></a>02282 {
<a name="l02283"></a>02283 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02284"></a>02284 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_LINVEL_LOCAL);
<a name="l02285"></a>02285 <span class="preprocessor">#else</span>
<a name="l02286"></a>02286 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02287"></a>02287     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#afca1281b03a024a167327c7344ec0812">GetLinearVelocity</a>(<span class="keyword">true</span>));
<a name="l02288"></a>02288 <span class="preprocessor">#endif</span>
<a name="l02289"></a>02289 <span class="preprocessor"></span>}
<a name="l02290"></a>02290 
<a name="l02291"></a>02291 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localLinearVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02292"></a>02292 {
<a name="l02293"></a>02293     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02294"></a>02294     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02295"></a>02295     <span class="keywordflow">if</span> (!PyVecTo(value, velocity))
<a name="l02296"></a>02296         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02297"></a>02297 
<a name="l02298"></a>02298     <span class="keyword">self</span>-&gt;setLinearVelocity(velocity, <span class="keyword">true</span>);
<a name="l02299"></a>02299 
<a name="l02300"></a>02300     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02301"></a>02301 }
<a name="l02302"></a>02302 
<a name="l02303"></a>02303 PyObject* KX_GameObject::pyattr_get_worldAngularVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02304"></a>02304 {
<a name="l02305"></a>02305 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02306"></a>02306 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_ANGVEL_GLOBAL);
<a name="l02307"></a>02307 <span class="preprocessor">#else</span>
<a name="l02308"></a>02308 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02309"></a>02309     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#a2cded0f4ea85f595c63e42eeb2cf2bdf">GetAngularVelocity</a>(<span class="keyword">false</span>));
<a name="l02310"></a>02310 <span class="preprocessor">#endif</span>
<a name="l02311"></a>02311 <span class="preprocessor"></span>}
<a name="l02312"></a>02312 
<a name="l02313"></a>02313 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_worldAngularVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02314"></a>02314 {
<a name="l02315"></a>02315     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02316"></a>02316     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02317"></a>02317     <span class="keywordflow">if</span> (!PyVecTo(value, velocity))
<a name="l02318"></a>02318         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02319"></a>02319 
<a name="l02320"></a>02320     <span class="keyword">self</span>-&gt;setAngularVelocity(velocity, <span class="keyword">false</span>);
<a name="l02321"></a>02321 
<a name="l02322"></a>02322     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02323"></a>02323 }
<a name="l02324"></a>02324 
<a name="l02325"></a>02325 PyObject* KX_GameObject::pyattr_get_localAngularVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02326"></a>02326 {
<a name="l02327"></a>02327 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02328"></a>02328 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 3, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_ANGVEL_LOCAL);
<a name="l02329"></a>02329 <span class="preprocessor">#else</span>
<a name="l02330"></a>02330 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02331"></a>02331     <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#a2cded0f4ea85f595c63e42eeb2cf2bdf">GetAngularVelocity</a>(<span class="keyword">true</span>));
<a name="l02332"></a>02332 <span class="preprocessor">#endif</span>
<a name="l02333"></a>02333 <span class="preprocessor"></span>}
<a name="l02334"></a>02334 
<a name="l02335"></a>02335 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_localAngularVelocity(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02336"></a>02336 {
<a name="l02337"></a>02337     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02338"></a>02338     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02339"></a>02339     <span class="keywordflow">if</span> (!PyVecTo(value, velocity))
<a name="l02340"></a>02340         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02341"></a>02341 
<a name="l02342"></a>02342     <span class="keyword">self</span>-&gt;setAngularVelocity(velocity, <span class="keyword">true</span>);
<a name="l02343"></a>02343 
<a name="l02344"></a>02344     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02345"></a>02345 }
<a name="l02346"></a>02346 
<a name="l02347"></a>02347 
<a name="l02348"></a>02348 PyObject* KX_GameObject::pyattr_get_timeOffset(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02349"></a>02349 {
<a name="l02350"></a>02350     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02351"></a>02351     <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* sg_parent;
<a name="l02352"></a>02352     <span class="keywordflow">if</span> (self-&gt;GetSGNode() &amp;&amp; (sg_parent = <span class="keyword">self</span>-&gt;GetSGNode()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>()) != NULL &amp;&amp; sg_parent-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a694a0710a23ecc27fd1e45cae8d2c2f6">IsSlowParent</a>()) {
<a name="l02353"></a>02353         <span class="keywordflow">return</span> PyFloat_FromDouble(static_cast&lt;KX_SlowParentRelation *&gt;(sg_parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ae1aabe80b88a01851500eb81f16f2ab8">GetParentRelation</a>())-&gt;GetTimeOffset());
<a name="l02354"></a>02354     } <span class="keywordflow">else</span> {
<a name="l02355"></a>02355         <span class="keywordflow">return</span> PyFloat_FromDouble(0.0);
<a name="l02356"></a>02356     }
<a name="l02357"></a>02357 }
<a name="l02358"></a>02358 
<a name="l02359"></a>02359 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_timeOffset(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02360"></a>02360 {
<a name="l02361"></a>02361     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02362"></a>02362     <span class="keywordflow">if</span> (self-&gt;GetSGNode()) {
<a name="l02363"></a>02363         <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> val = PyFloat_AsDouble(value);
<a name="l02364"></a>02364         <a class="code" href="../../d8/d3b/classSG__Node.html">SG_Node</a>* sg_parent= <span class="keyword">self</span>-&gt;GetSGNode()-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#add82f06cd8b0d43db35de702d50b9833">GetSGParent</a>();
<a name="l02365"></a>02365         <span class="keywordflow">if</span> (val &lt; 0.0f) { <span class="comment">/* also accounts for non float */</span>
<a name="l02366"></a>02366             PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.timeOffset = float: KX_GameObject, expected a float zero or above&quot;</span>);
<a name="l02367"></a>02367             <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02368"></a>02368         }
<a name="l02369"></a>02369         <span class="keywordflow">if</span> (sg_parent &amp;&amp; sg_parent-&gt;<a class="code" href="../../d8/d3b/classSG__Node.html#a694a0710a23ecc27fd1e45cae8d2c2f6">IsSlowParent</a>())
<a name="l02370"></a>02370             static_cast&lt;KX_SlowParentRelation *&gt;(sg_parent-&gt;<a class="code" href="../../d4/d22/classSG__Spatial.html#ae1aabe80b88a01851500eb81f16f2ab8">GetParentRelation</a>())-&gt;SetTimeOffset(val);
<a name="l02371"></a>02371     }
<a name="l02372"></a>02372     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02373"></a>02373 }
<a name="l02374"></a>02374 
<a name="l02375"></a>02375 PyObject* KX_GameObject::pyattr_get_state(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02376"></a>02376 {
<a name="l02377"></a>02377     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02378"></a>02378     <span class="keywordtype">int</span> <a class="code" href="../../d3/d41/mathutils__noise_8c.html#a1ac338c8291400e2f2785ef2cb7a5458">state</a> = 0;
<a name="l02379"></a>02379     state |= <span class="keyword">self</span>-&gt;GetState();
<a name="l02380"></a>02380     <span class="keywordflow">return</span> PyLong_FromSsize_t(state);
<a name="l02381"></a>02381 }
<a name="l02382"></a>02382 
<a name="l02383"></a>02383 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_state(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02384"></a>02384 {
<a name="l02385"></a>02385     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02386"></a>02386     <span class="keywordtype">int</span> state_i = PyLong_AsSsize_t(value);
<a name="l02387"></a>02387     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state = 0;
<a name="l02388"></a>02388     
<a name="l02389"></a>02389     <span class="keywordflow">if</span> (state_i == -1 &amp;&amp; PyErr_Occurred()) {
<a name="l02390"></a>02390         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;gameOb.state = int: KX_GameObject, expected an int bit field&quot;</span>);
<a name="l02391"></a>02391         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02392"></a>02392     }
<a name="l02393"></a>02393     
<a name="l02394"></a>02394     state |= state_i;
<a name="l02395"></a>02395     <span class="keywordflow">if</span> ((state &amp; ((1&lt;&lt;30)-1)) == 0) {
<a name="l02396"></a>02396         PyErr_SetString(PyExc_AttributeError, <span class="stringliteral">&quot;gameOb.state = int: KX_GameObject, state bitfield was not between 0 and 30 (1&lt;&lt;0 and 1&lt;&lt;29)&quot;</span>);
<a name="l02397"></a>02397         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02398"></a>02398     }
<a name="l02399"></a>02399     <span class="keyword">self</span>-&gt;SetState(state);
<a name="l02400"></a>02400     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02401"></a>02401 }
<a name="l02402"></a>02402 
<a name="l02403"></a>02403 PyObject* KX_GameObject::pyattr_get_meshes(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02404"></a>02404 {
<a name="l02405"></a>02405     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02406"></a>02406     PyObject *meshes= PyList_New(self-&gt;m_meshes.size());
<a name="l02407"></a>02407     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l02408"></a>02408     
<a name="l02409"></a>02409     <span class="keywordflow">for</span> (i=0; i &lt; (int)self-&gt;m_meshes.size(); i++)
<a name="l02410"></a>02410     {
<a name="l02411"></a>02411         KX_MeshProxy* meshproxy = <span class="keyword">new</span> KX_MeshProxy(self-&gt;m_meshes[i]);
<a name="l02412"></a>02412         PyList_SET_ITEM(meshes, i, meshproxy-&gt;NewProxy(<span class="keyword">true</span>));
<a name="l02413"></a>02413     }
<a name="l02414"></a>02414     
<a name="l02415"></a>02415     <span class="keywordflow">return</span> meshes;
<a name="l02416"></a>02416 }
<a name="l02417"></a>02417 
<a name="l02418"></a>02418 PyObject* KX_GameObject::pyattr_get_obcolor(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02419"></a>02419 {
<a name="l02420"></a>02420 <span class="preprocessor">#ifdef USE_MATHUTILS</span>
<a name="l02421"></a>02421 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../da/d49/mathutils__Vector_8c.html#a1938e489497f1f80418a62a4084d4695">Vector_CreatePyObject_cb</a>(BGE_PROXY_FROM_REF(self_v), 4, mathutils_kxgameob_vector_cb_index, MATHUTILS_VEC_CB_OBJECT_COLOR);
<a name="l02422"></a>02422 <span class="preprocessor">#else</span>
<a name="l02423"></a>02423 <span class="preprocessor"></span>    <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02424"></a>02424     <span class="keywordflow">return</span> PyObjectFrom(self-&gt;GetObjectColor());
<a name="l02425"></a>02425 <span class="preprocessor">#endif</span>
<a name="l02426"></a>02426 <span class="preprocessor"></span>}
<a name="l02427"></a>02427 
<a name="l02428"></a>02428 <span class="keywordtype">int</span> KX_GameObject::pyattr_set_obcolor(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef, PyObject *value)
<a name="l02429"></a>02429 {
<a name="l02430"></a>02430     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02431"></a>02431     <a class="code" href="../../d2/dfc/classMT__Vector4.html">MT_Vector4</a> obcolor;
<a name="l02432"></a>02432     <span class="keywordflow">if</span> (!PyVecTo(value, obcolor))
<a name="l02433"></a>02433         <span class="keywordflow">return</span> PY_SET_ATTR_FAIL;
<a name="l02434"></a>02434 
<a name="l02435"></a>02435     <span class="keyword">self</span>-&gt;SetObjectColor(obcolor);
<a name="l02436"></a>02436     <span class="keywordflow">return</span> PY_SET_ATTR_SUCCESS;
<a name="l02437"></a>02437 }
<a name="l02438"></a>02438 
<a name="l02439"></a>02439 <span class="comment">/* These are experimental! */</span>
<a name="l02440"></a>02440 PyObject* KX_GameObject::pyattr_get_sensors(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02441"></a>02441 {
<a name="l02442"></a>02442     <span class="keywordflow">return</span> KX_PythonSeq_CreatePyObject((static_cast&lt;KX_GameObject*&gt;(self_v))-&gt;m_proxy, KX_PYGENSEQ_OB_TYPE_SENSORS);
<a name="l02443"></a>02443 }
<a name="l02444"></a>02444 
<a name="l02445"></a>02445 PyObject* KX_GameObject::pyattr_get_controllers(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02446"></a>02446 {
<a name="l02447"></a>02447     <span class="keywordflow">return</span> KX_PythonSeq_CreatePyObject((static_cast&lt;KX_GameObject*&gt;(self_v))-&gt;m_proxy, KX_PYGENSEQ_OB_TYPE_CONTROLLERS);
<a name="l02448"></a>02448 }
<a name="l02449"></a>02449 
<a name="l02450"></a>02450 PyObject* KX_GameObject::pyattr_get_actuators(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02451"></a>02451 {
<a name="l02452"></a>02452     <span class="keywordflow">return</span> KX_PythonSeq_CreatePyObject((static_cast&lt;KX_GameObject*&gt;(self_v))-&gt;m_proxy, KX_PYGENSEQ_OB_TYPE_ACTUATORS);
<a name="l02453"></a>02453 }
<a name="l02454"></a>02454 <span class="comment">/* End experimental */</span>
<a name="l02455"></a>02455 
<a name="l02456"></a>02456 PyObject* KX_GameObject::pyattr_get_children(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02457"></a>02457 {
<a name="l02458"></a>02458     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02459"></a>02459     <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ab9dfccf0807cdb6e83bdd63b9d17bce4">GetChildren</a>()-&gt;NewProxy(<span class="keyword">true</span>);
<a name="l02460"></a>02460 }
<a name="l02461"></a>02461 
<a name="l02462"></a>02462 PyObject* KX_GameObject::pyattr_get_children_recursive(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02463"></a>02463 {
<a name="l02464"></a>02464     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02465"></a>02465     <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#ab59f0870740e13bfc776c236d48e5cf0">GetChildrenRecursive</a>()-&gt;NewProxy(<span class="keyword">true</span>);
<a name="l02466"></a>02466 }
<a name="l02467"></a>02467 
<a name="l02468"></a>02468 PyObject* KX_GameObject::pyattr_get_attrDict(<span class="keywordtype">void</span> *self_v, <span class="keyword">const</span> KX_PYATTRIBUTE_DEF *attrdef)
<a name="l02469"></a>02469 {
<a name="l02470"></a>02470     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* <span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>(self_v);
<a name="l02471"></a>02471     
<a name="l02472"></a>02472     <span class="keywordflow">if</span> (self-&gt;m_attr_dict==NULL)
<a name="l02473"></a>02473         <span class="keyword">self</span>-&gt;m_attr_dict= PyDict_New();
<a name="l02474"></a>02474     
<a name="l02475"></a>02475     Py_INCREF(self-&gt;m_attr_dict);
<a name="l02476"></a>02476     <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;m_attr_dict;
<a name="l02477"></a>02477 }
<a name="l02478"></a>02478 
<a name="l02479"></a>02479 PyObject* KX_GameObject::PyApplyForce(PyObject* args)
<a name="l02480"></a>02480 {
<a name="l02481"></a>02481     <span class="keywordtype">int</span> local = 0;
<a name="l02482"></a>02482     PyObject* pyvect;
<a name="l02483"></a>02483 
<a name="l02484"></a>02484     <span class="keywordflow">if</span> (PyArg_ParseTuple(args, <span class="stringliteral">&quot;O|i:applyForce&quot;</span>, &amp;pyvect, &amp;local)) {
<a name="l02485"></a>02485         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> force;
<a name="l02486"></a>02486         <span class="keywordflow">if</span> (PyVecTo(pyvect, force)) {
<a name="l02487"></a>02487             <a class="code" href="../../d1/d73/classKX__GameObject.html#a764954cfdd4f3703564be0d0415344a7">ApplyForce</a>(force, (local!=0));
<a name="l02488"></a>02488             Py_RETURN_NONE;
<a name="l02489"></a>02489         }
<a name="l02490"></a>02490     }
<a name="l02491"></a>02491     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02492"></a>02492 }
<a name="l02493"></a>02493 
<a name="l02494"></a>02494 PyObject* KX_GameObject::PyApplyTorque(PyObject* args)
<a name="l02495"></a>02495 {
<a name="l02496"></a>02496     <span class="keywordtype">int</span> local = 0;
<a name="l02497"></a>02497     PyObject* pyvect;
<a name="l02498"></a>02498 
<a name="l02499"></a>02499     <span class="keywordflow">if</span> (PyArg_ParseTuple(args, <span class="stringliteral">&quot;O|i:applyTorque&quot;</span>, &amp;pyvect, &amp;local)) {
<a name="l02500"></a>02500         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> torque;
<a name="l02501"></a>02501         <span class="keywordflow">if</span> (PyVecTo(pyvect, torque)) {
<a name="l02502"></a>02502             <a class="code" href="../../d1/d73/classKX__GameObject.html#a53765d33d915637560480a5e1353e727">ApplyTorque</a>(torque, (local!=0));
<a name="l02503"></a>02503             Py_RETURN_NONE;
<a name="l02504"></a>02504         }
<a name="l02505"></a>02505     }
<a name="l02506"></a>02506     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02507"></a>02507 }
<a name="l02508"></a>02508 
<a name="l02509"></a>02509 PyObject* KX_GameObject::PyApplyRotation(PyObject* args)
<a name="l02510"></a>02510 {
<a name="l02511"></a>02511     <span class="keywordtype">int</span> local = 0;
<a name="l02512"></a>02512     PyObject* pyvect;
<a name="l02513"></a>02513 
<a name="l02514"></a>02514     <span class="keywordflow">if</span> (PyArg_ParseTuple(args, <span class="stringliteral">&quot;O|i:applyRotation&quot;</span>, &amp;pyvect, &amp;local)) {
<a name="l02515"></a>02515         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> rotation;
<a name="l02516"></a>02516         <span class="keywordflow">if</span> (PyVecTo(pyvect, rotation)) {
<a name="l02517"></a>02517             <a class="code" href="../../d1/d73/classKX__GameObject.html#a220a14fb8b9b7cf8749492d31f02ae44">ApplyRotation</a>(rotation, (local!=0));
<a name="l02518"></a>02518             Py_RETURN_NONE;
<a name="l02519"></a>02519         }
<a name="l02520"></a>02520     }
<a name="l02521"></a>02521     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02522"></a>02522 }
<a name="l02523"></a>02523 
<a name="l02524"></a>02524 PyObject* KX_GameObject::PyApplyMovement(PyObject* args)
<a name="l02525"></a>02525 {
<a name="l02526"></a>02526     <span class="keywordtype">int</span> local = 0;
<a name="l02527"></a>02527     PyObject* pyvect;
<a name="l02528"></a>02528 
<a name="l02529"></a>02529     <span class="keywordflow">if</span> (PyArg_ParseTuple(args, <span class="stringliteral">&quot;O|i:applyMovement&quot;</span>, &amp;pyvect, &amp;local)) {
<a name="l02530"></a>02530         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> movement;
<a name="l02531"></a>02531         <span class="keywordflow">if</span> (PyVecTo(pyvect, movement)) {
<a name="l02532"></a>02532             <a class="code" href="../../d1/d73/classKX__GameObject.html#a646c733ca94464318da5ea80ef6cb023">ApplyMovement</a>(movement, (local!=0));
<a name="l02533"></a>02533             Py_RETURN_NONE;
<a name="l02534"></a>02534         }
<a name="l02535"></a>02535     }
<a name="l02536"></a>02536     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02537"></a>02537 }
<a name="l02538"></a>02538 
<a name="l02539"></a>02539 PyObject* KX_GameObject::PyGetLinearVelocity(PyObject* args)
<a name="l02540"></a>02540 {
<a name="l02541"></a>02541     <span class="comment">// only can get the velocity if we have a physics object connected to us...</span>
<a name="l02542"></a>02542     <span class="keywordtype">int</span> local = 0;
<a name="l02543"></a>02543     <span class="keywordflow">if</span> (PyArg_ParseTuple(args,<span class="stringliteral">&quot;|i:getLinearVelocity&quot;</span>,&amp;local))
<a name="l02544"></a>02544     {
<a name="l02545"></a>02545         <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#afca1281b03a024a167327c7344ec0812">GetLinearVelocity</a>((local!=0)));
<a name="l02546"></a>02546     }
<a name="l02547"></a>02547     <span class="keywordflow">else</span>
<a name="l02548"></a>02548     {
<a name="l02549"></a>02549         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02550"></a>02550     }
<a name="l02551"></a>02551 }
<a name="l02552"></a>02552 
<a name="l02553"></a>02553 PyObject* KX_GameObject::PySetLinearVelocity(PyObject* args)
<a name="l02554"></a>02554 {
<a name="l02555"></a>02555     <span class="keywordtype">int</span> local = 0;
<a name="l02556"></a>02556     PyObject* pyvect;
<a name="l02557"></a>02557     
<a name="l02558"></a>02558     <span class="keywordflow">if</span> (PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|i:setLinearVelocity&quot;</span>,&amp;pyvect,&amp;local)) {
<a name="l02559"></a>02559         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02560"></a>02560         <span class="keywordflow">if</span> (PyVecTo(pyvect, velocity)) {
<a name="l02561"></a>02561             <a class="code" href="../../d1/d73/classKX__GameObject.html#a9c1bd81668d74e90fefec57084a525c3">setLinearVelocity</a>(velocity, (local!=0));
<a name="l02562"></a>02562             Py_RETURN_NONE;
<a name="l02563"></a>02563         }
<a name="l02564"></a>02564     }
<a name="l02565"></a>02565     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02566"></a>02566 }
<a name="l02567"></a>02567 
<a name="l02568"></a>02568 PyObject* KX_GameObject::PyGetAngularVelocity(PyObject* args)
<a name="l02569"></a>02569 {
<a name="l02570"></a>02570     <span class="comment">// only can get the velocity if we have a physics object connected to us...</span>
<a name="l02571"></a>02571     <span class="keywordtype">int</span> local = 0;
<a name="l02572"></a>02572     <span class="keywordflow">if</span> (PyArg_ParseTuple(args,<span class="stringliteral">&quot;|i:getAngularVelocity&quot;</span>,&amp;local))
<a name="l02573"></a>02573     {
<a name="l02574"></a>02574         <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#a2cded0f4ea85f595c63e42eeb2cf2bdf">GetAngularVelocity</a>((local!=0)));
<a name="l02575"></a>02575     }
<a name="l02576"></a>02576     <span class="keywordflow">else</span>
<a name="l02577"></a>02577     {
<a name="l02578"></a>02578         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02579"></a>02579     }
<a name="l02580"></a>02580 }
<a name="l02581"></a>02581 
<a name="l02582"></a>02582 PyObject* KX_GameObject::PySetAngularVelocity(PyObject* args)
<a name="l02583"></a>02583 {
<a name="l02584"></a>02584     <span class="keywordtype">int</span> local = 0;
<a name="l02585"></a>02585     PyObject* pyvect;
<a name="l02586"></a>02586     
<a name="l02587"></a>02587     <span class="keywordflow">if</span> (PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|i:setAngularVelocity&quot;</span>,&amp;pyvect,&amp;local)) {
<a name="l02588"></a>02588         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> velocity;
<a name="l02589"></a>02589         <span class="keywordflow">if</span> (PyVecTo(pyvect, velocity)) {
<a name="l02590"></a>02590             <a class="code" href="../../d1/d73/classKX__GameObject.html#a99a8ebf937afd9d80dd72a12f5f8b695">setAngularVelocity</a>(velocity, (local!=0));
<a name="l02591"></a>02591             Py_RETURN_NONE;
<a name="l02592"></a>02592         }
<a name="l02593"></a>02593     }
<a name="l02594"></a>02594     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02595"></a>02595 }
<a name="l02596"></a>02596 
<a name="l02597"></a>02597 PyObject* KX_GameObject::PySetVisible(PyObject* args)
<a name="l02598"></a>02598 {
<a name="l02599"></a>02599     <span class="keywordtype">int</span> visible, recursive = 0;
<a name="l02600"></a>02600     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;i|i:setVisible&quot;</span>,&amp;visible, &amp;recursive))
<a name="l02601"></a>02601         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02602"></a>02602     
<a name="l02603"></a>02603     <a class="code" href="../../d1/d73/classKX__GameObject.html#ad375ebbacffde2939f5eadfe86c4e1d7">SetVisible</a>(visible ? <span class="keyword">true</span>:<span class="keyword">false</span>, recursive ? <span class="keyword">true</span>:<span class="keyword">false</span>);
<a name="l02604"></a>02604     <a class="code" href="../../d1/d73/classKX__GameObject.html#a79d8df09113d6a4bf14420b92503f0f3">UpdateBuckets</a>(recursive ? <span class="keyword">true</span>:<span class="keyword">false</span>);
<a name="l02605"></a>02605     Py_RETURN_NONE;
<a name="l02606"></a>02606     
<a name="l02607"></a>02607 }
<a name="l02608"></a>02608 
<a name="l02609"></a>02609 PyObject* KX_GameObject::PySetOcclusion(PyObject* args)
<a name="l02610"></a>02610 {
<a name="l02611"></a>02611     <span class="keywordtype">int</span> occlusion, recursive = 0;
<a name="l02612"></a>02612     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;i|i:setOcclusion&quot;</span>,&amp;occlusion, &amp;recursive))
<a name="l02613"></a>02613         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02614"></a>02614     
<a name="l02615"></a>02615     <a class="code" href="../../d1/d73/classKX__GameObject.html#a1fae7b469d6f4bcbd4e4aa10ddc76a67">SetOccluder</a>(occlusion ? <span class="keyword">true</span>:<span class="keyword">false</span>, recursive ? <span class="keyword">true</span>:<span class="keyword">false</span>);
<a name="l02616"></a>02616     Py_RETURN_NONE;
<a name="l02617"></a>02617 }
<a name="l02618"></a>02618 
<a name="l02619"></a>02619 PyObject* KX_GameObject::PyGetVelocity(PyObject* args)
<a name="l02620"></a>02620 {
<a name="l02621"></a>02621     <span class="comment">// only can get the velocity if we have a physics object connected to us...</span>
<a name="l02622"></a>02622     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> <a class="code" href="../../d8/dae/structpoint.html">point</a>(0.0,0.0,0.0);
<a name="l02623"></a>02623     PyObject* pypos = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02624"></a>02624     
<a name="l02625"></a>02625     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;|O:getVelocity&quot;</span>, &amp;pypos) || (pypos &amp;&amp; !PyVecTo(pypos, <a class="code" href="../../d8/dae/structpoint.html">point</a>)))
<a name="l02626"></a>02626         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02627"></a>02627     
<a name="l02628"></a>02628     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l02629"></a>02629     {
<a name="l02630"></a>02630         <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a2e7f39b6df8f5c71c5d1c1c79cc5d92a">GetVelocity</a>(<a class="code" href="../../d8/dae/structpoint.html">point</a>));
<a name="l02631"></a>02631     }
<a name="l02632"></a>02632     <span class="keywordflow">else</span> {
<a name="l02633"></a>02633         <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(0.0,0.0,0.0));
<a name="l02634"></a>02634     }
<a name="l02635"></a>02635 }
<a name="l02636"></a>02636 
<a name="l02637"></a>02637 PyObject* KX_GameObject::PyGetReactionForce()
<a name="l02638"></a>02638 {
<a name="l02639"></a>02639     <span class="comment">// only can get the velocity if we have a physics object connected to us...</span>
<a name="l02640"></a>02640     
<a name="l02641"></a>02641     <span class="comment">// XXX - Currently not working with bullet intergration, see KX_BulletPhysicsController.cpp&#39;s getReactionForce</span>
<a name="l02642"></a>02642     <span class="comment">/*</span>
<a name="l02643"></a>02643 <span class="comment">    if (GetPhysicsController())</span>
<a name="l02644"></a>02644 <span class="comment">        return PyObjectFrom(GetPhysicsController()-&gt;getReactionForce());</span>
<a name="l02645"></a>02645 <span class="comment">    return PyObjectFrom(dummy_point);</span>
<a name="l02646"></a>02646 <span class="comment">    */</span>
<a name="l02647"></a>02647     
<a name="l02648"></a>02648     <span class="keywordflow">return</span> Py_BuildValue(<span class="stringliteral">&quot;fff&quot;</span>, 0.0f, 0.0f, 0.0f);
<a name="l02649"></a>02649     
<a name="l02650"></a>02650 }
<a name="l02651"></a>02651 
<a name="l02652"></a>02652 
<a name="l02653"></a>02653 
<a name="l02654"></a>02654 PyObject* KX_GameObject::PyEnableRigidBody()
<a name="l02655"></a>02655 {
<a name="l02656"></a>02656     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>())
<a name="l02657"></a>02657         <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>()-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#af420a16c00567c3f1d9963bd236be2ee">setRigidBody</a>(<span class="keyword">true</span>);
<a name="l02658"></a>02658 
<a name="l02659"></a>02659     Py_RETURN_NONE;
<a name="l02660"></a>02660 }
<a name="l02661"></a>02661 
<a name="l02662"></a>02662 
<a name="l02663"></a>02663 
<a name="l02664"></a>02664 PyObject* KX_GameObject::PyDisableRigidBody()
<a name="l02665"></a>02665 {
<a name="l02666"></a>02666     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>())
<a name="l02667"></a>02667         <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>()-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#af420a16c00567c3f1d9963bd236be2ee">setRigidBody</a>(<span class="keyword">false</span>);
<a name="l02668"></a>02668 
<a name="l02669"></a>02669     Py_RETURN_NONE;
<a name="l02670"></a>02670 }
<a name="l02671"></a>02671 
<a name="l02672"></a>02672 
<a name="l02673"></a>02673 PyObject* KX_GameObject::PySetParent(PyObject* args)
<a name="l02674"></a>02674 {
<a name="l02675"></a>02675     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l02676"></a>02676     PyObject* pyobj;
<a name="l02677"></a>02677     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *obj;
<a name="l02678"></a>02678     <span class="keywordtype">int</span> addToCompound=1, ghost=1;
<a name="l02679"></a>02679     
<a name="l02680"></a>02680     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|ii:setParent&quot;</span>, &amp;pyobj, &amp;addToCompound, &amp;ghost)) {
<a name="l02681"></a>02681         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// Python sets a simple error</span>
<a name="l02682"></a>02682     }
<a name="l02683"></a>02683     <span class="keywordflow">if</span> (!ConvertPythonToGameObject(pyobj, &amp;obj, <span class="keyword">true</span>, <span class="stringliteral">&quot;gameOb.setParent(obj): KX_GameObject&quot;</span>))
<a name="l02684"></a>02684         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02685"></a>02685     <span class="keywordflow">if</span> (obj)
<a name="l02686"></a>02686         this-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a982f1f3dc931568448edb647414c91db">SetParent</a>(scene, obj, addToCompound, ghost);
<a name="l02687"></a>02687     Py_RETURN_NONE;
<a name="l02688"></a>02688 }
<a name="l02689"></a>02689 
<a name="l02690"></a>02690 PyObject* KX_GameObject::PyRemoveParent()
<a name="l02691"></a>02691 {
<a name="l02692"></a>02692     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l02693"></a>02693     
<a name="l02694"></a>02694     this-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a1ee8f226e79c48de476e184805ad9a52">RemoveParent</a>(scene);
<a name="l02695"></a>02695     Py_RETURN_NONE;
<a name="l02696"></a>02696 }
<a name="l02697"></a>02697 
<a name="l02698"></a>02698 
<a name="l02699"></a>02699 PyObject* KX_GameObject::PySetCollisionMargin(PyObject* value)
<a name="l02700"></a>02700 {
<a name="l02701"></a>02701     <span class="keywordtype">float</span> collisionMargin = PyFloat_AsDouble(value);
<a name="l02702"></a>02702     
<a name="l02703"></a>02703     <span class="keywordflow">if</span> (collisionMargin==-1 &amp;&amp; PyErr_Occurred()) {
<a name="l02704"></a>02704         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;expected a float&quot;</span>);
<a name="l02705"></a>02705         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02706"></a>02706     }
<a name="l02707"></a>02707     
<a name="l02708"></a>02708     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>)
<a name="l02709"></a>02709     {
<a name="l02710"></a>02710         <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#ad7fb644ee47b75fbcdd4184046841193">setMargin</a>(collisionMargin);
<a name="l02711"></a>02711         Py_RETURN_NONE;
<a name="l02712"></a>02712     }
<a name="l02713"></a>02713     PyErr_SetString(PyExc_RuntimeError, <span class="stringliteral">&quot;This object has no physics controller&quot;</span>);
<a name="l02714"></a>02714     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02715"></a>02715 }
<a name="l02716"></a>02716 
<a name="l02717"></a>02717 
<a name="l02718"></a>02718 
<a name="l02719"></a>02719 PyObject* KX_GameObject::PyApplyImpulse(PyObject* args)
<a name="l02720"></a>02720 {
<a name="l02721"></a>02721     PyObject* pyattach;
<a name="l02722"></a>02722     PyObject* pyimpulse;
<a name="l02723"></a>02723     
<a name="l02724"></a>02724     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>) {
<a name="l02725"></a>02725         PyErr_SetString(PyExc_RuntimeError, <span class="stringliteral">&quot;This object has no physics controller&quot;</span>);
<a name="l02726"></a>02726         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02727"></a>02727     }
<a name="l02728"></a>02728     
<a name="l02729"></a>02729     <span class="keywordflow">if</span> (PyArg_ParseTuple(args, <span class="stringliteral">&quot;OO:applyImpulse&quot;</span>, &amp;pyattach, &amp;pyimpulse))
<a name="l02730"></a>02730     {
<a name="l02731"></a>02731         <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a>  attach;
<a name="l02732"></a>02732         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> impulse;
<a name="l02733"></a>02733         <span class="keywordflow">if</span> (PyVecTo(pyattach, attach) &amp;&amp; PyVecTo(pyimpulse, impulse))
<a name="l02734"></a>02734         {
<a name="l02735"></a>02735             <a class="code" href="../../d1/d73/classKX__GameObject.html#a5cef6da6d3e20c769a20ac1228443e88">m_pPhysicsController1</a>-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a85ef6cbda5d7e46f7eb7e59c17c05345">applyImpulse</a>(attach, impulse);
<a name="l02736"></a>02736             Py_RETURN_NONE;
<a name="l02737"></a>02737         }
<a name="l02738"></a>02738 
<a name="l02739"></a>02739     }
<a name="l02740"></a>02740     
<a name="l02741"></a>02741     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02742"></a>02742 }
<a name="l02743"></a>02743 
<a name="l02744"></a>02744 
<a name="l02745"></a>02745 
<a name="l02746"></a>02746 PyObject* KX_GameObject::PySuspendDynamics()
<a name="l02747"></a>02747 {
<a name="l02748"></a>02748     <a class="code" href="../../d1/d73/classKX__GameObject.html#adfb964a454b3c2ce464f1d8d7cfc95e9">SuspendDynamics</a>();
<a name="l02749"></a>02749     Py_RETURN_NONE;
<a name="l02750"></a>02750 }
<a name="l02751"></a>02751 
<a name="l02752"></a>02752 
<a name="l02753"></a>02753 
<a name="l02754"></a>02754 PyObject* KX_GameObject::PyRestoreDynamics()
<a name="l02755"></a>02755 {
<a name="l02756"></a>02756     <a class="code" href="../../d1/d73/classKX__GameObject.html#a89c0fa55308e08ab84d749f1e12f2946">RestoreDynamics</a>();
<a name="l02757"></a>02757     Py_RETURN_NONE;
<a name="l02758"></a>02758 }
<a name="l02759"></a>02759 
<a name="l02760"></a>02760 
<a name="l02761"></a>02761 PyObject* KX_GameObject::PyAlignAxisToVect(PyObject* args)
<a name="l02762"></a>02762 {
<a name="l02763"></a>02763     PyObject* pyvect;
<a name="l02764"></a>02764     <span class="keywordtype">int</span> axis = 2; <span class="comment">//z axis is the default</span>
<a name="l02765"></a>02765     <span class="keywordtype">float</span> fac = 1.0;
<a name="l02766"></a>02766     
<a name="l02767"></a>02767     <span class="keywordflow">if</span> (PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|if:alignAxisToVect&quot;</span>,&amp;pyvect,&amp;axis, &amp;fac))
<a name="l02768"></a>02768     {
<a name="l02769"></a>02769         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> vect;
<a name="l02770"></a>02770         <span class="keywordflow">if</span> (PyVecTo(pyvect, vect))
<a name="l02771"></a>02771         {
<a name="l02772"></a>02772             <span class="keywordflow">if</span> (fac&lt;=0.0) Py_RETURN_NONE; <span class="comment">// Nothing to do.</span>
<a name="l02773"></a>02773             <span class="keywordflow">if</span> (fac&gt; 1.0) fac= 1.0;
<a name="l02774"></a>02774             
<a name="l02775"></a>02775             <a class="code" href="../../d1/d73/classKX__GameObject.html#a8e3d58b7cbfc2df00f7449d23688e072">AlignAxisToVect</a>(vect,axis,fac);
<a name="l02776"></a>02776             <a class="code" href="../../d1/d73/classKX__GameObject.html#abd94bbbcf52249812ac7ddd8d61b079c">NodeUpdateGS</a>(0.f);
<a name="l02777"></a>02777             Py_RETURN_NONE;
<a name="l02778"></a>02778         }
<a name="l02779"></a>02779     }
<a name="l02780"></a>02780     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02781"></a>02781 }
<a name="l02782"></a>02782 
<a name="l02783"></a>02783 PyObject* KX_GameObject::PyGetAxisVect(PyObject* value)
<a name="l02784"></a>02784 {
<a name="l02785"></a>02785     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> vect;
<a name="l02786"></a>02786     <span class="keywordflow">if</span> (PyVecTo(value, vect))
<a name="l02787"></a>02787     {
<a name="l02788"></a>02788         <span class="keywordflow">return</span> PyObjectFrom(<a class="code" href="../../d1/d73/classKX__GameObject.html#ac4c31c796993a704c92cbc2d82927cfe">NodeGetWorldOrientation</a>() * vect);
<a name="l02789"></a>02789     }
<a name="l02790"></a>02790     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02791"></a>02791 }
<a name="l02792"></a>02792 
<a name="l02793"></a>02793 
<a name="l02794"></a>02794 PyObject* KX_GameObject::PyGetPhysicsId()
<a name="l02795"></a>02795 {
<a name="l02796"></a>02796     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a>* ctrl = <a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>();
<a name="l02797"></a>02797     <a class="code" href="../../d2/d18/KX__CameraIpoSGController_8cpp.html#a2eb1fb66a120c05cbede798531972c0e">uint_ptr</a> physid=0;
<a name="l02798"></a>02798     <span class="keywordflow">if</span> (ctrl)
<a name="l02799"></a>02799     {
<a name="l02800"></a>02800         physid= (<a class="code" href="../../d2/d18/KX__CameraIpoSGController_8cpp.html#a2eb1fb66a120c05cbede798531972c0e">uint_ptr</a>)ctrl-&gt;<a class="code" href="../../dd/dfc/classKX__IPhysicsController.html#a1776408294ea6ad0d9aea2beed050095">GetUserData</a>();
<a name="l02801"></a>02801     }
<a name="l02802"></a>02802     <span class="keywordflow">return</span> PyLong_FromSsize_t((<span class="keywordtype">long</span>)physid);
<a name="l02803"></a>02803 }
<a name="l02804"></a>02804 
<a name="l02805"></a>02805 PyObject* KX_GameObject::PyGetPropertyNames()
<a name="l02806"></a>02806 {
<a name="l02807"></a>02807     PyObject *list= ConvertKeysToPython();
<a name="l02808"></a>02808     
<a name="l02809"></a>02809     <span class="keywordflow">if</span> (m_attr_dict) {
<a name="l02810"></a>02810         PyObject *key, *value;
<a name="l02811"></a>02811         Py_ssize_t pos = 0;
<a name="l02812"></a>02812 
<a name="l02813"></a>02813         <span class="keywordflow">while</span> (PyDict_Next(m_attr_dict, &amp;pos, &amp;key, &amp;value)) {
<a name="l02814"></a>02814             PyList_Append(list, key);
<a name="l02815"></a>02815         }
<a name="l02816"></a>02816     }
<a name="l02817"></a>02817     <span class="keywordflow">return</span> list;
<a name="l02818"></a>02818 }
<a name="l02819"></a>02819 
<a name="l02820"></a>02820 KX_PYMETHODDEF_DOC_O(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getDistanceTo,
<a name="l02821"></a>02821 <span class="stringliteral">&quot;getDistanceTo(other): get distance to another point/KX_GameObject&quot;</span>)
<a name="l02822"></a>02822 {
<a name="l02823"></a>02823     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> b;
<a name="l02824"></a>02824     <span class="keywordflow">if</span> (PyVecTo(value, b))
<a name="l02825"></a>02825     {
<a name="l02826"></a>02826         <span class="keywordflow">return</span> PyFloat_FromDouble(NodeGetWorldPosition().<a class="code" href="../../d1/d22/stdosl_8h.html#a4d04eb0874bac8d51beb2f1d36fe6107">distance</a>(b));
<a name="l02827"></a>02827     }
<a name="l02828"></a>02828     PyErr_Clear();
<a name="l02829"></a>02829     
<a name="l02830"></a>02830     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *other;
<a name="l02831"></a>02831     <span class="keywordflow">if</span> (ConvertPythonToGameObject(value, &amp;other, <span class="keyword">false</span>, <span class="stringliteral">&quot;gameOb.getDistanceTo(value): KX_GameObject&quot;</span>))
<a name="l02832"></a>02832     {
<a name="l02833"></a>02833         <span class="keywordflow">return</span> PyFloat_FromDouble(NodeGetWorldPosition().<a class="code" href="../../d1/d22/stdosl_8h.html#a4d04eb0874bac8d51beb2f1d36fe6107">distance</a>(other-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>()));
<a name="l02834"></a>02834     }
<a name="l02835"></a>02835     
<a name="l02836"></a>02836     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02837"></a>02837 }
<a name="l02838"></a>02838 
<a name="l02839"></a>02839 KX_PYMETHODDEF_DOC_O(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getVectTo,
<a name="l02840"></a>02840 <span class="stringliteral">&quot;getVectTo(other): get vector and the distance to another point/KX_GameObject\n&quot;</span>
<a name="l02841"></a>02841 <span class="stringliteral">&quot;Returns a 3-tuple with (distance,worldVector,localVector)\n&quot;</span>)
<a name="l02842"></a>02842 {
<a name="l02843"></a>02843     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> toPoint, fromPoint;
<a name="l02844"></a>02844     <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> toDir, locToDir;
<a name="l02845"></a>02845     <a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a71b06cc1a8da1da228878ebfd84cd2a9">MT_Scalar</a> <a class="code" href="../../d1/d22/stdosl_8h.html#a4d04eb0874bac8d51beb2f1d36fe6107">distance</a>;
<a name="l02846"></a>02846 
<a name="l02847"></a>02847     PyObject *returnValue;
<a name="l02848"></a>02848 
<a name="l02849"></a>02849     <span class="keywordflow">if</span> (!PyVecTo(value, toPoint))
<a name="l02850"></a>02850     {
<a name="l02851"></a>02851         PyErr_Clear();
<a name="l02852"></a>02852         
<a name="l02853"></a>02853         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *other;
<a name="l02854"></a>02854         <span class="keywordflow">if</span> (ConvertPythonToGameObject(value, &amp;other, <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>)) <span class="comment">/* error will be overwritten */</span>
<a name="l02855"></a>02855         {
<a name="l02856"></a>02856             toPoint = other-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>();
<a name="l02857"></a>02857         } <span class="keywordflow">else</span>
<a name="l02858"></a>02858         {
<a name="l02859"></a>02859             PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;gameOb.getVectTo(other): KX_GameObject, expected a 3D Vector or KX_GameObject type&quot;</span>);
<a name="l02860"></a>02860             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02861"></a>02861         }
<a name="l02862"></a>02862     }
<a name="l02863"></a>02863 
<a name="l02864"></a>02864     fromPoint = NodeGetWorldPosition();
<a name="l02865"></a>02865     toDir = toPoint-fromPoint;
<a name="l02866"></a>02866     distance = toDir.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a2a961afdd0baa69b75b8184086b8e922">length</a>();
<a name="l02867"></a>02867 
<a name="l02868"></a>02868     <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(distance))
<a name="l02869"></a>02869     {
<a name="l02870"></a>02870         <span class="comment">//cout &lt;&lt; &quot;getVectTo() Error: Null vector!\n&quot;;</span>
<a name="l02871"></a>02871         locToDir = toDir = <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a>(0.0,0.0,0.0);
<a name="l02872"></a>02872         distance = 0.0;
<a name="l02873"></a>02873     } <span class="keywordflow">else</span> {
<a name="l02874"></a>02874         toDir.<a class="code" href="../../d6/d9d/classMT__Vector3.html#aa66212d19d24858f68eb80d4cadf71aa">normalize</a>();
<a name="l02875"></a>02875         locToDir = toDir * NodeGetWorldOrientation();
<a name="l02876"></a>02876     }
<a name="l02877"></a>02877     
<a name="l02878"></a>02878     returnValue = PyTuple_New(3);
<a name="l02879"></a>02879     <span class="keywordflow">if</span> (returnValue) { <span class="comment">// very unlikely to fail, python sets a memory error here.</span>
<a name="l02880"></a>02880         PyTuple_SET_ITEM(returnValue, 0, PyFloat_FromDouble(distance));
<a name="l02881"></a>02881         PyTuple_SET_ITEM(returnValue, 1, PyObjectFrom(toDir));
<a name="l02882"></a>02882         PyTuple_SET_ITEM(returnValue, 2, PyObjectFrom(locToDir));
<a name="l02883"></a>02883     }
<a name="l02884"></a>02884     <span class="keywordflow">return</span> returnValue;
<a name="l02885"></a>02885 }
<a name="l02886"></a>02886 
<a name="l02887"></a>02887 <span class="keywordtype">bool</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#aa3e0a1dc2fc5ac4fef3f8c152e86e284">KX_GameObject::RayHit</a>(<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html">KX_ClientObjectInfo</a>* client, <a class="code" href="../../d1/dda/classKX__RayCast.html">KX_RayCast</a>* result, <span class="keywordtype">void</span> * <span class="keyword">const</span> <a class="code" href="../../d2/d3a/AUD__JOSResampleReader_8cpp.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a>)
<a name="l02888"></a>02888 {
<a name="l02889"></a>02889     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* hitKXObj = client-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a4e09a739c17776b2ae907664321ba114">m_gameobject</a>;
<a name="l02890"></a>02890     
<a name="l02891"></a>02891     <span class="comment">// if X-ray option is selected, the unwnted objects were not tested, so get here only with true hit</span>
<a name="l02892"></a>02892     <span class="comment">// if not, all objects were tested and the front one may not be the correct one.</span>
<a name="l02893"></a>02893     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d73/classKX__GameObject.html#ac9675ca9a872abe9db3d60e21a87b54b">m_xray</a> || <a class="code" href="../../d1/d73/classKX__GameObject.html#a4c8e72d7c2b6171da5cee95591a022a6">m_testPropName</a>.<a class="code" href="../../d6/dce/classSTR__String.html#a0f9f9b6889f81f39eab65d7a775c0532">Length</a>() == 0 || hitKXObj-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a4c8e72d7c2b6171da5cee95591a022a6">m_testPropName</a>) != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02894"></a>02894     {
<a name="l02895"></a>02895         <a class="code" href="../../d1/d73/classKX__GameObject.html#af4dd9784108a0a82013ab317dd326705">m_pHitObject</a> = hitKXObj;
<a name="l02896"></a>02896         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02897"></a>02897     }
<a name="l02898"></a>02898     <span class="comment">// return true to stop RayCast::RayTest from looping, the above test was decisive</span>
<a name="l02899"></a>02899     <span class="comment">// We would want to loop only if we want to get more than one hit point</span>
<a name="l02900"></a>02900     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02901"></a>02901 }
<a name="l02902"></a>02902 
<a name="l02903"></a>02903 <span class="comment">/* this function is used to pre-filter the object before casting the ray on them.</span>
<a name="l02904"></a>02904 <span class="comment"> * This is useful for &quot;X-Ray&quot; option when we want to see &quot;through&quot; unwanted object.</span>
<a name="l02905"></a>02905 <span class="comment"> */</span>
<a name="l02906"></a>02906 <span class="keywordtype">bool</span> <a class="code" href="../../d1/d73/classKX__GameObject.html#a387c6b4fe0f115a5550a03b1e190ced4">KX_GameObject::NeedRayCast</a>(<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html">KX_ClientObjectInfo</a>* client)
<a name="l02907"></a>02907 {
<a name="l02908"></a>02908     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>* hitKXObj = client-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a4e09a739c17776b2ae907664321ba114">m_gameobject</a>;
<a name="l02909"></a>02909     
<a name="l02910"></a>02910     <span class="keywordflow">if</span> (client-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#ad796d22d9c94d635cd2ead9c278c9620">m_type</a> &gt; <a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#a71f6d446903dada2386a86bc137929cda47e0cd2575250e6f4404b4f45e3faf00">KX_ClientObjectInfo::ACTOR</a>)
<a name="l02911"></a>02911     {
<a name="l02912"></a>02912         <span class="comment">// Unknown type of object, skip it.</span>
<a name="l02913"></a>02913         <span class="comment">// Should not occur as the sensor objects are filtered in RayTest()</span>
<a name="l02914"></a>02914         printf(<span class="stringliteral">&quot;Invalid client type %d found in ray casting\n&quot;</span>, client-&gt;<a class="code" href="../../d3/d67/structKX__ClientObjectInfo.html#ad796d22d9c94d635cd2ead9c278c9620">m_type</a>);
<a name="l02915"></a>02915         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02916"></a>02916     }
<a name="l02917"></a>02917     
<a name="l02918"></a>02918     <span class="comment">// if X-Ray option is selected, skip object that don&#39;t match the criteria as we see through them</span>
<a name="l02919"></a>02919     <span class="comment">// if not, test all objects because we don&#39;t know yet which one will be on front</span>
<a name="l02920"></a>02920     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d73/classKX__GameObject.html#ac9675ca9a872abe9db3d60e21a87b54b">m_xray</a> || <a class="code" href="../../d1/d73/classKX__GameObject.html#a4c8e72d7c2b6171da5cee95591a022a6">m_testPropName</a>.<a class="code" href="../../d6/dce/classSTR__String.html#a0f9f9b6889f81f39eab65d7a775c0532">Length</a>() == 0 || hitKXObj-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(<a class="code" href="../../d1/d73/classKX__GameObject.html#a4c8e72d7c2b6171da5cee95591a022a6">m_testPropName</a>) != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02921"></a>02921     {
<a name="l02922"></a>02922         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02923"></a>02923     }
<a name="l02924"></a>02924     <span class="comment">// skip the object</span>
<a name="l02925"></a>02925     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02926"></a>02926 }
<a name="l02927"></a>02927 
<a name="l02928"></a>02928 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, rayCastTo,
<a name="l02929"></a>02929 <span class="stringliteral">&quot;rayCastTo(other,dist,prop): look towards another point/KX_GameObject and return first object hit within dist that matches prop\n&quot;</span>
<a name="l02930"></a>02930 <span class="stringliteral">&quot; prop = property name that object must have; can be omitted =&gt; detect any object\n&quot;</span>
<a name="l02931"></a>02931 <span class="stringliteral">&quot; dist = max distance to look (can be negative =&gt; look behind); 0 or omitted =&gt; detect up to other\n&quot;</span>
<a name="l02932"></a>02932 <span class="stringliteral">&quot; other = 3-tuple or object reference&quot;</span>)
<a name="l02933"></a>02933 {
<a name="l02934"></a>02934     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> toPoint;
<a name="l02935"></a>02935     PyObject* pyarg;
<a name="l02936"></a>02936     <span class="keywordtype">float</span> dist = 0.0f;
<a name="l02937"></a>02937     <span class="keywordtype">char</span> *propName = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02938"></a>02938 
<a name="l02939"></a>02939     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|fs:rayCastTo&quot;</span>, &amp;pyarg, &amp;dist, &amp;propName)) {
<a name="l02940"></a>02940         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// python sets simple error</span>
<a name="l02941"></a>02941     }
<a name="l02942"></a>02942 
<a name="l02943"></a>02943     <span class="keywordflow">if</span> (!PyVecTo(pyarg, toPoint))
<a name="l02944"></a>02944     {
<a name="l02945"></a>02945         <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *other;
<a name="l02946"></a>02946         PyErr_Clear();
<a name="l02947"></a>02947         
<a name="l02948"></a>02948         <span class="keywordflow">if</span> (ConvertPythonToGameObject(pyarg, &amp;other, <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>)) <span class="comment">/* error will be overwritten */</span>
<a name="l02949"></a>02949         {
<a name="l02950"></a>02950             toPoint = other-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>();
<a name="l02951"></a>02951         } <span class="keywordflow">else</span>
<a name="l02952"></a>02952         {
<a name="l02953"></a>02953             PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;gameOb.rayCastTo(other,dist,prop): KX_GameObject, the first argument to rayCastTo must be a vector or a KX_GameObject&quot;</span>);
<a name="l02954"></a>02954             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02955"></a>02955         }
<a name="l02956"></a>02956     }
<a name="l02957"></a>02957     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> fromPoint = NodeGetWorldPosition();
<a name="l02958"></a>02958     
<a name="l02959"></a>02959     <span class="keywordflow">if</span> (dist != 0.0f)
<a name="l02960"></a>02960         toPoint = fromPoint + dist * (toPoint-fromPoint).safe_normalized();
<a name="l02961"></a>02961     
<a name="l02962"></a>02962     <a class="code" href="../../d4/db0/classPHY__IPhysicsEnvironment.html">PHY_IPhysicsEnvironment</a>* pe = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>()-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a29c3e8d43a5878f1725c03ce37bb5a30">GetPhysicsEnvironment</a>();
<a name="l02963"></a>02963     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = GetPhysicsController();
<a name="l02964"></a>02964     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *parent = GetParent();
<a name="l02965"></a>02965     <span class="keywordflow">if</span> (!spc &amp;&amp; parent)
<a name="l02966"></a>02966         spc = parent-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>();
<a name="l02967"></a>02967     <span class="keywordflow">if</span> (parent)
<a name="l02968"></a>02968         parent-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l02969"></a>02969     
<a name="l02970"></a>02970     m_pHitObject = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02971"></a>02971     <span class="keywordflow">if</span> (propName)
<a name="l02972"></a>02972         m_testPropName = propName;
<a name="l02973"></a>02973     <span class="keywordflow">else</span>
<a name="l02974"></a>02974         m_testPropName.SetLength(0);
<a name="l02975"></a>02975     <a class="code" href="../../de/d7f/classKX__RayCast_1_1Callback.html">KX_RayCast::Callback&lt;KX_GameObject&gt;</a> callback(<span class="keyword">this</span>,spc);
<a name="l02976"></a>02976     <a class="code" href="../../d1/dda/classKX__RayCast.html#a506e4f97c29f6b2fd0d82552fdad9b35">KX_RayCast::RayTest</a>(pe, fromPoint, toPoint, callback);
<a name="l02977"></a>02977 
<a name="l02978"></a>02978     <span class="keywordflow">if</span> (m_pHitObject)
<a name="l02979"></a>02979         <span class="keywordflow">return</span> m_pHitObject-&gt;GetProxy();
<a name="l02980"></a>02980     
<a name="l02981"></a>02981     Py_RETURN_NONE;
<a name="l02982"></a>02982 }
<a name="l02983"></a>02983 
<a name="l02984"></a>02984 <span class="comment">/* faster then Py_BuildValue since some scripts call raycast a lot */</span>
<a name="l02985"></a>02985 <span class="keyword">static</span> PyObject *none_tuple_3()
<a name="l02986"></a>02986 {
<a name="l02987"></a>02987     PyObject *ret= PyTuple_New(3);
<a name="l02988"></a>02988     PyTuple_SET_ITEM(ret, 0, Py_None);
<a name="l02989"></a>02989     PyTuple_SET_ITEM(ret, 1, Py_None);
<a name="l02990"></a>02990     PyTuple_SET_ITEM(ret, 2, Py_None);
<a name="l02991"></a>02991     
<a name="l02992"></a>02992     Py_INCREF(Py_None);
<a name="l02993"></a>02993     Py_INCREF(Py_None);
<a name="l02994"></a>02994     Py_INCREF(Py_None);
<a name="l02995"></a>02995     <span class="keywordflow">return</span> ret;
<a name="l02996"></a>02996 }
<a name="l02997"></a>02997 <span class="keyword">static</span> PyObject *none_tuple_4()
<a name="l02998"></a>02998 {
<a name="l02999"></a>02999     PyObject *ret= PyTuple_New(4);
<a name="l03000"></a>03000     PyTuple_SET_ITEM(ret, 0, Py_None);
<a name="l03001"></a>03001     PyTuple_SET_ITEM(ret, 1, Py_None);
<a name="l03002"></a>03002     PyTuple_SET_ITEM(ret, 2, Py_None);
<a name="l03003"></a>03003     PyTuple_SET_ITEM(ret, 3, Py_None);
<a name="l03004"></a>03004     
<a name="l03005"></a>03005     Py_INCREF(Py_None);
<a name="l03006"></a>03006     Py_INCREF(Py_None);
<a name="l03007"></a>03007     Py_INCREF(Py_None);
<a name="l03008"></a>03008     Py_INCREF(Py_None);
<a name="l03009"></a>03009     <span class="keywordflow">return</span> ret;
<a name="l03010"></a>03010 }
<a name="l03011"></a>03011 
<a name="l03012"></a>03012 <span class="keyword">static</span> PyObject *none_tuple_5()
<a name="l03013"></a>03013 {
<a name="l03014"></a>03014     PyObject *ret= PyTuple_New(5);
<a name="l03015"></a>03015     PyTuple_SET_ITEM(ret, 0, Py_None);
<a name="l03016"></a>03016     PyTuple_SET_ITEM(ret, 1, Py_None);
<a name="l03017"></a>03017     PyTuple_SET_ITEM(ret, 2, Py_None);
<a name="l03018"></a>03018     PyTuple_SET_ITEM(ret, 3, Py_None);
<a name="l03019"></a>03019     PyTuple_SET_ITEM(ret, 4, Py_None);
<a name="l03020"></a>03020     
<a name="l03021"></a>03021     Py_INCREF(Py_None);
<a name="l03022"></a>03022     Py_INCREF(Py_None);
<a name="l03023"></a>03023     Py_INCREF(Py_None);
<a name="l03024"></a>03024     Py_INCREF(Py_None);
<a name="l03025"></a>03025     Py_INCREF(Py_None);
<a name="l03026"></a>03026     <span class="keywordflow">return</span> ret;
<a name="l03027"></a>03027 }
<a name="l03028"></a>03028 
<a name="l03029"></a>03029 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, rayCast,
<a name="l03030"></a>03030                    <span class="stringliteral">&quot;rayCast(to,from,dist,prop,face,xray,poly): cast a ray and return 3-tuple (object,hit,normal) or 4-tuple (object,hit,normal,polygon) or 4-tuple (object,hit,normal,polygon,hituv) of contact point with object within dist that matches prop.\n&quot;</span>
<a name="l03031"></a>03031                    <span class="stringliteral">&quot; If no hit, return (None,None,None) or (None,None,None,None) or (None,None,None,None,None).\n&quot;</span>
<a name="l03032"></a>03032 <span class="stringliteral">&quot; to   = 3-tuple or object reference for destination of ray (if object, use center of object)\n&quot;</span>
<a name="l03033"></a>03033 <span class="stringliteral">&quot; from = 3-tuple or object reference for origin of ray (if object, use center of object)\n&quot;</span>
<a name="l03034"></a>03034 <span class="stringliteral">&quot;        Can be None or omitted =&gt; start from self object center\n&quot;</span>
<a name="l03035"></a>03035 <span class="stringliteral">&quot; dist = max distance to look (can be negative =&gt; look behind); 0 or omitted =&gt; detect up to to\n&quot;</span>
<a name="l03036"></a>03036 <span class="stringliteral">&quot; prop = property name that object must have; can be omitted =&gt; detect any object\n&quot;</span>
<a name="l03037"></a>03037 <span class="stringliteral">&quot; face = normal option: 1=&gt;return face normal; 0 or omitted =&gt; normal is oriented towards origin\n&quot;</span>
<a name="l03038"></a>03038 <span class="stringliteral">&quot; xray = X-ray option: 1=&gt;skip objects that don&#39;t match prop; 0 or omitted =&gt; stop on first object\n&quot;</span>
<a name="l03039"></a>03039 <span class="stringliteral">&quot; poly = polygon option: 1=&gt;return value is a 4-tuple and the 4th element is a KX_PolyProxy object\n&quot;</span>
<a name="l03040"></a>03040 <span class="stringliteral">&quot;                           which can be None if hit object has no mesh or if there is no hit\n&quot;</span>
<a name="l03041"></a>03041 <span class="stringliteral">&quot;                        2=&gt;return value is a 5-tuple, the 4th element is the KX_PolyProxy object\n&quot;</span>
<a name="l03042"></a>03042 <span class="stringliteral">&quot;                           and the 5th element is the vector of UV coordinates at the hit point of the None if there is no UV mapping\n&quot;</span>
<a name="l03043"></a>03043 <span class="stringliteral">&quot;        If 0 or omitted, return value is a 3-tuple\n&quot;</span>
<a name="l03044"></a>03044 <span class="stringliteral">&quot;Note: The object on which you call this method matters: the ray will ignore it.\n&quot;</span>
<a name="l03045"></a>03045 <span class="stringliteral">&quot;      prop and xray option interact as follow:\n&quot;</span>
<a name="l03046"></a>03046 <span class="stringliteral">&quot;        prop off, xray off: return closest hit or no hit if there is no object on the full extend of the ray\n&quot;</span>
<a name="l03047"></a>03047 <span class="stringliteral">&quot;        prop off, xray on : idem\n&quot;</span>
<a name="l03048"></a>03048 <span class="stringliteral">&quot;        prop on,  xray off: return closest hit if it matches prop, no hit otherwise\n&quot;</span>
<a name="l03049"></a>03049 <span class="stringliteral">&quot;        prop on,  xray on : return closest hit matching prop or no hit if there is no object matching prop on the full extend of the ray\n&quot;</span>)
<a name="l03050"></a>03050 {
<a name="l03051"></a>03051     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> toPoint;
<a name="l03052"></a>03052     <a class="code" href="../../d0/d9e/classMT__Point3.html">MT_Point3</a> fromPoint;
<a name="l03053"></a>03053     PyObject* pyto;
<a name="l03054"></a>03054     PyObject* pyfrom = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03055"></a>03055     <span class="keywordtype">float</span> dist = 0.0f;
<a name="l03056"></a>03056     <span class="keywordtype">char</span> *propName = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03057"></a>03057     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *other;
<a name="l03058"></a>03058     <span class="keywordtype">int</span> face=0, xray=0, poly=0;
<a name="l03059"></a>03059 
<a name="l03060"></a>03060     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args,<span class="stringliteral">&quot;O|Ofsiii:rayCast&quot;</span>, &amp;pyto, &amp;pyfrom, &amp;dist, &amp;propName, &amp;face, &amp;xray, &amp;poly)) {
<a name="l03061"></a>03061         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// Python sets a simple error</span>
<a name="l03062"></a>03062     }
<a name="l03063"></a>03063 
<a name="l03064"></a>03064     <span class="keywordflow">if</span> (!PyVecTo(pyto, toPoint))
<a name="l03065"></a>03065     {
<a name="l03066"></a>03066         PyErr_Clear();
<a name="l03067"></a>03067         
<a name="l03068"></a>03068         <span class="keywordflow">if</span> (ConvertPythonToGameObject(pyto, &amp;other, <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>))  <span class="comment">/* error will be overwritten */</span>
<a name="l03069"></a>03069         {
<a name="l03070"></a>03070             toPoint = other-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>();
<a name="l03071"></a>03071         } <span class="keywordflow">else</span>
<a name="l03072"></a>03072         {
<a name="l03073"></a>03073             PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;the first argument to rayCast must be a vector or a KX_GameObject&quot;</span>);
<a name="l03074"></a>03074             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03075"></a>03075         }
<a name="l03076"></a>03076     }
<a name="l03077"></a>03077     <span class="keywordflow">if</span> (!pyfrom || pyfrom == Py_None)
<a name="l03078"></a>03078     {
<a name="l03079"></a>03079         fromPoint = NodeGetWorldPosition();
<a name="l03080"></a>03080     }
<a name="l03081"></a>03081     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!PyVecTo(pyfrom, fromPoint))
<a name="l03082"></a>03082     {
<a name="l03083"></a>03083         PyErr_Clear();
<a name="l03084"></a>03084         
<a name="l03085"></a>03085         <span class="keywordflow">if</span> (ConvertPythonToGameObject(pyfrom, &amp;other, <span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>)) <span class="comment">/* error will be overwritten */</span>
<a name="l03086"></a>03086         {
<a name="l03087"></a>03087             fromPoint = other-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#afa83f00c96f7d08511a385730442019b">NodeGetWorldPosition</a>();
<a name="l03088"></a>03088         } <span class="keywordflow">else</span>
<a name="l03089"></a>03089         {
<a name="l03090"></a>03090             PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;gameOb.rayCast(to,from,dist,prop,face,xray,poly): KX_GameObject, the second optional argument to rayCast must be a vector or a KX_GameObject&quot;</span>);
<a name="l03091"></a>03091             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03092"></a>03092         }
<a name="l03093"></a>03093     }
<a name="l03094"></a>03094     
<a name="l03095"></a>03095     <span class="keywordflow">if</span> (dist != 0.0f) {
<a name="l03096"></a>03096         <a class="code" href="../../d6/d9d/classMT__Vector3.html">MT_Vector3</a> toDir = toPoint-fromPoint;
<a name="l03097"></a>03097         <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>(toDir.<a class="code" href="../../d6/d9d/classMT__Vector3.html#a7f1aed04c7bb8d7e7162df008f864453">length2</a>())) {
<a name="l03098"></a>03098             <span class="comment">//return Py_BuildValue(&quot;OOO&quot;, Py_None, Py_None, Py_None);</span>
<a name="l03099"></a>03099             <span class="keywordflow">return</span> none_tuple_3();
<a name="l03100"></a>03100         }
<a name="l03101"></a>03101         toDir.<a class="code" href="../../d6/d9d/classMT__Vector3.html#aa66212d19d24858f68eb80d4cadf71aa">normalize</a>();
<a name="l03102"></a>03102         toPoint = fromPoint + (dist) * toDir;
<a name="l03103"></a>03103     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dc4/MT__Scalar_8h.html#a0fb0b5ea82fd8be5d34c447d07f1707f">MT_fuzzyZero</a>((toPoint-fromPoint).length2())) {
<a name="l03104"></a>03104         <span class="comment">//return Py_BuildValue(&quot;OOO&quot;, Py_None, Py_None, Py_None);</span>
<a name="l03105"></a>03105         <span class="keywordflow">return</span> none_tuple_3();
<a name="l03106"></a>03106     }
<a name="l03107"></a>03107     
<a name="l03108"></a>03108     <a class="code" href="../../d4/db0/classPHY__IPhysicsEnvironment.html">PHY_IPhysicsEnvironment</a>* pe = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>()-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#a29c3e8d43a5878f1725c03ce37bb5a30">GetPhysicsEnvironment</a>();
<a name="l03109"></a>03109     <a class="code" href="../../dd/dfc/classKX__IPhysicsController.html">KX_IPhysicsController</a> *spc = GetPhysicsController();
<a name="l03110"></a>03110     <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> *parent = GetParent();
<a name="l03111"></a>03111     <span class="keywordflow">if</span> (!spc &amp;&amp; parent)
<a name="l03112"></a>03112         spc = parent-&gt;<a class="code" href="../../d1/d73/classKX__GameObject.html#a8fca8020988a86c8cb72dbeb5d4a8e2f">GetPhysicsController</a>();
<a name="l03113"></a>03113     <span class="keywordflow">if</span> (parent)
<a name="l03114"></a>03114         parent-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l03115"></a>03115     
<a name="l03116"></a>03116     m_pHitObject = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03117"></a>03117     <span class="keywordflow">if</span> (propName)
<a name="l03118"></a>03118         m_testPropName = propName;
<a name="l03119"></a>03119     <span class="keywordflow">else</span>
<a name="l03120"></a>03120         m_testPropName.SetLength(0);
<a name="l03121"></a>03121     m_xray = xray;
<a name="l03122"></a>03122     <span class="comment">// to get the hit results</span>
<a name="l03123"></a>03123     <a class="code" href="../../de/d7f/classKX__RayCast_1_1Callback.html">KX_RayCast::Callback&lt;KX_GameObject&gt;</a> callback(<span class="keyword">this</span>,spc,NULL,face,(poly==2));
<a name="l03124"></a>03124     <a class="code" href="../../d1/dda/classKX__RayCast.html#a506e4f97c29f6b2fd0d82552fdad9b35">KX_RayCast::RayTest</a>(pe, fromPoint, toPoint, callback);
<a name="l03125"></a>03125 
<a name="l03126"></a>03126     <span class="keywordflow">if</span> (m_pHitObject)
<a name="l03127"></a>03127     {
<a name="l03128"></a>03128         PyObject* returnValue = (poly==2) ? PyTuple_New(5) : (poly) ? PyTuple_New(4) : PyTuple_New(3);
<a name="l03129"></a>03129         <span class="keywordflow">if</span> (returnValue) { <span class="comment">// unlikely this would ever fail, if it does python sets an error</span>
<a name="l03130"></a>03130             PyTuple_SET_ITEM(returnValue, 0, m_pHitObject-&gt;GetProxy());
<a name="l03131"></a>03131             PyTuple_SET_ITEM(returnValue, 1, PyObjectFrom(callback.m_hitPoint));
<a name="l03132"></a>03132             PyTuple_SET_ITEM(returnValue, 2, PyObjectFrom(callback.m_hitNormal));
<a name="l03133"></a>03133             <span class="keywordflow">if</span> (poly)
<a name="l03134"></a>03134             {
<a name="l03135"></a>03135                 <span class="keywordflow">if</span> (callback.m_hitMesh)
<a name="l03136"></a>03136                 {
<a name="l03137"></a>03137                     <span class="comment">// if this field is set, then we can trust that m_hitPolygon is a valid polygon</span>
<a name="l03138"></a>03138                     <a class="code" href="../../dc/dd9/classRAS__Polygon.html">RAS_Polygon</a>* polygon = callback.m_hitMesh-&gt;GetPolygon(callback.m_hitPolygon);
<a name="l03139"></a>03139                     KX_PolyProxy* polyproxy = <span class="keyword">new</span> KX_PolyProxy(callback.m_hitMesh, polygon);
<a name="l03140"></a>03140                     PyTuple_SET_ITEM(returnValue, 3, polyproxy-&gt;NewProxy(<span class="keyword">true</span>));
<a name="l03141"></a>03141                     <span class="keywordflow">if</span> (poly == 2)
<a name="l03142"></a>03142                     {
<a name="l03143"></a>03143                         <span class="keywordflow">if</span> (callback.m_hitUVOK)
<a name="l03144"></a>03144                             PyTuple_SET_ITEM(returnValue, 4, PyObjectFrom(callback.m_hitUV));
<a name="l03145"></a>03145                         <span class="keywordflow">else</span> {
<a name="l03146"></a>03146                             Py_INCREF(Py_None);
<a name="l03147"></a>03147                             PyTuple_SET_ITEM(returnValue, 4, Py_None);
<a name="l03148"></a>03148                         }
<a name="l03149"></a>03149                     }
<a name="l03150"></a>03150                 }
<a name="l03151"></a>03151                 <span class="keywordflow">else</span>
<a name="l03152"></a>03152                 {
<a name="l03153"></a>03153                     Py_INCREF(Py_None);
<a name="l03154"></a>03154                     PyTuple_SET_ITEM(returnValue, 3, Py_None);
<a name="l03155"></a>03155                     <span class="keywordflow">if</span> (poly==2)
<a name="l03156"></a>03156                     {
<a name="l03157"></a>03157                         Py_INCREF(Py_None);
<a name="l03158"></a>03158                         PyTuple_SET_ITEM(returnValue, 4, Py_None);
<a name="l03159"></a>03159                     }
<a name="l03160"></a>03160                 }
<a name="l03161"></a>03161             }
<a name="l03162"></a>03162         }
<a name="l03163"></a>03163         <span class="keywordflow">return</span> returnValue;
<a name="l03164"></a>03164     }
<a name="l03165"></a>03165     <span class="comment">// no hit</span>
<a name="l03166"></a>03166     <span class="keywordflow">if</span> (poly == 2)
<a name="l03167"></a>03167         <span class="keywordflow">return</span> none_tuple_5();
<a name="l03168"></a>03168     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (poly)
<a name="l03169"></a>03169         <span class="keywordflow">return</span> none_tuple_4();
<a name="l03170"></a>03170     <span class="keywordflow">else</span>
<a name="l03171"></a>03171         <span class="keywordflow">return</span> none_tuple_3();
<a name="l03172"></a>03172 }
<a name="l03173"></a>03173 
<a name="l03174"></a>03174 KX_PYMETHODDEF_DOC_VARARGS(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, sendMessage, 
<a name="l03175"></a>03175                            <span class="stringliteral">&quot;sendMessage(subject, [body, to])\n&quot;</span>
<a name="l03176"></a>03176 <span class="stringliteral">&quot;sends a message in same manner as a message actuator&quot;</span>
<a name="l03177"></a>03177 <span class="stringliteral">&quot;subject = Subject of the message (string)&quot;</span>
<a name="l03178"></a>03178 <span class="stringliteral">&quot;body = Message body (string)&quot;</span>
<a name="l03179"></a>03179 <span class="stringliteral">&quot;to = Name of object to send the message to&quot;</span>)
<a name="l03180"></a>03180 {
<a name="l03181"></a>03181     <a class="code" href="../../d2/da3/classKX__Scene.html">KX_Scene</a> *scene = <a class="code" href="../../d6/dc2/KX__PythonInit_8cpp.html#a0f9017a6fe2006782774fa1fa5d6b77b">KX_GetActiveScene</a>();
<a name="l03182"></a>03182     <span class="keywordtype">char</span>* subject;
<a name="l03183"></a>03183     <span class="keywordtype">char</span>* body = (<span class="keywordtype">char</span> *)<span class="stringliteral">&quot;&quot;</span>;
<a name="l03184"></a>03184     <span class="keywordtype">char</span>* to = (<span class="keywordtype">char</span> *)<span class="stringliteral">&quot;&quot;</span>;
<a name="l03185"></a>03185     <span class="keyword">const</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a>&amp; from = GetName();
<a name="l03186"></a>03186 
<a name="l03187"></a>03187     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;s|ss:sendMessage&quot;</span>, &amp;subject, &amp;body, &amp;to))
<a name="l03188"></a>03188         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03189"></a>03189     
<a name="l03190"></a>03190     scene-&gt;<a class="code" href="../../d2/da3/classKX__Scene.html#ae847a7ae6d0f06cec6ce97abce89ac45">GetNetworkScene</a>()-&gt;<a class="code" href="../../d5/d50/classNG__NetworkScene.html#a35d1b8150f49d07080acfaa7bbaea822">SendMessage</a>(to, from, subject, body);
<a name="l03191"></a>03191     Py_RETURN_NONE;
<a name="l03192"></a>03192 }
<a name="l03193"></a>03193 
<a name="l03194"></a>03194 <span class="keyword">static</span> <span class="keywordtype">void</span> layer_check(<span class="keywordtype">short</span> &amp;layer, <span class="keyword">const</span> <span class="keywordtype">char</span> *method_name)
<a name="l03195"></a>03195 {
<a name="l03196"></a>03196     <span class="keywordflow">if</span> (layer &lt; 0 || layer &gt;= <a class="code" href="../../df/d5d/BL__ActionManager_8h.html#ad9b64966b0d37d79f4ec28ed672d225d">MAX_ACTION_LAYERS</a>)
<a name="l03197"></a>03197     {
<a name="l03198"></a>03198         printf(<span class="stringliteral">&quot;KX_GameObject.%s(): given layer (%d) is out of range (0 - %d), setting to 0.\n&quot;</span>, method_name, layer, <a class="code" href="../../df/d5d/BL__ActionManager_8h.html#ad9b64966b0d37d79f4ec28ed672d225d">MAX_ACTION_LAYERS</a>-1);
<a name="l03199"></a>03199         layer = 0;
<a name="l03200"></a>03200     }
<a name="l03201"></a>03201 }
<a name="l03202"></a>03202 
<a name="l03203"></a>03203 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, playAction,
<a name="l03204"></a>03204     <span class="stringliteral">&quot;playAction(name, start_frame, end_frame, layer=0, priority=0 blendin=0, play_mode=ACT_MODE_PLAY, layer_weight=0.0, ipo_flags=0, speed=1.0)\n&quot;</span>
<a name="l03205"></a>03205     <span class="stringliteral">&quot;Plays an action\n&quot;</span>)
<a name="l03206"></a>03206 {
<a name="l03207"></a>03207     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../de/de7/structObject.html#ae84d6eddc68ad710a47bc5210c0bd918">name</a>;
<a name="l03208"></a>03208     <span class="keywordtype">float</span> start, end, blendin=0.f, speed=1.f, layer_weight=0.f;
<a name="l03209"></a>03209     <span class="keywordtype">short</span> layer=0, priority=0;
<a name="l03210"></a>03210     <span class="keywordtype">short</span> ipo_flags=0;
<a name="l03211"></a>03211     <span class="keywordtype">short</span> play_mode=0;
<a name="l03212"></a>03212 
<a name="l03213"></a>03213     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *kwlist[] = {<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;start_frame&quot;</span>, <span class="stringliteral">&quot;end_frame&quot;</span>, <span class="stringliteral">&quot;layer&quot;</span>, <span class="stringliteral">&quot;priority&quot;</span>, <span class="stringliteral">&quot;blendin&quot;</span>, <span class="stringliteral">&quot;play_mode&quot;</span>, <span class="stringliteral">&quot;layer_weight&quot;</span>, <span class="stringliteral">&quot;ipo_flags&quot;</span>, <span class="stringliteral">&quot;speed&quot;</span>, NULL};
<a name="l03214"></a>03214 
<a name="l03215"></a>03215     <span class="keywordflow">if</span> (!PyArg_ParseTupleAndKeywords(args, kwds, <span class="stringliteral">&quot;sff|hhfhfhf:playAction&quot;</span>, const_cast&lt;char**&gt;(kwlist),
<a name="l03216"></a>03216                                     &amp;name, &amp;start, &amp;end, &amp;layer, &amp;priority, &amp;blendin, &amp;play_mode, &amp;layer_weight, &amp;ipo_flags, &amp;speed))
<a name="l03217"></a>03217         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03218"></a>03218 
<a name="l03219"></a>03219     layer_check(layer, <span class="stringliteral">&quot;playAction&quot;</span>);
<a name="l03220"></a>03220 
<a name="l03221"></a>03221     <span class="keywordflow">if</span> (play_mode &lt; 0 || play_mode &gt; <a class="code" href="../../dc/d45/classBL__Action.html#a212741750fc14aa1aa18327478bd0f13a0de0decc739103ed78422d7ed11b7bd7">BL_Action::ACT_MODE_MAX</a>)
<a name="l03222"></a>03222     {
<a name="l03223"></a>03223         printf(<span class="stringliteral">&quot;KX_GameObject.playAction(): given play_mode (%d) is out of range (0 - %d), setting to ACT_MODE_PLAY&quot;</span>, play_mode, BL_Action::ACT_MODE_MAX-1);
<a name="l03224"></a>03224         play_mode = <a class="code" href="../../dc/d45/classBL__Action.html#a212741750fc14aa1aa18327478bd0f13a0de0decc739103ed78422d7ed11b7bd7">BL_Action::ACT_MODE_MAX</a>;
<a name="l03225"></a>03225     }
<a name="l03226"></a>03226 
<a name="l03227"></a>03227     <span class="keywordflow">if</span> (layer_weight &lt; 0.f || layer_weight &gt; 1.f)
<a name="l03228"></a>03228     {
<a name="l03229"></a>03229         printf(<span class="stringliteral">&quot;KX_GameObject.playAction(): given layer_weight (%f) is out of range (0.0 - 1.0), setting to 0.0&quot;</span>, layer_weight);
<a name="l03230"></a>03230         layer_weight = 0.f;
<a name="l03231"></a>03231     }
<a name="l03232"></a>03232 
<a name="l03233"></a>03233     PlayAction(name, start, end, layer, priority, blendin, play_mode, layer_weight, ipo_flags, speed);
<a name="l03234"></a>03234 
<a name="l03235"></a>03235     Py_RETURN_NONE;
<a name="l03236"></a>03236 }
<a name="l03237"></a>03237 
<a name="l03238"></a>03238 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, stopAction,
<a name="l03239"></a>03239     <span class="stringliteral">&quot;stopAction(layer=0)\n&quot;</span>
<a name="l03240"></a>03240     <span class="stringliteral">&quot;Stop playing the action on the given layer\n&quot;</span>)
<a name="l03241"></a>03241 {
<a name="l03242"></a>03242     <span class="keywordtype">short</span> layer=0;
<a name="l03243"></a>03243 
<a name="l03244"></a>03244     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;|h:stopAction&quot;</span>, &amp;layer))
<a name="l03245"></a>03245         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03246"></a>03246 
<a name="l03247"></a>03247     layer_check(layer, <span class="stringliteral">&quot;stopAction&quot;</span>);
<a name="l03248"></a>03248 
<a name="l03249"></a>03249     StopAction(layer);
<a name="l03250"></a>03250 
<a name="l03251"></a>03251     Py_RETURN_NONE;
<a name="l03252"></a>03252 }
<a name="l03253"></a>03253 
<a name="l03254"></a>03254 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, getActionFrame,
<a name="l03255"></a>03255     <span class="stringliteral">&quot;getActionFrame(layer=0)\n&quot;</span>
<a name="l03256"></a>03256     <span class="stringliteral">&quot;Gets the current frame of the action playing in the supplied layer\n&quot;</span>)
<a name="l03257"></a>03257 {
<a name="l03258"></a>03258     <span class="keywordtype">short</span> layer=0;
<a name="l03259"></a>03259 
<a name="l03260"></a>03260     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;|h:getActionFrame&quot;</span>, &amp;layer))
<a name="l03261"></a>03261         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03262"></a>03262 
<a name="l03263"></a>03263     layer_check(layer, <span class="stringliteral">&quot;getActionFrame&quot;</span>);
<a name="l03264"></a>03264 
<a name="l03265"></a>03265     <span class="keywordflow">return</span> PyFloat_FromDouble(GetActionFrame(layer));
<a name="l03266"></a>03266 }
<a name="l03267"></a>03267 
<a name="l03268"></a>03268 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, setActionFrame,
<a name="l03269"></a>03269     <span class="stringliteral">&quot;setActionFrame(frame, layer=0)\n&quot;</span>
<a name="l03270"></a>03270     <span class="stringliteral">&quot;Set the current frame of the action playing in the supplied layer\n&quot;</span>)
<a name="l03271"></a>03271 {
<a name="l03272"></a>03272     <span class="keywordtype">short</span> layer=0;
<a name="l03273"></a>03273     <span class="keywordtype">float</span> frame;
<a name="l03274"></a>03274 
<a name="l03275"></a>03275     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;f|h:setActionFrame&quot;</span>, &amp;frame, &amp;layer))
<a name="l03276"></a>03276         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03277"></a>03277 
<a name="l03278"></a>03278     layer_check(layer, <span class="stringliteral">&quot;setActionFrame&quot;</span>);
<a name="l03279"></a>03279 
<a name="l03280"></a>03280     SetActionFrame(layer, frame);
<a name="l03281"></a>03281 
<a name="l03282"></a>03282     Py_RETURN_NONE;
<a name="l03283"></a>03283 }
<a name="l03284"></a>03284 
<a name="l03285"></a>03285 KX_PYMETHODDEF_DOC(<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>, isPlayingAction,
<a name="l03286"></a>03286     <span class="stringliteral">&quot;isPlayingAction(layer=0)\n&quot;</span>
<a name="l03287"></a>03287     <span class="stringliteral">&quot;Checks to see if there is an action playing in the given layer\n&quot;</span>)
<a name="l03288"></a>03288 {
<a name="l03289"></a>03289     <span class="keywordtype">short</span> layer=0;
<a name="l03290"></a>03290 
<a name="l03291"></a>03291     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;|h:isPlayingAction&quot;</span>, &amp;layer))
<a name="l03292"></a>03292         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03293"></a>03293 
<a name="l03294"></a>03294     layer_check(layer, <span class="stringliteral">&quot;isPlayingAction&quot;</span>);
<a name="l03295"></a>03295 
<a name="l03296"></a>03296     <span class="keywordflow">return</span> PyBool_FromLong(!IsActionDone(layer));
<a name="l03297"></a>03297 }
<a name="l03298"></a>03298 
<a name="l03299"></a>03299 
<a name="l03300"></a>03300 <span class="comment">/* dict style access */</span>
<a name="l03301"></a>03301 
<a name="l03302"></a>03302 
<a name="l03303"></a>03303 <span class="comment">/* Matches python dict.get(key, [default]) */</span>
<a name="l03304"></a>03304 PyObject* KX_GameObject::Pyget(PyObject *args)
<a name="l03305"></a>03305 {
<a name="l03306"></a>03306     PyObject *key;
<a name="l03307"></a>03307     PyObject* def = Py_None;
<a name="l03308"></a>03308     PyObject* ret;
<a name="l03309"></a>03309 
<a name="l03310"></a>03310     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;O|O:get&quot;</span>, &amp;key, &amp;def))
<a name="l03311"></a>03311         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03312"></a>03312     
<a name="l03313"></a>03313     
<a name="l03314"></a>03314     <span class="keywordflow">if</span> (PyUnicode_Check(key)) {
<a name="l03315"></a>03315         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *item = <a class="code" href="../../d7/d9c/classCValue.html#a181768771ae209d3768d887706c79f81">GetProperty</a>(_PyUnicode_AsString(key));
<a name="l03316"></a>03316         <span class="keywordflow">if</span> (item) {
<a name="l03317"></a>03317             ret = item-&gt;ConvertValueToPython();
<a name="l03318"></a>03318             <span class="keywordflow">if</span> (ret)
<a name="l03319"></a>03319                 <span class="keywordflow">return</span> ret;
<a name="l03320"></a>03320             <span class="keywordflow">else</span>
<a name="l03321"></a>03321                 <span class="keywordflow">return</span> item-&gt;GetProxy();
<a name="l03322"></a>03322         }
<a name="l03323"></a>03323     }
<a name="l03324"></a>03324     
<a name="l03325"></a>03325     <span class="keywordflow">if</span> (m_attr_dict &amp;&amp; (ret=PyDict_GetItem(m_attr_dict, key))) {
<a name="l03326"></a>03326         Py_INCREF(ret);
<a name="l03327"></a>03327         <span class="keywordflow">return</span> ret;
<a name="l03328"></a>03328     }
<a name="l03329"></a>03329     
<a name="l03330"></a>03330     Py_INCREF(def);
<a name="l03331"></a>03331     <span class="keywordflow">return</span> def;
<a name="l03332"></a>03332 }
<a name="l03333"></a>03333 
<a name="l03334"></a>03334 <span class="keywordtype">bool</span> ConvertPythonToGameObject(PyObject * value, <a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a> **<span class="keywordtype">object</span>, <span class="keywordtype">bool</span> py_none_ok, <span class="keyword">const</span> <span class="keywordtype">char</span> *error_prefix)
<a name="l03335"></a>03335 {
<a name="l03336"></a>03336     <span class="keywordflow">if</span> (value==NULL) {
<a name="l03337"></a>03337         PyErr_Format(PyExc_TypeError, <span class="stringliteral">&quot;%s, python pointer NULL, should never happen&quot;</span>, error_prefix);
<a name="l03338"></a>03338         *<span class="keywordtype">object</span> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03339"></a>03339         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03340"></a>03340     }
<a name="l03341"></a>03341         
<a name="l03342"></a>03342     <span class="keywordflow">if</span> (value==Py_None) {
<a name="l03343"></a>03343         *<span class="keywordtype">object</span> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03344"></a>03344         
<a name="l03345"></a>03345         <span class="keywordflow">if</span> (py_none_ok) {
<a name="l03346"></a>03346             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03347"></a>03347         } <span class="keywordflow">else</span> {
<a name="l03348"></a>03348             PyErr_Format(PyExc_TypeError, <span class="stringliteral">&quot;%s, expected KX_GameObject or a KX_GameObject name, None is invalid&quot;</span>, error_prefix);
<a name="l03349"></a>03349             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03350"></a>03350         }
<a name="l03351"></a>03351     }
<a name="l03352"></a>03352     
<a name="l03353"></a>03353     <span class="keywordflow">if</span> (PyUnicode_Check(value)) {
<a name="l03354"></a>03354         *<span class="keywordtype">object</span> = (<a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*)<a class="code" href="../../d6/d9f/classSCA__ILogicBrick.html#ac9a191b2be5349b3fd6acf3471f343f2">SCA_ILogicBrick::m_sCurrentLogicManager</a>-&gt;GetGameObjectByName(<a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a>( _PyUnicode_AsString(value) ));
<a name="l03355"></a>03355         
<a name="l03356"></a>03356         <span class="keywordflow">if</span> (*<span class="keywordtype">object</span>) {
<a name="l03357"></a>03357             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03358"></a>03358         } <span class="keywordflow">else</span> {
<a name="l03359"></a>03359             PyErr_Format(PyExc_ValueError, <span class="stringliteral">&quot;%s, requested name \&quot;%s\&quot; did not match any KX_GameObject in this scene&quot;</span>, error_prefix, _PyUnicode_AsString(value));
<a name="l03360"></a>03360             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03361"></a>03361         }
<a name="l03362"></a>03362     }
<a name="l03363"></a>03363     
<a name="l03364"></a>03364     <span class="keywordflow">if</span> (    PyObject_TypeCheck(value, &amp;KX_GameObject::Type) ||
<a name="l03365"></a>03365             PyObject_TypeCheck(value, &amp;KX_LightObject::Type)    ||
<a name="l03366"></a>03366             PyObject_TypeCheck(value, &amp;KX_Camera::Type)         ||
<a name="l03367"></a>03367             PyObject_TypeCheck(value, &amp;KX_FontObject::Type))
<a name="l03368"></a>03368     {
<a name="l03369"></a>03369         *<span class="keywordtype">object</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d1/d73/classKX__GameObject.html">KX_GameObject</a>*<span class="keyword">&gt;</span>BGE_PROXY_REF(value);
<a name="l03370"></a>03370         
<a name="l03371"></a>03371         <span class="comment">/* sets the error */</span>
<a name="l03372"></a>03372         <span class="keywordflow">if</span> (*<span class="keywordtype">object</span>==NULL) {
<a name="l03373"></a>03373             PyErr_Format(PyExc_SystemError, <span class="stringliteral">&quot;%s, &quot;</span> BGE_PROXY_ERROR_MSG, error_prefix);
<a name="l03374"></a>03374             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03375"></a>03375         }
<a name="l03376"></a>03376         
<a name="l03377"></a>03377         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03378"></a>03378     }
<a name="l03379"></a>03379     
<a name="l03380"></a>03380     *<span class="keywordtype">object</span> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03381"></a>03381     
<a name="l03382"></a>03382     <span class="keywordflow">if</span> (py_none_ok) {
<a name="l03383"></a>03383         PyErr_Format(PyExc_TypeError, <span class="stringliteral">&quot;%s, expect a KX_GameObject, a string or None&quot;</span>, error_prefix);
<a name="l03384"></a>03384     } <span class="keywordflow">else</span> {
<a name="l03385"></a>03385         PyErr_Format(PyExc_TypeError, <span class="stringliteral">&quot;%s, expect a KX_GameObject or a string&quot;</span>, error_prefix);
<a name="l03386"></a>03386     }
<a name="l03387"></a>03387     
<a name="l03388"></a>03388     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03389"></a>03389 }
<a name="l03390"></a>03390 <span class="preprocessor">#endif // WITH_PYTHON</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:28 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
