<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: rna_object_api.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">rna_object_api.c</div>  </div>
</div>
<div class="contents">
<a href="../../d9/de1/rna__object__api_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2009 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *</span>
<a name="l00022"></a>00022 <span class="comment"> * Contributor(s): Blender Foundation</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00025"></a>00025 <span class="comment"> */</span>
<a name="l00026"></a>00026 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d68/RNA__define_8h.html">RNA_define.h</a>&quot;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd9/DNA__object__types_8h.html" title="Object is a sort of wrapper for general info.">DNA_object_types.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df0/DNA__modifier__types_8h.html">DNA_modifier_types.h</a>&quot;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#ifdef RNA_RUNTIME</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/BKE__global_8h.html">BKE_global.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d40/BKE__report_8h.html">BKE_report.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dac/BKE__object_8h.html" title="General operations, lookup, etc. for blender objects.">BKE_object.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d7f/BKE__mesh_8h.html">BKE_mesh.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html">BKE_DerivedMesh.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d65/BKE__bvhutils_8h.html">BKE_bvhutils.h</a>&quot;</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d5e/BKE__customdata_8h.html" title="CustomData interface, see also DNA_customdata_types.h.">BKE_customdata.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dd0/BKE__anim_8h.html">BKE_anim.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/da0/BKE__depsgraph_8h.html">BKE_depsgraph.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d12/BKE__displist_8h.html" title="display list (or rather multi purpose list) stuff.">BKE_displist.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d06/BKE__font_8h.html">BKE_font.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dae/BKE__mball_8h.html">BKE_mball.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d0f/BKE__modifier_8h.html">BKE_modifier.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d15/BKE__cdderivedmesh_8h.html">BKE_cdderivedmesh.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d96/DNA__mesh__types_8h.html">DNA_mesh_types.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/db3/DNA__scene__types_8h.html">DNA_scene_types.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html">DNA_meshdata_types.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d88/DNA__curve__types_8h.html">DNA_curve_types.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df0/DNA__modifier__types_8h.html">DNA_modifier_types.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d03/DNA__constraint__types_8h.html">DNA_constraint_types.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d06/DNA__view3d__types_8h.html">DNA_view3d_types.h</a>&quot;</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">/* copied from Mesh_getFromObject and adapted to RNA interface */</span>
<a name="l00074"></a>00074 <span class="comment">/* settings: 0 - preview, 1 - render */</span>
<a name="l00075"></a>00075 <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *<a class="code" href="../../d4/d32/blender__util_8h.html#a25d96ad63dc49acc9be4e5d7550f35c1">rna_Object_to_mesh</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *sce, <span class="keywordtype">int</span> apply_modifiers, <span class="keywordtype">int</span> settings)
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077     <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *tmpmesh;
<a name="l00078"></a>00078     <a class="code" href="../../da/d10/structCurve.html">Curve</a> *tmpcu = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *copycu;
<a name="l00079"></a>00079     <a class="code" href="../../de/de7/structObject.html">Object</a> *tmpobj = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00080"></a>00080     <span class="keywordtype">int</span> render = settings == <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a1cab93646b1d30a0ad79c4448bb06601a35b98a06484384dcc7e907ca646e5918">eModifierMode_Render</a>, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00081"></a>00081     <span class="keywordtype">int</span> cage = !apply_modifiers;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="comment">/* perform the mesh extraction based on type */</span>
<a name="l00084"></a>00084     <span class="keywordflow">switch</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>) {
<a name="l00085"></a>00085     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>:
<a name="l00086"></a>00086     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>:
<a name="l00087"></a>00087     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>:
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         <span class="comment">/* copies object and modifiers (but not the data) */</span>
<a name="l00090"></a>00090         tmpobj = <a class="code" href="../../df/dac/BKE__object_8h.html#ac9b2af1376e68f95577652a5504d03c1">copy_object</a>(ob);
<a name="l00091"></a>00091         tmpcu = (<a class="code" href="../../da/d10/structCurve.html">Curve</a> *)tmpobj-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00092"></a>00092         tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a82e3c1ecb3fc12d5ebb456ec7cdc2a0e">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094         <span class="comment">/* if getting the original caged mesh, delete object modifiers */</span>
<a name="l00095"></a>00095         <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> ( cage )
<a name="l00096"></a>00096             <a class="code" href="../../df/dac/BKE__object_8h.html#a222b82c7d07c1d6a92deac80f76d50a9">object_free_modifiers</a>(tmpobj);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098         <span class="comment">/* copies the data */</span>
<a name="l00099"></a>00099         copycu = tmpobj-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a> = <a class="code" href="../../d7/dfc/BKE__curve_8h.html#a605671c47326150aac1fe3158c925781">copy_curve</a>( (<a class="code" href="../../da/d10/structCurve.html">Curve</a> *) ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a> );
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="comment">/* temporarily set edit so we get updates from edit mode, but</span>
<a name="l00102"></a>00102 <span class="comment">         * also because for text datablocks copying it while in edit</span>
<a name="l00103"></a>00103 <span class="comment">         * mode gives invalid data structures */</span>
<a name="l00104"></a>00104         copycu-&gt;editfont = tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a5cea9d9cf980788715e190c6261cd0a3">editfont</a>;
<a name="l00105"></a>00105         copycu-&gt;editnurb = tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#ab8319d0774eb0b2880dc03db155a87dc">editnurb</a>;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107         <span class="comment">/* get updated display list, and convert to a mesh */</span>
<a name="l00108"></a>00108         <a class="code" href="../../d9/d12/BKE__displist_8h.html#a5ca43234b8f9db71b0318b29716b5487">makeDispListCurveTypes</a>( sce, tmpobj, 0 );
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         copycu-&gt;editfont = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00111"></a>00111         copycu-&gt;editnurb = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         <a class="code" href="../../df/d7f/BKE__mesh_8h.html#abd6070e7c1abc34b16c3feb837525b7d">nurbs_to_mesh</a>( tmpobj );
<a name="l00114"></a>00114 
<a name="l00115"></a>00115         <span class="comment">/* nurbs_to_mesh changes the type to a mesh, check it worked */</span>
<a name="l00116"></a>00116         <span class="keywordflow">if</span> (tmpobj-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> != <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00117"></a>00117             <a class="code" href="../../d8/db1/BKE__library_8h.html#a4fc16bf3ab45c2f99f4bf874dcad910b">free_libblock_us</a>( &amp;(<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object), tmpobj );
<a name="l00118"></a>00118             <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;cant convert curve to mesh. Does the curve have any segments?&quot;</span>);
<a name="l00119"></a>00119             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00120"></a>00120         }
<a name="l00121"></a>00121         tmpmesh = tmpobj-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00122"></a>00122         <a class="code" href="../../d8/db1/BKE__library_8h.html#a4fc16bf3ab45c2f99f4bf874dcad910b">free_libblock_us</a>( &amp;<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;object, tmpobj );
<a name="l00123"></a>00123         <span class="keywordflow">break</span>;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>: {
<a name="l00126"></a>00126         <span class="comment">/* metaballs don&#39;t have modifiers, so just convert to mesh */</span>
<a name="l00127"></a>00127         <a class="code" href="../../de/de7/structObject.html">Object</a> *basis_ob = <a class="code" href="../../df/dae/BKE__mball_8h.html#acd6cd7889caaf039ef167e52af35639a" title="This function finds basic MetaBall.">find_basis_mball</a>(sce, ob);
<a name="l00128"></a>00128         <span class="comment">/* todo, re-generatre for render-res */</span>
<a name="l00129"></a>00129         <span class="comment">/* metaball_polygonize(scene, ob) */</span>
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="keywordflow">if</span> (ob != basis_ob)
<a name="l00132"></a>00132             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* only do basis metaball */</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134         tmpmesh = <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a16dfe8cf34a9f4af3a2ae86c6a39b525">add_mesh</a>(<span class="stringliteral">&quot;Mesh&quot;</span>);
<a name="l00135"></a>00135             
<a name="l00136"></a>00136         <span class="keywordflow">if</span> (render) {
<a name="l00137"></a>00137             <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> disp = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l00138"></a>00138             <a class="code" href="../../d9/d12/BKE__displist_8h.html#a71c335090cec4162f3a0e3acf89ad310">makeDispListMBall_forRender</a>(sce, ob, &amp;disp);
<a name="l00139"></a>00139             <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a41c191f69643f7641c26f30f38c76e38">mball_to_mesh</a>(&amp;disp, tmpmesh);
<a name="l00140"></a>00140             <a class="code" href="../../d9/d12/BKE__displist_8h.html#a561c3ea04fd61b48f782bfea0aae53ad">freedisplist</a>(&amp;disp);
<a name="l00141"></a>00141         }
<a name="l00142"></a>00142         <span class="keywordflow">else</span>
<a name="l00143"></a>00143             <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a41c191f69643f7641c26f30f38c76e38">mball_to_mesh</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a45d11e4826c3a8ba292c91691bb2885d">disp</a>, tmpmesh);
<a name="l00144"></a>00144         <span class="keywordflow">break</span>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>:
<a name="l00148"></a>00148         <span class="comment">/* copies object and modifiers (but not the data) */</span>
<a name="l00149"></a>00149         <span class="keywordflow">if</span> (cage) {
<a name="l00150"></a>00150             <span class="comment">/* copies the data */</span>
<a name="l00151"></a>00151             tmpmesh = <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a094edf743a2a93c2a81a5ebcd22f03cc">copy_mesh</a>( ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a> );
<a name="l00152"></a>00152         <span class="comment">/* if not getting the original caged mesh, get final derived mesh */</span>
<a name="l00153"></a>00153         }
<a name="l00154"></a>00154         <span class="keywordflow">else</span> {
<a name="l00155"></a>00155             <span class="comment">/* Make a dummy mesh, saves copying */</span>
<a name="l00156"></a>00156             <a class="code" href="../../d5/d6c/structDerivedMesh.html">DerivedMesh</a> *dm;
<a name="l00157"></a>00157             <span class="comment">/* CustomDataMask mask = CD_MASK_BAREMESH|CD_MASK_MTFACE|CD_MASK_MCOL; */</span>
<a name="l00158"></a>00158             <a class="code" href="../../d5/d5e/BKE__customdata_8h.html#a2ffccc8a0150d2fe6f44a2407a542b30">CustomDataMask</a> mask = <a class="code" href="../../d5/d5e/BKE__customdata_8h.html#a7567efbca3712fc24b23bbe17a945322">CD_MASK_MESH</a>; <span class="comment">/* this seems more suitable, exporter,</span>
<a name="l00159"></a>00159 <span class="comment">                                                 * for example, needs CD_MASK_MDEFORMVERT */</span>
<a name="l00160"></a>00160             
<a name="l00161"></a>00161             <span class="comment">/* Write the display mesh into the dummy mesh */</span>
<a name="l00162"></a>00162             <span class="keywordflow">if</span> (render)
<a name="l00163"></a>00163                 dm = <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#aeade9a199706a910fa3a5593b49cdbdf">mesh_create_derived_render</a>(sce, ob, mask);
<a name="l00164"></a>00164             <span class="keywordflow">else</span>
<a name="l00165"></a>00165                 dm = <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#a99116f90bfa6f5bd4a42c80bfe3db469">mesh_create_derived_view</a>(sce, ob, mask);
<a name="l00166"></a>00166             
<a name="l00167"></a>00167             tmpmesh = <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a16dfe8cf34a9f4af3a2ae86c6a39b525">add_mesh</a>(<span class="stringliteral">&quot;Mesh&quot;</span>);
<a name="l00168"></a>00168             <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#ae3465d29a8fd03daf7e55cf77571d01b">DM_to_mesh</a>(dm, tmpmesh, ob);
<a name="l00169"></a>00169             dm-&gt;<a class="code" href="../../d5/d6c/structDerivedMesh.html#a36c159344a023f5fbe64f12006c8647f">release</a>(dm);
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171         
<a name="l00172"></a>00172         <span class="keywordflow">break</span>;
<a name="l00173"></a>00173     <span class="keywordflow">default</span>:
<a name="l00174"></a>00174         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Object does not have geometry data&quot;</span>);
<a name="l00175"></a>00175         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="comment">/* Copy materials to new mesh */</span>
<a name="l00179"></a>00179     <span class="keywordflow">switch</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>) {
<a name="l00180"></a>00180     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>:
<a name="l00181"></a>00181     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>:
<a name="l00182"></a>00182     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>:
<a name="l00183"></a>00183         tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac7bd892579cf8a793973b2ce2491ec06">totcol</a> = tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a178aa2fd33adfb5df2b311a7d398ac36">totcol</a>;
<a name="l00184"></a>00184         
<a name="l00185"></a>00185         <span class="comment">/* free old material list (if it exists) and adjust user counts */</span>
<a name="l00186"></a>00186         <span class="keywordflow">if</span> ( tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a0ff0285ca29eef8bf650f0746ac9a84a">mat</a> ) {
<a name="l00187"></a>00187             <span class="keywordflow">for</span> ( i = tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a178aa2fd33adfb5df2b311a7d398ac36">totcol</a>; i-- &gt; 0; ) {
<a name="l00188"></a>00188                 <span class="comment">/* are we an object material or data based? */</span>
<a name="l00189"></a>00189 
<a name="l00190"></a>00190                 tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a58e55b421436f3c376299a2179619150">matbits</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? ob-&gt;<a class="code" href="../../de/de7/structObject.html#a545b54048d299d5d9b5f49d6a80f1a9f">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] : tmpcu-&gt;<a class="code" href="../../da/d10/structCurve.html#a0ff0285ca29eef8bf650f0746ac9a84a">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00191"></a>00191 
<a name="l00192"></a>00192                 <span class="keywordflow">if</span> (tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[i]) {
<a name="l00193"></a>00193                     tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a3fc06eed9b3244922dd05906dcc58cde">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>++;
<a name="l00194"></a>00194                 }
<a name="l00195"></a>00195             }
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         <span class="keywordflow">break</span>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="preprocessor">#if 0</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span>    <span class="comment">/* Crashes when assigning the new material, not sure why */</span>
<a name="l00201"></a>00201     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>:
<a name="l00202"></a>00202         tmpmb = (<a class="code" href="../../d3/d6c/structMetaBall.html">MetaBall</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00203"></a>00203         tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac7bd892579cf8a793973b2ce2491ec06">totcol</a> = tmpmb-&gt;totcol;
<a name="l00204"></a>00204         
<a name="l00205"></a>00205         <span class="comment">/* free old material list (if it exists) and adjust user counts */</span>
<a name="l00206"></a>00206         <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> ( tmpmb-&gt;mat ) {
<a name="l00207"></a>00207             <span class="keywordflow">for</span> ( i = tmpmb-&gt;totcol; i-- &gt; 0; ) {
<a name="l00208"></a>00208                 tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = tmpmb-&gt;mat[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]; <span class="comment">/* CRASH HERE ??? */</span>
<a name="l00209"></a>00209                 <span class="keywordflow">if</span> (tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[i]) {
<a name="l00210"></a>00210                     tmpmb-&gt;mat[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a3fc06eed9b3244922dd05906dcc58cde">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>++;
<a name="l00211"></a>00211                 }
<a name="l00212"></a>00212             }
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214         <span class="keywordflow">break</span>;
<a name="l00215"></a>00215 <span class="preprocessor">#endif</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>
<a name="l00217"></a>00217     <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>:
<a name="l00218"></a>00218         <span class="keywordflow">if</span> (!cage) {
<a name="l00219"></a>00219             <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *origmesh = ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00220"></a>00220             tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a941cdd9a07c81485677efb6b444eb8ad">flag</a> = origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a941cdd9a07c81485677efb6b444eb8ad">flag</a>;
<a name="l00221"></a>00221             tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a> = <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>);
<a name="l00222"></a>00222             tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac7bd892579cf8a793973b2ce2491ec06">totcol</a> = origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac7bd892579cf8a793973b2ce2491ec06">totcol</a>;
<a name="l00223"></a>00223             tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ad97b68a3564c0ae6104727c0e854e7da">smoothresh</a> = origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ad97b68a3564c0ae6104727c0e854e7da">smoothresh</a>;
<a name="l00224"></a>00224             <span class="keywordflow">if</span> ( origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a> ) {
<a name="l00225"></a>00225                 <span class="keywordflow">for</span> ( i = origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac7bd892579cf8a793973b2ce2491ec06">totcol</a>; i-- &gt; 0; ) {
<a name="l00226"></a>00226                     <span class="comment">/* are we an object material or data based? */</span>
<a name="l00227"></a>00227                     tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a58e55b421436f3c376299a2179619150">matbits</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? ob-&gt;<a class="code" href="../../de/de7/structObject.html#a545b54048d299d5d9b5f49d6a80f1a9f">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] : origmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00228"></a>00228 
<a name="l00229"></a>00229                     <span class="keywordflow">if</span> (tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[i]) {
<a name="l00230"></a>00230                         tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#a4fdee04a24d1a821f3bfa659b3bd8156">mat</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a3fc06eed9b3244922dd05906dcc58cde">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>++;
<a name="l00231"></a>00231                     }
<a name="l00232"></a>00232                 }
<a name="l00233"></a>00233             }
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235         <span class="keywordflow">break</span>;
<a name="l00236"></a>00236     } <span class="comment">/* end copy materials */</span>
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="comment">/* cycles and exporters rely on this still */</span>
<a name="l00239"></a>00239     <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a4c1101fb270465f1f47252ded570f6fb">BKE_mesh_tessface_ensure</a>(tmpmesh);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="comment">/* we don&#39;t assign it to anything */</span>
<a name="l00242"></a>00242     tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac10779fc3e00d6d5b8f7ea32adaedd43">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00243"></a>00243     
<a name="l00244"></a>00244     <span class="comment">/* make sure materials get updated in objects */</span>
<a name="l00245"></a>00245     <a class="code" href="../../d4/d0f/BKE__material_8h.html#ac2bb0bdbe524ea6b63503a1d9540a522">test_object_materials</a>(&amp;tmpmesh-&gt;<a class="code" href="../../da/d29/structMesh.html#ac10779fc3e00d6d5b8f7ea32adaedd43">id</a>);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="keywordflow">return</span> tmpmesh;
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/* mostly a copy from convertblender.c */</span>
<a name="l00251"></a>00251 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d47/convertblender_8c.html#af7cd670b3bd22b8ce75738b20b3ddcf3">dupli_render_particle_set</a>(<a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> enable)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253     <span class="comment">/* ugly function, but we need to set particle systems to their render</span>
<a name="l00254"></a>00254 <span class="comment">     * settings before calling object_duplilist, to get render level duplis */</span>
<a name="l00255"></a>00255     <a class="code" href="../../d4/d91/structGroup.html">Group</a> *group;
<a name="l00256"></a>00256     <a class="code" href="../../d3/d3b/structGroupObject.html">GroupObject</a> *go;
<a name="l00257"></a>00257     <a class="code" href="../../d4/d14/structParticleSystem.html">ParticleSystem</a> *psys;
<a name="l00258"></a>00258     <a class="code" href="../../d5/d6c/structDerivedMesh.html">DerivedMesh</a> *dm;
<a name="l00259"></a>00259     <span class="keywordtype">float</span> mat[4][4];
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a573114dda84526c82734926c26953eb0">unit_m4</a>(mat);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="keywordflow">if</span> (level &gt;= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36a22093e79e04fd2df49aaf650c10ce">MAX_DUPLI_RECUR</a>)
<a name="l00264"></a>00264         <span class="keywordflow">return</span>;
<a name="l00265"></a>00265     
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1091cd84d4d7227ab41b167e84be3065">transflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4bbbd0230e5c35a5d939a40131bd2df1">OB_DUPLIPARTS</a>) {
<a name="l00267"></a>00267         <span class="keywordflow">for</span> (psys = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0eef8205764ed3927f48766acf36ea68">particlesystem</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; psys; psys = psys-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a734228c70c56227c6f7a29145a5f5b57">next</a>) {
<a name="l00268"></a>00268             <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(psys-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a3b53997470f35e5d3a5e99ba52fb1c3a">part</a>-&gt;<a class="code" href="../../df/da6/structParticleSettings.html#a1a44c6ba58be14e0084b4f71c87d66a2">ren_as</a>, <a class="code" href="../../de/d5a/DNA__particle__types_8h.html#a2506fdc9f159583f812c900402c5ec54">PART_DRAW_OB</a>, <a class="code" href="../../de/d5a/DNA__particle__types_8h.html#ababc8a40b78ea25bfdb9cd7b85c83f19">PART_DRAW_GR</a>)) {
<a name="l00269"></a>00269                 <span class="keywordflow">if</span> (enable)
<a name="l00270"></a>00270                     <a class="code" href="../../db/dca/BKE__particle_8h.html#a2ff8a19d90143549c1f412cb457dfc89">psys_render_set</a>(ob, psys, mat, mat, 1, 1, 0.f);
<a name="l00271"></a>00271                 <span class="keywordflow">else</span>
<a name="l00272"></a>00272                     <a class="code" href="../../db/dca/BKE__particle_8h.html#a3bbe6d899d3310546735f082b57bc78f">psys_render_restore</a>(ob, psys);
<a name="l00273"></a>00273             }
<a name="l00274"></a>00274         }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <span class="keywordflow">if</span> (level == 0 &amp;&amp; enable) {
<a name="l00277"></a>00277             <span class="comment">/* this is to make sure we get render level duplis in groups:</span>
<a name="l00278"></a>00278 <span class="comment">             * the derivedmesh must be created before init_render_mesh,</span>
<a name="l00279"></a>00279 <span class="comment">             * since object_duplilist does dupliparticles before that */</span>
<a name="l00280"></a>00280             dm = <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#aeade9a199706a910fa3a5593b49cdbdf">mesh_create_derived_render</a>(scene, ob, <a class="code" href="../../d5/d5e/BKE__customdata_8h.html#ac302305683fc6e7bba64ef68c74a1404">CD_MASK_BAREMESH</a>|<a class="code" href="../../d8/d9f/DNA__customdata__types_8h.html#a8a8015f5b251bbf4a32f7c83554209b4">CD_MASK_MTFACE</a>|<a class="code" href="../../d8/d9f/DNA__customdata__types_8h.html#a39309592e425ee3db512c41152ed8ea4">CD_MASK_MCOL</a>);
<a name="l00281"></a>00281             dm-&gt;<a class="code" href="../../d5/d6c/structDerivedMesh.html#a36c159344a023f5fbe64f12006c8647f">release</a>(dm);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283             <span class="keywordflow">for</span> (psys = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0eef8205764ed3927f48766acf36ea68">particlesystem</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; psys; psys = psys-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a734228c70c56227c6f7a29145a5f5b57">next</a>)
<a name="l00284"></a>00284                 <a class="code" href="../../db/dca/BKE__particle_8h.html#abb46b353cec8d54be258c683d352fc1d">psys_get_modifier</a>(ob, psys)-&gt;<a class="code" href="../../d7/da3/structParticleSystemModifierData.html#abc843013a6e93e2d94b3f45ac8fed2c9">flag</a> &amp;= ~<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a4f03f9ddb8ddeabea182daaa994650afaabaaf7f2d3b45ec49fb96b09b99615a3">eParticleSystemFlag_psys_updated</a>;
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;
<a name="l00289"></a>00289     group = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="keywordflow">for</span> (go = group-&gt;<a class="code" href="../../d4/d91/structGroup.html#ad757bf69b6fd15b1d4e0980089d13be1">gobject</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; go; go = go-&gt;<a class="code" href="../../d3/d3b/structGroupObject.html#a81e7437ba90ec95c5fbb96e17e6a203d">next</a>)
<a name="l00292"></a>00292         <a class="code" href="../../d2/d47/convertblender_8c.html#af7cd670b3bd22b8ce75738b20b3ddcf3">dupli_render_particle_set</a>(scene, go-&gt;<a class="code" href="../../d3/d3b/structGroupObject.html#aeafe134dbf1980f42045d1fc191f2967">ob</a>, level+1, enable);
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 <span class="comment">/* When no longer needed, duplilist should be freed with Object.free_duplilist */</span>
<a name="l00295"></a>00295 <span class="keywordtype">void</span> <a class="code" href="../../d4/d32/blender__util_8h.html#a4b78b35e94824651a20f2c1d32a1b362">rna_Object_create_duplilist</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *sce)
<a name="l00296"></a>00296 {
<a name="l00297"></a>00297     <span class="keywordflow">if</span> (!(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1091cd84d4d7227ab41b167e84be3065">transflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a09b56b47e42a59a4266c995ded542ea6">OB_DUPLI</a>)) {
<a name="l00298"></a>00298         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Object does not have duplis&quot;</span>);
<a name="l00299"></a>00299         <span class="keywordflow">return</span>;
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     <span class="comment">/* free duplilist if a user forgets to */</span>
<a name="l00303"></a>00303     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a>) {
<a name="l00304"></a>00304         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68aa7428e90bb3916896145e5eb14a7dd7b">RPT_WARNING</a>, <span class="stringliteral">&quot;Object.dupli_list has not been freed&quot;</span>);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306         <a class="code" href="../../df/dd0/BKE__anim_8h.html#a6e75b271f0e0049858eadb8122d87626">free_object_duplilist</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a>);
<a name="l00307"></a>00307         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309     <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rendering)
<a name="l00310"></a>00310         <a class="code" href="../../d2/d47/convertblender_8c.html#af7cd670b3bd22b8ce75738b20b3ddcf3">dupli_render_particle_set</a>(sce, ob, 0, 1);
<a name="l00311"></a>00311     ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a> = <a class="code" href="../../df/dd0/BKE__anim_8h.html#a8e20fdaf71c0bc4466b67ec835807bbf">object_duplilist</a>(sce, ob);
<a name="l00312"></a>00312     <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rendering)
<a name="l00313"></a>00313         <a class="code" href="../../d2/d47/convertblender_8c.html#af7cd670b3bd22b8ce75738b20b3ddcf3">dupli_render_particle_set</a>(sce, ob, 0, 0);
<a name="l00314"></a>00314     <span class="comment">/* ob-&gt;duplilist should now be freed with Object.free_duplilist */</span>
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="keywordtype">void</span> <a class="code" href="../../d4/d32/blender__util_8h.html#a67c7c0fea02d639daaad80268f410d78">rna_Object_free_duplilist</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a>) {
<a name="l00320"></a>00320         <a class="code" href="../../df/dd0/BKE__anim_8h.html#a6e75b271f0e0049858eadb8122d87626">free_object_duplilist</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a>);
<a name="l00321"></a>00321         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a94fedb802ee9557bf5cebfa6b3624b16">duplilist</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325 <span class="keyword">static</span> <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> rna_Object_shape_key_add(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports,
<a name="l00326"></a>00326                                            <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> from_mix)
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene = <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00329"></a>00329     <a class="code" href="../../d2/dc3/structKeyBlock.html">KeyBlock</a> *kb = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="keywordflow">if</span> ((kb = <a class="code" href="../../df/dac/BKE__object_8h.html#a9127792c71fb1abf1b6562b86b59a9f9">object_insert_shape_key</a>(scene, ob, name, from_mix))) {
<a name="l00332"></a>00332         <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> keyptr;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334         <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>, &amp;RNA_ShapeKey, kb, &amp;keyptr);
<a name="l00335"></a>00335         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1f2c5ee380a0a55abaf43b7bceeb7688">ND_DRAW</a>, ob);
<a name="l00336"></a>00336         
<a name="l00337"></a>00337         <span class="keywordflow">return</span> keyptr;
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339     <span class="keywordflow">else</span> {
<a name="l00340"></a>00340         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Object \&quot;%s\&quot;does not support shapes&quot;</span>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2);
<a name="l00341"></a>00341         <span class="keywordflow">return</span> <a class="code" href="../../d3/d10/rna__access_8c.html#a528bfdf8e4f3178d59d7ccd394166d20">PointerRNA_NULL</a>;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="keywordtype">int</span> rna_Object_is_visible(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *sce)
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347     <span class="keywordflow">return</span> !(ob-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>) &amp;&amp; (ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa9cfa964651e1e2f3044c9c79cf004b3">lay</a> &amp; sce-&gt;<a class="code" href="../../d9/d27/structScene.html#a506dd867fc58506c37c1e56f6b134056">lay</a>);
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="preprocessor">#if 0</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> rna_Mesh_assign_verts_to_group(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../de/dad/structbDeformGroup.html">bDeformGroup</a> *group, <span class="keywordtype">int</span> *<a class="code" href="../../d2/d6c/mball_8c.html#a47e7cc913f2b356de088363a1d87db4a">indices</a>, <span class="keywordtype">int</span> <a class="code" href="../../d2/d6c/mball_8c.html#a16996c17496386a947d510a19ad1facc">totindex</a>,
<a name="l00352"></a>00352                                            <span class="keywordtype">float</span> weight, <span class="keywordtype">int</span> assignmode)
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> != <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00355"></a>00355         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Object should be of MESH type&quot;</span>);
<a name="l00356"></a>00356         <span class="keywordflow">return</span>;
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *me = (<a class="code" href="../../da/d29/structMesh.html">Mesh</a>*)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00360"></a>00360     <span class="keywordtype">int</span> group_index = <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a09f13df59d10774f0bcf69a054f9d865">BLI_findlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a11c2e3299c854eb361471ea041397cb7">defbase</a>, group);
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (group_index == -1) {
<a name="l00362"></a>00362         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;No deform groups assigned to mesh&quot;</span>);
<a name="l00363"></a>00363         <span class="keywordflow">return</span>;
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     <span class="keywordflow">if</span> (assignmode != <a class="code" href="../../d5/dd6/ED__mesh_8h.html#a5728db514cd0fa3c032a5df057111454">WEIGHT_REPLACE</a> &amp;&amp; assignmode != <a class="code" href="../../d5/dd6/ED__mesh_8h.html#aab3d17cfab2e005aea56e05bb3d59bcf">WEIGHT_ADD</a> &amp;&amp; assignmode != <a class="code" href="../../d5/dd6/ED__mesh_8h.html#abbd9fb9211c68e9043860ba47612ec6c">WEIGHT_SUBTRACT</a>) {
<a name="l00367"></a>00367         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Bad assignment mode&quot;</span> );
<a name="l00368"></a>00368         <span class="keywordflow">return</span>;
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="comment">/* makes a set of dVerts corresponding to the mVerts */</span>
<a name="l00372"></a>00372     <span class="keywordflow">if</span> (!me-&gt;<a class="code" href="../../da/d29/structMesh.html#a5d3c41c9b430b3ed6e0454a85fea68de">dvert</a>)
<a name="l00373"></a>00373         create_dverts(&amp;me-&gt;<a class="code" href="../../da/d29/structMesh.html#ac10779fc3e00d6d5b8f7ea32adaedd43">id</a>);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="comment">/* loop list adding verts to group  */</span>
<a name="l00376"></a>00376     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d2/d6c/mball_8c.html#a16996c17496386a947d510a19ad1facc">totindex</a>; i++) {
<a name="l00377"></a>00377         <span class="keywordflow">if</span> (i &lt; 0 || i &gt;= me-&gt;<a class="code" href="../../da/d29/structMesh.html#a8eb428498e3a39055f51a7de431655ed">totvert</a>) {
<a name="l00378"></a>00378             <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;Bad vertex index in list&quot;</span>);
<a name="l00379"></a>00379             <span class="keywordflow">return</span>;
<a name="l00380"></a>00380         }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382         add_vert_defnr(ob, group_index, i, weight, assignmode);
<a name="l00383"></a>00383     }
<a name="l00384"></a>00384 }
<a name="l00385"></a>00385 <span class="preprocessor">#endif</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span>
<a name="l00387"></a>00387 <span class="comment">/* BMESH_TODO, return polygon index, not tessface */</span>
<a name="l00388"></a>00388 <span class="keywordtype">void</span> rna_Object_ray_cast(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports, <span class="keywordtype">float</span> ray_start[3], <span class="keywordtype">float</span> ray_end[3],
<a name="l00389"></a>00389                          <span class="keywordtype">float</span> r_location[3], <span class="keywordtype">float</span> r_normal[3], <span class="keywordtype">int</span> *index)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     <a class="code" href="../../d2/d80/structBVHTreeFromMesh.html">BVHTreeFromMesh</a> treeData = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l00392"></a>00392     
<a name="l00393"></a>00393     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00394"></a>00394         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;object \&quot;%s\&quot; has no mesh data to be used for ray casting&quot;</span>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2);
<a name="l00395"></a>00395         <span class="keywordflow">return</span>;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="comment">/* no need to managing allocation or freeing of the BVH data. this is generated and freed as needed */</span>
<a name="l00399"></a>00399     <a class="code" href="../../d2/d65/BKE__bvhutils_8h.html#ae7524e15c626888b530bfface6a393ae">bvhtree_from_mesh_faces</a>(&amp;treeData, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a>, 0.0f, 4, 6);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <span class="keywordflow">if</span> (treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#ac99e3605d29760b3752a8633e08c5970">tree</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00402"></a>00402         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;object \&quot;%s\&quot; could not create internal data for ray casting&quot;</span>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2);
<a name="l00403"></a>00403         <span class="keywordflow">return</span>;
<a name="l00404"></a>00404     }
<a name="l00405"></a>00405     <span class="keywordflow">else</span> {
<a name="l00406"></a>00406         <a class="code" href="../../d7/dd9/structBVHTreeRayHit.html">BVHTreeRayHit</a> hit;
<a name="l00407"></a>00407         <span class="keywordtype">float</span> ray_nor[3], dist;
<a name="l00408"></a>00408         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(ray_nor, ray_end, ray_start);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410         dist = hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#aacc4e450c7e6b40afcdd2da1ef64be6a">dist</a> = <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a3b49789e4776d019ff5756b73df2f3a1">normalize_v3</a>(ray_nor);
<a name="l00411"></a>00411         hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#a4f2b11fb74f73302e32f0842c4abee1e">index</a> = -1;
<a name="l00412"></a>00412         
<a name="l00413"></a>00413         <span class="keywordflow">if</span> (<a class="code" href="../../d5/dc5/BLI__kdopbvh_8h.html#a961a896017037e95a717e06943983f44">BLI_bvhtree_ray_cast</a>(treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#ac99e3605d29760b3752a8633e08c5970">tree</a>, ray_start, ray_nor, 0.0f, &amp;hit,
<a name="l00414"></a>00414                                  treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#a1df60aad3c3389c43359a2d5d9f34c85">raycast_callback</a>, &amp;treeData) != -1) {
<a name="l00415"></a>00415             <span class="keywordflow">if</span> (hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#aacc4e450c7e6b40afcdd2da1ef64be6a">dist</a> &lt;= dist) {
<a name="l00416"></a>00416                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(r_location, hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#a09784a75454e77df7414ef1c47582bda">co</a>);
<a name="l00417"></a>00417                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(r_normal, hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#ac70dc405955f2cbc18e60f2df021e673">no</a>);
<a name="l00418"></a>00418                 *index = hit.<a class="code" href="../../d7/dd9/structBVHTreeRayHit.html#a4f2b11fb74f73302e32f0842c4abee1e">index</a>;
<a name="l00419"></a>00419                 <span class="keywordflow">return</span>;
<a name="l00420"></a>00420             }
<a name="l00421"></a>00421         }
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#acd4d89007c860a4c74d459ac72593065">zero_v3</a>(r_location);
<a name="l00425"></a>00425     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#acd4d89007c860a4c74d459ac72593065">zero_v3</a>(r_normal);
<a name="l00426"></a>00426     *index = -1;
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="keywordtype">void</span> rna_Object_closest_point_on_mesh(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports, <span class="keywordtype">float</span> point_co[3], <span class="keywordtype">float</span> max_dist,
<a name="l00430"></a>00430                                       <span class="keywordtype">float</span> n_location[3], <span class="keywordtype">float</span> n_normal[3], <span class="keywordtype">int</span> *index)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432     <a class="code" href="../../d2/d80/structBVHTreeFromMesh.html">BVHTreeFromMesh</a> treeData = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l00433"></a>00433     
<a name="l00434"></a>00434     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00435"></a>00435         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;object \&quot;%s\&quot; has no mesh data to be used for finding nearest point&quot;</span>,
<a name="l00436"></a>00436                     ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2);
<a name="l00437"></a>00437         <span class="keywordflow">return</span>;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <span class="comment">/* no need to managing allocation or freeing of the BVH data. this is generated and freed as needed */</span>
<a name="l00441"></a>00441     <a class="code" href="../../d2/d65/BKE__bvhutils_8h.html#ae7524e15c626888b530bfface6a393ae">bvhtree_from_mesh_faces</a>(&amp;treeData, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a>, 0.0f, 4, 6);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443     <span class="keywordflow">if</span> (treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#ac99e3605d29760b3752a8633e08c5970">tree</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00444"></a>00444         <a class="code" href="../../d2/d40/BKE__report_8h.html#af25c247b3b620d13cef87ec2bed1698e">BKE_reportf</a>(reports, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;object \&quot;%s\&quot; could not create internal data for finding nearest point&quot;</span>,
<a name="l00445"></a>00445                     ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2);
<a name="l00446"></a>00446         <span class="keywordflow">return</span>;
<a name="l00447"></a>00447     }
<a name="l00448"></a>00448     <span class="keywordflow">else</span> {
<a name="l00449"></a>00449         <a class="code" href="../../da/df6/structBVHTreeNearest.html">BVHTreeNearest</a> nearest;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         nearest.<a class="code" href="../../da/df6/structBVHTreeNearest.html#a6adc3b3ada5dfaf14539d75ef484f10c">index</a> = -1;
<a name="l00452"></a>00452         nearest.<a class="code" href="../../da/df6/structBVHTreeNearest.html#a5fe4356b1da3b75698257fbc324cf94a">dist</a> = max_dist * max_dist;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454         <span class="keywordflow">if</span> (<a class="code" href="../../d5/dc5/BLI__kdopbvh_8h.html#afb2998b036283c715c148903376327ae">BLI_bvhtree_find_nearest</a>(treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#ac99e3605d29760b3752a8633e08c5970">tree</a>, point_co, &amp;nearest, treeData.<a class="code" href="../../d2/d80/structBVHTreeFromMesh.html#ad2eadcf8b622ef9ead3aa69e52d242b4">nearest_callback</a>, &amp;treeData) != -1) {
<a name="l00455"></a>00455             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(n_location, nearest.<a class="code" href="../../da/df6/structBVHTreeNearest.html#a29f81655eebc60b9c11be8faf9842686">co</a>);
<a name="l00456"></a>00456             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(n_normal, nearest.<a class="code" href="../../da/df6/structBVHTreeNearest.html#aa1420b4aad9b8459b0cd1736dd746f30">no</a>);
<a name="l00457"></a>00457             *index = nearest.<a class="code" href="../../da/df6/structBVHTreeNearest.html#a6adc3b3ada5dfaf14539d75ef484f10c">index</a>;
<a name="l00458"></a>00458             <span class="keywordflow">return</span>;
<a name="l00459"></a>00459         }
<a name="l00460"></a>00460     }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#acd4d89007c860a4c74d459ac72593065">zero_v3</a>(n_location);
<a name="l00463"></a>00463     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#acd4d89007c860a4c74d459ac72593065">zero_v3</a>(n_normal);
<a name="l00464"></a>00464     *index = -1;
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 <span class="comment">/* ObjectBase */</span>
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 <span class="keywordtype">void</span> rna_ObjectBase_layers_from_view(<a class="code" href="../../d3/da9/structBase.html">Base</a> *base, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d)
<a name="l00470"></a>00470 {
<a name="l00471"></a>00471     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> = base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa9cfa964651e1e2f3044c9c79cf004b3">lay</a> = v3d-&gt;<a class="code" href="../../d6/deb/structView3D.html#a45ac0a23240ec719b0952d62190e9130">lay</a>;
<a name="l00472"></a>00472 }
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="keywordtype">int</span> <a class="code" href="../../d4/d32/blender__util_8h.html#a50d359d722399bc07fa76e09ea09d408">rna_Object_is_modified</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <span class="keywordtype">int</span> settings)
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/BKE__object_8h.html#aa0b61d96423525ddceedcb7c41e53b6e">object_is_modified</a>(scene, ob) &amp; settings;
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="keywordtype">void</span> rna_Object_dm_info(<span class="keyword">struct</span> <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> type, <span class="keywordtype">char</span> *result)
<a name="l00481"></a>00481 {
<a name="l00482"></a>00482     <a class="code" href="../../d5/d6c/structDerivedMesh.html">DerivedMesh</a> *dm = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00483"></a>00483     <span class="keywordtype">int</span> dm_release = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00484"></a>00484     <span class="keywordtype">char</span> *ret = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     result[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <span class="keywordflow">switch</span> (type) {
<a name="l00489"></a>00489         <span class="keywordflow">case</span> 0:
<a name="l00490"></a>00490             <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00491"></a>00491                 dm = <a class="code" href="../../dd/d15/BKE__cdderivedmesh_8h.html#acf07490dbc6e250966bbfb63d34e7ada">CDDM_from_mesh</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>, ob);
<a name="l00492"></a>00492                 ret = <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#a5918163bd4aba6145407c3c2b9e98f00">DM_debug_info</a>(dm);
<a name="l00493"></a>00493                 dm_release = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00494"></a>00494             }
<a name="l00495"></a>00495             <span class="keywordflow">break</span>;
<a name="l00496"></a>00496         <span class="keywordflow">case</span> 1:
<a name="l00497"></a>00497             dm = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a75bea6e258885840c46b755cec75f7d0">derivedDeform</a>;
<a name="l00498"></a>00498             <span class="keywordflow">break</span>;
<a name="l00499"></a>00499         <span class="keywordflow">case</span> 2:
<a name="l00500"></a>00500             dm = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a>;
<a name="l00501"></a>00501             <span class="keywordflow">break</span>;
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <span class="keywordflow">if</span> (dm) {
<a name="l00505"></a>00505         ret = <a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html#a5918163bd4aba6145407c3c2b9e98f00">DM_debug_info</a>(dm);
<a name="l00506"></a>00506         <span class="keywordflow">if</span> (dm_release) {
<a name="l00507"></a>00507             dm-&gt;<a class="code" href="../../d5/d6c/structDerivedMesh.html#a36c159344a023f5fbe64f12006c8647f">release</a>(dm);
<a name="l00508"></a>00508         }
<a name="l00509"></a>00509         <span class="keywordflow">if</span> (ret) {
<a name="l00510"></a>00510             strcpy(result, ret);
<a name="l00511"></a>00511             <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ret);
<a name="l00512"></a>00512         }
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 <span class="preprocessor">#endif </span><span class="comment">/* NDEBUG */</span>
<a name="l00516"></a>00516 
<a name="l00517"></a>00517 <span class="preprocessor">#else</span>
<a name="l00518"></a>00518 <span class="preprocessor"></span>
<a name="l00519"></a><a class="code" href="../../d9/de1/rna__object__api_8c.html#afaef34e1b94b59a7c682731367b56867">00519</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d29/rna__internal_8h.html#aa43ee33e40eae03ff8711826609526a6">RNA_api_object</a>(<a class="code" href="../../d5/d61/structStructRNA.html">StructRNA</a> *srna)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521     <a class="code" href="../../dd/de5/structFunctionRNA.html">FunctionRNA</a> *func;
<a name="l00522"></a>00522     <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *parm;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> mesh_type_items[] = {
<a name="l00525"></a>00525         {<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a1cab93646b1d30a0ad79c4448bb06601ac434becb714d73f6821cafeeb5b22995">eModifierMode_Realtime</a>, <span class="stringliteral">&quot;PREVIEW&quot;</span>, 0, <span class="stringliteral">&quot;Preview&quot;</span>, <span class="stringliteral">&quot;Apply modifier preview settings&quot;</span>},
<a name="l00526"></a>00526         {<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a1cab93646b1d30a0ad79c4448bb06601a35b98a06484384dcc7e907ca646e5918">eModifierMode_Render</a>, <span class="stringliteral">&quot;RENDER&quot;</span>, 0, <span class="stringliteral">&quot;Render&quot;</span>, <span class="stringliteral">&quot;Apply modifier render settings&quot;</span>},
<a name="l00527"></a>00527         {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}
<a name="l00528"></a>00528     };
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00531"></a>00531 <span class="preprocessor"></span>    <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> mesh_dm_info_items[] = {
<a name="l00532"></a>00532         {0, <span class="stringliteral">&quot;SOURCE&quot;</span>, 0, <span class="stringliteral">&quot;Source&quot;</span>, <span class="stringliteral">&quot;Source mesh&quot;</span>},
<a name="l00533"></a>00533         {1, <span class="stringliteral">&quot;DEFORM&quot;</span>, 0, <span class="stringliteral">&quot;Deform&quot;</span>, <span class="stringliteral">&quot;Objects deform mesh&quot;</span>},
<a name="l00534"></a>00534         {2, <span class="stringliteral">&quot;FINAL&quot;</span>, 0, <span class="stringliteral">&quot;Final&quot;</span>, <span class="stringliteral">&quot;Objects final mesh&quot;</span>},
<a name="l00535"></a>00535         {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}
<a name="l00536"></a>00536     };
<a name="l00537"></a>00537 <span class="preprocessor">#endif</span>
<a name="l00538"></a>00538 <span class="preprocessor"></span>
<a name="l00539"></a>00539     <span class="comment">/* mesh */</span>
<a name="l00540"></a>00540     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;to_mesh&quot;</span>, <span class="stringliteral">&quot;rna_Object_to_mesh&quot;</span>);
<a name="l00541"></a>00541     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Create a Mesh datablock with modifiers applied&quot;</span>);
<a name="l00542"></a>00542     <a class="code" href="../../dc/d7e/rna__define_8c.html#aa1508c1fa65c202e0a831eae013e544e">RNA_def_function_flag</a>(func, <a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217a0e9bfa167db81097fdadb885a5b9f4a7">FUNC_USE_REPORTS</a>);
<a name="l00543"></a>00543     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;scene&quot;</span>, <span class="stringliteral">&quot;Scene&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Scene within which to evaluate modifiers&quot;</span>);
<a name="l00544"></a>00544     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a5def8c59b8ee9008946cf4314433b69a">PROP_NEVER_NULL</a>);
<a name="l00545"></a>00545     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(func, <span class="stringliteral">&quot;apply_modifiers&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Apply modifiers&quot;</span>);
<a name="l00546"></a>00546     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00547"></a>00547     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(func, <span class="stringliteral">&quot;settings&quot;</span>, mesh_type_items, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Modifier settings to apply&quot;</span>);
<a name="l00548"></a>00548     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00549"></a>00549     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;mesh&quot;</span>, <span class="stringliteral">&quot;Mesh&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,
<a name="l00550"></a>00550                            <span class="stringliteral">&quot;Mesh created from object, remove it if it is only used for export&quot;</span>);
<a name="l00551"></a>00551     <a class="code" href="../../dc/d7e/rna__define_8c.html#a2544da6875feab4949048033310a9dd1">RNA_def_function_return</a>(func, parm);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="comment">/* duplis */</span>
<a name="l00554"></a>00554     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;dupli_list_create&quot;</span>, <span class="stringliteral">&quot;rna_Object_create_duplilist&quot;</span>);
<a name="l00555"></a>00555     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Create a list of dupli objects for this object, needs to &quot;</span>
<a name="l00556"></a>00556                                           <span class="stringliteral">&quot;be freed manually with free_dupli_list to restore the &quot;</span>
<a name="l00557"></a>00557                                           <span class="stringliteral">&quot;objects real matrix and layers&quot;</span>);
<a name="l00558"></a>00558     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;scene&quot;</span>, <span class="stringliteral">&quot;Scene&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Scene within which to evaluate duplis&quot;</span>);
<a name="l00559"></a>00559     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a5def8c59b8ee9008946cf4314433b69a">PROP_NEVER_NULL</a>);
<a name="l00560"></a>00560     <a class="code" href="../../dc/d7e/rna__define_8c.html#aa1508c1fa65c202e0a831eae013e544e">RNA_def_function_flag</a>(func, <a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217a0e9bfa167db81097fdadb885a5b9f4a7">FUNC_USE_REPORTS</a>);
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;dupli_list_clear&quot;</span>, <span class="stringliteral">&quot;rna_Object_free_duplilist&quot;</span>);
<a name="l00563"></a>00563     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Free the list of dupli objects&quot;</span>);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565     <span class="comment">/* Armature */</span>
<a name="l00566"></a>00566     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;find_armature&quot;</span>, <span class="stringliteral">&quot;modifiers_isDeformedByArmature&quot;</span>);
<a name="l00567"></a>00567     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Find armature influencing this object as a parent or via a modifier&quot;</span>);
<a name="l00568"></a>00568     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;ob_arm&quot;</span>, <span class="stringliteral">&quot;Object&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Armature object influencing this object or NULL&quot;</span>);
<a name="l00569"></a>00569     <a class="code" href="../../dc/d7e/rna__define_8c.html#a2544da6875feab4949048033310a9dd1">RNA_def_function_return</a>(func, parm);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <span class="comment">/* Shape key */</span>
<a name="l00572"></a>00572     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;shape_key_add&quot;</span>, <span class="stringliteral">&quot;rna_Object_shape_key_add&quot;</span>);
<a name="l00573"></a>00573     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Add shape key to an object&quot;</span>);
<a name="l00574"></a>00574     <a class="code" href="../../dc/d7e/rna__define_8c.html#aa1508c1fa65c202e0a831eae013e544e">RNA_def_function_flag</a>(func, <a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217ac30084aae1a466ac0beb442001d6efc1">FUNC_USE_CONTEXT</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217a0e9bfa167db81097fdadb885a5b9f4a7">FUNC_USE_REPORTS</a>);
<a name="l00575"></a>00575     <a class="code" href="../../dc/d7e/rna__define_8c.html#ac53a3ed18da454971065d5b4e4cb4d62">RNA_def_string</a>(func, <span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;Key&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Unique name for the new keylock&quot;</span>); <span class="comment">/* optional */</span>
<a name="l00576"></a>00576     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(func, <span class="stringliteral">&quot;from_mix&quot;</span>, 1, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Create new shape from existing mix of shapes&quot;</span>);
<a name="l00577"></a>00577     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;ShapeKey&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;New shape keyblock&quot;</span>);
<a name="l00578"></a>00578     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a88f6c010a50eab9e38cd86ab35059120">PROP_RNAPTR</a>);
<a name="l00579"></a>00579     <a class="code" href="../../dc/d7e/rna__define_8c.html#a2544da6875feab4949048033310a9dd1">RNA_def_function_return</a>(func, parm);
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="comment">/* Ray Cast */</span>
<a name="l00582"></a>00582     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;ray_cast&quot;</span>, <span class="stringliteral">&quot;rna_Object_ray_cast&quot;</span>);
<a name="l00583"></a>00583     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Cast a ray onto in object space&quot;</span>);
<a name="l00584"></a>00584     <a class="code" href="../../dc/d7e/rna__define_8c.html#aa1508c1fa65c202e0a831eae013e544e">RNA_def_function_flag</a>(func, <a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217a0e9bfa167db81097fdadb885a5b9f4a7">FUNC_USE_REPORTS</a>);
<a name="l00585"></a>00585     
<a name="l00586"></a>00586     <span class="comment">/* ray start and end */</span>
<a name="l00587"></a>00587     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;start&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, -1e4, 1e4);
<a name="l00588"></a>00588     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00589"></a>00589     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;end&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, -1e4, 1e4);
<a name="l00590"></a>00590     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00591"></a>00591 
<a name="l00592"></a>00592     <span class="comment">/* return location and normal */</span>
<a name="l00593"></a>00593     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;location&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;Location&quot;</span>,
<a name="l00594"></a>00594                                 <span class="stringliteral">&quot;The hit location of this ray cast&quot;</span>, -1e4, 1e4);
<a name="l00595"></a>00595     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a09aca10c47349234aa905bc8a9f15ace">PROP_THICK_WRAP</a>);
<a name="l00596"></a>00596     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00597"></a>00597     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;normal&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;Normal&quot;</span>,
<a name="l00598"></a>00598                                 <span class="stringliteral">&quot;The face normal at the ray cast hit location&quot;</span>, -1e4, 1e4);
<a name="l00599"></a>00599     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a09aca10c47349234aa905bc8a9f15ace">PROP_THICK_WRAP</a>);
<a name="l00600"></a>00600     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00601"></a>00601     
<a name="l00602"></a>00602     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#ad9b0c75a6330ff1837409c5d1767af62">RNA_def_int</a>(func, <span class="stringliteral">&quot;index&quot;</span>, 0, 0, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;The face index, -1 when no intersection is found&quot;</span>, 0, 0);
<a name="l00603"></a>00603     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00604"></a>00604 
<a name="l00605"></a>00605     <span class="comment">/* Nearest Point */</span>
<a name="l00606"></a>00606     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;closest_point_on_mesh&quot;</span>, <span class="stringliteral">&quot;rna_Object_closest_point_on_mesh&quot;</span>);
<a name="l00607"></a>00607     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Find the nearest point on the object&quot;</span>);
<a name="l00608"></a>00608     <a class="code" href="../../dc/d7e/rna__define_8c.html#aa1508c1fa65c202e0a831eae013e544e">RNA_def_function_flag</a>(func, <a class="code" href="../../de/d7e/RNA__types_8h.html#a2af2ad6b6441614038caf59d04b3b217a0e9bfa167db81097fdadb885a5b9f4a7">FUNC_USE_REPORTS</a>);
<a name="l00609"></a>00609 
<a name="l00610"></a>00610     <span class="comment">/* location of point for test and max distance */</span>
<a name="l00611"></a>00611     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;point&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, -1e4, 1e4);
<a name="l00612"></a>00612     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00613"></a>00613     <span class="comment">/* default is sqrt(FLT_MAX) */</span>
<a name="l00614"></a>00614     <a class="code" href="../../dc/d7e/rna__define_8c.html#a040f4b08fc87a45a90e2291382e27f75">RNA_def_float</a>(func, <span class="stringliteral">&quot;max_dist&quot;</span>, 1.844674352395373e+19, 0.0, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0.0, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>);
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <span class="comment">/* return location and normal */</span>
<a name="l00617"></a>00617     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;location&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;Location&quot;</span>,
<a name="l00618"></a>00618                                 <span class="stringliteral">&quot;The location on the object closest to the point&quot;</span>, -1e4, 1e4);
<a name="l00619"></a>00619     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a09aca10c47349234aa905bc8a9f15ace">PROP_THICK_WRAP</a>);
<a name="l00620"></a>00620     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00621"></a>00621     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a60e910dcfdccf2a1ede6471837912011">RNA_def_float_vector</a>(func, <span class="stringliteral">&quot;normal&quot;</span>, 3, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <a class="code" href="../../d3/db4/VEC3_8h.html#a7fbf1534f9e0f0bfdb86fb928902474c">FLT_MAX</a>, <span class="stringliteral">&quot;Normal&quot;</span>,
<a name="l00622"></a>00622                                 <span class="stringliteral">&quot;The face normal at the closest point&quot;</span>, -1e4, 1e4);
<a name="l00623"></a>00623     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a09aca10c47349234aa905bc8a9f15ace">PROP_THICK_WRAP</a>);
<a name="l00624"></a>00624     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#ad9b0c75a6330ff1837409c5d1767af62">RNA_def_int</a>(func, <span class="stringliteral">&quot;index&quot;</span>, 0, 0, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;The face index, -1 when no closest point is found&quot;</span>, 0, 0);
<a name="l00627"></a>00627     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <span class="comment">/* View */</span>
<a name="l00630"></a>00630     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;is_visible&quot;</span>, <span class="stringliteral">&quot;rna_Object_is_visible&quot;</span>);
<a name="l00631"></a>00631     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Determine if object is visible in a given scene&quot;</span>);
<a name="l00632"></a>00632     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;scene&quot;</span>, <span class="stringliteral">&quot;Scene&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00633"></a>00633     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a5def8c59b8ee9008946cf4314433b69a">PROP_NEVER_NULL</a>);
<a name="l00634"></a>00634     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(func, <span class="stringliteral">&quot;result&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Object visibility&quot;</span>);
<a name="l00635"></a>00635     <a class="code" href="../../dc/d7e/rna__define_8c.html#a2544da6875feab4949048033310a9dd1">RNA_def_function_return</a>(func, parm);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637     <span class="comment">/* utility function for checking if the object is modified */</span>
<a name="l00638"></a>00638     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;is_modified&quot;</span>, <span class="stringliteral">&quot;rna_Object_is_modified&quot;</span>);
<a name="l00639"></a>00639     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Determine if this object is modified from the base mesh data&quot;</span>);
<a name="l00640"></a>00640     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;scene&quot;</span>, <span class="stringliteral">&quot;Scene&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00641"></a>00641     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a5def8c59b8ee9008946cf4314433b69a">PROP_NEVER_NULL</a>);
<a name="l00642"></a>00642     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(func, <span class="stringliteral">&quot;settings&quot;</span>, mesh_type_items, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Modifier settings to apply&quot;</span>);
<a name="l00643"></a>00643     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00644"></a>00644     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(func, <span class="stringliteral">&quot;result&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Object visibility&quot;</span>);
<a name="l00645"></a>00645     <a class="code" href="../../dc/d7e/rna__define_8c.html#a2544da6875feab4949048033310a9dd1">RNA_def_function_return</a>(func, parm);
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00649"></a>00649 <span class="preprocessor"></span>    <span class="comment">/* mesh */</span>
<a name="l00650"></a>00650     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;dm_info&quot;</span>, <span class="stringliteral">&quot;rna_Object_dm_info&quot;</span>);
<a name="l00651"></a>00651     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func, <span class="stringliteral">&quot;Returns a string for derived mesh data&quot;</span>);
<a name="l00652"></a>00652 
<a name="l00653"></a>00653     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(func, <span class="stringliteral">&quot;type&quot;</span>, mesh_dm_info_items, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Modifier settings to apply&quot;</span>);
<a name="l00654"></a>00654     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>);
<a name="l00655"></a>00655     <span class="comment">/* weak!, no way to return dynamic string type */</span>
<a name="l00656"></a>00656     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#ac53a3ed18da454971065d5b4e4cb4d62">RNA_def_string</a>(func, <span class="stringliteral">&quot;result&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 16384, <span class="stringliteral">&quot;result&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00657"></a>00657     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a09aca10c47349234aa905bc8a9f15ace">PROP_THICK_WRAP</a>); <span class="comment">/* needed for string return value */</span>
<a name="l00658"></a>00658     <a class="code" href="../../dc/d7e/rna__define_8c.html#a48c6b77bde86dc8b0594d30d10a4c299">RNA_def_function_output</a>(func, parm);
<a name="l00659"></a>00659 <span class="preprocessor">#endif </span><span class="comment">/* NDEBUG */</span>
<a name="l00660"></a>00660 }
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 
<a name="l00663"></a><a class="code" href="../../d9/de1/rna__object__api_8c.html#a578971ab20128f6abe5a2b87f2aae3e0">00663</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d29/rna__internal_8h.html#afdeca9bed1f5fe7e4abc928bd301a14c">RNA_api_object_base</a>(<a class="code" href="../../d5/d61/structStructRNA.html">StructRNA</a> *srna)
<a name="l00664"></a>00664 {
<a name="l00665"></a>00665     <a class="code" href="../../dd/de5/structFunctionRNA.html">FunctionRNA</a> *func;
<a name="l00666"></a>00666     <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *parm;
<a name="l00667"></a>00667 
<a name="l00668"></a>00668     func = <a class="code" href="../../dc/d7e/rna__define_8c.html#a3c5f407e5f949a4ebb92934ecfd9523a">RNA_def_function</a>(srna, <span class="stringliteral">&quot;layers_from_view&quot;</span>, <span class="stringliteral">&quot;rna_ObjectBase_layers_from_view&quot;</span>);
<a name="l00669"></a>00669     <a class="code" href="../../dc/d7e/rna__define_8c.html#a84adacdcf775eda09de0b8808d71c10d">RNA_def_function_ui_description</a>(func,
<a name="l00670"></a>00670                                     <span class="stringliteral">&quot;Sets the object layers from a 3D View (use when adding an object in local view)&quot;</span>);
<a name="l00671"></a>00671     parm = <a class="code" href="../../dc/d7e/rna__define_8c.html#a1849fea4b24c6e6ac35584489d61d7e4">RNA_def_pointer</a>(func, <span class="stringliteral">&quot;view&quot;</span>, <span class="stringliteral">&quot;SpaceView3D&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00672"></a>00672     <a class="code" href="../../dc/d7e/rna__define_8c.html#a97e75cad8daa0d94523c8df118947191">RNA_def_property_flag</a>(parm, <a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a8ced6b2c2bdd10488b4ee95d770c89f7">PROP_REQUIRED</a>|<a class="code" href="../../de/d7e/RNA__types_8h.html#ae770cf51782953d602fb7ec23d3f2411a5def8c59b8ee9008946cf4314433b69a">PROP_NEVER_NULL</a>);
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 <span class="preprocessor">#endif</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:50 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
