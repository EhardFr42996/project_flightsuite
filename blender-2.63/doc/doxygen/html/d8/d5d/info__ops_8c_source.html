<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: info_ops.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">info_ops.c</div>  </div>
</div>
<div class="contents">
<a href="../../d8/d5d/info__ops_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version. </span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2008 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * </span>
<a name="l00022"></a>00022 <span class="comment"> * Contributor(s): Blender Foundation</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00025"></a>00025 <span class="comment"> */</span>
<a name="l00026"></a>00026 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html">DNA_packedFile_types.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d5d/DNA__space__types_8h.html">DNA_space_types.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html">DNA_windowmanager_types.h</a>&quot;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/dd1/BLI__bpath_8h.html">BLI_bpath.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/BKE__global_8h.html">BKE_global.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d77/BKE__image_8h.html">BKE_image.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4a/BKE__packedFile_8h.html">BKE_packedFile.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d40/BKE__report_8h.html">BKE_report.h</a>&quot;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7f/WM__api_8h.html">WM_api.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddc/WM__types_8h.html">WM_types.h</a>&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/UI__interface_8h.html">UI_interface.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d96/UI__resources_8h.html">UI_resources.h</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html" title="Contains defines and structs used throughout the imbuf module.">IMB_imbuf_types.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../de/ddf/RNA__access_8h.html">RNA_access.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d68/RNA__define_8h.html">RNA_define.h</a>&quot;</span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d21/info__intern_8h.html">info_intern.h</a>&quot;</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">/********************* pack all operator *********************/</span>
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a7bb10ecdafa7e71c6816efe4610dc0db">00071</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a7bb10ecdafa7e71c6816efe4610dc0db">pack_all_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <a class="code" href="../../d2/d4a/BKE__packedFile_8h.html#ae1bfd9f06a2e3df1f8b4f43895ad2c79">packAll</a>(bmain, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>);
<a name="l00076"></a>00076     <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.fileflags |= <a class="code" href="../../d1/d8c/BKE__global_8h.html#a7238d448ec1e56e3b370fc5345a30ab8">G_AUTOPACK</a>;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#adb35ba68ebac4da3edcbad9c93c78547">00081</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#adb35ba68ebac4da3edcbad9c93c78547">pack_all_invoke</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op, <a class="code" href="../../d5/d6c/structwmEvent.html">wmEvent</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(event))
<a name="l00082"></a>00082 {
<a name="l00083"></a>00083     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00084"></a>00084     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima;
<a name="l00085"></a>00085     <a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *ibuf;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="comment">// first check for dirty images</span>
<a name="l00088"></a>00088     <span class="keywordflow">for</span> (ima = bmain-&gt;<a class="code" href="../../d0/dc0/structMain.html#a683bfdfa3f231a8a2cd1f88552a685dd">image</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ima; ima = ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>) {
<a name="l00089"></a>00089         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a73febaffccd786657631095065b9e25b">ibufs</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>) { <span class="comment">/* XXX FIX */</span>
<a name="l00090"></a>00090             ibuf = <a class="code" href="../../d2/d77/BKE__image_8h.html#a82acf4ed18d05029e80437a655baf008">BKE_image_get_ibuf</a>(ima, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00091"></a>00091             
<a name="l00092"></a>00092             <span class="keywordflow">if</span> (ibuf &amp;&amp; (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a6d4eb5ccd281567cfe05d561fbb6a833">userflags</a> &amp; <a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html#a30f6d4e88f758f8f9b02bc862d845957">IB_BITMAPDIRTY</a>))
<a name="l00093"></a>00093                 <span class="keywordflow">break</span>;
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (ima) {
<a name="l00098"></a>00098         <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa2b8edf3af47bf6ae30f4eee756f9246">uiPupMenuOkee</a>(C, <span class="stringliteral">&quot;FILE_OT_pack_all&quot;</span>, <span class="stringliteral">&quot;Some images are painted on. These changes will be lost. Continue?&quot;</span>);
<a name="l00099"></a>00099         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">return</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a7bb10ecdafa7e71c6816efe4610dc0db">pack_all_exec</a>(C, op);
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a4c3c0347fb1943f10be822c8442552ea">00105</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#a71e4a125a2e93de72e1347785fb88488">FILE_OT_pack_all</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107     <span class="comment">/* identifiers */</span>
<a name="l00108"></a>00108     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Pack All&quot;</span>;
<a name="l00109"></a>00109     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_pack_all&quot;</span>;
<a name="l00110"></a>00110     
<a name="l00111"></a>00111     <span class="comment">/* api callbacks */</span>
<a name="l00112"></a>00112     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a7bb10ecdafa7e71c6816efe4610dc0db">pack_all_exec</a>;
<a name="l00113"></a>00113     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#adb35ba68ebac4da3edcbad9c93c78547">pack_all_invoke</a>;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* flags */</span>
<a name="l00116"></a>00116     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">/********************* unpack all operator *********************/</span>
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a48b3961c5b09cf297233de1f10557b63">00121</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> <a class="code" href="../../d8/d5d/info__ops_8c.html#a48b3961c5b09cf297233de1f10557b63">unpack_all_method_items</a>[] = {
<a name="l00122"></a>00122     {<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a147d00e91c5dd75ab03f6660668ba985">PF_USE_LOCAL</a>, <span class="stringliteral">&quot;USE_LOCAL&quot;</span>, 0, <span class="stringliteral">&quot;Use files in current directory (create when necessary)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00123"></a>00123     {<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3ac95c12b903a701a6cfec90c6471e3e8f">PF_WRITE_LOCAL</a>, <span class="stringliteral">&quot;WRITE_LOCAL&quot;</span>, 0, <span class="stringliteral">&quot;Write files to current directory (overwrite existing files)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00124"></a>00124     {<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a11bd1ac1e7fb322e738be297b75b21bc">PF_USE_ORIGINAL</a>, <span class="stringliteral">&quot;USE_ORIGINAL&quot;</span>, 0, <span class="stringliteral">&quot;Use files in original location (create when necessary)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00125"></a>00125     {<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a82829fb5079a5cd740c39354277e1dbd">PF_WRITE_ORIGINAL</a>, <span class="stringliteral">&quot;WRITE_ORIGINAL&quot;</span>, 0, <span class="stringliteral">&quot;Write files to original location (overwrite existing files)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00126"></a>00126     {<a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a367369088246cdc6a74f8128d99c1a36">PF_KEEP</a>, <span class="stringliteral">&quot;KEEP&quot;</span>, 0, <span class="stringliteral">&quot;Disable AutoPack, keep all packed files&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00127"></a>00127     <span class="comment">/* {PF_ASK, &quot;ASK&quot;, 0, &quot;Ask for each file&quot;, &quot;&quot;}, */</span>
<a name="l00128"></a>00128     {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}};
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a6b2c1c462cce0c22a52609a605cd18e6">00130</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a6b2c1c462cce0c22a52609a605cd18e6">unpack_all_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00133"></a>00133     <span class="keywordtype">int</span> method = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;method&quot;</span>);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordflow">if</span> (method != <a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a367369088246cdc6a74f8128d99c1a36">PF_KEEP</a>) <a class="code" href="../../d2/d4a/BKE__packedFile_8h.html#a1eadd3a7cb0c50bb970b59e507db4fcf">unpackAll</a>(bmain, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, method);  <span class="comment">/* XXX PF_ASK can&#39;t work here */</span>
<a name="l00136"></a>00136     <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.fileflags &amp;= ~<a class="code" href="../../d1/d8c/BKE__global_8h.html#a7238d448ec1e56e3b370fc5345a30ab8">G_AUTOPACK</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a5956e672dc67f656ee1facf606f59dbf">00141</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a5956e672dc67f656ee1facf606f59dbf">unpack_all_invoke</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op, <a class="code" href="../../d5/d6c/structwmEvent.html">wmEvent</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(event))
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00144"></a>00144     <a class="code" href="../../d9/d4b/structuiPopupMenu.html">uiPopupMenu</a> *pup;
<a name="l00145"></a>00145     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout;
<a name="l00146"></a>00146     <span class="keywordtype">char</span> title[64];
<a name="l00147"></a>00147     <span class="keywordtype">int</span> count = 0;
<a name="l00148"></a>00148     
<a name="l00149"></a>00149     count = <a class="code" href="../../d2/d4a/BKE__packedFile_8h.html#a8f2cad96ba8a61e6a90aa3957e705f43">countPackedFiles</a>(bmain);
<a name="l00150"></a>00150     
<a name="l00151"></a>00151     <span class="keywordflow">if</span> (!count) {
<a name="l00152"></a>00152         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68aa7428e90bb3916896145e5eb14a7dd7b">RPT_WARNING</a>, <span class="stringliteral">&quot;No packed files. Autopack disabled&quot;</span>);
<a name="l00153"></a>00153         <a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.fileflags &amp;= ~<a class="code" href="../../d1/d8c/BKE__global_8h.html#a7238d448ec1e56e3b370fc5345a30ab8">G_AUTOPACK</a>;
<a name="l00154"></a>00154         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="keywordflow">if</span> (count == 1)
<a name="l00158"></a>00158         strcpy(title, <span class="stringliteral">&quot;Unpack 1 file&quot;</span>);
<a name="l00159"></a>00159     <span class="keywordflow">else</span>
<a name="l00160"></a>00160         <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(title, <span class="keyword">sizeof</span>(title), <span class="stringliteral">&quot;Unpack %d files&quot;</span>, count);
<a name="l00161"></a>00161     
<a name="l00162"></a>00162     pup = <a class="code" href="../../d8/d1e/UI__interface_8h.html#a402c012d9cde0ff0f0808c25c4213d43">uiPupMenuBegin</a>(C, title, ICON_NONE);
<a name="l00163"></a>00163     layout = <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8c1b07b81987cdc2168a7417f9104cca">uiPupMenuLayout</a>(pup);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1a73a847be1bae1a560408d0b44c212f">uiLayoutSetOperatorContext</a>(layout, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39ad2fa38d3cd3b0844e4a1b33bbf5f918c">WM_OP_EXEC_DEFAULT</a>);
<a name="l00166"></a>00166     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a978da8810d3910b8b9057e80e1817de4">uiItemsEnumO</a>(layout, <span class="stringliteral">&quot;FILE_OT_unpack_all&quot;</span>, <span class="stringliteral">&quot;method&quot;</span>);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3ab0b4d9de253d473a16d4f329d8b50f">uiPupMenuEnd</a>(C, pup);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a25eb30a277e445b59ff62b48f5964a10">00173</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#ad5909575b7ac38bccb2c5070a58199cc">FILE_OT_unpack_all</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00174"></a>00174 {
<a name="l00175"></a>00175     <span class="comment">/* identifiers */</span>
<a name="l00176"></a>00176     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Unpack All&quot;</span>;
<a name="l00177"></a>00177     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_unpack_all&quot;</span>;
<a name="l00178"></a>00178     
<a name="l00179"></a>00179     <span class="comment">/* api callbacks */</span>
<a name="l00180"></a>00180     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a6b2c1c462cce0c22a52609a605cd18e6">unpack_all_exec</a>;
<a name="l00181"></a>00181     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a5956e672dc67f656ee1facf606f59dbf">unpack_all_invoke</a>;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="comment">/* flags */</span>
<a name="l00184"></a>00184     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <span class="comment">/* properties */</span>
<a name="l00187"></a>00187     <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;method&quot;</span>, unpack_all_method_items, <a class="code" href="../../dc/d4d/DNA__packedFile__types_8h.html#a4a7d03c9908f51e4ad80be8c3eed30d3a147d00e91c5dd75ab03f6660668ba985">PF_USE_LOCAL</a>, <span class="stringliteral">&quot;Method&quot;</span>, <span class="stringliteral">&quot;How to unpack&quot;</span>);
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/********************* make paths relative operator *********************/</span>
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a5d4efe057c73dc31c37913c0b002e193">00192</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a5d4efe057c73dc31c37913c0b002e193">make_paths_relative_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (!<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.relbase_valid) {
<a name="l00197"></a>00197         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68aa7428e90bb3916896145e5eb14a7dd7b">RPT_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t set relative paths with an unsaved blend file&quot;</span>);
<a name="l00198"></a>00198         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <a class="code" href="../../d5/dd1/BLI__bpath_8h.html#a4ce9822bc810dfb52e09df5922572989">makeFilesRelative</a>(bmain, bmain-&gt;<a class="code" href="../../d0/dc0/structMain.html#a8cf7ece1c27b22c05a1198b28d42ebdf">name</a>, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203     <span class="comment">/* redraw everything so any changed paths register */</span>
<a name="l00204"></a>00204     <a class="code" href="../../df/db0/wm__event__system_8c.html#a2d4bab7477e1a026061d578f19247457">WM_main_add_notifier</a>(<a class="code" href="../../d4/ddc/WM__types_8h.html#a0dce5c73d06bfc518c4c6b2189df325d">NC_WINDOW</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#aebd15d9eedc4452703c43000b07f2259">00209</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#a9f7d5353080d18287ed95175b2fac04c">FILE_OT_make_paths_relative</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211     <span class="comment">/* identifiers */</span>
<a name="l00212"></a>00212     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Make All Paths Relative&quot;</span>;
<a name="l00213"></a>00213     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_make_paths_relative&quot;</span>;
<a name="l00214"></a>00214     
<a name="l00215"></a>00215     <span class="comment">/* api callbacks */</span>
<a name="l00216"></a>00216     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a5d4efe057c73dc31c37913c0b002e193">make_paths_relative_exec</a>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <span class="comment">/* flags */</span>
<a name="l00219"></a>00219     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">/********************* make paths absolute operator *********************/</span>
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a4b1097b6ee93202ac42ef21d6140dc70">00224</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a4b1097b6ee93202ac42ef21d6140dc70">make_paths_absolute_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     <span class="keywordflow">if</span> (!<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.relbase_valid) {
<a name="l00229"></a>00229         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68aa7428e90bb3916896145e5eb14a7dd7b">RPT_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t set absolute paths with an unsaved blend file&quot;</span>);
<a name="l00230"></a>00230         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <a class="code" href="../../d5/dd1/BLI__bpath_8h.html#adce5b38296a7eb49e502c384950e5aea">makeFilesAbsolute</a>(bmain, bmain-&gt;<a class="code" href="../../d0/dc0/structMain.html#a8cf7ece1c27b22c05a1198b28d42ebdf">name</a>, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="comment">/* redraw everything so any changed paths register */</span>
<a name="l00236"></a>00236     <a class="code" href="../../df/db0/wm__event__system_8c.html#a2d4bab7477e1a026061d578f19247457">WM_main_add_notifier</a>(<a class="code" href="../../d4/ddc/WM__types_8h.html#a0dce5c73d06bfc518c4c6b2189df325d">NC_WINDOW</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a085a699f85386dfc6929970ea4c5f34e">00241</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#af18065f666ad7c4d211865f27ec058e9">FILE_OT_make_paths_absolute</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00242"></a>00242 {
<a name="l00243"></a>00243     <span class="comment">/* identifiers */</span>
<a name="l00244"></a>00244     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Make All Paths Absolute&quot;</span>;
<a name="l00245"></a>00245     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_make_paths_absolute&quot;</span>;
<a name="l00246"></a>00246     
<a name="l00247"></a>00247     <span class="comment">/* api callbacks */</span>
<a name="l00248"></a>00248     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a4b1097b6ee93202ac42ef21d6140dc70">make_paths_absolute_exec</a>;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="comment">/* flags */</span>
<a name="l00251"></a>00251     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="comment">/********************* report missing files operator *********************/</span>
<a name="l00255"></a>00255 
<a name="l00256"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a34baf45375c8333fa821827599c0fc4e">00256</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#a34baf45375c8333fa821827599c0fc4e">report_missing_files_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00257"></a>00257 {
<a name="l00258"></a>00258     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">/* run the missing file check */</span>
<a name="l00261"></a>00261     <a class="code" href="../../d5/dd1/BLI__bpath_8h.html#afd7aecd325646e882a1dbe58963d3f57">checkMissingFiles</a>(bmain, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>);
<a name="l00262"></a>00262     
<a name="l00263"></a>00263     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a636fae362f1580e0bd7b41f797d903be">00266</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#a1f4dd37494e3e064a4f8782adb44de8b">FILE_OT_report_missing_files</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268     <span class="comment">/* identifiers */</span>
<a name="l00269"></a>00269     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Report Missing Files&quot;</span>;
<a name="l00270"></a>00270     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_report_missing_files&quot;</span>;
<a name="l00271"></a>00271     
<a name="l00272"></a>00272     <span class="comment">/* api callbacks */</span>
<a name="l00273"></a>00273     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#a34baf45375c8333fa821827599c0fc4e">report_missing_files_exec</a>;
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="comment">/* flags */</span>
<a name="l00276"></a>00276     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = 0; <span class="comment">/* only reports so no need to undo/register */</span>
<a name="l00277"></a>00277 }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 <span class="comment">/********************* find missing files operator *********************/</span>
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#adf58e4eee6e5db3a3111bebcc6955a93">00281</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#adf58e4eee6e5db3a3111bebcc6955a93">find_missing_files_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00282"></a>00282 {
<a name="l00283"></a>00283     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain = <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00284"></a>00284     <span class="keyword">const</span> <span class="keywordtype">char</span> *searchpath = <a class="code" href="../../d3/d10/rna__access_8c.html#afeb202c69e280217f90b9504ad559876">RNA_string_get_alloc</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;filepath&quot;</span>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
<a name="l00285"></a>00285     <a class="code" href="../../d5/dd1/BLI__bpath_8h.html#a371729d7d489d951e22acfa6a002ce16">findMissingFiles</a>(bmain, searchpath, op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>);
<a name="l00286"></a>00286     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>((<span class="keywordtype">void</span> *)searchpath);
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#aa00fe7f14a97b052b33227905a466eea">00291</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#aa00fe7f14a97b052b33227905a466eea">find_missing_files_invoke</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op, <a class="code" href="../../d5/d6c/structwmEvent.html">wmEvent</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(event))
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293     <span class="comment">/* XXX file open button text &quot;Find Missing Files&quot; */</span>
<a name="l00294"></a>00294     <a class="code" href="../../df/db0/wm__event__system_8c.html#a2e41929a4b0d2175609f19e7a3626a42">WM_event_add_fileselect</a>(C, op); 
<a name="l00295"></a>00295     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a3ae275907ae986c695e88547409d19bb">OPERATOR_RUNNING_MODAL</a>;
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00298"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#aecdc1264e490c29f62b44fd71266aaf6">00298</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#ad31bdbe8f1af25c99e0da5b7920d118b">FILE_OT_find_missing_files</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00299"></a>00299 {
<a name="l00300"></a>00300     <span class="comment">/* identifiers */</span>
<a name="l00301"></a>00301     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Find Missing Files&quot;</span>;
<a name="l00302"></a>00302     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;FILE_OT_find_missing_files&quot;</span>;
<a name="l00303"></a>00303     
<a name="l00304"></a>00304     <span class="comment">/* api callbacks */</span>
<a name="l00305"></a>00305     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#adf58e4eee6e5db3a3111bebcc6955a93">find_missing_files_exec</a>;
<a name="l00306"></a>00306     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#aa00fe7f14a97b052b33227905a466eea">find_missing_files_invoke</a>;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">/* flags */</span>
<a name="l00309"></a>00309     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311     <span class="comment">/* properties */</span>
<a name="l00312"></a>00312     <a class="code" href="../../d6/dae/wm__operators_8c.html#a5fa435f05172819dfaae1f6acf79bab8">WM_operator_properties_filesel</a>(ot, 0, <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#ada7c3cc863dd57483b348dcdf9569b4c">FILE_SPECIAL</a>, <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a95da76b164841451e8aef4b21d3f38a2">FILE_OPENFILE</a>, <a class="code" href="../../d4/d7f/WM__api_8h.html#a615ddace8bd4db6f6afb8e59f5366d97">WM_FILESEL_FILEPATH</a>, <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a21d31fc4a7d23f7ebc977203f7e63571ac853e68e87258d362a5539682d68af18">FILE_DEFAULTDISPLAY</a>);
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 <span class="comment">/********************* report box operator *********************/</span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">/* Hard to decide whether to keep this as an operator, </span>
<a name="l00318"></a>00318 <span class="comment"> * or turn it into a hardcoded ui control feature, </span>
<a name="l00319"></a>00319 <span class="comment"> * handling TIMER events for all regions in interface_handlers.c</span>
<a name="l00320"></a>00320 <span class="comment"> * Not sure how good that is to be accessing UI data from </span>
<a name="l00321"></a>00321 <span class="comment"> * inactive regions, so use this for now. --matt</span>
<a name="l00322"></a>00322 <span class="comment"> */</span>
<a name="l00323"></a>00323 
<a name="l00324"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a029a5c59635da80fb1e4d2ecdff238ac">00324</a> <span class="preprocessor">#define INFO_TIMEOUT        5.0f</span>
<a name="l00325"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#ac4fe44f7e084db0fa78f8069137d1251">00325</a> <span class="preprocessor"></span><span class="preprocessor">#define INFO_COLOR_TIMEOUT  3.0f</span>
<a name="l00326"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#ad58fd51c3e56b5d9555ce48be5cc53bd">00326</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_TIMEOUT       10.0f</span>
<a name="l00327"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#aded3973538b9fbfb1dff8f780d10ff58">00327</a> <span class="preprocessor"></span><span class="preprocessor">#define ERROR_COLOR_TIMEOUT 6.0f</span>
<a name="l00328"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#a267e7217d6ed4c6611e6f81b26482b71">00328</a> <span class="preprocessor"></span><span class="preprocessor">#define COLLAPSE_TIMEOUT    0.25f</span>
<a name="l00329"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#ae73eeab26c481a81ed423d3fb53321a7">00329</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d5d/info__ops_8c.html#ae73eeab26c481a81ed423d3fb53321a7">update_reports_display_invoke</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op), <a class="code" href="../../d5/d6c/structwmEvent.html">wmEvent</a> *event)
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331     <a class="code" href="../../d4/dc3/structwmWindowManager.html">wmWindowManager</a> *wm = <a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C);
<a name="l00332"></a>00332     <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports = <a class="code" href="../../df/d01/BKE__context_8h.html#ac83792b6e00e841cdb896c9c0230bde7">CTX_wm_reports</a>(C);
<a name="l00333"></a>00333     <a class="code" href="../../d2/dd6/structReport.html">Report</a> *report;
<a name="l00334"></a>00334     <a class="code" href="../../d4/d3f/structReportTimerInfo.html">ReportTimerInfo</a> *rti;
<a name="l00335"></a>00335     <span class="keywordtype">float</span> progress = 0.0, color_progress = 0.0;
<a name="l00336"></a>00336     <span class="keywordtype">float</span> neutral_col[3] = {0.35, 0.35, 0.35};
<a name="l00337"></a>00337     <span class="keywordtype">float</span> neutral_grey = 0.6;
<a name="l00338"></a>00338     <span class="keywordtype">float</span> timeout = 0.0, color_timeout = 0.0;
<a name="l00339"></a>00339     <span class="keywordtype">int</span> send_note = 0;
<a name="l00340"></a>00340     
<a name="l00341"></a>00341     <span class="comment">/* escape if not our timer */</span>
<a name="l00342"></a>00342     <span class="keywordflow">if</span> ((reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||
<a name="l00343"></a>00343         (reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a> != event-&gt;<a class="code" href="../../d5/d6c/structwmEvent.html#afe8f2bc4e7e67063e0e2a92b08056c17">customdata</a>) ||
<a name="l00344"></a>00344         ((report = <a class="code" href="../../d2/d40/BKE__report_8h.html#a4cc3a5fb6928f3b6522b39a5ec14d4a7">BKE_reports_last_displayable</a>(reports)) == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">/* may have been deleted */</span>
<a name="l00345"></a>00345         )
<a name="l00346"></a>00346     {
<a name="l00347"></a>00347         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     rti = (<a class="code" href="../../d4/d3f/structReportTimerInfo.html">ReportTimerInfo</a> *)reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a>-&gt;<a class="code" href="../../d9/d33/structwmTimer.html#a7e5850b6474f3948cb59cbd188ce68a6">customdata</a>;
<a name="l00351"></a>00351     
<a name="l00352"></a>00352     timeout = (report-&gt;<a class="code" href="../../d2/dd6/structReport.html#a4781d613a586f7aba1b820e12a5d2131">type</a> &amp; <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a58f46868e4d34e3dfb4711ab0c4917c2">RPT_ERROR_ALL</a>) ? <a class="code" href="../../d8/d5d/info__ops_8c.html#ad58fd51c3e56b5d9555ce48be5cc53bd">ERROR_TIMEOUT</a> : <a class="code" href="../../d8/d5d/info__ops_8c.html#a029a5c59635da80fb1e4d2ecdff238ac">INFO_TIMEOUT</a>;
<a name="l00353"></a>00353     color_timeout = (report-&gt;<a class="code" href="../../d2/dd6/structReport.html#a4781d613a586f7aba1b820e12a5d2131">type</a> &amp; <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a58f46868e4d34e3dfb4711ab0c4917c2">RPT_ERROR_ALL</a>) ? <a class="code" href="../../d8/d5d/info__ops_8c.html#aded3973538b9fbfb1dff8f780d10ff58">ERROR_COLOR_TIMEOUT</a> : <a class="code" href="../../d8/d5d/info__ops_8c.html#ac4fe44f7e084db0fa78f8069137d1251">INFO_COLOR_TIMEOUT</a>;
<a name="l00354"></a>00354     
<a name="l00355"></a>00355     <span class="comment">/* clear the report display after timeout */</span>
<a name="l00356"></a>00356     <span class="keywordflow">if</span> ((<span class="keywordtype">float</span>)reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a>-&gt;<a class="code" href="../../d9/d33/structwmTimer.html#afccd0baaa4b4d59df1529233fba5aa20">duration</a> &gt; timeout) {
<a name="l00357"></a>00357         <a class="code" href="../../d7/d6e/wm__window_8c.html#a1a9f31ba88dd1dd3982b3d8f02de2e75">WM_event_remove_timer</a>(wm, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a>);
<a name="l00358"></a>00358         reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00359"></a>00359         
<a name="l00360"></a>00360         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a1942092916fdc7c089a6d191c71d6f5b">ND_SPACE_INFO</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00361"></a>00361         
<a name="l00362"></a>00362         <span class="keywordflow">return</span> (<a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a> | <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>);
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="keywordflow">if</span> (rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a25a349fd0a86069edf9f14afb4e9cee3">widthfac</a> == 0.0f) {
<a name="l00366"></a>00366         <span class="comment">/* initialize colors based on report type */</span>
<a name="l00367"></a>00367         <span class="keywordflow">if</span> (report-&gt;<a class="code" href="../../d2/dd6/structReport.html#a4781d613a586f7aba1b820e12a5d2131">type</a> &amp; <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a58f46868e4d34e3dfb4711ab0c4917c2">RPT_ERROR_ALL</a>) {
<a name="l00368"></a>00368             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[0] = 1.0;
<a name="l00369"></a>00369             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[1] = 0.2;
<a name="l00370"></a>00370             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[2] = 0.0;
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (report-&gt;<a class="code" href="../../d2/dd6/structReport.html#a4781d613a586f7aba1b820e12a5d2131">type</a> &amp; <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a9d99c8e53dbffbdbdcb72a721495e602">RPT_WARNING_ALL</a>) {
<a name="l00373"></a>00373             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[0] = 1.0;
<a name="l00374"></a>00374             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[1] = 1.0;
<a name="l00375"></a>00375             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[2] = 0.0;
<a name="l00376"></a>00376         }
<a name="l00377"></a>00377         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (report-&gt;<a class="code" href="../../d2/dd6/structReport.html#a4781d613a586f7aba1b820e12a5d2131">type</a> &amp; <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a5f17d98cdbaa09a28a0c944765b8fec0">RPT_INFO_ALL</a>) {
<a name="l00378"></a>00378             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[0] = 0.3;
<a name="l00379"></a>00379             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[1] = 0.45;
<a name="l00380"></a>00380             rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>[2] = 0.7;
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382         rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#ad0d5df787599581cfaffd9ad4a9da967">greyscale</a> = 0.75;
<a name="l00383"></a>00383         rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a25a349fd0a86069edf9f14afb4e9cee3">widthfac</a> = 1.0;
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385     
<a name="l00386"></a>00386     progress = (float)reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a>-&gt;<a class="code" href="../../d9/d33/structwmTimer.html#afccd0baaa4b4d59df1529233fba5aa20">duration</a> / timeout;
<a name="l00387"></a>00387     color_progress = (<span class="keywordtype">float</span>)reports-&gt;<a class="code" href="../../df/df0/structReportList.html#ac65127a29493297881520cb6a06be0fd">reporttimer</a>-&gt;<a class="code" href="../../d9/d33/structwmTimer.html#afccd0baaa4b4d59df1529233fba5aa20">duration</a> / color_timeout;
<a name="l00388"></a>00388     
<a name="l00389"></a>00389     <span class="comment">/* save us from too many draws */</span>
<a name="l00390"></a>00390     <span class="keywordflow">if</span> (color_progress &lt;= 1.0f) {
<a name="l00391"></a>00391         send_note = 1;
<a name="l00392"></a>00392         
<a name="l00393"></a>00393         <span class="comment">/* fade colors out sharply according to progress through fade-out duration */</span>
<a name="l00394"></a>00394         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a1527309f09525ae91ed04692da13ba98">interp_v3_v3v3</a>(rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>, rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a802de3a97b6d2ede1bddd3ec57019700">col</a>, neutral_col, color_progress);
<a name="l00395"></a>00395         rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#ad0d5df787599581cfaffd9ad4a9da967">greyscale</a> = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#ab81894572f3dfe3985161cf8595bbe3a">interpf</a>(neutral_grey, rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#ad0d5df787599581cfaffd9ad4a9da967">greyscale</a>, color_progress);
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="comment">/* collapse report at end of timeout */</span>
<a name="l00399"></a>00399     <span class="keywordflow">if</span> (progress * timeout &gt; timeout - <a class="code" href="../../d8/d5d/info__ops_8c.html#a267e7217d6ed4c6611e6f81b26482b71">COLLAPSE_TIMEOUT</a>) {
<a name="l00400"></a>00400         rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a25a349fd0a86069edf9f14afb4e9cee3">widthfac</a> = (progress * timeout - (timeout - <a class="code" href="../../d8/d5d/info__ops_8c.html#a267e7217d6ed4c6611e6f81b26482b71">COLLAPSE_TIMEOUT</a>)) / <a class="code" href="../../d8/d5d/info__ops_8c.html#a267e7217d6ed4c6611e6f81b26482b71">COLLAPSE_TIMEOUT</a>;
<a name="l00401"></a>00401         rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a25a349fd0a86069edf9f14afb4e9cee3">widthfac</a> = 1.0f - rti-&gt;<a class="code" href="../../d4/d3f/structReportTimerInfo.html#a25a349fd0a86069edf9f14afb4e9cee3">widthfac</a>;
<a name="l00402"></a>00402         send_note = 1;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404     
<a name="l00405"></a>00405     <span class="keywordflow">if</span> (send_note) {
<a name="l00406"></a>00406         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a> | <a class="code" href="../../d4/ddc/WM__types_8h.html#a1942092916fdc7c089a6d191c71d6f5b">ND_SPACE_INFO</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408     
<a name="l00409"></a>00409     <span class="keywordflow">return</span> (<a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a> | <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>);
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 
<a name="l00412"></a><a class="code" href="../../d8/d5d/info__ops_8c.html#af5e8edbef739382188700c9d03e848c6">00412</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d21/info__intern_8h.html#a22817cb362c72376e85efc0ca90f46af">INFO_OT_reports_display_update</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414     <span class="comment">/* identifiers */</span>
<a name="l00415"></a>00415     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Update Reports Display&quot;</span>;
<a name="l00416"></a>00416     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;INFO_OT_reports_display_update&quot;</span>;
<a name="l00417"></a>00417     
<a name="l00418"></a>00418     <span class="comment">/* api callbacks */</span>
<a name="l00419"></a>00419     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d8/d5d/info__ops_8c.html#ae73eeab26c481a81ed423d3fb53321a7">update_reports_display_invoke</a>;
<a name="l00420"></a>00420     
<a name="l00421"></a>00421     <span class="comment">/* flags */</span>
<a name="l00422"></a>00422     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = 0;
<a name="l00423"></a>00423     
<a name="l00424"></a>00424     <span class="comment">/* properties */</span>
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment">/* report operators */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:24 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
