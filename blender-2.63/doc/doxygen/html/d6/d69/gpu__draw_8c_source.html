<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: gpu_draw.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">gpu_draw.c</div>  </div>
</div>
<div class="contents">
<a href="../../d6/d69/gpu__draw_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2005 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * The Original Code is: all of this file.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * Contributor(s): Brecht Van Lommel.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;GL/glew.h&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d16/DNA__lamp__types_8h.html">DNA_lamp_types.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../de/db2/DNA__material__types_8h.html">DNA_material_types.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html">DNA_meshdata_types.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df0/DNA__modifier__types_8h.html">DNA_modifier_types.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d27/DNA__node__types_8h.html">DNA_node_types.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd9/DNA__object__types_8h.html" title="Object is a sort of wrapper for general info.">DNA_object_types.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/db3/DNA__scene__types_8h.html">DNA_scene_types.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d8b/DNA__smoke__types_8h.html">DNA_smoke_types.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d06/DNA__view3d__types_8h.html">DNA_view3d_types.h</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d49/IMB__imbuf_8h.html">IMB_imbuf.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html" title="Contains defines and structs used throughout the imbuf module.">IMB_imbuf_types.h</a>&quot;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d20/BKE__bmfont_8h.html">BKE_bmfont.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/BKE__global_8h.html">BKE_global.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d77/BKE__image_8h.html">BKE_image.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d0f/BKE__material_8h.html" title="General operations, lookup, etc. for materials.">BKE_material.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d91/BKE__node_8h.html">BKE_node.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dac/BKE__object_8h.html" title="General operations, lookup, etc. for blender objects.">BKE_object.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d53/BKE__scene_8h.html">BKE_scene.h</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d7f/BKE__DerivedMesh_8h.html">BKE_DerivedMesh.h</a>&quot;</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dbb/BLI__threads_8h.html">BLI_threads.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/dca/GPU__buffers_8h.html">GPU_buffers.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/df0/GPU__draw_8h.html">GPU_draw.h</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="../../da/deb/GPU__extensions_8h.html">GPU_extensions.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d68/GPU__material_8h.html">GPU_material.h</a>&quot;</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d83/smoke__API_8h.html">smoke_API.h</a>&quot;</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keyword">extern</span> <a class="code" href="../../d2/d10/structMaterial.html">Material</a> <a class="code" href="../../de/d87/material_8c.html#a685518354e9af381cf9881b703cad017">defmaterial</a>; <span class="comment">/* from material.c */</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">/* These are some obscure rendering functions shared between the</span>
<a name="l00078"></a>00078 <span class="comment"> * game engine and the blender, in this module to avoid duplicaten</span>
<a name="l00079"></a>00079 <span class="comment"> * and abstract them away from the rest a bit */</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">/* Text Rendering */</span>
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">00083</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">gpu_mcol</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ucol)
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085     <span class="comment">/* mcol order is swapped */</span>
<a name="l00086"></a>00086     <span class="keywordtype">char</span> *cp= (<span class="keywordtype">char</span> *)&amp;ucol;
<a name="l00087"></a>00087     glColor3ub(cp[3], cp[2], cp[1]);
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#af1a34286e11d25b5c4156ca007274dde">00090</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a021009abc5832d0159a8774ff4aacc72">GPU_render_text</a>(<a class="code" href="../../da/d7f/structMTFace.html">MTFace</a> *tface, <span class="keywordtype">int</span> mode,
<a name="l00091"></a>00091     <span class="keyword">const</span> <span class="keywordtype">char</span> *textstr, <span class="keywordtype">int</span> textlen, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *col,
<a name="l00092"></a>00092     <span class="keywordtype">float</span> *v1, <span class="keywordtype">float</span> *v2, <span class="keywordtype">float</span> *v3, <span class="keywordtype">float</span> *v4, <span class="keywordtype">int</span> glattrib)
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094     <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="../../de/db2/DNA__material__types_8h.html#a8bbde62ac9bb3474c3b0e713430ce248">GEMAT_TEXT</a>) &amp;&amp; (textlen&gt;0) &amp;&amp; tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a94b886f25499ad61afed79c6362451ef">tpage</a>) {
<a name="l00095"></a>00095         <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a>* ima = (<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a>*)tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a94b886f25499ad61afed79c6362451ef">tpage</a>;
<a name="l00096"></a>00096         <span class="keywordtype">int</span> index, character;
<a name="l00097"></a>00097         <span class="keywordtype">float</span> centerx, centery, sizex, sizey, transx, transy, movex, movey, advance;
<a name="l00098"></a>00098         <span class="keywordtype">float</span> advance_tab;
<a name="l00099"></a>00099         
<a name="l00100"></a>00100         <span class="comment">/* multiline */</span>
<a name="l00101"></a>00101         <span class="keywordtype">float</span> line_start= 0.0f, line_height;
<a name="l00102"></a>00102         
<a name="l00103"></a>00103         <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> (v4)
<a name="l00104"></a>00104             line_height= <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a1c0ced76b86284f7e93f9b48cf41b665">MAX4</a>(v1[1], v2[1], v3[1], v4[2]) - <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a4d4b0f047377c6f1fcad38649103df05">MIN4</a>(v1[1], v2[1], v3[1], v4[2]);
<a name="l00105"></a>00105         <span class="keywordflow">else</span>
<a name="l00106"></a>00106             line_height= <a class="code" href="../../dd/d46/IMAGE_8h.html#a87a519a4901f827aca98fa11601a739c">MAX3</a>(v1[1], v2[1], v3[1]) - <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ac3da33d7f6d37d12b507020daa54e774">MIN3</a>(v1[1], v2[1], v3[1]);
<a name="l00107"></a>00107         line_height *= 1.2f; <span class="comment">/* could be an option? */</span>
<a name="l00108"></a>00108         <span class="comment">/* end multiline */</span>
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         
<a name="l00111"></a>00111         <span class="comment">/* color has been set */</span>
<a name="l00112"></a>00112         <span class="keywordflow">if</span> (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a11d7f70a4874a3d2ff3a8a2bb3a8cd38">mode</a> &amp; <a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html#a2587eef472b292cd424cb48e1936655f">TF_OBCOL</a>)
<a name="l00113"></a>00113             col= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00114"></a>00114         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!col)
<a name="l00115"></a>00115             glColor3f(1.0f, 1.0f, 1.0f);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         glPushMatrix();
<a name="l00118"></a>00118         
<a name="l00119"></a>00119         <span class="comment">/* get the tab width */</span>
<a name="l00120"></a>00120         <a class="code" href="../../d5/d20/BKE__bmfont_8h.html#a070b35d46f5fb8f1dd125d9bbeef50dd">matrixGlyph</a>((<a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a73febaffccd786657631095065b9e25b">ibufs</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>, <span class="charliteral">&#39; &#39;</span>, &amp; centerx, &amp;centery,
<a name="l00121"></a>00121             &amp;sizex, &amp;sizey, &amp;transx, &amp;transy, &amp;movex, &amp;movey, &amp;advance);
<a name="l00122"></a>00122         
<a name="l00123"></a>00123         advance_tab= advance * 4; <span class="comment">/* tab width could also be an option */</span>
<a name="l00124"></a>00124         
<a name="l00125"></a>00125         
<a name="l00126"></a>00126         <span class="keywordflow">for</span> (index = 0; index &lt; textlen; index++) {
<a name="l00127"></a>00127             <span class="keywordtype">float</span> uv[4][2];
<a name="l00128"></a>00128 
<a name="l00129"></a>00129             <span class="comment">// lets calculate offset stuff</span>
<a name="l00130"></a>00130             character = textstr[index];
<a name="l00131"></a>00131             
<a name="l00132"></a>00132             <span class="keywordflow">if</span> (character==<span class="charliteral">&#39;\n&#39;</span>) {
<a name="l00133"></a>00133                 glTranslatef(line_start, -line_height, 0.0);
<a name="l00134"></a>00134                 line_start = 0.0f;
<a name="l00135"></a>00135                 <span class="keywordflow">continue</span>;
<a name="l00136"></a>00136             }
<a name="l00137"></a>00137             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (character==<span class="charliteral">&#39;\t&#39;</span>) {
<a name="l00138"></a>00138                 glTranslatef(advance_tab, 0.0, 0.0);
<a name="l00139"></a>00139                 line_start -= advance_tab; <span class="comment">/* so we can go back to the start of the line */</span>
<a name="l00140"></a>00140                 <span class="keywordflow">continue</span>;
<a name="l00141"></a>00141                 
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143             
<a name="l00144"></a>00144             <span class="comment">// space starts at offset 1</span>
<a name="l00145"></a>00145             <span class="comment">// character = character - &#39; &#39; + 1;</span>
<a name="l00146"></a>00146             <a class="code" href="../../d5/d20/BKE__bmfont_8h.html#a070b35d46f5fb8f1dd125d9bbeef50dd">matrixGlyph</a>((<a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a73febaffccd786657631095065b9e25b">ibufs</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>, character, &amp; centerx, &amp;centery,
<a name="l00147"></a>00147                 &amp;sizex, &amp;sizey, &amp;transx, &amp;transy, &amp;movex, &amp;movey, &amp;advance);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149             uv[0][0] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[0][0] - centerx) * sizex + transx;
<a name="l00150"></a>00150             uv[0][1] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[0][1] - centery) * sizey + transy;
<a name="l00151"></a>00151             uv[1][0] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[1][0] - centerx) * sizex + transx;
<a name="l00152"></a>00152             uv[1][1] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[1][1] - centery) * sizey + transy;
<a name="l00153"></a>00153             uv[2][0] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[2][0] - centerx) * sizex + transx;
<a name="l00154"></a>00154             uv[2][1] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[2][1] - centery) * sizey + transy;
<a name="l00155"></a>00155             
<a name="l00156"></a>00156             glBegin(GL_POLYGON);
<a name="l00157"></a>00157             <span class="keywordflow">if</span> (glattrib &gt;= 0) glVertexAttrib2fvARB(glattrib, uv[0]);
<a name="l00158"></a>00158             <span class="keywordflow">else</span> glTexCoord2fv(uv[0]);
<a name="l00159"></a>00159             <span class="keywordflow">if</span> (col) <a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">gpu_mcol</a>(col[0]);
<a name="l00160"></a>00160             glVertex3f(sizex * v1[0] + movex, sizey * v1[1] + movey, v1[2]);
<a name="l00161"></a>00161             
<a name="l00162"></a>00162             <span class="keywordflow">if</span> (glattrib &gt;= 0) glVertexAttrib2fvARB(glattrib, uv[1]);
<a name="l00163"></a>00163             <span class="keywordflow">else</span> glTexCoord2fv(uv[1]);
<a name="l00164"></a>00164             <span class="keywordflow">if</span> (col) <a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">gpu_mcol</a>(col[1]);
<a name="l00165"></a>00165             glVertex3f(sizex * v2[0] + movex, sizey * v2[1] + movey, v2[2]);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167             <span class="keywordflow">if</span> (glattrib &gt;= 0) glVertexAttrib2fvARB(glattrib, uv[2]);
<a name="l00168"></a>00168             <span class="keywordflow">else</span> glTexCoord2fv(uv[2]);
<a name="l00169"></a>00169             <span class="keywordflow">if</span> (col) <a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">gpu_mcol</a>(col[2]);
<a name="l00170"></a>00170             glVertex3f(sizex * v3[0] + movex, sizey * v3[1] + movey, v3[2]);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             <span class="keywordflow">if</span> (v4) {
<a name="l00173"></a>00173                 uv[3][0] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[3][0] - centerx) * sizex + transx;
<a name="l00174"></a>00174                 uv[3][1] = (tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a8008df692b4527be183b85665cdde582">uv</a>[3][1] - centery) * sizey + transy;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176                 <span class="keywordflow">if</span> (glattrib &gt;= 0) glVertexAttrib2fvARB(glattrib, uv[3]);
<a name="l00177"></a>00177                 <span class="keywordflow">else</span> glTexCoord2fv(uv[3]);
<a name="l00178"></a>00178                 <span class="keywordflow">if</span> (col) <a class="code" href="../../d6/d69/gpu__draw_8c.html#a300a7d83b2544b9b018679a8aa4af580">gpu_mcol</a>(col[3]);
<a name="l00179"></a>00179                 glVertex3f(sizex * v4[0] + movex, sizey * v4[1] + movey, v4[2]);
<a name="l00180"></a>00180             }
<a name="l00181"></a>00181             glEnd();
<a name="l00182"></a>00182 
<a name="l00183"></a>00183             glTranslatef(advance, 0.0, 0.0);
<a name="l00184"></a>00184             line_start -= advance; <span class="comment">/* so we can go back to the start of the line */</span>
<a name="l00185"></a>00185         }
<a name="l00186"></a>00186         glPopMatrix();
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/* Checking powers of two for images since opengl 1.x requires it */</span>
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a622b7a561ce292e7244b1572e5146713">00192</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a622b7a561ce292e7244b1572e5146713">is_pow2_limit</a>(<span class="keywordtype">int</span> num)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194     <span class="comment">/* take texture clamping into account */</span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="comment">/* XXX: texturepaint not global! */</span>
<a name="l00197"></a>00197 <span class="preprocessor">#if 0</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.f &amp; G_TEXTUREPAINT)
<a name="l00199"></a>00199         <span class="keywordflow">return</span> 1;*/
<a name="l00200"></a>00200 <span class="preprocessor">#endif</span>
<a name="l00201"></a>00201 <span class="preprocessor"></span>
<a name="l00202"></a>00202     <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glreslimit != 0 &amp;&amp; num &gt; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glreslimit)
<a name="l00203"></a>00203         <span class="keywordflow">return</span> 0;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#abea4dc66f77e310e22c7c5126b06bd83">is_power_of_2_i</a>(num);
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a326ad96f3ab17bbcdbab85cf69031ab3">00208</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a326ad96f3ab17bbcdbab85cf69031ab3">smaller_pow2_limit</a>(<span class="keywordtype">int</span> num)
<a name="l00209"></a>00209 {
<a name="l00210"></a>00210     <span class="comment">/* XXX: texturepaint not global! */</span>
<a name="l00211"></a>00211 <span class="preprocessor">#if 0</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.f &amp; G_TEXTUREPAINT)
<a name="l00213"></a>00213         <span class="keywordflow">return</span> 1;*/
<a name="l00214"></a>00214 <span class="preprocessor">#endif</span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>
<a name="l00216"></a>00216     <span class="comment">/* take texture clamping into account */</span>
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glreslimit != 0 &amp;&amp; num &gt; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glreslimit)
<a name="l00218"></a>00218         <span class="keywordflow">return</span> <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glreslimit;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a29b7db479bc0c65ef4ef33b7f3559eab">power_of_2_min_i</a>(num);
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="comment">/* Current OpenGL state caching for GPU_set_tpage */</span>
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="../../d0/d82/structGPUTextureState.html">00225</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d82/structGPUTextureState.html">GPUTextureState</a> {
<a name="l00226"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">00226</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#a735dbc31917b3e16ecbd981056838293">curtile</a>, <a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>;
<a name="l00227"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">00227</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a>, <a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>;
<a name="l00228"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">00228</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a>, <a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a>;
<a name="l00229"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">00229</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a>, <a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a>;
<a name="l00230"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#acc20f747d48d12cfdd31693914c82827">00230</a>     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *<a class="code" href="../../d0/d82/structGPUTextureState.html#acc20f747d48d12cfdd31693914c82827">ima</a>, *<a class="code" href="../../d0/d82/structGPUTextureState.html#a5ed8a5edb212174177ed31e6945b613b">curima</a>;
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">00232</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a>, <a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">linearmipmap</a>;
<a name="l00233"></a>00233 
<a name="l00234"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#ab562764d6592f3155e1556bda03f2cf3">00234</a>     <span class="keywordtype">int</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#ab562764d6592f3155e1556bda03f2cf3">alphablend</a>;
<a name="l00235"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#a1efd6509c5f3fed175bd8702f72f4d83">00235</a>     <span class="keywordtype">float</span> <a class="code" href="../../d0/d82/structGPUTextureState.html#a1efd6509c5f3fed175bd8702f72f4d83">anisotropic</a>;
<a name="l00236"></a><a class="code" href="../../d0/d82/structGPUTextureState.html#ac7c739cb8ee791b00bbe09db878575b9">00236</a>     <a class="code" href="../../da/d7f/structMTFace.html">MTFace</a> *<a class="code" href="../../d0/d82/structGPUTextureState.html#ac7c739cb8ee791b00bbe09db878575b9">lasttface</a>;
<a name="l00237"></a>00237 } <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a> = {0, 0, 0, 0, 0, 0, 0, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1, 0, -1, 1.f, NULL};
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 <span class="comment">/* Mipmap settings */</span>
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a81c308abf3ae9ec17f38cf7793bdb222">00241</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a81c308abf3ae9ec17f38cf7793bdb222">GPU_set_mipmap</a>(<span class="keywordtype">int</span> mipmap)
<a name="l00242"></a>00242 {
<a name="l00243"></a>00243     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a> != (mipmap != 0)) {
<a name="l00244"></a>00244         <a class="code" href="../../d3/df0/GPU__draw_8h.html#a644948e3c02370cf0a216e368a054030">GPU_free_images</a>();
<a name="l00245"></a>00245         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a> = mipmap != 0;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 }
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ad7aa052262a4ffb2311c1b330e05e4aa">00249</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#ad7aa052262a4ffb2311c1b330e05e4aa">GPU_set_linear_mipmap</a>(<span class="keywordtype">int</span> linear)
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">linearmipmap</a> != (linear != 0)) {
<a name="l00252"></a>00252         <a class="code" href="../../d3/df0/GPU__draw_8h.html#a644948e3c02370cf0a216e368a054030">GPU_free_images</a>();
<a name="l00253"></a>00253         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">linearmipmap</a> = linear != 0;
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 }
<a name="l00256"></a>00256 
<a name="l00257"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ac5e18f4a68f7b796e83710e9ba1e095c">00257</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ac5e18f4a68f7b796e83710e9ba1e095c">gpu_get_mipmap</a>(<span class="keywordtype">void</span>)
<a name="l00258"></a>00258 {
<a name="l00259"></a>00259     <span class="keywordflow">return</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a>;
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">00262</a> <span class="keyword">static</span> GLenum <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(<span class="keywordtype">int</span> mag)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264     <span class="comment">/* linearmipmap is off by default *when mipmapping is off,</span>
<a name="l00265"></a>00265 <span class="comment">     * use unfiltered display */</span>
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (mag) {
<a name="l00267"></a>00267         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">linearmipmap</a> || <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a>)
<a name="l00268"></a>00268             <span class="keywordflow">return</span> GL_LINEAR;
<a name="l00269"></a>00269         <span class="keywordflow">else</span>
<a name="l00270"></a>00270             <span class="keywordflow">return</span> GL_NEAREST;
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272     <span class="keywordflow">else</span> {
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a7d4b1ba5bb472e7f4f42ed1bfc8e05db">linearmipmap</a>)
<a name="l00274"></a>00274             <span class="keywordflow">return</span> GL_LINEAR_MIPMAP_LINEAR;
<a name="l00275"></a>00275         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a>)
<a name="l00276"></a>00276             <span class="keywordflow">return</span> GL_LINEAR_MIPMAP_NEAREST;
<a name="l00277"></a>00277         <span class="keywordflow">else</span>
<a name="l00278"></a>00278             <span class="keywordflow">return</span> GL_NEAREST;
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="comment">/* Anisotropic filtering settings */</span>
<a name="l00283"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#acae263fa0aab6bba79c62e05f15aa2b4">00283</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#acae263fa0aab6bba79c62e05f15aa2b4">GPU_set_anisotropic</a>(<span class="keywordtype">float</span> value)
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1efd6509c5f3fed175bd8702f72f4d83">anisotropic</a> != value) {
<a name="l00286"></a>00286         <a class="code" href="../../d3/df0/GPU__draw_8h.html#a644948e3c02370cf0a216e368a054030">GPU_free_images</a>();
<a name="l00287"></a>00287 
<a name="l00288"></a>00288         <span class="comment">/* Clamp value to the maximum value the graphics card supports */</span>
<a name="l00289"></a>00289         <span class="keywordflow">if</span> (value &gt; GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT)
<a name="l00290"></a>00290             value = GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1efd6509c5f3fed175bd8702f72f4d83">anisotropic</a> = value;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294 }
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ab758b5fb3b2d38b52ea37ab99639db16">00296</a> <span class="keywordtype">float</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#ab758b5fb3b2d38b52ea37ab99639db16">GPU_get_anisotropic</a>(<span class="keywordtype">void</span>)
<a name="l00297"></a>00297 {
<a name="l00298"></a>00298     <span class="keywordflow">return</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1efd6509c5f3fed175bd8702f72f4d83">anisotropic</a>;
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 <span class="comment">/* Set OpenGL state for an MTFace */</span>
<a name="l00302"></a>00302 
<a name="l00303"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a45cdbece013fb354cb032d13eedba31b">00303</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a45cdbece013fb354cb032d13eedba31b">gpu_make_repbind</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima)
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305     <a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *ibuf;
<a name="l00306"></a>00306     
<a name="l00307"></a>00307     ibuf = <a class="code" href="../../d2/d77/BKE__image_8h.html#a82acf4ed18d05029e80437a655baf008">BKE_image_get_ibuf</a>(ima, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00308"></a>00308     <span class="keywordflow">if</span> (ibuf==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00309"></a>00309         <span class="keywordflow">return</span>;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>) {
<a name="l00312"></a>00312         glDeleteTextures(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>, (GLuint *)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>);
<a name="l00313"></a>00313         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>);
<a name="l00314"></a>00314         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00315"></a>00315         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>&gt;1)
<a name="l00321"></a>00321         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>, <span class="stringliteral">&quot;repbind&quot;</span>);
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00324"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a0aa1caeffb543aedf21730409a5a2a03">00324</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a0aa1caeffb543aedf21730409a5a2a03">gpu_clear_tpage</a>(<span class="keywordtype">void</span>)
<a name="l00325"></a>00325 {
<a name="l00326"></a>00326     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ac7c739cb8ee791b00bbe09db878575b9">lasttface</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00327"></a>00327         <span class="keywordflow">return</span>;
<a name="l00328"></a>00328     
<a name="l00329"></a>00329     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ac7c739cb8ee791b00bbe09db878575b9">lasttface</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00330"></a>00330     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a735dbc31917b3e16ecbd981056838293">curtile</a>= 0;
<a name="l00331"></a>00331     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a5ed8a5edb212174177ed31e6945b613b">curima</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00332"></a>00332     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a>!=0) {
<a name="l00333"></a>00333         glMatrixMode(GL_TEXTURE);
<a name="l00334"></a>00334         glLoadIdentity();
<a name="l00335"></a>00335         glMatrixMode(GL_MODELVIEW);
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a>= 0;
<a name="l00338"></a>00338     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a>=0;
<a name="l00339"></a>00339     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a>=0;
<a name="l00340"></a>00340     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ab562764d6592f3155e1556bda03f2cf3">alphablend</a>= -1;
<a name="l00341"></a>00341     
<a name="l00342"></a>00342     glDisable(GL_BLEND);
<a name="l00343"></a>00343     glDisable(GL_TEXTURE_2D);
<a name="l00344"></a>00344     glDisable(GL_TEXTURE_GEN_S);
<a name="l00345"></a>00345     glDisable(GL_TEXTURE_GEN_T);
<a name="l00346"></a>00346     glDisable(GL_ALPHA_TEST);
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a7d5020b60bbd9ca4448388bf85372d5d">00349</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a7d5020b60bbd9ca4448388bf85372d5d">gpu_set_alpha_blend</a>(<a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> alphablend)
<a name="l00350"></a>00350 {
<a name="l00351"></a>00351     <span class="keywordflow">if</span> (alphablend == <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>) {
<a name="l00352"></a>00352         glDisable(GL_BLEND);
<a name="l00353"></a>00353         glDisable(GL_ALPHA_TEST);
<a name="l00354"></a>00354         glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alphablend==<a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea39318f81ae768d8a6119e7965a11bd50">GPU_BLEND_ADD</a>) {
<a name="l00357"></a>00357         glEnable(GL_BLEND);
<a name="l00358"></a>00358         glBlendFunc(GL_ONE, GL_ONE);
<a name="l00359"></a>00359         glDisable(GL_ALPHA_TEST);
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alphablend, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea7185b7eeb7273b8f871714372dd6ffdb">GPU_BLEND_ALPHA</a>, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea3fc4531861fe81d9943cc6e915fe898d">GPU_BLEND_ALPHA_SORT</a>)) {
<a name="l00362"></a>00362         glEnable(GL_BLEND);
<a name="l00363"></a>00363         glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
<a name="l00364"></a>00364         
<a name="l00365"></a>00365         <span class="comment">/* if U.glalphaclip == 1.0, some cards go bonkers...</span>
<a name="l00366"></a>00366 <span class="comment">         * turn off alpha test in this case */</span>
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         <span class="comment">/* added after 2.45 to clip alpha */</span>
<a name="l00369"></a>00369         <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glalphaclip == 1.0f) {
<a name="l00370"></a>00370             glDisable(GL_ALPHA_TEST);
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372         <span class="keywordflow">else</span> {
<a name="l00373"></a>00373             glEnable(GL_ALPHA_TEST);
<a name="l00374"></a>00374             glAlphaFunc(GL_GREATER, <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.glalphaclip);
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alphablend==<a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea1d5dbb0fde2986491cd75cf4c81fd6a8">GPU_BLEND_CLIP</a>) {
<a name="l00378"></a>00378         glDisable(GL_BLEND); 
<a name="l00379"></a>00379         glEnable(GL_ALPHA_TEST);
<a name="l00380"></a>00380         glAlphaFunc(GL_GREATER, 0.5f);
<a name="l00381"></a>00381     }
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a9e2b809bcbeadde05fa8a2f89f958ba0">00384</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a9e2b809bcbeadde05fa8a2f89f958ba0">gpu_verify_alpha_blend</a>(<span class="keywordtype">int</span> alphablend)
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386     <span class="comment">/* verify alpha blending modes */</span>
<a name="l00387"></a>00387     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ab562764d6592f3155e1556bda03f2cf3">alphablend</a> == alphablend)
<a name="l00388"></a>00388         <span class="keywordflow">return</span>;
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a7d5020b60bbd9ca4448388bf85372d5d">gpu_set_alpha_blend</a>(alphablend);
<a name="l00391"></a>00391     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ab562764d6592f3155e1556bda03f2cf3">alphablend</a>= alphablend;
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a27ba026f3fb2bd4ce91adabd95cbb0c6">00394</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a27ba026f3fb2bd4ce91adabd95cbb0c6">gpu_verify_reflection</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396     <span class="keywordflow">if</span> (ima &amp;&amp; (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab84c3d099caf0d6ec44c266899839f63">flag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a4824ccdbc52f037697247fb86ac01d83">IMA_REFLECT</a>)) {
<a name="l00397"></a>00397         <span class="comment">/* enable reflection mapping */</span>
<a name="l00398"></a>00398         glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_SPHERE_MAP);
<a name="l00399"></a>00399         glTexGeni(GL_T, GL_TEXTURE_GEN_MODE, GL_SPHERE_MAP);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401         glEnable(GL_TEXTURE_GEN_S);
<a name="l00402"></a>00402         glEnable(GL_TEXTURE_GEN_T);
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404     <span class="keywordflow">else</span> {
<a name="l00405"></a>00405         <span class="comment">/* disable reflection mapping */</span>
<a name="l00406"></a>00406         glDisable(GL_TEXTURE_GEN_S);
<a name="l00407"></a>00407         glDisable(GL_TEXTURE_GEN_T);
<a name="l00408"></a>00408     }
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a360aee22fc92d19b884abfbe917a917f">00411</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a875e74b52637de876a3a2cae1f8be2fa">GPU_verify_image</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima, <a class="code" href="../../de/d31/structImageUser.html">ImageUser</a> *iuser, <span class="keywordtype">int</span> tftile, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/mesh__navmesh_8c.html#a5ca4cf7d126d1b70e95de936dbf5079d">compare</a>, <span class="keywordtype">int</span> mipmap)
<a name="l00412"></a>00412 {
<a name="l00413"></a>00413     <a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *ibuf = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00414"></a>00414     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *bind = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00415"></a>00415     <span class="keywordtype">int</span> rectw, recth, tpx=0, tpy=0, y;
<a name="l00416"></a>00416     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *tilerect= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *scalerect= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *rect= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00417"></a>00417     <span class="keywordtype">float</span> *ftilerect= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *fscalerect = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *frect = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00418"></a>00418     <span class="keywordtype">float</span> *srgb_frect = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00419"></a>00419     <span class="keywordtype">short</span> texwindx, texwindy, texwinsx, texwinsy;
<a name="l00420"></a>00420     <span class="comment">/* flag to determine whether high resolution format is used */</span>
<a name="l00421"></a>00421     <span class="keywordtype">int</span> use_high_bit_depth = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, do_color_management = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="comment">/* initialize tile mode and number of repeats */</span>
<a name="l00424"></a>00424     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#acc20f747d48d12cfdd31693914c82827">ima</a> = ima;
<a name="l00425"></a>00425     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>= (ima &amp;&amp; (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; (<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a9a13ef5571ee2ce5372ec6c4b818fcf9">IMA_TILES</a>|<a class="code" href="../../d2/d94/DNA__image__types_8h.html#abd42404c20d96377fc0015973cad2638">IMA_TWINANIM</a>)));
<a name="l00426"></a>00426     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a> = 0;
<a name="l00427"></a>00427     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a> = 0;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="comment">/* setting current tile according to frame */</span>
<a name="l00430"></a>00430     <span class="keywordflow">if</span> (ima &amp;&amp; (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#abd42404c20d96377fc0015973cad2638">IMA_TWINANIM</a>))
<a name="l00431"></a>00431         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a>;
<a name="l00432"></a>00432     <span class="keywordflow">else</span>
<a name="l00433"></a>00433         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>= tftile;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a> = <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(0, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>);
<a name="l00436"></a>00436 
<a name="l00437"></a>00437     <span class="keywordflow">if</span> (ima) {
<a name="l00438"></a>00438         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a> = ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>;
<a name="l00439"></a>00439         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a> = ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>;
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="comment">/* if same image &amp; tile, we&#39;re done */</span>
<a name="l00443"></a>00443     <span class="keywordflow">if</span> (compare &amp;&amp; ima == <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a5ed8a5edb212174177ed31e6945b613b">curima</a> &amp;&amp; <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a735dbc31917b3e16ecbd981056838293">curtile</a> == <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a> &amp;&amp;
<a name="l00444"></a>00444        <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a> == <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a> &amp;&amp; <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a> == <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a> &amp;&amp;
<a name="l00445"></a>00445        <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a> == <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a>)
<a name="l00446"></a>00446         <span class="keywordflow">return</span> (ima != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="comment">/* if tiling mode or repeat changed, change texture matrix to fit */</span>
<a name="l00449"></a>00449     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>!=<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a> || <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a>!=<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a> ||
<a name="l00450"></a>00450        <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a> != <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a>) {
<a name="l00451"></a>00451 
<a name="l00452"></a>00452         glMatrixMode(GL_TEXTURE);
<a name="l00453"></a>00453         glLoadIdentity();
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         <span class="keywordflow">if</span> (ima &amp;&amp; (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a9a13ef5571ee2ce5372ec6c4b818fcf9">IMA_TILES</a>))
<a name="l00456"></a>00456             glScalef(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>, ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>, 1.0);
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         glMatrixMode(GL_MODELVIEW);
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <span class="comment">/* check if we have a valid image */</span>
<a name="l00462"></a>00462     <span class="keywordflow">if</span> (ima==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af6746e8e3008f22431dae19d0c2fb914">ok</a>==0)
<a name="l00463"></a>00463         <span class="keywordflow">return</span> 0;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <span class="comment">/* check if we have a valid image buffer */</span>
<a name="l00466"></a>00466     ibuf= <a class="code" href="../../d2/d77/BKE__image_8h.html#a82acf4ed18d05029e80437a655baf008">BKE_image_get_ibuf</a>(ima, iuser);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (ibuf==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00469"></a>00469         <span class="keywordflow">return</span> 0;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471     <span class="keywordflow">if</span> (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>) {
<a name="l00472"></a>00472         <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.use_16bit_textures) {
<a name="l00473"></a>00473             <span class="comment">/* use high precision textures. This is relatively harmless because OpenGL gives us</span>
<a name="l00474"></a>00474 <span class="comment">             * a high precision format only if it is available */</span>
<a name="l00475"></a>00475             use_high_bit_depth = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477 
<a name="l00478"></a>00478         <span class="comment">/* TODO unneeded when float images are correctly treated as linear always */</span>
<a name="l00479"></a>00479         <span class="keywordflow">if</span> (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a0aa104fffb1090d64f06da549681e81c">profile</a> == <a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html#ac9d7d77e52c7153b987c86cccfb8ad4c">IB_PROFILE_LINEAR_RGB</a>)
<a name="l00480"></a>00480             do_color_management = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         <span class="keywordflow">if</span> (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ade8b2f05559e57840af8d3657817f8c8">rect</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00483"></a>00483             <a class="code" href="../../db/d49/IMB__imbuf_8h.html#a3af34b4b5c6b91ddf5b872fcb9e2d66c">IMB_rect_from_float</a>(ibuf);
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="comment">/* currently, tpage refresh is used by ima sequences */</span>
<a name="l00487"></a>00487     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#ad8a2bf777fd3d318388ae52b3080df68">IMA_TPAGE_REFRESH</a>) {
<a name="l00488"></a>00488         <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00489"></a>00489         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#ad8a2bf777fd3d318388ae52b3080df68">IMA_TPAGE_REFRESH</a>;
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491     
<a name="l00492"></a>00492     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>) {
<a name="l00493"></a>00493         <span class="comment">/* tiled mode */</span>
<a name="l00494"></a>00494         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code" href="../../d6/d69/gpu__draw_8c.html#a45cdbece013fb354cb032d13eedba31b">gpu_make_repbind</a>(ima);
<a name="l00495"></a>00495         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>&gt;=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>) <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>= 0;
<a name="l00496"></a>00496         
<a name="l00497"></a>00497         <span class="comment">/* this happens when you change repeat buttons */</span>
<a name="l00498"></a>00498         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>) bind= &amp;ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>[<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>];
<a name="l00499"></a>00499         <span class="keywordflow">else</span> bind= &amp;ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>;
<a name="l00500"></a>00500         
<a name="l00501"></a>00501         <span class="keywordflow">if</span> (*bind==0) {
<a name="l00502"></a>00502             
<a name="l00503"></a>00503             texwindx= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>/ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>;
<a name="l00504"></a>00504             texwindy= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>/ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>;
<a name="l00505"></a>00505             
<a name="l00506"></a>00506             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>&gt;=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>)
<a name="l00507"></a>00507                 <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>-1;
<a name="l00508"></a>00508     
<a name="l00509"></a>00509             texwinsy= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a> / ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>;
<a name="l00510"></a>00510             texwinsx= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a> - texwinsy*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>;
<a name="l00511"></a>00511     
<a name="l00512"></a>00512             texwinsx*= texwindx;
<a name="l00513"></a>00513             texwinsy*= texwindy;
<a name="l00514"></a>00514     
<a name="l00515"></a>00515             tpx= texwindx;
<a name="l00516"></a>00516             tpy= texwindy;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518             <span class="keywordflow">if</span> (use_high_bit_depth) {
<a name="l00519"></a>00519                 <span class="keywordflow">if</span> (do_color_management) {
<a name="l00520"></a>00520                     srgb_frect = <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*4, <span class="stringliteral">&quot;floar_buf_col_cor&quot;</span>);
<a name="l00521"></a>00521                     <a class="code" href="../../db/d49/IMB__imbuf_8h.html#a1a2369dfb92a8c27a43acd37b6305eaf">IMB_buffer_float_from_float</a>(srgb_frect, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>,
<a name="l00522"></a>00522                         ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a6be7accc39275e1b7c48794361e024dc">channels</a>, <a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html#a6c00aa05d6342575a50fa702d739952c">IB_PROFILE_SRGB</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a0aa104fffb1090d64f06da549681e81c">profile</a>, 0,
<a name="l00523"></a>00523                         ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>);
<a name="l00524"></a>00524                     <span class="comment">/* clamp buffer colours to 1.0 to avoid artifacts due to glu for hdr images */</span>
<a name="l00525"></a>00525                     <a class="code" href="../../db/d49/IMB__imbuf_8h.html#aa4ae318442b68a48043ec91e2af17354">IMB_buffer_float_clamp</a>(srgb_frect, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>);
<a name="l00526"></a>00526                     frect= srgb_frect + texwinsy*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a> + texwinsx;
<a name="l00527"></a>00527                 }
<a name="l00528"></a>00528                 <span class="keywordflow">else</span>
<a name="l00529"></a>00529                     frect= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a> + texwinsy*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a> + texwinsx;
<a name="l00530"></a>00530             }
<a name="l00531"></a>00531             <span class="keywordflow">else</span>
<a name="l00532"></a>00532                 rect= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ade8b2f05559e57840af8d3657817f8c8">rect</a> + texwinsy*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a> + texwinsx;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <span class="keywordflow">else</span> {
<a name="l00536"></a>00536         <span class="comment">/* regular image mode */</span>
<a name="l00537"></a>00537         bind= &amp;ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="keywordflow">if</span> (*bind==0) {
<a name="l00540"></a>00540             tpx= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>;
<a name="l00541"></a>00541             tpy= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>;
<a name="l00542"></a>00542             rect= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ade8b2f05559e57840af8d3657817f8c8">rect</a>;
<a name="l00543"></a>00543             <span class="keywordflow">if</span> (use_high_bit_depth) {
<a name="l00544"></a>00544                 <span class="keywordflow">if</span> (do_color_management) {
<a name="l00545"></a>00545                     frect = srgb_frect = <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>*<span class="keyword">sizeof</span>(*srgb_frect)*4, <span class="stringliteral">&quot;floar_buf_col_cor&quot;</span>);
<a name="l00546"></a>00546                     <a class="code" href="../../db/d49/IMB__imbuf_8h.html#a1a2369dfb92a8c27a43acd37b6305eaf">IMB_buffer_float_from_float</a>(srgb_frect, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>,
<a name="l00547"></a>00547                             ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a6be7accc39275e1b7c48794361e024dc">channels</a>, <a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html#a6c00aa05d6342575a50fa702d739952c">IB_PROFILE_SRGB</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a0aa104fffb1090d64f06da549681e81c">profile</a>, 0,
<a name="l00548"></a>00548                             ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>);
<a name="l00549"></a>00549                     <span class="comment">/* clamp buffer colours to 1.0 to avoid artifacts due to glu for hdr images */</span>
<a name="l00550"></a>00550                     <a class="code" href="../../db/d49/IMB__imbuf_8h.html#aa4ae318442b68a48043ec91e2af17354">IMB_buffer_float_clamp</a>(srgb_frect, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>);
<a name="l00551"></a>00551                 }
<a name="l00552"></a>00552                 <span class="keywordflow">else</span>
<a name="l00553"></a>00553                     frect= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>;
<a name="l00554"></a>00554             }
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     <span class="keywordflow">if</span> (*bind != 0) {
<a name="l00559"></a>00559         <span class="comment">/* enable opengl drawing with textures */</span>
<a name="l00560"></a>00560         glBindTexture(GL_TEXTURE_2D, *bind);
<a name="l00561"></a>00561         <span class="keywordflow">return</span> *bind;
<a name="l00562"></a>00562     }
<a name="l00563"></a>00563 
<a name="l00564"></a>00564     rectw = tpx;
<a name="l00565"></a>00565     recth = tpy;
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="comment">/* for tiles, copy only part of image into buffer */</span>
<a name="l00568"></a>00568     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>) {
<a name="l00569"></a>00569         <span class="keywordflow">if</span> (use_high_bit_depth) {
<a name="l00570"></a>00570             <span class="keywordtype">float</span> *frectrow, *ftilerectrow;
<a name="l00571"></a>00571 
<a name="l00572"></a>00572             ftilerect= <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(rectw*recth*<span class="keyword">sizeof</span>(*ftilerect), <span class="stringliteral">&quot;tilerect&quot;</span>);
<a name="l00573"></a>00573 
<a name="l00574"></a>00574             <span class="keywordflow">for</span> (y=0; y&lt;recth; y++) {
<a name="l00575"></a>00575                 frectrow= &amp;frect[y*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>];
<a name="l00576"></a>00576                 ftilerectrow= &amp;ftilerect[y*rectw];
<a name="l00577"></a>00577 
<a name="l00578"></a>00578                 memcpy(ftilerectrow, frectrow, tpx*<span class="keyword">sizeof</span>(*frectrow));
<a name="l00579"></a>00579             }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581             frect= ftilerect;
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583         <span class="keywordflow">else</span> {
<a name="l00584"></a>00584             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rectrow, *tilerectrow;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586             tilerect= <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(rectw*recth*<span class="keyword">sizeof</span>(*tilerect), <span class="stringliteral">&quot;tilerect&quot;</span>);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="keywordflow">for</span> (y=0; y&lt;recth; y++) {
<a name="l00589"></a>00589                 rectrow= &amp;rect[y*ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>];
<a name="l00590"></a>00590                 tilerectrow= &amp;tilerect[y*rectw];
<a name="l00591"></a>00591 
<a name="l00592"></a>00592                 memcpy(tilerectrow, rectrow, tpx*<span class="keyword">sizeof</span>(*rectrow));
<a name="l00593"></a>00593             }
<a name="l00594"></a>00594             
<a name="l00595"></a>00595             rect= tilerect;
<a name="l00596"></a>00596         }
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="comment">/* scale if not a power of two. this is not strictly necessary for newer </span>
<a name="l00600"></a>00600 <span class="comment">     * GPUs (OpenGL version &gt;= 2.0) since they support non-power-of-two-textures */</span>
<a name="l00601"></a>00601     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d69/gpu__draw_8c.html#a622b7a561ce292e7244b1572e5146713">is_pow2_limit</a>(rectw) || !<a class="code" href="../../d6/d69/gpu__draw_8c.html#a622b7a561ce292e7244b1572e5146713">is_pow2_limit</a>(recth)) {
<a name="l00602"></a>00602         rectw= <a class="code" href="../../d6/d69/gpu__draw_8c.html#a326ad96f3ab17bbcdbab85cf69031ab3">smaller_pow2_limit</a>(rectw);
<a name="l00603"></a>00603         recth= <a class="code" href="../../d6/d69/gpu__draw_8c.html#a326ad96f3ab17bbcdbab85cf69031ab3">smaller_pow2_limit</a>(recth);
<a name="l00604"></a>00604         
<a name="l00605"></a>00605         <span class="keywordflow">if</span> (use_high_bit_depth) {
<a name="l00606"></a>00606             fscalerect= <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(rectw*recth*<span class="keyword">sizeof</span>(*fscalerect)*4, <span class="stringliteral">&quot;fscalerect&quot;</span>);
<a name="l00607"></a>00607             gluScaleImage(GL_RGBA, tpx, tpy, GL_FLOAT, frect, rectw, recth, GL_FLOAT, fscalerect);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609             frect = fscalerect;
<a name="l00610"></a>00610         }
<a name="l00611"></a>00611         <span class="keywordflow">else</span> {
<a name="l00612"></a>00612             scalerect= <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(rectw*recth*<span class="keyword">sizeof</span>(*scalerect), <span class="stringliteral">&quot;scalerect&quot;</span>);
<a name="l00613"></a>00613             gluScaleImage(GL_RGBA, tpx, tpy, GL_UNSIGNED_BYTE, rect, rectw, recth, GL_UNSIGNED_BYTE, scalerect);
<a name="l00614"></a>00614 
<a name="l00615"></a>00615             rect= scalerect;
<a name="l00616"></a>00616         }
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619     <span class="comment">/* create image */</span>
<a name="l00620"></a>00620     glGenTextures(1, (GLuint *)bind);
<a name="l00621"></a>00621     glBindTexture( GL_TEXTURE_2D, *bind);
<a name="l00622"></a>00622 
<a name="l00623"></a>00623     <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ac5e18f4a68f7b796e83710e9ba1e095c">gpu_get_mipmap</a>() &amp;&amp; mipmap)) {
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (use_high_bit_depth)
<a name="l00625"></a>00625             glTexImage2D(GL_TEXTURE_2D, 0,  GL_RGBA16,  rectw, recth, 0, GL_RGBA, GL_FLOAT, frect);
<a name="l00626"></a>00626         <span class="keywordflow">else</span>
<a name="l00627"></a>00627             glTexImage2D(GL_TEXTURE_2D, 0,  GL_RGBA,  rectw, recth, 0, GL_RGBA, GL_UNSIGNED_BYTE, rect);
<a name="l00628"></a>00628         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
<a name="l00629"></a>00629         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(1));
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631     <span class="keywordflow">else</span> {
<a name="l00632"></a>00632         <span class="keywordflow">if</span> (use_high_bit_depth)
<a name="l00633"></a>00633             gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGBA16, rectw, recth, GL_RGBA, GL_FLOAT, frect);
<a name="l00634"></a>00634         <span class="keywordflow">else</span>
<a name="l00635"></a>00635             gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGBA, rectw, recth, GL_RGBA, GL_UNSIGNED_BYTE, rect);
<a name="l00636"></a>00636         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(0));
<a name="l00637"></a>00637         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(1));
<a name="l00638"></a>00638 
<a name="l00639"></a>00639         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> |= <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00640"></a>00640     }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     <span class="keywordflow">if</span> (GLEW_EXT_texture_filter_anisotropic)
<a name="l00643"></a>00643         glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAX_ANISOTROPY_EXT, <a class="code" href="../../d3/df0/GPU__draw_8h.html#ab758b5fb3b2d38b52ea37ab99639db16">GPU_get_anisotropic</a>());
<a name="l00644"></a>00644     <span class="comment">/* set to modulate with vertex color */</span>
<a name="l00645"></a>00645     glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
<a name="l00646"></a>00646         
<a name="l00647"></a>00647     <span class="comment">/* clean up */</span>
<a name="l00648"></a>00648     <span class="keywordflow">if</span> (tilerect)
<a name="l00649"></a>00649         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(tilerect);
<a name="l00650"></a>00650     <span class="keywordflow">if</span> (ftilerect)
<a name="l00651"></a>00651         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ftilerect);
<a name="l00652"></a>00652     <span class="keywordflow">if</span> (scalerect)
<a name="l00653"></a>00653         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(scalerect);
<a name="l00654"></a>00654     <span class="keywordflow">if</span> (fscalerect)
<a name="l00655"></a>00655         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(fscalerect);
<a name="l00656"></a>00656     <span class="keywordflow">if</span> (srgb_frect)
<a name="l00657"></a>00657         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(srgb_frect);
<a name="l00658"></a>00658     <span class="keywordflow">return</span> *bind;
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a9f1d0f9fd16bf8cb3eb0970b9f2594a4">00661</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a9f1d0f9fd16bf8cb3eb0970b9f2594a4">gpu_verify_repeat</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima)
<a name="l00662"></a>00662 {
<a name="l00663"></a>00663     <span class="comment">/* set either clamp or repeat in X/Y */</span>
<a name="l00664"></a>00664     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a65a2ab2d575be924c225dc2a8f2acf8c">IMA_CLAMP_U</a>)
<a name="l00665"></a>00665         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, <a class="code" href="../../db/d04/glutil_8c.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a>);
<a name="l00666"></a>00666     <span class="keywordflow">else</span>
<a name="l00667"></a>00667         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
<a name="l00668"></a>00668 
<a name="l00669"></a>00669     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#ab959f7879d4da8113fa214d94c303e73">IMA_CLAMP_V</a>)
<a name="l00670"></a>00670         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, <a class="code" href="../../db/d04/glutil_8c.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a>);
<a name="l00671"></a>00671     <span class="keywordflow">else</span>
<a name="l00672"></a>00672         glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a66a2097bb65ec4d9a6c93f80ca4c3fdb">00675</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a6eb498dab9d137ba07fd03d44602b591">GPU_set_tpage</a>(<a class="code" href="../../da/d7f/structMTFace.html">MTFace</a> *tface, <span class="keywordtype">int</span> mipmap, <span class="keywordtype">int</span> alphablend)
<a name="l00676"></a>00676 {
<a name="l00677"></a>00677     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima;
<a name="l00678"></a>00678     
<a name="l00679"></a>00679     <span class="comment">/* check if we need to clear the state */</span>
<a name="l00680"></a>00680     <span class="keywordflow">if</span> (tface==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00681"></a>00681         <a class="code" href="../../d6/d69/gpu__draw_8c.html#a0aa1caeffb543aedf21730409a5a2a03">gpu_clear_tpage</a>();
<a name="l00682"></a>00682         <span class="keywordflow">return</span> 0;
<a name="l00683"></a>00683     }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685     ima= tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a94b886f25499ad61afed79c6362451ef">tpage</a>;
<a name="l00686"></a>00686     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ac7c739cb8ee791b00bbe09db878575b9">lasttface</a>= tface;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a9e2b809bcbeadde05fa8a2f89f958ba0">gpu_verify_alpha_blend</a>(alphablend);
<a name="l00689"></a>00689     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a27ba026f3fb2bd4ce91adabd95cbb0c6">gpu_verify_reflection</a>(ima);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     <span class="keywordflow">if</span> (<a class="code" href="../../d3/df0/GPU__draw_8h.html#a875e74b52637de876a3a2cae1f8be2fa">GPU_verify_image</a>(ima, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, tface-&gt;<a class="code" href="../../da/d7f/structMTFace.html#a5ff693b49db8a10f21d3e9f9dd99538a">tile</a>, 1, mipmap)) {
<a name="l00692"></a>00692         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a735dbc31917b3e16ecbd981056838293">curtile</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a88ec884ee4fbc12579b55afd2ed6e7cc">tile</a>;
<a name="l00693"></a>00693         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a5ed8a5edb212174177ed31e6945b613b">curima</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#acc20f747d48d12cfdd31693914c82827">ima</a>;
<a name="l00694"></a>00694         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>;
<a name="l00695"></a>00695         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a> = <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a2a986e5fd8ec88d0624a7f8974e6bfb9">tileXRep</a>;
<a name="l00696"></a>00696         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a> = <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a25b0d301101c311536af87c989d07e02">tileYRep</a>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698         glEnable(GL_TEXTURE_2D);
<a name="l00699"></a>00699     }
<a name="l00700"></a>00700     <span class="keywordflow">else</span> {
<a name="l00701"></a>00701         glDisable(GL_TEXTURE_2D);
<a name="l00702"></a>00702         
<a name="l00703"></a>00703         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a735dbc31917b3e16ecbd981056838293">curtile</a>= 0;
<a name="l00704"></a>00704         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a5ed8a5edb212174177ed31e6945b613b">curima</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00705"></a>00705         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#ad58642c81edc4207228875631452b098">curtilemode</a>= 0;
<a name="l00706"></a>00706         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a38896b170a193d810415ce6e5cf01688">curtileXRep</a> = 0;
<a name="l00707"></a>00707         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a6c0f0d00df5d596dd5b9878d537b2f75">curtileYRep</a> = 0;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709         <span class="keywordflow">return</span> 0;
<a name="l00710"></a>00710     }
<a name="l00711"></a>00711     
<a name="l00712"></a>00712     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a9f1d0f9fd16bf8cb3eb0970b9f2594a4">gpu_verify_repeat</a>(ima);
<a name="l00713"></a>00713     
<a name="l00714"></a>00714     <span class="comment">/* Did this get lost in the image recode? */</span>
<a name="l00715"></a>00715     <span class="comment">/* tag_image_time(ima);*/</span>
<a name="l00716"></a>00716 
<a name="l00717"></a>00717     <span class="keywordflow">return</span> 1;
<a name="l00718"></a>00718 }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720 <span class="comment">/* these two functions are called on entering and exiting texture paint mode,</span>
<a name="l00721"></a>00721 <span class="comment"> * temporary disabling/enabling mipmapping on all images for quick texture</span>
<a name="l00722"></a>00722 <span class="comment"> * updates with glTexSubImage2D. images that didn&#39;t change don&#39;t have to be</span>
<a name="l00723"></a>00723 <span class="comment"> * re-uploaded to OpenGL */</span>
<a name="l00724"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a37eb8215f7291004ac4cc5ba98ea44c2">00724</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a37eb8215f7291004ac4cc5ba98ea44c2">GPU_paint_set_mipmap</a>(<span class="keywordtype">int</span> mipmap)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a>* ima;
<a name="l00727"></a>00727     
<a name="l00728"></a>00728     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a351651f31564dba616b04c78afedcaa0">domipmap</a>)
<a name="l00729"></a>00729         <span class="keywordflow">return</span>;
<a name="l00730"></a>00730 
<a name="l00731"></a>00731     <span class="keywordflow">if</span> (mipmap) {
<a name="l00732"></a>00732         <span class="keywordflow">for</span> (ima=<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;image.first; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>) {
<a name="l00733"></a>00733             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>) {
<a name="l00734"></a>00734                 <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>) {
<a name="l00735"></a>00735                     glBindTexture(GL_TEXTURE_2D, ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>);
<a name="l00736"></a>00736                     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(0));
<a name="l00737"></a>00737                     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(1));
<a name="l00738"></a>00738                 }
<a name="l00739"></a>00739                 <span class="keywordflow">else</span>
<a name="l00740"></a>00740                     <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00741"></a>00741             }
<a name="l00742"></a>00742             <span class="keywordflow">else</span>
<a name="l00743"></a>00743                 ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00744"></a>00744         }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746     }
<a name="l00747"></a>00747     <span class="keywordflow">else</span> {
<a name="l00748"></a>00748         <span class="keywordflow">for</span> (ima=<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;image.first; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>) {
<a name="l00749"></a>00749             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>) {
<a name="l00750"></a>00750                 glBindTexture(GL_TEXTURE_2D, ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>);
<a name="l00751"></a>00751                 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
<a name="l00752"></a>00752                 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, <a class="code" href="../../d6/d69/gpu__draw_8c.html#aed5f03406e679724ff4aef74959b8058">gpu_get_mipmap_filter</a>(1));
<a name="l00753"></a>00753             }
<a name="l00754"></a>00754             <span class="keywordflow">else</span>
<a name="l00755"></a>00755                 ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757     }
<a name="l00758"></a>00758 }
<a name="l00759"></a>00759 
<a name="l00760"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a17905f51155cfb6b04310df3b37e2e3c">00760</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a3f794257bd3da59116c32923acd83caf">GPU_paint_update_image</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> mipmap)
<a name="l00761"></a>00761 {
<a name="l00762"></a>00762     <a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *ibuf;
<a name="l00763"></a>00763     
<a name="l00764"></a>00764     ibuf = <a class="code" href="../../d2/d77/BKE__image_8h.html#a82acf4ed18d05029e80437a655baf008">BKE_image_get_ibuf</a>(ima, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00765"></a>00765     
<a name="l00766"></a>00766     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a> || (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ac5e18f4a68f7b796e83710e9ba1e095c">gpu_get_mipmap</a>() &amp;&amp; mipmap) || !ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a> || !ibuf ||
<a name="l00767"></a>00767         (!<a class="code" href="../../dd/d06/BLI__math__base_8h.html#abea4dc66f77e310e22c7c5126b06bd83">is_power_of_2_i</a>(ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>) || !<a class="code" href="../../dd/d06/BLI__math__base_8h.html#abea4dc66f77e310e22c7c5126b06bd83">is_power_of_2_i</a>(ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>)) ||
<a name="l00768"></a>00768         (w == 0) || (h == 0)) {
<a name="l00769"></a>00769         <span class="comment">/* these cases require full reload still */</span>
<a name="l00770"></a>00770         <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00771"></a>00771     }
<a name="l00772"></a>00772     <span class="keywordflow">else</span> {
<a name="l00773"></a>00773         <span class="comment">/* for the special case, we can do a partial update</span>
<a name="l00774"></a>00774 <span class="comment">         * which is much quicker for painting */</span>
<a name="l00775"></a>00775         GLint row_length, skip_pixels, skip_rows;
<a name="l00776"></a>00776 
<a name="l00777"></a>00777         glGetIntegerv(GL_UNPACK_ROW_LENGTH, &amp;row_length);
<a name="l00778"></a>00778         glGetIntegerv(GL_UNPACK_SKIP_PIXELS, &amp;skip_pixels);
<a name="l00779"></a>00779         glGetIntegerv(GL_UNPACK_SKIP_ROWS, &amp;skip_rows);
<a name="l00780"></a>00780 
<a name="l00781"></a>00781         <span class="comment">/* if color correction is needed, we must update the part that needs updating. */</span>
<a name="l00782"></a>00782         <span class="keywordflow">if</span> (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a> &amp;&amp; (!<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.use_16bit_textures || (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a0aa104fffb1090d64f06da549681e81c">profile</a> == <a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html#ac9d7d77e52c7153b987c86cccfb8ad4c">IB_PROFILE_LINEAR_RGB</a>))) {
<a name="l00783"></a>00783             <span class="keywordtype">float</span> *buffer = <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(w*h*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)*4, <span class="stringliteral">&quot;temp_texpaint_float_buf&quot;</span>);
<a name="l00784"></a>00784             <a class="code" href="../../db/d49/IMB__imbuf_8h.html#a2f74be0b6d4ec21162a003c92962298f">IMB_partial_rect_from_float</a>(ibuf, buffer, x, y, w, h);
<a name="l00785"></a>00785 
<a name="l00786"></a>00786             glBindTexture(GL_TEXTURE_2D, ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>);
<a name="l00787"></a>00787             glTexSubImage2D(GL_TEXTURE_2D, 0, x, y, w, h, GL_RGBA,
<a name="l00788"></a>00788                     GL_FLOAT, buffer);
<a name="l00789"></a>00789 
<a name="l00790"></a>00790             <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(buffer);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>)
<a name="l00793"></a>00793                 ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795             <span class="keywordflow">return</span>;
<a name="l00796"></a>00796         }
<a name="l00797"></a>00797         
<a name="l00798"></a>00798         glBindTexture(GL_TEXTURE_2D, ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>);
<a name="l00799"></a>00799 
<a name="l00800"></a>00800         glPixelStorei(GL_UNPACK_ROW_LENGTH, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>);
<a name="l00801"></a>00801         glPixelStorei(GL_UNPACK_SKIP_PIXELS, x);
<a name="l00802"></a>00802         glPixelStorei(GL_UNPACK_SKIP_ROWS, y);
<a name="l00803"></a>00803 
<a name="l00804"></a>00804         <span class="keywordflow">if</span> (ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>)
<a name="l00805"></a>00805             glTexSubImage2D(GL_TEXTURE_2D, 0, x, y, w, h, GL_RGBA,
<a name="l00806"></a>00806                 GL_FLOAT, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a45bb91c70233262497998fcada3b752e">rect_float</a>);
<a name="l00807"></a>00807         <span class="keywordflow">else</span>
<a name="l00808"></a>00808             glTexSubImage2D(GL_TEXTURE_2D, 0, x, y, w, h, GL_RGBA,
<a name="l00809"></a>00809                 GL_UNSIGNED_BYTE, ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ade8b2f05559e57840af8d3657817f8c8">rect</a>);
<a name="l00810"></a>00810 
<a name="l00811"></a>00811         glPixelStorei(GL_UNPACK_ROW_LENGTH, row_length);
<a name="l00812"></a>00812         glPixelStorei(GL_UNPACK_SKIP_PIXELS, skip_pixels);
<a name="l00813"></a>00813         glPixelStorei(GL_UNPACK_SKIP_ROWS, skip_rows);
<a name="l00814"></a>00814 
<a name="l00815"></a>00815         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>)
<a name="l00816"></a>00816             ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00817"></a>00817     }
<a name="l00818"></a>00818 }
<a name="l00819"></a>00819 
<a name="l00820"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a1a9e1a69e835293318513b054b5ea658">00820</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a1a9e1a69e835293318513b054b5ea658">GPU_update_images_framechange</a>(<span class="keywordtype">void</span>)
<a name="l00821"></a>00821 {
<a name="l00822"></a>00822     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima;
<a name="l00823"></a>00823     
<a name="l00824"></a>00824     <span class="keywordflow">for</span> (ima=<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;image.first; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>) {
<a name="l00825"></a>00825         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#abd42404c20d96377fc0015973cad2638">IMA_TWINANIM</a>) {
<a name="l00826"></a>00826             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a> &gt;= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>)
<a name="l00827"></a>00827                 ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>-1;
<a name="l00828"></a>00828         
<a name="l00829"></a>00829             <span class="comment">/* check: is bindcode not in the array? free. (to do) */</span>
<a name="l00830"></a>00830             
<a name="l00831"></a>00831             ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a>++;
<a name="l00832"></a>00832             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a> &gt; ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>)
<a name="l00833"></a>00833                 ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab607dd55780a8807e173bfc0a067d496">twsta</a>;
<a name="l00834"></a>00834         }
<a name="l00835"></a>00835     }
<a name="l00836"></a>00836 }
<a name="l00837"></a>00837 
<a name="l00838"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a7e695e66a16c43fafba7b99d27fb4b59">00838</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#abf50a327a24d0fbd2bc7dcade75ef9e1">GPU_update_image_time</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima, <span class="keywordtype">double</span> time)
<a name="l00839"></a>00839 {
<a name="l00840"></a>00840     <span class="keywordtype">int</span> inc = 0;
<a name="l00841"></a>00841     <span class="keywordtype">float</span>   <a class="code" href="../../d0/dbc/namespaceKDL.html#a0227d72a9cfff5e6065944ebb04f9e77">diff</a>;
<a name="l00842"></a>00842     <span class="keywordtype">int</span> newframe;
<a name="l00843"></a>00843 
<a name="l00844"></a>00844     <span class="keywordflow">if</span> (!ima)
<a name="l00845"></a>00845         <span class="keywordflow">return</span> 0;
<a name="l00846"></a>00846 
<a name="l00847"></a>00847     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a>&lt;0)
<a name="l00848"></a>00848         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a> = 0;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a> &gt; (<span class="keywordtype">float</span>)time)
<a name="l00851"></a>00851         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a>=(float)time;
<a name="l00852"></a>00852 
<a name="l00853"></a>00853     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp; <a class="code" href="../../d2/d94/DNA__image__types_8h.html#abd42404c20d96377fc0015973cad2638">IMA_TWINANIM</a>) {
<a name="l00854"></a>00854         <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a> &gt;= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>) ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>= ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4a8434eea71145fbb4de56f4b65e201d">xrep</a>*ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a2e13fd1505d81eadcb27ba03f90797cc">yrep</a>-1;
<a name="l00855"></a>00855         
<a name="l00856"></a>00856         <span class="comment">/* check: is the bindcode not in the array? Then free. (still to do) */</span>
<a name="l00857"></a>00857         
<a name="l00858"></a>00858         diff = (float)((<span class="keywordtype">float</span>)time - ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a>);
<a name="l00859"></a>00859         inc = (int)(diff*(<span class="keywordtype">float</span>)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4d2f39810177923c60e6e96ef06924f7">animspeed</a>);
<a name="l00860"></a>00860 
<a name="l00861"></a>00861         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a03bf6b6f1aa294c5d7820bc763087199">lastupdate</a>+=((float)inc/(<span class="keywordtype">float</span>)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a4d2f39810177923c60e6e96ef06924f7">animspeed</a>);
<a name="l00862"></a>00862 
<a name="l00863"></a>00863         newframe = ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a>+inc;
<a name="l00864"></a>00864 
<a name="l00865"></a>00865         <span class="keywordflow">if</span> (newframe &gt; (<span class="keywordtype">int</span>)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>) {
<a name="l00866"></a>00866             <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>-ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab607dd55780a8807e173bfc0a067d496">twsta</a> != 0)
<a name="l00867"></a>00867                 newframe = (int)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab607dd55780a8807e173bfc0a067d496">twsta</a>-1 + (newframe-ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>)%(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a331db1d26e60cc16298484dbe2fd6a46">twend</a>-ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab607dd55780a8807e173bfc0a067d496">twsta</a>);
<a name="l00868"></a>00868             <span class="keywordflow">else</span>
<a name="l00869"></a>00869                 newframe = ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ab607dd55780a8807e173bfc0a067d496">twsta</a>;
<a name="l00870"></a>00870         }
<a name="l00871"></a>00871 
<a name="l00872"></a>00872         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#ad280b774d74fee58d15c0deec0da36af">lastframe</a> = newframe;
<a name="l00873"></a>00873     }
<a name="l00874"></a>00874 
<a name="l00875"></a>00875     <span class="keywordflow">return</span> inc;
<a name="l00876"></a>00876 }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878 
<a name="l00879"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ade8fc1b6cf25002d2c58808df526be34">00879</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#afea6911533467883c82f6a508dc37a41">GPU_free_smoke</a>(<a class="code" href="../../d5/d03/structSmokeModifierData.html">SmokeModifierData</a> *smd)
<a name="l00880"></a>00880 {
<a name="l00881"></a>00881     <span class="keywordflow">if</span> (smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a43b5e848c1b44a089bd6d4461b0d2b1f">type</a> &amp; <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a88bed02ad1eb599ef628931fc9ab7973">MOD_SMOKE_TYPE_DOMAIN</a> &amp;&amp; smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>) {
<a name="l00882"></a>00882         <span class="keywordflow">if</span> (smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a>)
<a name="l00883"></a>00883             <a class="code" href="../../da/deb/GPU__extensions_8h.html#a8cc9f70c1a7a2e576ae7dd101aa566ba">GPU_texture_free</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a>);
<a name="l00884"></a>00884         smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886         <span class="keywordflow">if</span> (smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a4b6918c3240e92a1c7cc25fd044e4f36">tex_shadow</a>)
<a name="l00887"></a>00887             <a class="code" href="../../da/deb/GPU__extensions_8h.html#a8cc9f70c1a7a2e576ae7dd101aa566ba">GPU_texture_free</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a4b6918c3240e92a1c7cc25fd044e4f36">tex_shadow</a>);
<a name="l00888"></a>00888         smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a4b6918c3240e92a1c7cc25fd044e4f36">tex_shadow</a> = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00889"></a>00889     }
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a936de7169563ac393363b8c348ab1753">00892</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a792cedff09f4bce4a62800e0537986ce">GPU_create_smoke</a>(<a class="code" href="../../d5/d03/structSmokeModifierData.html">SmokeModifierData</a> *smd, <span class="keywordtype">int</span> highres)
<a name="l00893"></a>00893 {
<a name="l00894"></a>00894 <span class="preprocessor">#ifdef WITH_SMOKE</span>
<a name="l00895"></a>00895 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a43b5e848c1b44a089bd6d4461b0d2b1f">type</a> &amp; <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a88bed02ad1eb599ef628931fc9ab7973">MOD_SMOKE_TYPE_DOMAIN</a> &amp;&amp; !smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a> &amp;&amp; !highres)
<a name="l00896"></a>00896         smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a> = <a class="code" href="../../da/deb/GPU__extensions_8h.html#ab912a24d81db6d7d4ee5102a5697c327">GPU_texture_create_3D</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[0], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[1], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[2], <a class="code" href="../../dc/d83/smoke__API_8h.html#aed5cd30cbab2f971b17acaf0f29035ea">smoke_get_density</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a2243482d9f65b8cb4f1018f8092a73b2">fluid</a>));
<a name="l00897"></a>00897     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a43b5e848c1b44a089bd6d4461b0d2b1f">type</a> &amp; <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a88bed02ad1eb599ef628931fc9ab7973">MOD_SMOKE_TYPE_DOMAIN</a> &amp;&amp; !smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a> &amp;&amp; highres)
<a name="l00898"></a>00898         smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a> = <a class="code" href="../../da/deb/GPU__extensions_8h.html#ab912a24d81db6d7d4ee5102a5697c327">GPU_texture_create_3D</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#ad19b7f8c910667704c2706a0c5443ef0">res_wt</a>[0], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#ad19b7f8c910667704c2706a0c5443ef0">res_wt</a>[1], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#ad19b7f8c910667704c2706a0c5443ef0">res_wt</a>[2], <a class="code" href="../../dc/d83/smoke__API_8h.html#a4eb184e4084d1a171eed0baaa565c997">smoke_turbulence_get_density</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a6b4254083936838e368963db2bd1c41d">wt</a>));
<a name="l00899"></a>00899 
<a name="l00900"></a>00900     smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a4b6918c3240e92a1c7cc25fd044e4f36">tex_shadow</a> = <a class="code" href="../../da/deb/GPU__extensions_8h.html#ab912a24d81db6d7d4ee5102a5697c327">GPU_texture_create_3D</a>(smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[0], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[1], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a8b75df097b3493a0b15c32e2e0df6faa">res</a>[2], smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#aac9e66a5f2eacde79c5c8ac3419c1836">shadow</a>);
<a name="l00901"></a>00901 <span class="preprocessor">#else // WITH_SMOKE</span>
<a name="l00902"></a>00902 <span class="preprocessor"></span>    (void)highres;
<a name="l00903"></a>00903     smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a3005abce710fed5dc020c86e94f0a4da">tex</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00904"></a>00904     smd-&gt;<a class="code" href="../../d5/d03/structSmokeModifierData.html#a691a7d81e9cd652cba5a0e756ac4656c">domain</a>-&gt;<a class="code" href="../../df/df0/structSmokeDomainSettings.html#a4b6918c3240e92a1c7cc25fd044e4f36">tex_shadow</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00905"></a>00905 <span class="preprocessor">#endif // WITH_SMOKE</span>
<a name="l00906"></a>00906 <span class="preprocessor"></span>}
<a name="l00907"></a>00907 
<a name="l00908"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#abe3d7e04a2c300550ac3ad0a016d8381">00908</a> <span class="keyword">static</span> <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> <a class="code" href="../../d6/d69/gpu__draw_8c.html#abe3d7e04a2c300550ac3ad0a016d8381">image_free_queue</a> = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l00909"></a>00909 
<a name="l00910"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a4ca537b626d00c3ba6f1b76477bfc34f">00910</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#a4ca537b626d00c3ba6f1b76477bfc34f">gpu_queue_image_for_free</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima)
<a name="l00911"></a>00911 {
<a name="l00912"></a>00912     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *cpy = <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(ima);
<a name="l00913"></a>00913 
<a name="l00914"></a>00914     <a class="code" href="../../df/dbb/BLI__threads_8h.html#aeb7fa826429971a6eb6074249ad39a0b">BLI_lock_thread</a>(<a class="code" href="../../df/dbb/BLI__threads_8h.html#a45b8cdea2a3018aa88e1455810139ade">LOCK_OPENGL</a>);
<a name="l00915"></a>00915     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;image_free_queue, cpy);
<a name="l00916"></a>00916     <a class="code" href="../../df/dbb/BLI__threads_8h.html#add77b383686cdf9514286b56e3c7939c">BLI_unlock_thread</a>(<a class="code" href="../../df/dbb/BLI__threads_8h.html#a45b8cdea2a3018aa88e1455810139ade">LOCK_OPENGL</a>);
<a name="l00917"></a>00917 }
<a name="l00918"></a>00918 
<a name="l00919"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ae46f4156c86e0c00954938c6f76260fd">00919</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#ae46f4156c86e0c00954938c6f76260fd">GPU_free_unused_buffers</a>(<span class="keywordtype">void</span>)
<a name="l00920"></a>00920 {
<a name="l00921"></a>00921     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima;
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="keywordflow">if</span> (!<a class="code" href="../../df/dbb/BLI__threads_8h.html#a9f3390837d3451ee73162c329fba6e3e">BLI_thread_is_main</a>())
<a name="l00924"></a>00924         <span class="keywordflow">return</span>;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     <a class="code" href="../../df/dbb/BLI__threads_8h.html#aeb7fa826429971a6eb6074249ad39a0b">BLI_lock_thread</a>(<a class="code" href="../../df/dbb/BLI__threads_8h.html#a45b8cdea2a3018aa88e1455810139ade">LOCK_OPENGL</a>);
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <span class="comment">/* images */</span>
<a name="l00929"></a>00929     <span class="keywordflow">for</span> (ima=image_free_queue.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>)
<a name="l00930"></a>00930         <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#af94280dc0a245719304fdff91327b1e0">BLI_freelistN</a>(&amp;image_free_queue);
<a name="l00933"></a>00933 
<a name="l00934"></a>00934     <span class="comment">/* vbo buffers */</span>
<a name="l00935"></a>00935     <span class="comment">/* it&#39;s probably not necessary to free all buffers every frame */</span>
<a name="l00936"></a>00936     <span class="comment">/* GPU_buffer_pool_free_unused(0); */</span>
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     <a class="code" href="../../df/dbb/BLI__threads_8h.html#add77b383686cdf9514286b56e3c7939c">BLI_unlock_thread</a>(<a class="code" href="../../df/dbb/BLI__threads_8h.html#a45b8cdea2a3018aa88e1455810139ade">LOCK_OPENGL</a>);
<a name="l00939"></a>00939 }
<a name="l00940"></a>00940 
<a name="l00941"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#aa801c63d33f07d73c6f9188cdfae3790">00941</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(<a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a> *ima)
<a name="l00942"></a>00942 {
<a name="l00943"></a>00943     <span class="keywordflow">if</span> (!<a class="code" href="../../df/dbb/BLI__threads_8h.html#a9f3390837d3451ee73162c329fba6e3e">BLI_thread_is_main</a>()) {
<a name="l00944"></a>00944         <a class="code" href="../../d6/d69/gpu__draw_8c.html#a4ca537b626d00c3ba6f1b76477bfc34f">gpu_queue_image_for_free</a>(ima);
<a name="l00945"></a>00945         <span class="keywordflow">return</span>;
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 
<a name="l00948"></a>00948     <span class="comment">/* free regular image binding */</span>
<a name="l00949"></a>00949     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>) {
<a name="l00950"></a>00950         glDeleteTextures(1, (GLuint *)&amp;ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>);
<a name="l00951"></a>00951         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a6191ed717ab5202957a8845a97fd6e39">bindcode</a>= 0;
<a name="l00952"></a>00952     }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954     <span class="comment">/* free glsl image binding */</span>
<a name="l00955"></a>00955     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a493a6b9235c1a39a29429149085f1efb">gputexture</a>) {
<a name="l00956"></a>00956         <a class="code" href="../../da/deb/GPU__extensions_8h.html#a8cc9f70c1a7a2e576ae7dd101aa566ba">GPU_texture_free</a>(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a493a6b9235c1a39a29429149085f1efb">gputexture</a>);
<a name="l00957"></a>00957         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a493a6b9235c1a39a29429149085f1efb">gputexture</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00958"></a>00958     }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960     <span class="comment">/* free repeated image binding */</span>
<a name="l00961"></a>00961     <span class="keywordflow">if</span> (ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>) {
<a name="l00962"></a>00962         glDeleteTextures(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a7b682416c8c3f804fbf1883019e6ecb9">totbind</a>, (GLuint *)ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>);
<a name="l00963"></a>00963     
<a name="l00964"></a>00964         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>);
<a name="l00965"></a>00965         ima-&gt;<a class="code" href="../../d8/d00/classImage.html#af60081c0bf52834e01991bb87b123fa5">repbind</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00966"></a>00966     }
<a name="l00967"></a>00967 
<a name="l00968"></a>00968     ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aca02a67942f2090b7d9d19de4286af90">tpageflag</a> &amp;= ~<a class="code" href="../../d2/d94/DNA__image__types_8h.html#a32e4b4d86a49aa3944d3deea8dcc35bb">IMA_MIPMAP_COMPLETE</a>;
<a name="l00969"></a>00969 }
<a name="l00970"></a>00970 
<a name="l00971"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a644948e3c02370cf0a216e368a054030">00971</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a644948e3c02370cf0a216e368a054030">GPU_free_images</a>(<span class="keywordtype">void</span>)
<a name="l00972"></a>00972 {
<a name="l00973"></a>00973     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a>* ima;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main)
<a name="l00976"></a>00976         <span class="keywordflow">for</span> (ima=<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;image.first; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>)
<a name="l00977"></a>00977             <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00978"></a>00978 }
<a name="l00979"></a>00979 
<a name="l00980"></a>00980 <span class="comment">/* same as above but only free animated images */</span>
<a name="l00981"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#abfdde74f99c1df684bfca5f4ddcbf518">00981</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#abfdde74f99c1df684bfca5f4ddcbf518">GPU_free_images_anim</a>(<span class="keywordtype">void</span>)
<a name="l00982"></a>00982 {
<a name="l00983"></a>00983     <a class="code" href="../../d8/d00/classImage.html" title="32 bit RGBA image.">Image</a>* ima;
<a name="l00984"></a>00984 
<a name="l00985"></a>00985     <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main)
<a name="l00986"></a>00986         <span class="keywordflow">for</span> (ima=<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.main-&gt;image.first; ima; ima=ima-&gt;<a class="code" href="../../d8/d00/classImage.html#aaf5fcd281cf4337d6686322f82187896">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>)
<a name="l00987"></a>00987             <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(ima-&gt;<a class="code" href="../../d8/d00/classImage.html#a868d306431889e6c2998ca2184fbe18e">source</a>, <a class="code" href="../../d2/d77/BKE__image_8h.html#aeff8879cd961f2dff8c4f31ed55409c4">IMA_SRC_SEQUENCE</a>, <a class="code" href="../../d2/d77/BKE__image_8h.html#ad15772d6b95027902c77c6374ceac47b">IMA_SRC_MOVIE</a>))
<a name="l00988"></a>00988                 <a class="code" href="../../d3/df0/GPU__draw_8h.html#aced965f57c52dc61ab76fa1c32317c08">GPU_free_image</a>(ima);
<a name="l00989"></a>00989 }
<a name="l00990"></a>00990 
<a name="l00991"></a>00991 <span class="comment">/* OpenGL Materials */</span>
<a name="l00992"></a>00992 
<a name="l00993"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a1066e41c96f36df1405cbb1c8aedadb8">00993</a> <span class="preprocessor">#define FIXEDMAT    8</span>
<a name="l00994"></a>00994 <span class="preprocessor"></span>
<a name="l00995"></a>00995 <span class="comment">/* OpenGL state caching for materials */</span>
<a name="l00996"></a>00996 
<a name="l00997"></a><a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">00997</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">GPUMaterialFixed</a> {
<a name="l00998"></a><a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">00998</a>     <span class="keywordtype">float</span> <a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>[4];
<a name="l00999"></a><a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">00999</a>     <span class="keywordtype">float</span> <a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>[4];
<a name="l01000"></a><a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a6253efab3a73b2a32c026fb61db54ae2">01000</a>     <span class="keywordtype">int</span> <a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a6253efab3a73b2a32c026fb61db54ae2">hard</a>;
<a name="l01001"></a>01001 } <a class="code" href="../../d6/d69/gpu__draw_8c.html#a948370dd32c34ef18633697a7429ac7f">GPUMaterialFixed</a>; 
<a name="l01002"></a>01002 
<a name="l01003"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html">01003</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dc/db2/structGPUMaterialState.html">GPUMaterialState</a> {
<a name="l01004"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">01004</a>     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a948370dd32c34ef18633697a7429ac7f">GPUMaterialFixed</a> (*<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>);
<a name="l01005"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a75958d6e63adc1db0819350123dbdf4e">01005</a>     <a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">GPUMaterialFixed</a> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a75958d6e63adc1db0819350123dbdf4e">matbuf_fixed</a>[<a class="code" href="../../d6/d69/gpu__draw_8c.html#a1066e41c96f36df1405cbb1c8aedadb8">FIXEDMAT</a>];
<a name="l01006"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">01006</a>     <span class="keywordtype">int</span> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>;
<a name="l01007"></a>01007 
<a name="l01008"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">01008</a>     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> **<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>;
<a name="l01009"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a360802c9eb1920dffd126705253d0bb0">01009</a>     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *<a class="code" href="../../dc/db2/structGPUMaterialState.html#a360802c9eb1920dffd126705253d0bb0">gmatbuf_fixed</a>[<a class="code" href="../../d6/d69/gpu__draw_8c.html#a1066e41c96f36df1405cbb1c8aedadb8">FIXEDMAT</a>];
<a name="l01010"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">01010</a>     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>;
<a name="l01011"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">01011</a>     <a class="code" href="../../de/de7/structObject.html">Object</a> *<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>;
<a name="l01012"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">01012</a>     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>;
<a name="l01013"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a180dea3228c5a2ee8d3d9d886e9b9308">01013</a>     <span class="keywordtype">int</span> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a180dea3228c5a2ee8d3d9d886e9b9308">glay</a>;
<a name="l01014"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a295eee7244b267104e07eb5ed62ac031">01014</a>     float (*<a class="code" href="../../dc/db2/structGPUMaterialState.html#a295eee7244b267104e07eb5ed62ac031">gviewmat</a>)[4];
<a name="l01015"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a56d307f583dd55fa9d31699713872e3e">01015</a>     float (*<a class="code" href="../../dc/db2/structGPUMaterialState.html#a56d307f583dd55fa9d31699713872e3e">gviewinv</a>)[4];
<a name="l01016"></a>01016 
<a name="l01017"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">01017</a>     <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> *<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>;
<a name="l01018"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a5fb3e33c75bf634773490981e52b8d3c">01018</a>     <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a5fb3e33c75bf634773490981e52b8d3c">alphablend_fixed</a>[<a class="code" href="../../d6/d69/gpu__draw_8c.html#a1066e41c96f36df1405cbb1c8aedadb8">FIXEDMAT</a>];
<a name="l01019"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">01019</a>     <span class="keywordtype">int</span> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">use_alpha_pass</a>, <a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>;
<a name="l01020"></a>01020 
<a name="l01021"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">01021</a>     <span class="keywordtype">int</span> <a class="code" href="../../dc/db2/structGPUMaterialState.html#a820243168ae282fceae147f107edd7ef">lastmatnr</a>, <a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>;
<a name="l01022"></a><a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">01022</a>     <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> <a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">lastalphablend</a>;
<a name="l01023"></a>01023 } <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a> = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l01024"></a>01024 
<a name="l01025"></a>01025 <span class="comment">/* fixed function material, alpha handed by caller */</span>
<a name="l01026"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#adad8e5b767c536a49c24a8f83cb2d0e9">01026</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#adad8e5b767c536a49c24a8f83cb2d0e9">gpu_material_to_fixed</a>(<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">GPUMaterialFixed</a> *smat, <span class="keyword">const</span> <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *bmat, <span class="keyword">const</span> <span class="keywordtype">int</span> gamma, <span class="keyword">const</span> <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keyword">const</span> <span class="keywordtype">int</span> new_shading_nodes)
<a name="l01027"></a>01027 {
<a name="l01028"></a>01028     <span class="keywordflow">if</span> (new_shading_nodes || bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ad4773378c42a4167bdd615d67997535e">mode</a> &amp; <a class="code" href="../../de/db2/DNA__material__types_8h.html#a711a44cc51cfb78f529c3ac59306e756">MA_SHLESS</a>) {
<a name="l01029"></a>01029         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>, &amp;bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a9e892cbd7e25b6fd5ee00c383cd9cacf">r</a>);
<a name="l01030"></a>01030         smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>[3]= 1.0;
<a name="l01031"></a>01031 
<a name="l01032"></a>01032         <span class="keywordflow">if</span> (gamma)
<a name="l01033"></a>01033             <a class="code" href="../../d8/de1/BLI__math__color_8h.html#ac0586614af7cf4cfa2c1718015b85383">linearrgb_to_srgb_v3_v3</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>, smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>);
<a name="l01034"></a>01034 
<a name="l01035"></a>01035         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#aa7d7a19d9ab16e31bd3ec9964663765c">zero_v4</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>);
<a name="l01036"></a>01036         smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a6253efab3a73b2a32c026fb61db54ae2">hard</a>= 0;
<a name="l01037"></a>01037     }
<a name="l01038"></a>01038     <span class="keywordflow">else</span> {
<a name="l01039"></a>01039         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#ad32a55246dbd69dbd150cd3fe480c734">mul_v3_v3fl</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>, &amp;bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a9e892cbd7e25b6fd5ee00c383cd9cacf">r</a>, bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#afe35ce8fce88e740bc54505576f4b65a">ref</a> + bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#aff92c6c1d611b91f0dfcbb80992ca89c">emit</a>);
<a name="l01040"></a>01040         smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>[3]= 1.0; <span class="comment">/* caller may set this to bmat-&gt;alpha */</span>
<a name="l01041"></a>01041 
<a name="l01042"></a>01042         <span class="keywordflow">if</span> (bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#aeef8bf00cf7a52e2e5568f5e4d4ca6e5">shade_flag</a> &amp; <a class="code" href="../../de/db2/DNA__material__types_8h.html#a3cf28a61d64b3d405e65968fc22519d0">MA_OBCOLOR</a>)
<a name="l01043"></a>01043             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a3c368253a0bd6032fa80dba876df5425">mul_v3_v3</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>);
<a name="l01044"></a>01044         
<a name="l01045"></a>01045         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#ad32a55246dbd69dbd150cd3fe480c734">mul_v3_v3fl</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>, &amp;bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#af595797ad989716e9a27949aa0fc3fcb">specr</a>, bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a9fde6991e416c1b39b8977dc7d345fc9">spec</a>);
<a name="l01046"></a>01046         smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>[3]= 1.0; <span class="comment">/* always 1 */</span>
<a name="l01047"></a>01047         smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a6253efab3a73b2a32c026fb61db54ae2">hard</a>= <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a49a86f7d81f477961529de3add6d68ab">CLAMPIS</a>(bmat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#af7e6796633eed3cf2fe85a929fd11199">har</a>, 0, 128);
<a name="l01048"></a>01048 
<a name="l01049"></a>01049         <span class="keywordflow">if</span> (gamma) {
<a name="l01050"></a>01050             <a class="code" href="../../d8/de1/BLI__math__color_8h.html#ac0586614af7cf4cfa2c1718015b85383">linearrgb_to_srgb_v3_v3</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>, smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>);
<a name="l01051"></a>01051             <a class="code" href="../../d8/de1/BLI__math__color_8h.html#ac0586614af7cf4cfa2c1718015b85383">linearrgb_to_srgb_v3_v3</a>(smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>, smat-&gt;<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>);
<a name="l01052"></a>01052         }   
<a name="l01053"></a>01053     }
<a name="l01054"></a>01054 }
<a name="l01055"></a>01055 
<a name="l01056"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a7f350bd1d8535ea57805c14d53799a39">01056</a> <span class="keyword">static</span> <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *<a class="code" href="../../d6/d69/gpu__draw_8c.html#a7f350bd1d8535ea57805c14d53799a39">gpu_active_node_material</a>(<a class="code" href="../../d2/d10/structMaterial.html">Material</a> *ma)
<a name="l01057"></a>01057 {
<a name="l01058"></a>01058     <span class="keywordflow">if</span> (ma &amp;&amp; ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ae5c87659b1f4bd186431d96361ade966">use_nodes</a> &amp;&amp; ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a535477b1fb0d8090cc56a0541c5ff467">nodetree</a>) {
<a name="l01059"></a>01059         <a class="code" href="../../dc/daa/structbNode.html">bNode</a> *node= <a class="code" href="../../d4/d91/BKE__node_8h.html#ac139eb516e1a50c64f2cb5268e29eecb">nodeGetActiveID</a>(ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a535477b1fb0d8090cc56a0541c5ff467">nodetree</a>, <a class="code" href="../../d3/dfb/DNA__ID_8h.html#acf5020c901e2793a056ffca95ec8195a">ID_MA</a>);
<a name="l01060"></a>01060 
<a name="l01061"></a>01061         <span class="keywordflow">if</span> (node)
<a name="l01062"></a>01062             <span class="keywordflow">return</span> (<a class="code" href="../../d2/d10/structMaterial.html">Material</a> *)node-&gt;<a class="code" href="../../dc/daa/structbNode.html#a4054a28b64f94943286ab0e0df99afba">id</a>;
<a name="l01063"></a>01063         <span class="keywordflow">else</span>
<a name="l01064"></a>01064             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01065"></a>01065     }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067     <span class="keywordflow">return</span> ma;
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 
<a name="l01070"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a99f4a9589701a0bbc490e4d4de14a1b0">01070</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a298d978884494b64b6a783903350e2f6">GPU_begin_object_materials</a>(<a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d, <a class="code" href="../../d9/d00/structRegionView3D.html">RegionView3D</a> *rv3d, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> glsl, <span class="keywordtype">int</span> *do_alpha_after)
<a name="l01071"></a>01071 {
<a name="l01072"></a>01072     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *ma;
<a name="l01073"></a>01073     <a class="code" href="../../de/da3/structGPUMaterial.html">GPUMaterial</a> *gpumat;
<a name="l01074"></a>01074     <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> alphablend;
<a name="l01075"></a>01075     <span class="keywordtype">int</span> a;
<a name="l01076"></a>01076     <span class="keywordtype">int</span> gamma = scene-&gt;<a class="code" href="../../d9/d27/structScene.html#aa182df8e0e4fae140d73ddde81ae7385">r</a>.<a class="code" href="../../d3/d27/structRenderData.html#aa9a0521ac4e22707d09ddeac4bf104b2">color_mgt_flag</a> &amp; <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#aea9753cc8aec8bc51c69f789cd188848">R_COLOR_MANAGEMENT</a>;
<a name="l01077"></a>01077     <span class="keywordtype">int</span> new_shading_nodes = <a class="code" href="../../d8/d53/BKE__scene_8h.html#a041ff0e68dd0152e85ceddddc9b53cdc">scene_use_new_shading_nodes</a>(scene);
<a name="l01078"></a>01078     
<a name="l01079"></a>01079     <span class="comment">/* initialize state */</span>
<a name="l01080"></a>01080     memset(&amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>));
<a name="l01081"></a>01081     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a820243168ae282fceae147f107edd7ef">lastmatnr</a> = -1;
<a name="l01082"></a>01082     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a> = -1;
<a name="l01083"></a>01083     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">lastalphablend</a> = <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>;
<a name="l01084"></a>01084 
<a name="l01085"></a>01085     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a> = ob;
<a name="l01086"></a>01086     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a> = scene;
<a name="l01087"></a>01087     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>+1; <span class="comment">/* materials start from 1, default material is 0 */</span>
<a name="l01088"></a>01088     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a180dea3228c5a2ee8d3d9d886e9b9308">glay</a>= v3d-&gt;<a class="code" href="../../d6/deb/structView3D.html#a45ac0a23240ec719b0952d62190e9130">lay</a>;
<a name="l01089"></a>01089     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a295eee7244b267104e07eb5ed62ac031">gviewmat</a>= rv3d-&gt;<a class="code" href="../../d9/d00/structRegionView3D.html#ad04178a1375cc4ef5c59a76b723f822f">viewmat</a>;
<a name="l01090"></a>01090     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a56d307f583dd55fa9d31699713872e3e">gviewinv</a>= rv3d-&gt;<a class="code" href="../../d9/d00/structRegionView3D.html#aef4739e48c5265fc0185283cd9f92303">viewinv</a>;
<a name="l01091"></a>01091 
<a name="l01092"></a>01092     <span class="comment">/* alpha pass setup. there&#39;s various cases to handle here:</span>
<a name="l01093"></a>01093 <span class="comment">     * - object transparency on: only solid materials draw in the first pass,</span>
<a name="l01094"></a>01094 <span class="comment">     * and only transparent in the second &#39;alpha&#39; pass.</span>
<a name="l01095"></a>01095 <span class="comment">     * - object transparency off: for glsl we draw both in a single pass, and</span>
<a name="l01096"></a>01096 <span class="comment">     * for solid we don&#39;t use transparency at all. */</span>
<a name="l01097"></a>01097     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">use_alpha_pass</a> = (do_alpha_after != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01098"></a>01098     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a> = (v3d &amp;&amp; v3d-&gt;<a class="code" href="../../d6/deb/structView3D.html#ae22790924a440701ed3d01ad4db5eee2">transp</a>);
<a name="l01099"></a>01099     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">use_alpha_pass</a>)
<a name="l01100"></a>01100         *do_alpha_after = 0;
<a name="l01101"></a>01101     
<a name="l01102"></a>01102     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a> &gt; <a class="code" href="../../d6/d69/gpu__draw_8c.html#a1066e41c96f36df1405cbb1c8aedadb8">FIXEDMAT</a>) {
<a name="l01103"></a>01103         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">GPUMaterialFixed</a>)*<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>, <span class="stringliteral">&quot;GMS.matbuf&quot;</span>);
<a name="l01104"></a>01104         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>)*<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>, <span class="stringliteral">&quot;GMS.matbuf&quot;</span>);
<a name="l01105"></a>01105         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>)*<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>, <span class="stringliteral">&quot;GMS.matbuf&quot;</span>);
<a name="l01106"></a>01106     }
<a name="l01107"></a>01107     <span class="keywordflow">else</span> {
<a name="l01108"></a>01108         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a75958d6e63adc1db0819350123dbdf4e">matbuf_fixed</a>;
<a name="l01109"></a>01109         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a360802c9eb1920dffd126705253d0bb0">gmatbuf_fixed</a>;
<a name="l01110"></a>01110         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>= <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a5fb3e33c75bf634773490981e52b8d3c">alphablend_fixed</a>;
<a name="l01111"></a>01111     }
<a name="l01112"></a>01112 
<a name="l01113"></a>01113     <span class="comment">/* no materials assigned? */</span>
<a name="l01114"></a>01114     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>==0) {
<a name="l01115"></a>01115         <a class="code" href="../../d6/d69/gpu__draw_8c.html#adad8e5b767c536a49c24a8f83cb2d0e9">gpu_material_to_fixed</a>(&amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[0], &amp;defmaterial, 0, ob, new_shading_nodes);
<a name="l01116"></a>01116 
<a name="l01117"></a>01117         <span class="comment">/* do material 1 too, for displists! */</span>
<a name="l01118"></a>01118         memcpy(&amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[1], &amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[0], <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html">GPUMaterialFixed</a>));
<a name="l01119"></a>01119 
<a name="l01120"></a>01120         <span class="keywordflow">if</span> (glsl) {
<a name="l01121"></a>01121             <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>[0]= &amp;<a class="code" href="../../de/d87/material_8c.html#a685518354e9af381cf9881b703cad017">defmaterial</a>;
<a name="l01122"></a>01122             <a class="code" href="../../de/d68/GPU__material_8h.html#a0fb984ea5a8c0d05322cda55967be11b">GPU_material_from_blender</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>, &amp;defmaterial);
<a name="l01123"></a>01123         }
<a name="l01124"></a>01124 
<a name="l01125"></a>01125         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>[0]= <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>;
<a name="l01126"></a>01126     }
<a name="l01127"></a>01127     
<a name="l01128"></a>01128     <span class="comment">/* setup materials */</span>
<a name="l01129"></a>01129     <span class="keywordflow">for</span> (a=1; a&lt;=ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>; a++) {
<a name="l01130"></a>01130         <span class="comment">/* find a suitable material */</span>
<a name="l01131"></a>01131         ma= <a class="code" href="../../d4/d0f/BKE__material_8h.html#a941f5112d1047bcbcf3e2212685296a5">give_current_material</a>(ob, a);
<a name="l01132"></a>01132         <span class="keywordflow">if</span> (!glsl &amp;&amp; !new_shading_nodes) ma= <a class="code" href="../../d6/d69/gpu__draw_8c.html#a7f350bd1d8535ea57805c14d53799a39">gpu_active_node_material</a>(ma);
<a name="l01133"></a>01133         <span class="keywordflow">if</span> (ma==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ma= &amp;<a class="code" href="../../de/d87/material_8c.html#a685518354e9af381cf9881b703cad017">defmaterial</a>;
<a name="l01134"></a>01134 
<a name="l01135"></a>01135         <span class="comment">/* create glsl material if requested */</span>
<a name="l01136"></a>01136         gpumat = (glsl)? <a class="code" href="../../de/d68/GPU__material_8h.html#a0fb984ea5a8c0d05322cda55967be11b">GPU_material_from_blender</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>, ma): <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138         <span class="keywordflow">if</span> (gpumat) {
<a name="l01139"></a>01139             <span class="comment">/* do glsl only if creating it succeed, else fallback */</span>
<a name="l01140"></a>01140             <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>[a]= ma;
<a name="l01141"></a>01141             alphablend = <a class="code" href="../../de/d68/GPU__material_8h.html#a40311a4b4cb6b7a38ccddbe8f01229b3">GPU_material_alpha_blend</a>(gpumat, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>);
<a name="l01142"></a>01142         }
<a name="l01143"></a>01143         <span class="keywordflow">else</span> {
<a name="l01144"></a>01144             <span class="comment">/* fixed function opengl materials */</span>
<a name="l01145"></a>01145             <a class="code" href="../../d6/d69/gpu__draw_8c.html#adad8e5b767c536a49c24a8f83cb2d0e9">gpu_material_to_fixed</a>(&amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[a], ma, gamma, ob, new_shading_nodes);
<a name="l01146"></a>01146 
<a name="l01147"></a>01147             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">use_alpha_pass</a>) {
<a name="l01148"></a>01148                 <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[a].<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>[3]= ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ac0f2eb80623ad884c7fa770e47ae92a2">alpha</a>;
<a name="l01149"></a>01149                 alphablend = (ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ac0f2eb80623ad884c7fa770e47ae92a2">alpha</a> == 1.0f)? <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>: <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea7185b7eeb7273b8f871714372dd6ffdb">GPU_BLEND_ALPHA</a>;
<a name="l01150"></a>01150             }
<a name="l01151"></a>01151             <span class="keywordflow">else</span> {
<a name="l01152"></a>01152                 <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[a].<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>[3]= 1.0f;
<a name="l01153"></a>01153                 alphablend = <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>;
<a name="l01154"></a>01154             }
<a name="l01155"></a>01155         }
<a name="l01156"></a>01156 
<a name="l01157"></a>01157         <span class="comment">/* setting do_alpha_after = 1 indicates this object needs to be</span>
<a name="l01158"></a>01158 <span class="comment">         * drawn in a second alpha pass for improved blending */</span>
<a name="l01159"></a>01159         <span class="keywordflow">if</span> (do_alpha_after &amp;&amp; !<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>)
<a name="l01160"></a>01160             <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ad3568ab74428f47aea1c855024e467f0">ELEM3</a>(alphablend, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea7185b7eeb7273b8f871714372dd6ffdb">GPU_BLEND_ALPHA</a>, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea39318f81ae768d8a6119e7965a11bd50">GPU_BLEND_ADD</a>, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea3fc4531861fe81d9943cc6e915fe898d">GPU_BLEND_ALPHA_SORT</a>))
<a name="l01161"></a>01161                 *do_alpha_after= 1;
<a name="l01162"></a>01162 
<a name="l01163"></a>01163         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>[a]= alphablend;
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166     <span class="comment">/* let&#39;s start with a clean state */</span>
<a name="l01167"></a>01167     <a class="code" href="../../d3/df0/GPU__draw_8h.html#a93e3b15a1a08a173c699b15068c35c35">GPU_disable_material</a>();
<a name="l01168"></a>01168 }
<a name="l01169"></a>01169 
<a name="l01170"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a65117c75f7e8a1d5bc9479ef2cdc26c6">01170</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a65117c75f7e8a1d5bc9479ef2cdc26c6">GPU_enable_material</a>(<span class="keywordtype">int</span> nr, <span class="keywordtype">void</span> *attribs)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172     <a class="code" href="../../df/d4b/structGPUVertexAttribs.html">GPUVertexAttribs</a> *gattribs = attribs;
<a name="l01173"></a>01173     <a class="code" href="../../de/da3/structGPUMaterial.html">GPUMaterial</a> *gpumat;
<a name="l01174"></a>01174     <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871e">GPUBlendMode</a> alphablend;
<a name="l01175"></a>01175 
<a name="l01176"></a>01176     <span class="comment">/* no GPU_begin_object_materials, use default material */</span>
<a name="l01177"></a>01177     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>) {
<a name="l01178"></a>01178         <span class="keywordtype">float</span> <a class="code" href="../../d0/dbc/namespaceKDL.html#a0227d72a9cfff5e6065944ebb04f9e77">diff</a>[4], <a class="code" href="../../d1/ddb/shadeoutput_8c.html#ad41f5027c52d07f258337a69bddd7ded">spec</a>[4];
<a name="l01179"></a>01179 
<a name="l01180"></a>01180         memset(&amp;<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>));
<a name="l01181"></a>01181 
<a name="l01182"></a>01182         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#ad32a55246dbd69dbd150cd3fe480c734">mul_v3_v3fl</a>(diff, &amp;defmaterial.<a class="code" href="../../d2/d10/structMaterial.html#a9e892cbd7e25b6fd5ee00c383cd9cacf">r</a>, defmaterial.<a class="code" href="../../d2/d10/structMaterial.html#afe35ce8fce88e740bc54505576f4b65a">ref</a> + defmaterial.<a class="code" href="../../d2/d10/structMaterial.html#aff92c6c1d611b91f0dfcbb80992ca89c">emit</a>);
<a name="l01183"></a>01183         diff[3]= 1.0;
<a name="l01184"></a>01184 
<a name="l01185"></a>01185         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#ad32a55246dbd69dbd150cd3fe480c734">mul_v3_v3fl</a>(spec, &amp;defmaterial.<a class="code" href="../../d2/d10/structMaterial.html#af595797ad989716e9a27949aa0fc3fcb">specr</a>, defmaterial.<a class="code" href="../../d2/d10/structMaterial.html#a9fde6991e416c1b39b8977dc7d345fc9">spec</a>);
<a name="l01186"></a>01186         spec[3]= 1.0;
<a name="l01187"></a>01187 
<a name="l01188"></a>01188         glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, diff);
<a name="l01189"></a>01189         glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, spec);
<a name="l01190"></a>01190         glMateriali(GL_FRONT_AND_BACK, GL_SHININESS, 35); <span class="comment">/* blender default */</span>
<a name="l01191"></a>01191 
<a name="l01192"></a>01192         <span class="keywordflow">return</span> 0;
<a name="l01193"></a>01193     }
<a name="l01194"></a>01194 
<a name="l01195"></a>01195     <span class="comment">/* prevent index to use un-initialized array items */</span>
<a name="l01196"></a>01196     <span class="keywordflow">if</span> (nr&gt;=<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a2cb316ae56f44286f568002f092a02ec">totmat</a>)
<a name="l01197"></a>01197         nr= 0;
<a name="l01198"></a>01198 
<a name="l01199"></a>01199     <span class="keywordflow">if</span> (gattribs)
<a name="l01200"></a>01200         memset(gattribs, 0, <span class="keyword">sizeof</span>(*gattribs));
<a name="l01201"></a>01201 
<a name="l01202"></a>01202     <span class="comment">/* keep current material */</span>
<a name="l01203"></a>01203     <span class="keywordflow">if</span> (nr==<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a820243168ae282fceae147f107edd7ef">lastmatnr</a>)
<a name="l01204"></a>01204         <span class="keywordflow">return</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206     <span class="comment">/* unbind glsl material */</span>
<a name="l01207"></a>01207     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>) {
<a name="l01208"></a>01208         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>) glDepthMask(0);
<a name="l01209"></a>01209         <a class="code" href="../../de/d68/GPU__material_8h.html#a1049dbdd193a5a49293f34220cc7558e">GPU_material_unbind</a>(<a class="code" href="../../de/d68/GPU__material_8h.html#a0fb984ea5a8c0d05322cda55967be11b">GPU_material_from_blender</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>));
<a name="l01210"></a>01210         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212 
<a name="l01213"></a>01213     <span class="comment">/* draw materials with alpha in alpha pass */</span>
<a name="l01214"></a>01214     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a820243168ae282fceae147f107edd7ef">lastmatnr</a> = nr;
<a name="l01215"></a>01215     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a> = 1;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a5740f40029d70d3d67569f7277861d57">use_alpha_pass</a>) {
<a name="l01218"></a>01218         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a> = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>[nr], <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>, <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea1d5dbb0fde2986491cd75cf4c81fd6a8">GPU_BLEND_CLIP</a>);
<a name="l01219"></a>01219         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>)
<a name="l01220"></a>01220             <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a> = !<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>;
<a name="l01221"></a>01221     }
<a name="l01222"></a>01222     <span class="keywordflow">else</span>
<a name="l01223"></a>01223         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a> = !<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>;
<a name="l01224"></a>01224 
<a name="l01225"></a>01225     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>) {
<a name="l01226"></a>01226         <span class="comment">/* for alpha pass, use alpha blend */</span>
<a name="l01227"></a>01227         alphablend = <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>[nr];
<a name="l01228"></a>01228 
<a name="l01229"></a>01229         <span class="keywordflow">if</span> (gattribs &amp;&amp; <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>[nr]) {
<a name="l01230"></a>01230             <span class="comment">/* bind glsl material and get attributes */</span>
<a name="l01231"></a>01231             <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *mat = <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>[nr];
<a name="l01232"></a>01232             <span class="keywordtype">float</span> auto_bump_scale;
<a name="l01233"></a>01233 
<a name="l01234"></a>01234             gpumat = <a class="code" href="../../de/d68/GPU__material_8h.html#a0fb984ea5a8c0d05322cda55967be11b">GPU_material_from_blender</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>, mat);
<a name="l01235"></a>01235             <a class="code" href="../../de/d68/GPU__material_8h.html#a260023ac5cae8bf0f59051e0f55f795c">GPU_material_vertex_attributes</a>(gpumat, gattribs);
<a name="l01236"></a>01236             <a class="code" href="../../de/d68/GPU__material_8h.html#ab53a19a5311af25a0a7acddac13755c8">GPU_material_bind</a>(gpumat, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa9cfa964651e1e2f3044c9c79cf004b3">lay</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a180dea3228c5a2ee8d3d9d886e9b9308">glay</a>, 1.0, !(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550aefdee3fdb0d4e936026d0fbdeb55852d">OB_MODE_TEXTURE_PAINT</a>));
<a name="l01237"></a>01237 
<a name="l01238"></a>01238             auto_bump_scale = <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a> != <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a90f2cb67625caff2124e0675ea32510d">derivedFinal</a>-&gt;<a class="code" href="../../d5/d6c/structDerivedMesh.html#aa480cce78cce6112e4501d533beb76c1">auto_bump_scale</a> : 1.0f;
<a name="l01239"></a>01239             <a class="code" href="../../de/d68/GPU__material_8h.html#a67e1c6ad344880d8b6b5d4738e03f88e">GPU_material_bind_uniforms</a>(gpumat, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a295eee7244b267104e07eb5ed62ac031">gviewmat</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a56d307f583dd55fa9d31699713872e3e">gviewinv</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af7c782b78866c4a1c3fe52afd34d7b9a">gob</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>, auto_bump_scale);
<a name="l01240"></a>01240             <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>= mat;
<a name="l01241"></a>01241 
<a name="l01242"></a>01242             <span class="comment">/* for glsl use alpha blend mode, unless it&#39;s set to solid and</span>
<a name="l01243"></a>01243 <span class="comment">             * we are already drawing in an alpha pass */</span>
<a name="l01244"></a>01244             <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a704bae714f83df324006557b2c386d12">game</a>.<a class="code" href="../../d1/d3d/structGameSettings.html#aa27d0575fa94b59c91b4eb396adfe0f5">alpha_blend</a> != <a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>)
<a name="l01245"></a>01245                 alphablend= mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a704bae714f83df324006557b2c386d12">game</a>.<a class="code" href="../../d1/d3d/structGameSettings.html#aa27d0575fa94b59c91b4eb396adfe0f5">alpha_blend</a>;
<a name="l01246"></a>01246 
<a name="l01247"></a>01247             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>) glDepthMask(1);
<a name="l01248"></a>01248         }
<a name="l01249"></a>01249         <span class="keywordflow">else</span> {
<a name="l01250"></a>01250             <span class="comment">/* or do fixed function opengl material */</span>
<a name="l01251"></a>01251             glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[nr].<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a570a73c31a2dd633fa58105242ae662c">diff</a>);
<a name="l01252"></a>01252             glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[nr].<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a5ecd0aab98073197be9cf0115e183b2b">spec</a>);
<a name="l01253"></a>01253             glMateriali(GL_FRONT_AND_BACK, GL_SHININESS, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>[nr].<a class="code" href="../../d5/d1f/structGPUMaterialFixed.html#a6253efab3a73b2a32c026fb61db54ae2">hard</a>);
<a name="l01254"></a>01254         }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256         <span class="comment">/* set (alpha) blending mode */</span>
<a name="l01257"></a>01257         <a class="code" href="../../d3/df0/GPU__draw_8h.html#ad52966a9e3d427ebddf9f3a52c9f8232">GPU_set_material_alpha_blend</a>(alphablend);
<a name="l01258"></a>01258     }
<a name="l01259"></a>01259 
<a name="l01260"></a>01260     <span class="keywordflow">return</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>;
<a name="l01261"></a>01261 }
<a name="l01262"></a>01262 
<a name="l01263"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ad52966a9e3d427ebddf9f3a52c9f8232">01263</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#ad52966a9e3d427ebddf9f3a52c9f8232">GPU_set_material_alpha_blend</a>(<span class="keywordtype">int</span> alphablend)
<a name="l01264"></a>01264 {
<a name="l01265"></a>01265     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">lastalphablend</a> == alphablend)
<a name="l01266"></a>01266         <span class="keywordflow">return</span>;
<a name="l01267"></a>01267     
<a name="l01268"></a>01268     <a class="code" href="../../d6/d69/gpu__draw_8c.html#a7d5020b60bbd9ca4448388bf85372d5d">gpu_set_alpha_blend</a>(alphablend);
<a name="l01269"></a>01269     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">lastalphablend</a> = alphablend;
<a name="l01270"></a>01270 }
<a name="l01271"></a>01271 
<a name="l01272"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a021d48f09e643db3f314a30a43dc3121">01272</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a021d48f09e643db3f314a30a43dc3121">GPU_get_material_alpha_blend</a>(<span class="keywordtype">void</span>)
<a name="l01273"></a>01273 {
<a name="l01274"></a>01274     <span class="keywordflow">return</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#af9df0e5783b0fc44310af851332cd9c0">lastalphablend</a>;
<a name="l01275"></a>01275 }
<a name="l01276"></a>01276 
<a name="l01277"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a93e3b15a1a08a173c699b15068c35c35">01277</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a93e3b15a1a08a173c699b15068c35c35">GPU_disable_material</a>(<span class="keywordtype">void</span>)
<a name="l01278"></a>01278 {
<a name="l01279"></a>01279     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a820243168ae282fceae147f107edd7ef">lastmatnr</a>= -1;
<a name="l01280"></a>01280     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a7f3cda0c885493882d323be57d46c234">lastretval</a>= 1;
<a name="l01281"></a>01281 
<a name="l01282"></a>01282     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>) {
<a name="l01283"></a>01283         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aa3cb100eb903b0cfab0cb8a04e4308db">is_alpha_pass</a>) glDepthMask(0);
<a name="l01284"></a>01284         <a class="code" href="../../de/d68/GPU__material_8h.html#a1049dbdd193a5a49293f34220cc7558e">GPU_material_unbind</a>(<a class="code" href="../../de/d68/GPU__material_8h.html#a0fb984ea5a8c0d05322cda55967be11b">GPU_material_from_blender</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a427943e7dcefb938bd22add73b82f638">gscene</a>, <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>));
<a name="l01285"></a>01285         <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a85d2333ec1abcad234c74946784babd5">gboundmat</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01286"></a>01286     }
<a name="l01287"></a>01287 
<a name="l01288"></a>01288     <a class="code" href="../../d3/df0/GPU__draw_8h.html#ad52966a9e3d427ebddf9f3a52c9f8232">GPU_set_material_alpha_blend</a>(<a class="code" href="../../de/d68/GPU__material_8h.html#a45ae8bf4bcf76333738961fc540f871ea74eaae6a553d604fc02c8c3137a5cc98">GPU_BLEND_SOLID</a>);
<a name="l01289"></a>01289 }
<a name="l01290"></a>01290 
<a name="l01291"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ac05a8ea057e161f6f5cc5c38a394a3e3">01291</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#ac05a8ea057e161f6f5cc5c38a394a3e3">GPU_end_object_materials</a>(<span class="keywordtype">void</span>)
<a name="l01292"></a>01292 {
<a name="l01293"></a>01293     <a class="code" href="../../d3/df0/GPU__draw_8h.html#a93e3b15a1a08a173c699b15068c35c35">GPU_disable_material</a>();
<a name="l01294"></a>01294 
<a name="l01295"></a>01295     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a> &amp;&amp; <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a> != <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a75958d6e63adc1db0819350123dbdf4e">matbuf_fixed</a>) {
<a name="l01296"></a>01296         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>);
<a name="l01297"></a>01297         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>);
<a name="l01298"></a>01298         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(<a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>);
<a name="l01299"></a>01299     }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#aeb60a3a56292a443bc3d7413e956afcf">matbuf</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01302"></a>01302     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a4516dfa40dd6ff8e01cf9b17e631730a">gmatbuf</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01303"></a>01303     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae3fb8e7204779e0fbfacdc8a42e35270">GMS</a>.<a class="code" href="../../dc/db2/structGPUMaterialState.html#a604f5240332a743c8709b99768231356">alphablend</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01304"></a>01304 
<a name="l01305"></a>01305     <span class="comment">/* resetting the texture matrix after the glScale needed for tiled textures */</span>
<a name="l01306"></a>01306     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d69/gpu__draw_8c.html#ab9420170cba35e43a6abcd10c1caad82">GTS</a>.<a class="code" href="../../d0/d82/structGPUTextureState.html#a1ed2307d3ea9b2afd27f7f57ec8f2eaa">tilemode</a>) {
<a name="l01307"></a>01307         glMatrixMode(GL_TEXTURE);
<a name="l01308"></a>01308         glLoadIdentity();
<a name="l01309"></a>01309         glMatrixMode(GL_MODELVIEW);
<a name="l01310"></a>01310     }
<a name="l01311"></a>01311 }
<a name="l01312"></a>01312 
<a name="l01313"></a>01313 <span class="comment">/* Lights */</span>
<a name="l01314"></a>01314 
<a name="l01315"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a11ec1773775fbc6588b9c18e1a649190">01315</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a11ec1773775fbc6588b9c18e1a649190">GPU_default_lights</a>(<span class="keywordtype">void</span>)
<a name="l01316"></a>01316 {
<a name="l01317"></a>01317     <span class="keywordtype">float</span> zero[4] = {0.0f, 0.0f, 0.0f, 0.0f}, position[4];
<a name="l01318"></a>01318     <span class="keywordtype">int</span> a, count = 0;
<a name="l01319"></a>01319     
<a name="l01320"></a>01320     <span class="comment">/* initialize */</span>
<a name="l01321"></a>01321     <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].flag==0 &amp;&amp; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].flag==0 &amp;&amp; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].flag==0) {
<a name="l01322"></a>01322         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].flag= 1;
<a name="l01323"></a>01323         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].vec[0]= -0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].vec[1]= 0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].vec[2]= 0.9;
<a name="l01324"></a>01324         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].col[0]= 0.8; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].col[1]= 0.8; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].col[2]= 0.8;
<a name="l01325"></a>01325         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].spec[0]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].spec[1]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].spec[2]= 0.5;
<a name="l01326"></a>01326         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[0].spec[3]= 1.0;
<a name="l01327"></a>01327         
<a name="l01328"></a>01328         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].flag= 0;
<a name="l01329"></a>01329         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].vec[0]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].vec[1]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].vec[2]= 0.1;
<a name="l01330"></a>01330         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].col[0]= 0.4; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].col[1]= 0.4; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].col[2]= 0.8;
<a name="l01331"></a>01331         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].spec[0]= 0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].spec[1]= 0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].spec[2]= 0.5;
<a name="l01332"></a>01332         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[1].spec[3]= 1.0;
<a name="l01333"></a>01333     
<a name="l01334"></a>01334         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].flag= 0;
<a name="l01335"></a>01335         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].vec[0]= 0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].vec[1]= -0.3; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].vec[2]= -0.2;
<a name="l01336"></a>01336         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].col[0]= 0.8; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].col[1]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].col[2]= 0.4;
<a name="l01337"></a>01337         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].spec[0]= 0.5; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].spec[1]= 0.4; <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].spec[2]= 0.3;
<a name="l01338"></a>01338         <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[2].spec[3]= 1.0;
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341     glLightModeli(GL_LIGHT_MODEL_LOCAL_VIEWER, GL_FALSE);
<a name="l01342"></a>01342 
<a name="l01343"></a>01343     <span class="keywordflow">for</span> (a=0; a&lt;8; a++) {
<a name="l01344"></a>01344         <span class="keywordflow">if</span> (a&lt;3) {
<a name="l01345"></a>01345             <span class="keywordflow">if</span> (<a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[a].flag) {
<a name="l01346"></a>01346                 glEnable(GL_LIGHT0+a);
<a name="l01347"></a>01347 
<a name="l01348"></a>01348                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#aaa8b4ca59d77eb2612341c608507e087">normalize_v3_v3</a>(position, <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[a].vec);
<a name="l01349"></a>01349                 position[3]= 0.0f;
<a name="l01350"></a>01350                 
<a name="l01351"></a>01351                 glLightfv(GL_LIGHT0+a, GL_POSITION, position); 
<a name="l01352"></a>01352                 glLightfv(GL_LIGHT0+a, GL_DIFFUSE, <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[a].col); 
<a name="l01353"></a>01353                 glLightfv(GL_LIGHT0+a, GL_SPECULAR, <a class="code" href="../../d0/de2/namespacegjkepa2__impl.html#a6d41857f051fae50b68076f99f439398">U</a>.light[a].spec); 
<a name="l01354"></a>01354 
<a name="l01355"></a>01355                 count++;
<a name="l01356"></a>01356             }
<a name="l01357"></a>01357             <span class="keywordflow">else</span> {
<a name="l01358"></a>01358                 glDisable(GL_LIGHT0+a);
<a name="l01359"></a>01359 
<a name="l01360"></a>01360                 glLightfv(GL_LIGHT0+a, GL_POSITION, zero); 
<a name="l01361"></a>01361                 glLightfv(GL_LIGHT0+a, GL_DIFFUSE, zero); 
<a name="l01362"></a>01362                 glLightfv(GL_LIGHT0+a, GL_SPECULAR, zero);
<a name="l01363"></a>01363             }
<a name="l01364"></a>01364 
<a name="l01365"></a>01365             <span class="comment">// clear stuff from other opengl lamp usage</span>
<a name="l01366"></a>01366             glLightf(GL_LIGHT0+a, GL_SPOT_CUTOFF, 180.0);
<a name="l01367"></a>01367             glLightf(GL_LIGHT0+a, GL_CONSTANT_ATTENUATION, 1.0);
<a name="l01368"></a>01368             glLightf(GL_LIGHT0+a, GL_LINEAR_ATTENUATION, 0.0);
<a name="l01369"></a>01369         }
<a name="l01370"></a>01370         <span class="keywordflow">else</span>
<a name="l01371"></a>01371             glDisable(GL_LIGHT0+a);
<a name="l01372"></a>01372     }
<a name="l01373"></a>01373     
<a name="l01374"></a>01374     glDisable(GL_LIGHTING);
<a name="l01375"></a>01375 
<a name="l01376"></a>01376     glDisable(GL_COLOR_MATERIAL);
<a name="l01377"></a>01377 
<a name="l01378"></a>01378     <span class="keywordflow">return</span> count;
<a name="l01379"></a>01379 }
<a name="l01380"></a>01380 
<a name="l01381"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a011fd65a3234c8b682b84be97f8622d7">01381</a> <span class="keywordtype">int</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a5a08bd42f5078f47746b0af8b5ac63b8">GPU_scene_object_lights</a>(<a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> lay, <span class="keywordtype">float</span> viewmat[][4], <span class="keywordtype">int</span> ortho)
<a name="l01382"></a>01382 {
<a name="l01383"></a>01383     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l01384"></a>01384     <a class="code" href="../../d5/d72/structLamp.html">Lamp</a> *la;
<a name="l01385"></a>01385     <span class="keywordtype">int</span> count;
<a name="l01386"></a>01386     <span class="keywordtype">float</span> position[4], direction[4], energy[4];
<a name="l01387"></a>01387     
<a name="l01388"></a>01388     <span class="comment">/* disable all lights */</span>
<a name="l01389"></a>01389     <span class="keywordflow">for</span> (count=0; count&lt;8; count++)
<a name="l01390"></a>01390         glDisable(GL_LIGHT0+count);
<a name="l01391"></a>01391     
<a name="l01392"></a>01392     <span class="comment">/* view direction for specular is not compute correct by default in</span>
<a name="l01393"></a>01393 <span class="comment">     * opengl, so we set the settings ourselfs */</span>
<a name="l01394"></a>01394     glLightModeli(GL_LIGHT_MODEL_LOCAL_VIEWER, (ortho)? GL_FALSE: GL_TRUE);
<a name="l01395"></a>01395 
<a name="l01396"></a>01396     count= 0;
<a name="l01397"></a>01397     
<a name="l01398"></a>01398     <span class="keywordflow">for</span> (base=scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a21ace55307d1ca141e265b3f55fa37d9">base</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; base; base=base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l01399"></a>01399         <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>!=<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1514ec0465b89013544107c908e7abca">OB_LAMP</a>)
<a name="l01400"></a>01400             <span class="keywordflow">continue</span>;
<a name="l01401"></a>01401 
<a name="l01402"></a>01402         <span class="keywordflow">if</span> (!(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> &amp; lay) || !(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> &amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa9cfa964651e1e2f3044c9c79cf004b3">lay</a>))
<a name="l01403"></a>01403             <span class="keywordflow">continue</span>;
<a name="l01404"></a>01404 
<a name="l01405"></a>01405         la= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l01406"></a>01406         
<a name="l01407"></a>01407         <span class="comment">/* setup lamp transform */</span>
<a name="l01408"></a>01408         glPushMatrix();
<a name="l01409"></a>01409         <a class="code" href="../../dd/d44/BIF__gl_8h.html#a968938b254020ac622d83a3ab1226f4a">glLoadMatrixf</a>((<span class="keywordtype">float</span> *)viewmat);
<a name="l01410"></a>01410         
<a name="l01411"></a>01411         <a class="code" href="../../df/dac/BKE__object_8h.html#a70d146af6270993ad7ef6f1eb9b85c3e">where_is_object_simul</a>(scene, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>);
<a name="l01412"></a>01412         
<a name="l01413"></a>01413         <span class="keywordflow">if</span> (la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a6c8bfeca1d8a74252bfe284de7d754cb">type</a>==<a class="code" href="../../d0/d16/DNA__lamp__types_8h.html#a863bf336582eacc01aec51ebf0a5f412">LA_SUN</a>) {
<a name="l01414"></a>01414             <span class="comment">/* sun lamp */</span>
<a name="l01415"></a>01415             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(direction, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[2]);
<a name="l01416"></a>01416             direction[3]= 0.0;
<a name="l01417"></a>01417 
<a name="l01418"></a>01418             glLightfv(GL_LIGHT0+count, GL_POSITION, direction); 
<a name="l01419"></a>01419         }
<a name="l01420"></a>01420         <span class="keywordflow">else</span> {
<a name="l01421"></a>01421             <span class="comment">/* other lamps with attenuation */</span>
<a name="l01422"></a>01422             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(position, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[3]);
<a name="l01423"></a>01423             position[3]= 1.0f;
<a name="l01424"></a>01424 
<a name="l01425"></a>01425             glLightfv(GL_LIGHT0+count, GL_POSITION, position); 
<a name="l01426"></a>01426             glLightf(GL_LIGHT0+count, GL_CONSTANT_ATTENUATION, 1.0);
<a name="l01427"></a>01427             glLightf(GL_LIGHT0+count, GL_LINEAR_ATTENUATION, la-&gt;<a class="code" href="../../d5/d72/structLamp.html#ac71d383b39dc0e0dfc6bb6243756471f">att1</a>/la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a7dfb335997197bb8a645e3540a91bf4d">dist</a>);
<a name="l01428"></a>01428             glLightf(GL_LIGHT0+count, GL_QUADRATIC_ATTENUATION, la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a74abd39c5f30e406fddd65cd33ae63a3">att2</a>/(la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a7dfb335997197bb8a645e3540a91bf4d">dist</a>*la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a7dfb335997197bb8a645e3540a91bf4d">dist</a>));
<a name="l01429"></a>01429             
<a name="l01430"></a>01430             <span class="keywordflow">if</span> (la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a6c8bfeca1d8a74252bfe284de7d754cb">type</a>==<a class="code" href="../../d0/d16/DNA__lamp__types_8h.html#a55ba7e9dc61979b7097cb11dace90bdb">LA_SPOT</a>) {
<a name="l01431"></a>01431                 <span class="comment">/* spot lamp */</span>
<a name="l01432"></a>01432                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a728bb3f38e925644683c9ace0cee4977">negate_v3_v3</a>(direction, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa29519ce424b73cbb5a638814f1080ea">obmat</a>[2]);
<a name="l01433"></a>01433                 glLightfv(GL_LIGHT0+count, GL_SPOT_DIRECTION, direction);
<a name="l01434"></a>01434                 glLightf(GL_LIGHT0+count, GL_SPOT_CUTOFF, la-&gt;<a class="code" href="../../d5/d72/structLamp.html#afbf90c480b2728c3b48a5680dd4a9487">spotsize</a>/2.0f);
<a name="l01435"></a>01435                 glLightf(GL_LIGHT0+count, GL_SPOT_EXPONENT, 128.0f*la-&gt;<a class="code" href="../../d5/d72/structLamp.html#afa8564cb927dc5cf1398f89526db5fc1">spotblend</a>);
<a name="l01436"></a>01436             }
<a name="l01437"></a>01437             <span class="keywordflow">else</span>
<a name="l01438"></a>01438                 glLightf(GL_LIGHT0+count, GL_SPOT_CUTOFF, 180.0);
<a name="l01439"></a>01439         }
<a name="l01440"></a>01440         
<a name="l01441"></a>01441         <span class="comment">/* setup energy */</span>
<a name="l01442"></a>01442         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#ad32a55246dbd69dbd150cd3fe480c734">mul_v3_v3fl</a>(energy, &amp;la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a78ed635336937d2f878451f2ad65e849">r</a>, la-&gt;<a class="code" href="../../d5/d72/structLamp.html#a92ccf572420771f58d0907c0ae410c42">energy</a>);
<a name="l01443"></a>01443         energy[3]= 1.0;
<a name="l01444"></a>01444 
<a name="l01445"></a>01445         glLightfv(GL_LIGHT0+count, GL_DIFFUSE, energy); 
<a name="l01446"></a>01446         glLightfv(GL_LIGHT0+count, GL_SPECULAR, energy);
<a name="l01447"></a>01447         glEnable(GL_LIGHT0+count);
<a name="l01448"></a>01448         
<a name="l01449"></a>01449         glPopMatrix();                  
<a name="l01450"></a>01450         
<a name="l01451"></a>01451         count++;
<a name="l01452"></a>01452         <span class="keywordflow">if</span> (count==8)
<a name="l01453"></a>01453             <span class="keywordflow">break</span>;
<a name="l01454"></a>01454     }
<a name="l01455"></a>01455 
<a name="l01456"></a>01456     <span class="keywordflow">return</span> count;
<a name="l01457"></a>01457 }
<a name="l01458"></a>01458 
<a name="l01459"></a>01459 <span class="comment">/* Default OpenGL State */</span>
<a name="l01460"></a>01460 
<a name="l01461"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#a5c5831cf1b6896465867fa3df3bdd064">01461</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#a5c5831cf1b6896465867fa3df3bdd064">GPU_state_init</a>(<span class="keywordtype">void</span>)
<a name="l01462"></a>01462 {
<a name="l01463"></a>01463     <span class="comment">/* also called when doing opengl rendering and in the game engine */</span>
<a name="l01464"></a>01464     <span class="keywordtype">float</span> mat_ambient[] = { 0.0, 0.0, 0.0, 0.0 };
<a name="l01465"></a>01465     <span class="keywordtype">float</span> mat_specular[] = { 0.5, 0.5, 0.5, 1.0 };
<a name="l01466"></a>01466     <span class="keywordtype">int</span> a, x, y;
<a name="l01467"></a>01467     GLubyte pat[32*32];
<a name="l01468"></a>01468     <span class="keyword">const</span> GLubyte *patc= pat;
<a name="l01469"></a>01469     
<a name="l01470"></a>01470     glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, mat_ambient);
<a name="l01471"></a>01471     glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, mat_specular);
<a name="l01472"></a>01472     glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, mat_specular);
<a name="l01473"></a>01473     glMateriali(GL_FRONT_AND_BACK, GL_SHININESS, 35);
<a name="l01474"></a>01474 
<a name="l01475"></a>01475     <a class="code" href="../../d3/df0/GPU__draw_8h.html#a11ec1773775fbc6588b9c18e1a649190">GPU_default_lights</a>();
<a name="l01476"></a>01476     
<a name="l01477"></a>01477     glDepthFunc(GL_LEQUAL);
<a name="l01478"></a>01478     <span class="comment">/* scaling matrices */</span>
<a name="l01479"></a>01479     glEnable(GL_NORMALIZE);
<a name="l01480"></a>01480 
<a name="l01481"></a>01481     glShadeModel(GL_FLAT);
<a name="l01482"></a>01482 
<a name="l01483"></a>01483     glDisable(GL_ALPHA_TEST);
<a name="l01484"></a>01484     glDisable(GL_BLEND);
<a name="l01485"></a>01485     glDisable(GL_DEPTH_TEST);
<a name="l01486"></a>01486     glDisable(GL_FOG);
<a name="l01487"></a>01487     glDisable(GL_LIGHTING);
<a name="l01488"></a>01488     glDisable(GL_LOGIC_OP);
<a name="l01489"></a>01489     glDisable(GL_STENCIL_TEST);
<a name="l01490"></a>01490     glDisable(GL_TEXTURE_1D);
<a name="l01491"></a>01491     glDisable(GL_TEXTURE_2D);
<a name="l01492"></a>01492 
<a name="l01493"></a>01493     <span class="comment">/* default disabled, enable should be local per function */</span>
<a name="l01494"></a>01494     glDisableClientState(GL_VERTEX_ARRAY);
<a name="l01495"></a>01495     glDisableClientState(GL_NORMAL_ARRAY);
<a name="l01496"></a>01496     glDisableClientState(GL_COLOR_ARRAY);
<a name="l01497"></a>01497     glDisableClientState(GL_TEXTURE_COORD_ARRAY);
<a name="l01498"></a>01498     
<a name="l01499"></a>01499     glPixelTransferi(GL_MAP_COLOR, GL_FALSE);
<a name="l01500"></a>01500     glPixelTransferi(GL_RED_SCALE, 1);
<a name="l01501"></a>01501     glPixelTransferi(GL_RED_BIAS, 0);
<a name="l01502"></a>01502     glPixelTransferi(GL_GREEN_SCALE, 1);
<a name="l01503"></a>01503     glPixelTransferi(GL_GREEN_BIAS, 0);
<a name="l01504"></a>01504     glPixelTransferi(GL_BLUE_SCALE, 1);
<a name="l01505"></a>01505     glPixelTransferi(GL_BLUE_BIAS, 0);
<a name="l01506"></a>01506     glPixelTransferi(GL_ALPHA_SCALE, 1);
<a name="l01507"></a>01507     glPixelTransferi(GL_ALPHA_BIAS, 0);
<a name="l01508"></a>01508     
<a name="l01509"></a>01509     glPixelTransferi(GL_DEPTH_BIAS, 0);
<a name="l01510"></a>01510     glPixelTransferi(GL_DEPTH_SCALE, 1);
<a name="l01511"></a>01511     glDepthRange(0.0, 1.0);
<a name="l01512"></a>01512     
<a name="l01513"></a>01513     a= 0;
<a name="l01514"></a>01514     <span class="keywordflow">for</span> (x=0; x&lt;32; x++) {
<a name="l01515"></a>01515         <span class="keywordflow">for</span> (y=0; y&lt;4; y++) {
<a name="l01516"></a>01516             <span class="keywordflow">if</span> ( (x) &amp; 1) pat[a++]= 0x88;
<a name="l01517"></a>01517             <span class="keywordflow">else</span> pat[a++]= 0x22;
<a name="l01518"></a>01518         }
<a name="l01519"></a>01519     }
<a name="l01520"></a>01520     
<a name="l01521"></a>01521     glPolygonStipple(patc);
<a name="l01522"></a>01522 
<a name="l01523"></a>01523     glMatrixMode(GL_TEXTURE);
<a name="l01524"></a>01524     glLoadIdentity();
<a name="l01525"></a>01525     glMatrixMode(GL_MODELVIEW);
<a name="l01526"></a>01526 
<a name="l01527"></a>01527     glFrontFace(GL_CCW);
<a name="l01528"></a>01528     glCullFace(GL_BACK);
<a name="l01529"></a>01529     glDisable(GL_CULL_FACE);
<a name="l01530"></a>01530 
<a name="l01531"></a>01531     <span class="comment">/* calling this makes drawing very slow when AA is not set up in ghost</span>
<a name="l01532"></a>01532 <span class="comment">     * on Linux/NVIDIA. */</span>
<a name="l01533"></a>01533     <span class="comment">// glDisable(GL_MULTISAMPLE);</span>
<a name="l01534"></a>01534 }
<a name="l01535"></a>01535 
<a name="l01536"></a>01536 <span class="comment">/* debugging aid */</span>
<a name="l01537"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">01537</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, GLenum type)
<a name="l01538"></a>01538 {
<a name="l01539"></a>01539     <span class="keywordtype">float</span> value[16];
<a name="l01540"></a>01540     <span class="keywordtype">int</span> a;
<a name="l01541"></a>01541     
<a name="l01542"></a>01542     memset(value, 0, <span class="keyword">sizeof</span>(value));
<a name="l01543"></a>01543     glGetFloatv(type, value);
<a name="l01544"></a>01544 
<a name="l01545"></a>01545     printf(<span class="stringliteral">&quot;%s: &quot;</span>, name);
<a name="l01546"></a>01546     <span class="keywordflow">for</span> (a=0; a&lt;16; a++)
<a name="l01547"></a>01547         printf(<span class="stringliteral">&quot;%.2f &quot;</span>, value[a]);
<a name="l01548"></a>01548     printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01549"></a>01549 }
<a name="l01550"></a>01550 
<a name="l01551"></a><a class="code" href="../../d6/d69/gpu__draw_8c.html#abb70b45c4c375b1b7e47628afc258d98">01551</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/df0/GPU__draw_8h.html#abb70b45c4c375b1b7e47628afc258d98">GPU_state_print</a>(<span class="keywordtype">void</span>)
<a name="l01552"></a>01552 {
<a name="l01553"></a>01553     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACCUM_ALPHA_BITS&quot;</span>, GL_ACCUM_ALPHA_BITS);
<a name="l01554"></a>01554     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACCUM_BLUE_BITS&quot;</span>, GL_ACCUM_BLUE_BITS);
<a name="l01555"></a>01555     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACCUM_CLEAR_VALUE&quot;</span>, GL_ACCUM_CLEAR_VALUE);
<a name="l01556"></a>01556     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACCUM_GREEN_BITS&quot;</span>, GL_ACCUM_GREEN_BITS);
<a name="l01557"></a>01557     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACCUM_RED_BITS&quot;</span>, GL_ACCUM_RED_BITS);
<a name="l01558"></a>01558     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ACTIVE_TEXTURE&quot;</span>, GL_ACTIVE_TEXTURE);
<a name="l01559"></a>01559     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALIASED_POINT_SIZE_RANGE&quot;</span>, GL_ALIASED_POINT_SIZE_RANGE);
<a name="l01560"></a>01560     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALIASED_LINE_WIDTH_RANGE&quot;</span>, GL_ALIASED_LINE_WIDTH_RANGE);
<a name="l01561"></a>01561     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_BIAS&quot;</span>, GL_ALPHA_BIAS);
<a name="l01562"></a>01562     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_BITS&quot;</span>, GL_ALPHA_BITS);
<a name="l01563"></a>01563     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_SCALE&quot;</span>, GL_ALPHA_SCALE);
<a name="l01564"></a>01564     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_TEST&quot;</span>, GL_ALPHA_TEST);
<a name="l01565"></a>01565     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_TEST_FUNC&quot;</span>, GL_ALPHA_TEST_FUNC);
<a name="l01566"></a>01566     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ALPHA_TEST_REF&quot;</span>, GL_ALPHA_TEST_REF);
<a name="l01567"></a>01567     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ARRAY_BUFFER_BINDING&quot;</span>, GL_ARRAY_BUFFER_BINDING);
<a name="l01568"></a>01568     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ATTRIB_STACK_DEPTH&quot;</span>, GL_ATTRIB_STACK_DEPTH);
<a name="l01569"></a>01569     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_AUTO_NORMAL&quot;</span>, GL_AUTO_NORMAL);
<a name="l01570"></a>01570     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_AUX_BUFFERS&quot;</span>, GL_AUX_BUFFERS);
<a name="l01571"></a>01571     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND&quot;</span>, GL_BLEND);
<a name="l01572"></a>01572     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_COLOR&quot;</span>, GL_BLEND_COLOR);
<a name="l01573"></a>01573     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_DST_ALPHA&quot;</span>, GL_BLEND_DST_ALPHA);
<a name="l01574"></a>01574     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_DST_RGB&quot;</span>, GL_BLEND_DST_RGB);
<a name="l01575"></a>01575     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_EQUATION_RGB&quot;</span>, GL_BLEND_EQUATION_RGB);
<a name="l01576"></a>01576     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_EQUATION_ALPHA&quot;</span>, GL_BLEND_EQUATION_ALPHA);
<a name="l01577"></a>01577     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_SRC_ALPHA&quot;</span>, GL_BLEND_SRC_ALPHA);
<a name="l01578"></a>01578     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLEND_SRC_RGB&quot;</span>, GL_BLEND_SRC_RGB);
<a name="l01579"></a>01579     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLUE_BIAS&quot;</span>, GL_BLUE_BIAS);
<a name="l01580"></a>01580     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLUE_BITS&quot;</span>, GL_BLUE_BITS);
<a name="l01581"></a>01581     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_BLUE_SCALE&quot;</span>, GL_BLUE_SCALE);
<a name="l01582"></a>01582     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CLIENT_ACTIVE_TEXTURE&quot;</span>, GL_CLIENT_ACTIVE_TEXTURE);
<a name="l01583"></a>01583     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CLIENT_ATTRIB_STACK_DEPTH&quot;</span>, GL_CLIENT_ATTRIB_STACK_DEPTH);
<a name="l01584"></a>01584     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CLIP_PLANE0&quot;</span>, GL_CLIP_PLANE0);
<a name="l01585"></a>01585     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_ARRAY&quot;</span>, GL_COLOR_ARRAY);
<a name="l01586"></a>01586     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_ARRAY_BUFFER_BINDING&quot;</span>, GL_COLOR_ARRAY_BUFFER_BINDING);
<a name="l01587"></a>01587     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_ARRAY_SIZE&quot;</span>, GL_COLOR_ARRAY_SIZE);
<a name="l01588"></a>01588     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_ARRAY_STRIDE&quot;</span>, GL_COLOR_ARRAY_STRIDE);
<a name="l01589"></a>01589     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_ARRAY_TYPE&quot;</span>, GL_COLOR_ARRAY_TYPE);
<a name="l01590"></a>01590     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_CLEAR_VALUE&quot;</span>, GL_COLOR_CLEAR_VALUE);
<a name="l01591"></a>01591     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_LOGIC_OP&quot;</span>, GL_COLOR_LOGIC_OP);
<a name="l01592"></a>01592     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_MATERIAL&quot;</span>, GL_COLOR_MATERIAL);
<a name="l01593"></a>01593     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_MATERIAL_FACE&quot;</span>, GL_COLOR_MATERIAL_FACE);
<a name="l01594"></a>01594     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_MATERIAL_PARAMETER&quot;</span>, GL_COLOR_MATERIAL_PARAMETER);
<a name="l01595"></a>01595     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_MATRIX&quot;</span>, GL_COLOR_MATRIX);
<a name="l01596"></a>01596     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_MATRIX_STACK_DEPTH&quot;</span>, GL_COLOR_MATRIX_STACK_DEPTH);
<a name="l01597"></a>01597     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_SUM&quot;</span>, GL_COLOR_SUM);
<a name="l01598"></a>01598     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_TABLE&quot;</span>, GL_COLOR_TABLE);
<a name="l01599"></a>01599     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COLOR_WRITEMASK&quot;</span>, GL_COLOR_WRITEMASK);
<a name="l01600"></a>01600     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_COMPRESSED_TEXTURE_FORMATS&quot;</span>, GL_COMPRESSED_TEXTURE_FORMATS);
<a name="l01601"></a>01601     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CONVOLUTION_1D&quot;</span>, GL_CONVOLUTION_1D);
<a name="l01602"></a>01602     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CONVOLUTION_2D&quot;</span>, GL_CONVOLUTION_2D);
<a name="l01603"></a>01603     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CULL_FACE&quot;</span>, GL_CULL_FACE);
<a name="l01604"></a>01604     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CULL_FACE_MODE&quot;</span>, GL_CULL_FACE_MODE);
<a name="l01605"></a>01605     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_COLOR&quot;</span>, GL_CURRENT_COLOR);
<a name="l01606"></a>01606     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_FOG_COORD&quot;</span>, GL_CURRENT_FOG_COORD);
<a name="l01607"></a>01607     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_INDEX&quot;</span>, GL_CURRENT_INDEX);
<a name="l01608"></a>01608     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_NORMAL&quot;</span>, GL_CURRENT_NORMAL);
<a name="l01609"></a>01609     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_PROGRAM&quot;</span>, GL_CURRENT_PROGRAM);
<a name="l01610"></a>01610     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_COLOR&quot;</span>, GL_CURRENT_RASTER_COLOR);
<a name="l01611"></a>01611     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_DISTANCE&quot;</span>, GL_CURRENT_RASTER_DISTANCE);
<a name="l01612"></a>01612     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_INDEX&quot;</span>, GL_CURRENT_RASTER_INDEX);
<a name="l01613"></a>01613     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_POSITION&quot;</span>, GL_CURRENT_RASTER_POSITION);
<a name="l01614"></a>01614     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_POSITION_VALID&quot;</span>, GL_CURRENT_RASTER_POSITION_VALID);
<a name="l01615"></a>01615     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_SECONDARY_COLOR&quot;</span>, GL_CURRENT_RASTER_SECONDARY_COLOR);
<a name="l01616"></a>01616     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_RASTER_TEXTURE_COORDS&quot;</span>, GL_CURRENT_RASTER_TEXTURE_COORDS);
<a name="l01617"></a>01617     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_SECONDARY_COLOR&quot;</span>, GL_CURRENT_SECONDARY_COLOR);
<a name="l01618"></a>01618     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_CURRENT_TEXTURE_COORDS&quot;</span>, GL_CURRENT_TEXTURE_COORDS);
<a name="l01619"></a>01619     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_BIAS&quot;</span>, GL_DEPTH_BIAS);
<a name="l01620"></a>01620     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_BITS&quot;</span>, GL_DEPTH_BITS);
<a name="l01621"></a>01621     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_CLEAR_VALUE&quot;</span>, GL_DEPTH_CLEAR_VALUE);
<a name="l01622"></a>01622     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_FUNC&quot;</span>, GL_DEPTH_FUNC);
<a name="l01623"></a>01623     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_RANGE&quot;</span>, GL_DEPTH_RANGE);
<a name="l01624"></a>01624     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_SCALE&quot;</span>, GL_DEPTH_SCALE);
<a name="l01625"></a>01625     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_TEST&quot;</span>, GL_DEPTH_TEST);
<a name="l01626"></a>01626     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DEPTH_WRITEMASK&quot;</span>, GL_DEPTH_WRITEMASK);
<a name="l01627"></a>01627     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DITHER&quot;</span>, GL_DITHER);
<a name="l01628"></a>01628     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DOUBLEBUFFER&quot;</span>, GL_DOUBLEBUFFER);
<a name="l01629"></a>01629     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DRAW_BUFFER&quot;</span>, GL_DRAW_BUFFER);
<a name="l01630"></a>01630     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_DRAW_BUFFER0&quot;</span>, GL_DRAW_BUFFER0);
<a name="l01631"></a>01631     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_EDGE_FLAG&quot;</span>, GL_EDGE_FLAG);
<a name="l01632"></a>01632     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_EDGE_FLAG_ARRAY&quot;</span>, GL_EDGE_FLAG_ARRAY);
<a name="l01633"></a>01633     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_EDGE_FLAG_ARRAY_BUFFER_BINDING&quot;</span>, GL_EDGE_FLAG_ARRAY_BUFFER_BINDING);
<a name="l01634"></a>01634     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_EDGE_FLAG_ARRAY_STRIDE&quot;</span>, GL_EDGE_FLAG_ARRAY_STRIDE);
<a name="l01635"></a>01635     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ELEMENT_ARRAY_BUFFER_BINDING&quot;</span>, GL_ELEMENT_ARRAY_BUFFER_BINDING);
<a name="l01636"></a>01636     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FEEDBACK_BUFFER_SIZE&quot;</span>, GL_FEEDBACK_BUFFER_SIZE);
<a name="l01637"></a>01637     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FEEDBACK_BUFFER_TYPE&quot;</span>, GL_FEEDBACK_BUFFER_TYPE);
<a name="l01638"></a>01638     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG&quot;</span>, GL_FOG);
<a name="l01639"></a>01639     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COORD_ARRAY&quot;</span>, GL_FOG_COORD_ARRAY);
<a name="l01640"></a>01640     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COORD_ARRAY_BUFFER_BINDING&quot;</span>, GL_FOG_COORD_ARRAY_BUFFER_BINDING);
<a name="l01641"></a>01641     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COORD_ARRAY_STRIDE&quot;</span>, GL_FOG_COORD_ARRAY_STRIDE);
<a name="l01642"></a>01642     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COORD_ARRAY_TYPE&quot;</span>, GL_FOG_COORD_ARRAY_TYPE);
<a name="l01643"></a>01643     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COORD_SRC&quot;</span>, GL_FOG_COORD_SRC);
<a name="l01644"></a>01644     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_COLOR&quot;</span>, GL_FOG_COLOR);
<a name="l01645"></a>01645     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_DENSITY&quot;</span>, GL_FOG_DENSITY);
<a name="l01646"></a>01646     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_END&quot;</span>, GL_FOG_END);
<a name="l01647"></a>01647     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_HINT&quot;</span>, GL_FOG_HINT);
<a name="l01648"></a>01648     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_INDEX&quot;</span>, GL_FOG_INDEX);
<a name="l01649"></a>01649     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_MODE&quot;</span>, GL_FOG_MODE);
<a name="l01650"></a>01650     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FOG_START&quot;</span>, GL_FOG_START);
<a name="l01651"></a>01651     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FRAGMENT_SHADER_DERIVATIVE_HINT&quot;</span>, GL_FRAGMENT_SHADER_DERIVATIVE_HINT);
<a name="l01652"></a>01652     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_FRONT_FACE&quot;</span>, GL_FRONT_FACE);
<a name="l01653"></a>01653     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_GENERATE_MIPMAP_HINT&quot;</span>, GL_GENERATE_MIPMAP_HINT);
<a name="l01654"></a>01654     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_GREEN_BIAS&quot;</span>, GL_GREEN_BIAS);
<a name="l01655"></a>01655     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_GREEN_BITS&quot;</span>, GL_GREEN_BITS);
<a name="l01656"></a>01656     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_GREEN_SCALE&quot;</span>, GL_GREEN_SCALE);
<a name="l01657"></a>01657     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_HISTOGRAM&quot;</span>, GL_HISTOGRAM);
<a name="l01658"></a>01658     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_ARRAY&quot;</span>, GL_INDEX_ARRAY);
<a name="l01659"></a>01659     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_ARRAY_BUFFER_BINDING&quot;</span>, GL_INDEX_ARRAY_BUFFER_BINDING);
<a name="l01660"></a>01660     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_ARRAY_STRIDE&quot;</span>, GL_INDEX_ARRAY_STRIDE);
<a name="l01661"></a>01661     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_ARRAY_TYPE&quot;</span>, GL_INDEX_ARRAY_TYPE);
<a name="l01662"></a>01662     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_BITS&quot;</span>, GL_INDEX_BITS);
<a name="l01663"></a>01663     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_CLEAR_VALUE&quot;</span>, GL_INDEX_CLEAR_VALUE);
<a name="l01664"></a>01664     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_LOGIC_OP&quot;</span>, GL_INDEX_LOGIC_OP);
<a name="l01665"></a>01665     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_MODE&quot;</span>, GL_INDEX_MODE);
<a name="l01666"></a>01666     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_OFFSET&quot;</span>, GL_INDEX_OFFSET);
<a name="l01667"></a>01667     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_SHIFT&quot;</span>, GL_INDEX_SHIFT);
<a name="l01668"></a>01668     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_INDEX_WRITEMASK&quot;</span>, GL_INDEX_WRITEMASK);
<a name="l01669"></a>01669     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHT0&quot;</span>, GL_LIGHT0);
<a name="l01670"></a>01670     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHTING&quot;</span>, GL_LIGHTING);
<a name="l01671"></a>01671     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHT_MODEL_AMBIENT&quot;</span>, GL_LIGHT_MODEL_AMBIENT);
<a name="l01672"></a>01672     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHT_MODEL_COLOR_CONTROL&quot;</span>, GL_LIGHT_MODEL_COLOR_CONTROL);
<a name="l01673"></a>01673     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHT_MODEL_LOCAL_VIEWER&quot;</span>, GL_LIGHT_MODEL_LOCAL_VIEWER);
<a name="l01674"></a>01674     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIGHT_MODEL_TWO_SIDE&quot;</span>, GL_LIGHT_MODEL_TWO_SIDE);
<a name="l01675"></a>01675     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_SMOOTH&quot;</span>, GL_LINE_SMOOTH);
<a name="l01676"></a>01676     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_SMOOTH_HINT&quot;</span>, GL_LINE_SMOOTH_HINT);
<a name="l01677"></a>01677     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_STIPPLE&quot;</span>, GL_LINE_STIPPLE);
<a name="l01678"></a>01678     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_STIPPLE_PATTERN&quot;</span>, GL_LINE_STIPPLE_PATTERN);
<a name="l01679"></a>01679     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_STIPPLE_REPEAT&quot;</span>, GL_LINE_STIPPLE_REPEAT);
<a name="l01680"></a>01680     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_WIDTH&quot;</span>, GL_LINE_WIDTH);
<a name="l01681"></a>01681     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_WIDTH_GRANULARITY&quot;</span>, GL_LINE_WIDTH_GRANULARITY);
<a name="l01682"></a>01682     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LINE_WIDTH_RANGE&quot;</span>, GL_LINE_WIDTH_RANGE);
<a name="l01683"></a>01683     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIST_BASE&quot;</span>, GL_LIST_BASE);
<a name="l01684"></a>01684     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIST_INDEX&quot;</span>, GL_LIST_INDEX);
<a name="l01685"></a>01685     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LIST_MODE&quot;</span>, GL_LIST_MODE);
<a name="l01686"></a>01686     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_LOGIC_OP_MODE&quot;</span>, GL_LOGIC_OP_MODE);
<a name="l01687"></a>01687     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_COLOR_4&quot;</span>, GL_MAP1_COLOR_4);
<a name="l01688"></a>01688     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_GRID_DOMAIN&quot;</span>, GL_MAP1_GRID_DOMAIN);
<a name="l01689"></a>01689     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_GRID_SEGMENTS&quot;</span>, GL_MAP1_GRID_SEGMENTS);
<a name="l01690"></a>01690     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_INDEX&quot;</span>, GL_MAP1_INDEX);
<a name="l01691"></a>01691     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_NORMAL&quot;</span>, GL_MAP1_NORMAL);
<a name="l01692"></a>01692     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_TEXTURE_COORD_1&quot;</span>, GL_MAP1_TEXTURE_COORD_1);
<a name="l01693"></a>01693     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_TEXTURE_COORD_2&quot;</span>, GL_MAP1_TEXTURE_COORD_2);
<a name="l01694"></a>01694     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_TEXTURE_COORD_3&quot;</span>, GL_MAP1_TEXTURE_COORD_3);
<a name="l01695"></a>01695     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_TEXTURE_COORD_4&quot;</span>, GL_MAP1_TEXTURE_COORD_4);
<a name="l01696"></a>01696     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_VERTEX_3&quot;</span>, GL_MAP1_VERTEX_3);
<a name="l01697"></a>01697     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP1_VERTEX_4&quot;</span>, GL_MAP1_VERTEX_4);
<a name="l01698"></a>01698     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_COLOR_4&quot;</span>, GL_MAP2_COLOR_4);
<a name="l01699"></a>01699     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_GRID_DOMAIN&quot;</span>, GL_MAP2_GRID_DOMAIN);
<a name="l01700"></a>01700     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_GRID_SEGMENTS&quot;</span>, GL_MAP2_GRID_SEGMENTS);
<a name="l01701"></a>01701     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_INDEX&quot;</span>, GL_MAP2_INDEX);
<a name="l01702"></a>01702     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_NORMAL&quot;</span>, GL_MAP2_NORMAL);
<a name="l01703"></a>01703     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_TEXTURE_COORD_1&quot;</span>, GL_MAP2_TEXTURE_COORD_1);
<a name="l01704"></a>01704     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_TEXTURE_COORD_2&quot;</span>, GL_MAP2_TEXTURE_COORD_2);
<a name="l01705"></a>01705     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_TEXTURE_COORD_3&quot;</span>, GL_MAP2_TEXTURE_COORD_3);
<a name="l01706"></a>01706     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_TEXTURE_COORD_4&quot;</span>, GL_MAP2_TEXTURE_COORD_4);
<a name="l01707"></a>01707     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_VERTEX_3&quot;</span>, GL_MAP2_VERTEX_3);
<a name="l01708"></a>01708     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP2_VERTEX_4&quot;</span>, GL_MAP2_VERTEX_4);
<a name="l01709"></a>01709     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP_COLOR&quot;</span>, GL_MAP_COLOR);
<a name="l01710"></a>01710     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAP_STENCIL&quot;</span>, GL_MAP_STENCIL);
<a name="l01711"></a>01711     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MATRIX_MODE&quot;</span>, GL_MATRIX_MODE);
<a name="l01712"></a>01712     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_3D_TEXTURE_SIZE&quot;</span>, GL_MAX_3D_TEXTURE_SIZE);
<a name="l01713"></a>01713     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_CLIENT_ATTRIB_STACK_DEPTH&quot;</span>, GL_MAX_CLIENT_ATTRIB_STACK_DEPTH);
<a name="l01714"></a>01714     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_ATTRIB_STACK_DEPTH&quot;</span>, GL_MAX_ATTRIB_STACK_DEPTH);
<a name="l01715"></a>01715     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_CLIP_PLANES&quot;</span>, GL_MAX_CLIP_PLANES);
<a name="l01716"></a>01716     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_COLOR_MATRIX_STACK_DEPTH&quot;</span>, GL_MAX_COLOR_MATRIX_STACK_DEPTH);
<a name="l01717"></a>01717     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS&quot;</span>, GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS);
<a name="l01718"></a>01718     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_CUBE_MAP_TEXTURE_SIZE&quot;</span>, GL_MAX_CUBE_MAP_TEXTURE_SIZE);
<a name="l01719"></a>01719     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_DRAW_BUFFERS&quot;</span>, GL_MAX_DRAW_BUFFERS);
<a name="l01720"></a>01720     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_ELEMENTS_INDICES&quot;</span>, GL_MAX_ELEMENTS_INDICES);
<a name="l01721"></a>01721     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_ELEMENTS_VERTICES&quot;</span>, GL_MAX_ELEMENTS_VERTICES);
<a name="l01722"></a>01722     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_EVAL_ORDER&quot;</span>, GL_MAX_EVAL_ORDER);
<a name="l01723"></a>01723     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_FRAGMENT_UNIFORM_COMPONENTS&quot;</span>, GL_MAX_FRAGMENT_UNIFORM_COMPONENTS);
<a name="l01724"></a>01724     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_LIGHTS&quot;</span>, GL_MAX_LIGHTS);
<a name="l01725"></a>01725     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_LIST_NESTING&quot;</span>, GL_MAX_LIST_NESTING);
<a name="l01726"></a>01726     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_MODELVIEW_STACK_DEPTH&quot;</span>, GL_MAX_MODELVIEW_STACK_DEPTH);
<a name="l01727"></a>01727     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_NAME_STACK_DEPTH&quot;</span>, GL_MAX_NAME_STACK_DEPTH);
<a name="l01728"></a>01728     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_PIXEL_MAP_TABLE&quot;</span>, GL_MAX_PIXEL_MAP_TABLE);
<a name="l01729"></a>01729     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_PROJECTION_STACK_DEPTH&quot;</span>, GL_MAX_PROJECTION_STACK_DEPTH);
<a name="l01730"></a>01730     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_COORDS&quot;</span>, GL_MAX_TEXTURE_COORDS);
<a name="l01731"></a>01731     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_IMAGE_UNITS&quot;</span>, GL_MAX_TEXTURE_IMAGE_UNITS);
<a name="l01732"></a>01732     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_LOD_BIAS&quot;</span>, GL_MAX_TEXTURE_LOD_BIAS);
<a name="l01733"></a>01733     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_SIZE&quot;</span>, GL_MAX_TEXTURE_SIZE);
<a name="l01734"></a>01734     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_STACK_DEPTH&quot;</span>, GL_MAX_TEXTURE_STACK_DEPTH);
<a name="l01735"></a>01735     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_TEXTURE_UNITS&quot;</span>, GL_MAX_TEXTURE_UNITS);
<a name="l01736"></a>01736     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_VARYING_FLOATS&quot;</span>, GL_MAX_VARYING_FLOATS);
<a name="l01737"></a>01737     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_VERTEX_ATTRIBS&quot;</span>, GL_MAX_VERTEX_ATTRIBS);
<a name="l01738"></a>01738     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS&quot;</span>, GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS);
<a name="l01739"></a>01739     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_VERTEX_UNIFORM_COMPONENTS&quot;</span>, GL_MAX_VERTEX_UNIFORM_COMPONENTS);
<a name="l01740"></a>01740     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MAX_VIEWPORT_DIMS&quot;</span>, GL_MAX_VIEWPORT_DIMS);
<a name="l01741"></a>01741     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MINMAX&quot;</span>, GL_MINMAX);
<a name="l01742"></a>01742     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MODELVIEW_MATRIX&quot;</span>, GL_MODELVIEW_MATRIX);
<a name="l01743"></a>01743     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_MODELVIEW_STACK_DEPTH&quot;</span>, GL_MODELVIEW_STACK_DEPTH);
<a name="l01744"></a>01744     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NAME_STACK_DEPTH&quot;</span>, GL_NAME_STACK_DEPTH);
<a name="l01745"></a>01745     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NORMAL_ARRAY&quot;</span>, GL_NORMAL_ARRAY);
<a name="l01746"></a>01746     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NORMAL_ARRAY_BUFFER_BINDING&quot;</span>, GL_NORMAL_ARRAY_BUFFER_BINDING);
<a name="l01747"></a>01747     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NORMAL_ARRAY_STRIDE&quot;</span>, GL_NORMAL_ARRAY_STRIDE);
<a name="l01748"></a>01748     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NORMAL_ARRAY_TYPE&quot;</span>, GL_NORMAL_ARRAY_TYPE);
<a name="l01749"></a>01749     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NORMALIZE&quot;</span>, GL_NORMALIZE);
<a name="l01750"></a>01750     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_NUM_COMPRESSED_TEXTURE_FORMATS&quot;</span>, GL_NUM_COMPRESSED_TEXTURE_FORMATS);
<a name="l01751"></a>01751     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_ALIGNMENT&quot;</span>, GL_PACK_ALIGNMENT);
<a name="l01752"></a>01752     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_IMAGE_HEIGHT&quot;</span>, GL_PACK_IMAGE_HEIGHT);
<a name="l01753"></a>01753     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_LSB_FIRST&quot;</span>, GL_PACK_LSB_FIRST);
<a name="l01754"></a>01754     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_ROW_LENGTH&quot;</span>, GL_PACK_ROW_LENGTH);
<a name="l01755"></a>01755     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_SKIP_IMAGES&quot;</span>, GL_PACK_SKIP_IMAGES);
<a name="l01756"></a>01756     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_SKIP_PIXELS&quot;</span>, GL_PACK_SKIP_PIXELS);
<a name="l01757"></a>01757     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_SKIP_ROWS&quot;</span>, GL_PACK_SKIP_ROWS);
<a name="l01758"></a>01758     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PACK_SWAP_BYTES&quot;</span>, GL_PACK_SWAP_BYTES);
<a name="l01759"></a>01759     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PERSPECTIVE_CORRECTION_HINT&quot;</span>, GL_PERSPECTIVE_CORRECTION_HINT);
<a name="l01760"></a>01760     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_A_TO_A_SIZE&quot;</span>, GL_PIXEL_MAP_A_TO_A_SIZE);
<a name="l01761"></a>01761     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_B_TO_B_SIZE&quot;</span>, GL_PIXEL_MAP_B_TO_B_SIZE);
<a name="l01762"></a>01762     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_G_TO_G_SIZE&quot;</span>, GL_PIXEL_MAP_G_TO_G_SIZE);
<a name="l01763"></a>01763     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_I_TO_A_SIZE&quot;</span>, GL_PIXEL_MAP_I_TO_A_SIZE);
<a name="l01764"></a>01764     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_I_TO_B_SIZE&quot;</span>, GL_PIXEL_MAP_I_TO_B_SIZE);
<a name="l01765"></a>01765     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_I_TO_G_SIZE&quot;</span>, GL_PIXEL_MAP_I_TO_G_SIZE);
<a name="l01766"></a>01766     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_I_TO_I_SIZE&quot;</span>, GL_PIXEL_MAP_I_TO_I_SIZE);
<a name="l01767"></a>01767     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_I_TO_R_SIZE&quot;</span>, GL_PIXEL_MAP_I_TO_R_SIZE);
<a name="l01768"></a>01768     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_R_TO_R_SIZE&quot;</span>, GL_PIXEL_MAP_R_TO_R_SIZE);
<a name="l01769"></a>01769     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_MAP_S_TO_S_SIZE&quot;</span>, GL_PIXEL_MAP_S_TO_S_SIZE);
<a name="l01770"></a>01770     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_PACK_BUFFER_BINDING&quot;</span>, GL_PIXEL_PACK_BUFFER_BINDING);
<a name="l01771"></a>01771     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PIXEL_UNPACK_BUFFER_BINDING&quot;</span>, GL_PIXEL_UNPACK_BUFFER_BINDING);
<a name="l01772"></a>01772     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_DISTANCE_ATTENUATION&quot;</span>, GL_POINT_DISTANCE_ATTENUATION);
<a name="l01773"></a>01773     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_FADE_THRESHOLD_SIZE&quot;</span>, GL_POINT_FADE_THRESHOLD_SIZE);
<a name="l01774"></a>01774     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SIZE&quot;</span>, GL_POINT_SIZE);
<a name="l01775"></a>01775     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SIZE_GRANULARITY&quot;</span>, GL_POINT_SIZE_GRANULARITY);
<a name="l01776"></a>01776     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SIZE_MAX&quot;</span>, GL_POINT_SIZE_MAX);
<a name="l01777"></a>01777     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SIZE_MIN&quot;</span>, GL_POINT_SIZE_MIN);
<a name="l01778"></a>01778     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SIZE_RANGE&quot;</span>, GL_POINT_SIZE_RANGE);
<a name="l01779"></a>01779     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SMOOTH&quot;</span>, GL_POINT_SMOOTH);
<a name="l01780"></a>01780     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SMOOTH_HINT&quot;</span>, GL_POINT_SMOOTH_HINT);
<a name="l01781"></a>01781     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POINT_SPRITE&quot;</span>, GL_POINT_SPRITE);
<a name="l01782"></a>01782     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_MODE&quot;</span>, GL_POLYGON_MODE);
<a name="l01783"></a>01783     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_OFFSET_FACTOR&quot;</span>, GL_POLYGON_OFFSET_FACTOR);
<a name="l01784"></a>01784     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_OFFSET_UNITS&quot;</span>, GL_POLYGON_OFFSET_UNITS);
<a name="l01785"></a>01785     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_OFFSET_FILL&quot;</span>, GL_POLYGON_OFFSET_FILL);
<a name="l01786"></a>01786     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_OFFSET_LINE&quot;</span>, GL_POLYGON_OFFSET_LINE);
<a name="l01787"></a>01787     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_OFFSET_POINT&quot;</span>, GL_POLYGON_OFFSET_POINT);
<a name="l01788"></a>01788     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_SMOOTH&quot;</span>, GL_POLYGON_SMOOTH);
<a name="l01789"></a>01789     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_SMOOTH_HINT&quot;</span>, GL_POLYGON_SMOOTH_HINT);
<a name="l01790"></a>01790     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POLYGON_STIPPLE&quot;</span>, GL_POLYGON_STIPPLE);
<a name="l01791"></a>01791     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_COLOR_TABLE&quot;</span>, GL_POST_COLOR_MATRIX_COLOR_TABLE);
<a name="l01792"></a>01792     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_RED_BIAS&quot;</span>, GL_POST_COLOR_MATRIX_RED_BIAS);
<a name="l01793"></a>01793     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_GREEN_BIAS&quot;</span>, GL_POST_COLOR_MATRIX_GREEN_BIAS);
<a name="l01794"></a>01794     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_BLUE_BIAS&quot;</span>, GL_POST_COLOR_MATRIX_BLUE_BIAS);
<a name="l01795"></a>01795     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_ALPHA_BIAS&quot;</span>, GL_POST_COLOR_MATRIX_ALPHA_BIAS);
<a name="l01796"></a>01796     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_RED_SCALE&quot;</span>, GL_POST_COLOR_MATRIX_RED_SCALE);
<a name="l01797"></a>01797     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_GREEN_SCALE&quot;</span>, GL_POST_COLOR_MATRIX_GREEN_SCALE);
<a name="l01798"></a>01798     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_BLUE_SCALE&quot;</span>, GL_POST_COLOR_MATRIX_BLUE_SCALE);
<a name="l01799"></a>01799     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_COLOR_MATRIX_ALPHA_SCALE&quot;</span>, GL_POST_COLOR_MATRIX_ALPHA_SCALE);
<a name="l01800"></a>01800     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_COLOR_TABLE&quot;</span>, GL_POST_CONVOLUTION_COLOR_TABLE);
<a name="l01801"></a>01801     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_RED_BIAS&quot;</span>, GL_POST_CONVOLUTION_RED_BIAS);
<a name="l01802"></a>01802     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_GREEN_BIAS&quot;</span>, GL_POST_CONVOLUTION_GREEN_BIAS);
<a name="l01803"></a>01803     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_BLUE_BIAS&quot;</span>, GL_POST_CONVOLUTION_BLUE_BIAS);
<a name="l01804"></a>01804     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_ALPHA_BIAS&quot;</span>, GL_POST_CONVOLUTION_ALPHA_BIAS);
<a name="l01805"></a>01805     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_RED_SCALE&quot;</span>, GL_POST_CONVOLUTION_RED_SCALE);
<a name="l01806"></a>01806     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_GREEN_SCALE&quot;</span>, GL_POST_CONVOLUTION_GREEN_SCALE);
<a name="l01807"></a>01807     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_BLUE_SCALE&quot;</span>, GL_POST_CONVOLUTION_BLUE_SCALE);
<a name="l01808"></a>01808     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_POST_CONVOLUTION_ALPHA_SCALE&quot;</span>, GL_POST_CONVOLUTION_ALPHA_SCALE);
<a name="l01809"></a>01809     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PROJECTION_MATRIX&quot;</span>, GL_PROJECTION_MATRIX);
<a name="l01810"></a>01810     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_PROJECTION_STACK_DEPTH&quot;</span>, GL_PROJECTION_STACK_DEPTH);
<a name="l01811"></a>01811     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_READ_BUFFER&quot;</span>, GL_READ_BUFFER);
<a name="l01812"></a>01812     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RED_BIAS&quot;</span>, GL_RED_BIAS);
<a name="l01813"></a>01813     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RED_BITS&quot;</span>, GL_RED_BITS);
<a name="l01814"></a>01814     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RED_SCALE&quot;</span>, GL_RED_SCALE);
<a name="l01815"></a>01815     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RENDER_MODE&quot;</span>, GL_RENDER_MODE);
<a name="l01816"></a>01816     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RESCALE_NORMAL&quot;</span>, GL_RESCALE_NORMAL);
<a name="l01817"></a>01817     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_RGBA_MODE&quot;</span>, GL_RGBA_MODE);
<a name="l01818"></a>01818     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SAMPLE_BUFFERS&quot;</span>, GL_SAMPLE_BUFFERS);
<a name="l01819"></a>01819     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SAMPLE_COVERAGE_VALUE&quot;</span>, GL_SAMPLE_COVERAGE_VALUE);
<a name="l01820"></a>01820     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SAMPLE_COVERAGE_INVERT&quot;</span>, GL_SAMPLE_COVERAGE_INVERT);
<a name="l01821"></a>01821     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SAMPLES&quot;</span>, GL_SAMPLES);
<a name="l01822"></a>01822     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SCISSOR_BOX&quot;</span>, GL_SCISSOR_BOX);
<a name="l01823"></a>01823     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SCISSOR_TEST&quot;</span>, GL_SCISSOR_TEST);
<a name="l01824"></a>01824     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SECONDARY_COLOR_ARRAY&quot;</span>, GL_SECONDARY_COLOR_ARRAY);
<a name="l01825"></a>01825     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SECONDARY_COLOR_ARRAY_BUFFER_BINDING&quot;</span>, GL_SECONDARY_COLOR_ARRAY_BUFFER_BINDING);
<a name="l01826"></a>01826     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SECONDARY_COLOR_ARRAY_SIZE&quot;</span>, GL_SECONDARY_COLOR_ARRAY_SIZE);
<a name="l01827"></a>01827     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SECONDARY_COLOR_ARRAY_STRIDE&quot;</span>, GL_SECONDARY_COLOR_ARRAY_STRIDE);
<a name="l01828"></a>01828     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SECONDARY_COLOR_ARRAY_TYPE&quot;</span>, GL_SECONDARY_COLOR_ARRAY_TYPE);
<a name="l01829"></a>01829     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SELECTION_BUFFER_SIZE&quot;</span>, GL_SELECTION_BUFFER_SIZE);
<a name="l01830"></a>01830     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SEPARABLE_2D&quot;</span>, GL_SEPARABLE_2D);
<a name="l01831"></a>01831     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SHADE_MODEL&quot;</span>, GL_SHADE_MODEL);
<a name="l01832"></a>01832     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SMOOTH_LINE_WIDTH_RANGE&quot;</span>, GL_SMOOTH_LINE_WIDTH_RANGE);
<a name="l01833"></a>01833     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SMOOTH_LINE_WIDTH_GRANULARITY&quot;</span>, GL_SMOOTH_LINE_WIDTH_GRANULARITY);
<a name="l01834"></a>01834     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SMOOTH_POINT_SIZE_RANGE&quot;</span>, GL_SMOOTH_POINT_SIZE_RANGE);
<a name="l01835"></a>01835     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SMOOTH_POINT_SIZE_GRANULARITY&quot;</span>, GL_SMOOTH_POINT_SIZE_GRANULARITY);
<a name="l01836"></a>01836     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_FAIL&quot;</span>, GL_STENCIL_BACK_FAIL);
<a name="l01837"></a>01837     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_FUNC&quot;</span>, GL_STENCIL_BACK_FUNC);
<a name="l01838"></a>01838     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_PASS_DEPTH_FAIL&quot;</span>, GL_STENCIL_BACK_PASS_DEPTH_FAIL);
<a name="l01839"></a>01839     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_PASS_DEPTH_PASS&quot;</span>, GL_STENCIL_BACK_PASS_DEPTH_PASS);
<a name="l01840"></a>01840     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_REF&quot;</span>, GL_STENCIL_BACK_REF);
<a name="l01841"></a>01841     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_VALUE_MASK&quot;</span>, GL_STENCIL_BACK_VALUE_MASK);
<a name="l01842"></a>01842     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BACK_WRITEMASK&quot;</span>, GL_STENCIL_BACK_WRITEMASK);
<a name="l01843"></a>01843     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_BITS&quot;</span>, GL_STENCIL_BITS);
<a name="l01844"></a>01844     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_CLEAR_VALUE&quot;</span>, GL_STENCIL_CLEAR_VALUE);
<a name="l01845"></a>01845     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_FAIL&quot;</span>, GL_STENCIL_FAIL);
<a name="l01846"></a>01846     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_FUNC&quot;</span>, GL_STENCIL_FUNC);
<a name="l01847"></a>01847     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_PASS_DEPTH_FAIL&quot;</span>, GL_STENCIL_PASS_DEPTH_FAIL);
<a name="l01848"></a>01848     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_PASS_DEPTH_PASS&quot;</span>, GL_STENCIL_PASS_DEPTH_PASS);
<a name="l01849"></a>01849     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_REF&quot;</span>, GL_STENCIL_REF);
<a name="l01850"></a>01850     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_TEST&quot;</span>, GL_STENCIL_TEST);
<a name="l01851"></a>01851     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_VALUE_MASK&quot;</span>, GL_STENCIL_VALUE_MASK);
<a name="l01852"></a>01852     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STENCIL_WRITEMASK&quot;</span>, GL_STENCIL_WRITEMASK);
<a name="l01853"></a>01853     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_STEREO&quot;</span>, GL_STEREO);
<a name="l01854"></a>01854     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_SUBPIXEL_BITS&quot;</span>, GL_SUBPIXEL_BITS);
<a name="l01855"></a>01855     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_1D&quot;</span>, GL_TEXTURE_1D);
<a name="l01856"></a>01856     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_BINDING_1D&quot;</span>, GL_TEXTURE_BINDING_1D);
<a name="l01857"></a>01857     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_2D&quot;</span>, GL_TEXTURE_2D);
<a name="l01858"></a>01858     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_BINDING_2D&quot;</span>, GL_TEXTURE_BINDING_2D);
<a name="l01859"></a>01859     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_3D&quot;</span>, GL_TEXTURE_3D);
<a name="l01860"></a>01860     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_BINDING_3D&quot;</span>, GL_TEXTURE_BINDING_3D);
<a name="l01861"></a>01861     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_BINDING_CUBE_MAP&quot;</span>, GL_TEXTURE_BINDING_CUBE_MAP);
<a name="l01862"></a>01862     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COMPRESSION_HINT&quot;</span>, GL_TEXTURE_COMPRESSION_HINT);
<a name="l01863"></a>01863     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COORD_ARRAY&quot;</span>, GL_TEXTURE_COORD_ARRAY);
<a name="l01864"></a>01864     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COORD_ARRAY_BUFFER_BINDING&quot;</span>, GL_TEXTURE_COORD_ARRAY_BUFFER_BINDING);
<a name="l01865"></a>01865     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COORD_ARRAY_SIZE&quot;</span>, GL_TEXTURE_COORD_ARRAY_SIZE);
<a name="l01866"></a>01866     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COORD_ARRAY_STRIDE&quot;</span>, GL_TEXTURE_COORD_ARRAY_STRIDE);
<a name="l01867"></a>01867     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_COORD_ARRAY_TYPE&quot;</span>, GL_TEXTURE_COORD_ARRAY_TYPE);
<a name="l01868"></a>01868     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_CUBE_MAP&quot;</span>, GL_TEXTURE_CUBE_MAP);
<a name="l01869"></a>01869     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_GEN_Q&quot;</span>, GL_TEXTURE_GEN_Q);
<a name="l01870"></a>01870     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_GEN_R&quot;</span>, GL_TEXTURE_GEN_R);
<a name="l01871"></a>01871     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_GEN_S&quot;</span>, GL_TEXTURE_GEN_S);
<a name="l01872"></a>01872     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_GEN_T&quot;</span>, GL_TEXTURE_GEN_T);
<a name="l01873"></a>01873     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_MATRIX&quot;</span>, GL_TEXTURE_MATRIX);
<a name="l01874"></a>01874     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TEXTURE_STACK_DEPTH&quot;</span>, GL_TEXTURE_STACK_DEPTH);
<a name="l01875"></a>01875     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TRANSPOSE_COLOR_MATRIX&quot;</span>, GL_TRANSPOSE_COLOR_MATRIX);
<a name="l01876"></a>01876     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TRANSPOSE_MODELVIEW_MATRIX&quot;</span>, GL_TRANSPOSE_MODELVIEW_MATRIX);
<a name="l01877"></a>01877     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TRANSPOSE_PROJECTION_MATRIX&quot;</span>, GL_TRANSPOSE_PROJECTION_MATRIX);
<a name="l01878"></a>01878     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_TRANSPOSE_TEXTURE_MATRIX&quot;</span>, GL_TRANSPOSE_TEXTURE_MATRIX);
<a name="l01879"></a>01879     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_ALIGNMENT&quot;</span>, GL_UNPACK_ALIGNMENT);
<a name="l01880"></a>01880     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_IMAGE_HEIGHT&quot;</span>, GL_UNPACK_IMAGE_HEIGHT);
<a name="l01881"></a>01881     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_LSB_FIRST&quot;</span>, GL_UNPACK_LSB_FIRST);
<a name="l01882"></a>01882     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_ROW_LENGTH&quot;</span>, GL_UNPACK_ROW_LENGTH);
<a name="l01883"></a>01883     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_SKIP_IMAGES&quot;</span>, GL_UNPACK_SKIP_IMAGES);
<a name="l01884"></a>01884     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_SKIP_PIXELS&quot;</span>, GL_UNPACK_SKIP_PIXELS);
<a name="l01885"></a>01885     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_SKIP_ROWS&quot;</span>, GL_UNPACK_SKIP_ROWS);
<a name="l01886"></a>01886     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_UNPACK_SWAP_BYTES&quot;</span>, GL_UNPACK_SWAP_BYTES);
<a name="l01887"></a>01887     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_ARRAY&quot;</span>, GL_VERTEX_ARRAY);
<a name="l01888"></a>01888     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_ARRAY_BUFFER_BINDING&quot;</span>, GL_VERTEX_ARRAY_BUFFER_BINDING);
<a name="l01889"></a>01889     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_ARRAY_SIZE&quot;</span>, GL_VERTEX_ARRAY_SIZE);
<a name="l01890"></a>01890     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_ARRAY_STRIDE&quot;</span>, GL_VERTEX_ARRAY_STRIDE);
<a name="l01891"></a>01891     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_ARRAY_TYPE&quot;</span>, GL_VERTEX_ARRAY_TYPE);
<a name="l01892"></a>01892     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_PROGRAM_POINT_SIZE&quot;</span>, GL_VERTEX_PROGRAM_POINT_SIZE);
<a name="l01893"></a>01893     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VERTEX_PROGRAM_TWO_SIDE&quot;</span>, GL_VERTEX_PROGRAM_TWO_SIDE);
<a name="l01894"></a>01894     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_VIEWPORT&quot;</span>, GL_VIEWPORT);
<a name="l01895"></a>01895     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ZOOM_X&quot;</span>, GL_ZOOM_X);
<a name="l01896"></a>01896     <a class="code" href="../../d6/d69/gpu__draw_8c.html#ae57922aa4f5ae1a09d4cc84fa85a73e2">gpu_get_print</a>(<span class="stringliteral">&quot;GL_ZOOM_Y&quot;</span>, GL_ZOOM_Y);
<a name="l01897"></a>01897 }
<a name="l01898"></a>01898 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:23 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
