<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: graph.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">graph.h</div>  </div>
</div>
<div class="contents">
<a href="../../d6/df3/graph_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright 2011, Blender Foundation.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef __GRAPH_H__</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define __GRAPH_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d05/kernel__types_8h.html">kernel_types.h</a>&quot;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/ded/util__list_8h.html">util_list.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../da/dff/util__map_8h.html">util_map.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d85/util__param_8h.html">util_param.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d01/util__set_8h.html">util_set.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dad/util__types_8h.html">util_types.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/dba/util__vector_8h.html">util_vector.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <a class="code" href="../../d5/d05/kernel__compat__cuda_8h.html#a127a92451281fa5863da396ed5cd581a">CCL_NAMESPACE_BEGIN</a>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">class </span><a class="code" href="../../d8/dcd/classAttributeRequestSet.html">AttributeRequestSet</a>;
<a name="l00034"></a>00034 <span class="keyword">class </span><a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a>;
<a name="l00035"></a>00035 <span class="keyword">class </span><a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a>;
<a name="l00036"></a>00036 <span class="keyword">class </span><a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a>;
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="../../d7/d65/classShaderGraph.html">ShaderGraph</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="../../d7/df9/classSVMCompiler.html">SVMCompiler</a>;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="../../db/d56/classOSLCompiler.html">OSLCompiler</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/* Socket Type</span>
<a name="l00042"></a>00042 <span class="comment"> *</span>
<a name="l00043"></a>00043 <span class="comment"> * Data type for inputs and outputs */</span>
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">00045</a> <span class="keyword">enum</span> <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> {
<a name="l00046"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631ac13748f326bdcb1defa8c475e34ba91e">00046</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631ac13748f326bdcb1defa8c475e34ba91e">SHADER_SOCKET_FLOAT</a>,
<a name="l00047"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631a495fe0881aea75b5b17703796f6dcd13">00047</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631a495fe0881aea75b5b17703796f6dcd13">SHADER_SOCKET_COLOR</a>,
<a name="l00048"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631a132d7e684842325156e05308487368e8">00048</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631a132d7e684842325156e05308487368e8">SHADER_SOCKET_VECTOR</a>,
<a name="l00049"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631ac61aa157461c90a0ba63e611f44570c2">00049</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631ac61aa157461c90a0ba63e611f44570c2">SHADER_SOCKET_POINT</a>,
<a name="l00050"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631aeb718c7d8ace97029acdb3689f11ee2b">00050</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631aeb718c7d8ace97029acdb3689f11ee2b">SHADER_SOCKET_NORMAL</a>,
<a name="l00051"></a><a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631afaa7f854f4275373e36132f2eb32b1e9">00051</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631afaa7f854f4275373e36132f2eb32b1e9">SHADER_SOCKET_CLOSURE</a>
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/* Bump</span>
<a name="l00055"></a>00055 <span class="comment"> *</span>
<a name="l00056"></a>00056 <span class="comment"> * For bump mapping, a node may be evaluated multiple times, using different</span>
<a name="l00057"></a>00057 <span class="comment"> * samples to reconstruct the normal, this indicates the sample position */</span>
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7">00059</a> <span class="keyword">enum</span> <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7">ShaderBump</a> {
<a name="l00060"></a><a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7ac8e951064fd7aacc6a028e755132fb40">00060</a>     <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7ac8e951064fd7aacc6a028e755132fb40">SHADER_BUMP_NONE</a>,
<a name="l00061"></a><a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a13db37fec06bcf2cac90bf8542f30456">00061</a>     <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a13db37fec06bcf2cac90bf8542f30456">SHADER_BUMP_CENTER</a>,
<a name="l00062"></a><a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a5b955aec7fb65a1fe9f34f072b7cea5b">00062</a>     <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a5b955aec7fb65a1fe9f34f072b7cea5b">SHADER_BUMP_DX</a>,
<a name="l00063"></a><a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a8930692df8ac21658a8d997487c2ddfb">00063</a>     <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7a8930692df8ac21658a8d997487c2ddfb">SHADER_BUMP_DY</a>
<a name="l00064"></a>00064 };
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">/* Enum</span>
<a name="l00067"></a>00067 <span class="comment"> *</span>
<a name="l00068"></a>00068 <span class="comment"> * Utility class for enum values. */</span>
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="../../d9/d67/classShaderEnum.html">00070</a> <span class="keyword">class </span><a class="code" href="../../d9/d67/classShaderEnum.html">ShaderEnum</a> {
<a name="l00071"></a>00071 <span class="keyword">public</span>:
<a name="l00072"></a><a class="code" href="../../d9/d67/classShaderEnum.html#ae79d4b0d78071d9a2f4a6cacf02d3ec9">00072</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d9/d67/classShaderEnum.html#ae79d4b0d78071d9a2f4a6cacf02d3ec9">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>.empty(); }
<a name="l00073"></a><a class="code" href="../../d9/d67/classShaderEnum.html#a904494c7ab69933c628f2e5d64ad31a1">00073</a>     <span class="keywordtype">void</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a904494c7ab69933c628f2e5d64ad31a1">insert</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *x, <span class="keywordtype">int</span> y) {
<a name="l00074"></a>00074         <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>[ustring(x)] = y;
<a name="l00075"></a>00075         <a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">right</a>[y] = ustring(x);
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="../../d9/d67/classShaderEnum.html#afafbe8010471b21205d94283d2a7c683">00078</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d9/d67/classShaderEnum.html#afafbe8010471b21205d94283d2a7c683">exists</a>(ustring x) { <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>.find(x) != <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>.end(); }
<a name="l00079"></a><a class="code" href="../../d9/d67/classShaderEnum.html#afc768acbadac2a407e982a621d5fe2c6">00079</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d9/d67/classShaderEnum.html#afc768acbadac2a407e982a621d5fe2c6">exists</a>(<span class="keywordtype">int</span> y) { <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">right</a>.find(y) != <a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">right</a>.end(); }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="../../d9/d67/classShaderEnum.html#aa77f6304be217d57b58080797d9a2401">00081</a>     <span class="keywordtype">int</span> <a class="code" href="../../d9/d67/classShaderEnum.html#aa77f6304be217d57b58080797d9a2401">operator[]</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *x) { <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>[ustring(x)]; }
<a name="l00082"></a><a class="code" href="../../d9/d67/classShaderEnum.html#a9c01e270b4976f01f8e23f4a398f0bcc">00082</a>     <span class="keywordtype">int</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a9c01e270b4976f01f8e23f4a398f0bcc">operator[]</a>(ustring x) { <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>[x]; }
<a name="l00083"></a><a class="code" href="../../d9/d67/classShaderEnum.html#aac035390f437d07f9fc35076aba6b590">00083</a>     ustring <a class="code" href="../../d9/d67/classShaderEnum.html#aac035390f437d07f9fc35076aba6b590">operator[]</a>(<span class="keywordtype">int</span> y) { <span class="keywordflow">return</span> <a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">right</a>[y]; }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keyword">protected</span>:
<a name="l00086"></a><a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">00086</a>     map&lt;ustring, int&gt; <a class="code" href="../../d9/d67/classShaderEnum.html#a64f648e19314a6c5c9ad751d00ef1e91">left</a>;
<a name="l00087"></a><a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">00087</a>     map&lt;int, ustring&gt; <a class="code" href="../../d9/d67/classShaderEnum.html#a638d6eb1b4a787122257aa32e568cffa">right</a>;
<a name="l00088"></a>00088 };
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* Input</span>
<a name="l00091"></a>00091 <span class="comment"> *</span>
<a name="l00092"></a>00092 <span class="comment"> * Input socket for a shader node. May be linked to an output or not. If not</span>
<a name="l00093"></a>00093 <span class="comment"> * linked, it will either get a fixed default value, or e.g. a texture</span>
<a name="l00094"></a>00094 <span class="comment"> * coordinate. */</span>
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="../../d2/dfe/classShaderInput.html">00096</a> <span class="keyword">class </span><a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> {
<a name="l00097"></a>00097 <span class="keyword">public</span>:
<a name="l00098"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0">00098</a>     <span class="keyword">enum</span> <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0">DefaultValue</a> {
<a name="l00099"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a08a8d217d08b6ef5db6eb6cb49605906">00099</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a08a8d217d08b6ef5db6eb6cb49605906">TEXTURE_GENERATED</a>,
<a name="l00100"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a529dd505586854188139e3f9e50546c2">00100</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a529dd505586854188139e3f9e50546c2">TEXTURE_UV</a>,
<a name="l00101"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a07b1db26d4db275053608845edcf79c3">00101</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a07b1db26d4db275053608845edcf79c3">INCOMING</a>,
<a name="l00102"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0ac3007904044722516a2f75187ce0e2e1">00102</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0ac3007904044722516a2f75187ce0e2e1">NORMAL</a>,
<a name="l00103"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0aab3108e729973d7fc6da7c28c3ece433">00103</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0aab3108e729973d7fc6da7c28c3ece433">POSITION</a>,
<a name="l00104"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a511b6ca83a82a2c5e45db5c487d9b3cd">00104</a>         <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0a511b6ca83a82a2c5e45db5c487d9b3cd">NONE</a>
<a name="l00105"></a>00105     };
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <a class="code" href="../../d2/dfe/classShaderInput.html#ab05f3fb956741704cde00b0009da83ef">ShaderInput</a>(<a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d2/dfe/classShaderInput.html#ab01e654cc4ce42f52a670a08d22620ca">parent</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/dfe/classShaderInput.html#a183e1d325ebf3b6d8db9acb71cbc2074">name</a>, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> <a class="code" href="../../d2/dfe/classShaderInput.html#a0107aba74813ebb3db5266d3c8eb02d7">type</a>);
<a name="l00108"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a634da991d80fbd0252cd52f8f46620eb">00108</a>     <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keyword">const</span> <a class="code" href="../../d9/d19/structfloat3.html">float3</a>&amp; v) { <a class="code" href="../../d2/dfe/classShaderInput.html#aa2df223358929c5b6771865b428c6f9f">value</a> = v; }
<a name="l00109"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a3866ab68c35986588c5b5ff22c282929">00109</a>     <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keywordtype">float</span> f) { <a class="code" href="../../d2/dfe/classShaderInput.html#aa2df223358929c5b6771865b428c6f9f">value</a> = <a class="code" href="../../d7/dad/util__types_8h.html#a957c369f48bce1b714e6c7d54130207b">make_float3</a>(f, 0, 0); }
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a183e1d325ebf3b6d8db9acb71cbc2074">00111</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/dfe/classShaderInput.html#a183e1d325ebf3b6d8db9acb71cbc2074">name</a>;
<a name="l00112"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a0107aba74813ebb3db5266d3c8eb02d7">00112</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> <a class="code" href="../../d2/dfe/classShaderInput.html#a0107aba74813ebb3db5266d3c8eb02d7">type</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="../../d2/dfe/classShaderInput.html#ab01e654cc4ce42f52a670a08d22620ca">00114</a>     <a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d2/dfe/classShaderInput.html#ab01e654cc4ce42f52a670a08d22620ca">parent</a>;
<a name="l00115"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a53b0730e0243ae250ac0f531982e8d9a">00115</a>     <a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a> *<a class="code" href="../../d2/dfe/classShaderInput.html#a53b0730e0243ae250ac0f531982e8d9a">link</a>;
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="../../d2/dfe/classShaderInput.html#ac8cf8d6a57e67572c2388ac9ff09450d">00117</a>     <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0">DefaultValue</a> <a class="code" href="../../d2/dfe/classShaderInput.html#ac8cf8d6a57e67572c2388ac9ff09450d">default_value</a>;
<a name="l00118"></a><a class="code" href="../../d2/dfe/classShaderInput.html#aa2df223358929c5b6771865b428c6f9f">00118</a>     <a class="code" href="../../d9/d19/structfloat3.html">float3</a> <a class="code" href="../../d2/dfe/classShaderInput.html#aa2df223358929c5b6771865b428c6f9f">value</a>;
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a78a8b6c71e5bfc55d00d14e02699157b">00120</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/dfe/classShaderInput.html#a78a8b6c71e5bfc55d00d14e02699157b">stack_offset</a>; <span class="comment">/* for SVM compiler */</span>
<a name="l00121"></a><a class="code" href="../../d2/dfe/classShaderInput.html#a320cfd19a2f4d83289b920f2023817d8">00121</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d2/dfe/classShaderInput.html#a320cfd19a2f4d83289b920f2023817d8">osl_only</a>;
<a name="l00122"></a>00122 };
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="comment">/* Output</span>
<a name="l00125"></a>00125 <span class="comment"> *</span>
<a name="l00126"></a>00126 <span class="comment"> * Output socket for a shader node. */</span>
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="../../d1/d7e/classShaderOutput.html">00128</a> <span class="keyword">class </span><a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a> {
<a name="l00129"></a>00129 <span class="keyword">public</span>:
<a name="l00130"></a>00130     <a class="code" href="../../d1/d7e/classShaderOutput.html#a013df11a73aaaa9c967e5c2d3e04437f">ShaderOutput</a>(<a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d1/d7e/classShaderOutput.html#abfc603e8c69d009deda3b4da0fa21dae">parent</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d7e/classShaderOutput.html#aa0372078c22d8eb7ba020a3bf94731fb">name</a>, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> <a class="code" href="../../d1/d7e/classShaderOutput.html#a9ded87d658cb8123b0f6a4068b41eeed">type</a>);
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="../../d1/d7e/classShaderOutput.html#aa0372078c22d8eb7ba020a3bf94731fb">00132</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d7e/classShaderOutput.html#aa0372078c22d8eb7ba020a3bf94731fb">name</a>;
<a name="l00133"></a><a class="code" href="../../d1/d7e/classShaderOutput.html#abfc603e8c69d009deda3b4da0fa21dae">00133</a>     <a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d1/d7e/classShaderOutput.html#abfc603e8c69d009deda3b4da0fa21dae">parent</a>;
<a name="l00134"></a><a class="code" href="../../d1/d7e/classShaderOutput.html#a9ded87d658cb8123b0f6a4068b41eeed">00134</a>     <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> <a class="code" href="../../d1/d7e/classShaderOutput.html#a9ded87d658cb8123b0f6a4068b41eeed">type</a>;
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="../../d1/d7e/classShaderOutput.html#a93daae31533048733c0845cfe5622773">00136</a>     vector&lt;ShaderInput*&gt; <a class="code" href="../../d1/d7e/classShaderOutput.html#a93daae31533048733c0845cfe5622773">links</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="../../d1/d7e/classShaderOutput.html#a29adb4de9b75e730077b9745f305bac3">00138</a>     <span class="keywordtype">int</span> <a class="code" href="../../d1/d7e/classShaderOutput.html#a29adb4de9b75e730077b9745f305bac3">stack_offset</a>; <span class="comment">/* for SVM compiler */</span>
<a name="l00139"></a>00139 };
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">/* Node</span>
<a name="l00142"></a>00142 <span class="comment"> *</span>
<a name="l00143"></a>00143 <span class="comment"> * Shader node in graph, with input and output sockets. This is the virtual</span>
<a name="l00144"></a>00144 <span class="comment"> * base class for all node types. */</span>
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="../../db/d79/classShaderNode.html">00146</a> <span class="keyword">class </span><a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> {
<a name="l00147"></a>00147 <span class="keyword">public</span>:
<a name="l00148"></a>00148     <a class="code" href="../../db/d79/classShaderNode.html#a831e16e840ab9c7efb060f56b98e0866">ShaderNode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/d79/classShaderNode.html#aaa273a267eb1e22406bf29c956958147">name</a>);
<a name="l00149"></a>00149     <span class="keyword">virtual</span> <a class="code" href="../../db/d79/classShaderNode.html#a6538f31b0fa06a4fb94c3e30ee0409ee">~ShaderNode</a>();
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *<a class="code" href="../../db/d79/classShaderNode.html#a064a77b64eb5411ff8949821c3c9b87d">input</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00152"></a>00152     <a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a> *<a class="code" href="../../db/d79/classShaderNode.html#ad7091c62684c4493817fcc679a296626">output</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *<a class="code" href="../../db/d79/classShaderNode.html#a92068a7652ffc3260d758441bb0b41ce">add_input</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> type, <span class="keywordtype">float</span> value=0.0f);
<a name="l00155"></a>00155     <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *<a class="code" href="../../db/d79/classShaderNode.html#a92068a7652ffc3260d758441bb0b41ce">add_input</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> type, <a class="code" href="../../d9/d19/structfloat3.html">float3</a> value);
<a name="l00156"></a>00156     <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *<a class="code" href="../../db/d79/classShaderNode.html#a92068a7652ffc3260d758441bb0b41ce">add_input</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> type, <a class="code" href="../../d2/dfe/classShaderInput.html#a0d07900bc5376326e65122fa3a0775f0">ShaderInput::DefaultValue</a> value, <span class="keywordtype">bool</span> osl_only=<span class="keyword">false</span>);
<a name="l00157"></a>00157     <a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a> *<a class="code" href="../../db/d79/classShaderNode.html#a0ed0dd25302c16565ce7f7cf98a441a0">add_output</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="../../d6/df3/graph_8h.html#a276f27b722a3c691ee600b3da806a631">ShaderSocketType</a> type);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <span class="keyword">virtual</span> <a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../db/d79/classShaderNode.html#abb611d85d4a4637b877501a4241254b2">clone</a>() <span class="keyword">const</span> = 0;
<a name="l00160"></a>00160     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d79/classShaderNode.html#a81180a83ff5583ec0eb7e234c4eeffaf">attributes</a>(<a class="code" href="../../d8/dcd/classAttributeRequestSet.html">AttributeRequestSet</a> *<a class="code" href="../../db/d79/classShaderNode.html#a81180a83ff5583ec0eb7e234c4eeffaf">attributes</a>);
<a name="l00161"></a>00161     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d79/classShaderNode.html#ae2f91e23cf8803f174f1d9e1e5683061">compile</a>(<a class="code" href="../../d7/df9/classSVMCompiler.html">SVMCompiler</a>&amp; compiler) = 0;
<a name="l00162"></a>00162     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d79/classShaderNode.html#ae2f91e23cf8803f174f1d9e1e5683061">compile</a>(<a class="code" href="../../db/d56/classOSLCompiler.html">OSLCompiler</a>&amp; compiler) = 0;
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="../../db/d79/classShaderNode.html#a953cba5957ac44d7b0607cef1dc2bf9b">00164</a>     vector&lt;ShaderInput*&gt; <a class="code" href="../../db/d79/classShaderNode.html#a953cba5957ac44d7b0607cef1dc2bf9b">inputs</a>;
<a name="l00165"></a><a class="code" href="../../db/d79/classShaderNode.html#ab02f69c3a64e624feea6d06eacdabfdc">00165</a>     vector&lt;ShaderOutput*&gt; <a class="code" href="../../db/d79/classShaderNode.html#ab02f69c3a64e624feea6d06eacdabfdc">outputs</a>;
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="../../db/d79/classShaderNode.html#aaa273a267eb1e22406bf29c956958147">00167</a>     ustring <a class="code" href="../../db/d79/classShaderNode.html#aaa273a267eb1e22406bf29c956958147">name</a>; <span class="comment">/* name, not required to be unique */</span>
<a name="l00168"></a><a class="code" href="../../db/d79/classShaderNode.html#a3f1897ba3a9fda8e9b00fb73a2fd0712">00168</a>     <span class="keywordtype">int</span> <a class="code" href="../../db/d79/classShaderNode.html#a3f1897ba3a9fda8e9b00fb73a2fd0712">id</a>; <span class="comment">/* index in graph node array */</span>
<a name="l00169"></a><a class="code" href="../../db/d79/classShaderNode.html#ad6f94b4b94bbf873bf09b28aab210e0e">00169</a>     <a class="code" href="../../d6/df3/graph_8h.html#abffcaef4ca63b4a58333cb9cd5085ac7">ShaderBump</a> <a class="code" href="../../db/d79/classShaderNode.html#ad6f94b4b94bbf873bf09b28aab210e0e">bump</a>; <span class="comment">/* for bump mapping utility */</span>
<a name="l00170"></a>00170 };
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="comment">/* Node definition utility macros */</span>
<a name="l00174"></a>00174 
<a name="l00175"></a><a class="code" href="../../d6/df3/graph_8h.html#aaa36b87a1bdb16ea0162022baba2d6bf">00175</a> <span class="preprocessor">#define SHADER_NODE_CLASS(type) \</span>
<a name="l00176"></a>00176 <span class="preprocessor">    type(); \</span>
<a name="l00177"></a>00177 <span class="preprocessor">    virtual ShaderNode *clone() const { return new type(*this); } \</span>
<a name="l00178"></a>00178 <span class="preprocessor">    virtual void compile(SVMCompiler&amp; compiler); \</span>
<a name="l00179"></a>00179 <span class="preprocessor">    virtual void compile(OSLCompiler&amp; compiler); \</span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>
<a name="l00181"></a><a class="code" href="../../d6/df3/graph_8h.html#a0be4812faa35ceb58612b7b413c0b707">00181</a> <span class="preprocessor"></span><span class="preprocessor">#define SHADER_NODE_NO_CLONE_CLASS(type) \</span>
<a name="l00182"></a>00182 <span class="preprocessor">    type(); \</span>
<a name="l00183"></a>00183 <span class="preprocessor">    virtual void compile(SVMCompiler&amp; compiler); \</span>
<a name="l00184"></a>00184 <span class="preprocessor">    virtual void compile(OSLCompiler&amp; compiler); \</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>
<a name="l00186"></a><a class="code" href="../../d6/df3/graph_8h.html#af4df90c1a9e79e0bfc94d899a11cbe71">00186</a> <span class="preprocessor"></span><span class="preprocessor">#define SHADER_NODE_BASE_CLASS(type) \</span>
<a name="l00187"></a>00187 <span class="preprocessor">    virtual ShaderNode *clone() const { return new type(*this); } \</span>
<a name="l00188"></a>00188 <span class="preprocessor">    virtual void compile(SVMCompiler&amp; compiler); \</span>
<a name="l00189"></a>00189 <span class="preprocessor">    virtual void compile(OSLCompiler&amp; compiler); \</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00191"></a>00191 <span class="preprocessor"></span><span class="comment">/* Graph</span>
<a name="l00192"></a>00192 <span class="comment"> *</span>
<a name="l00193"></a>00193 <span class="comment"> * Shader graph of nodes. Also does graph manipulations for default inputs,</span>
<a name="l00194"></a>00194 <span class="comment"> * bump mapping from displacement, and possibly other things in the future. */</span>
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="../../d7/d65/classShaderGraph.html">00196</a> <span class="keyword">class </span><a class="code" href="../../d7/d65/classShaderGraph.html">ShaderGraph</a> {
<a name="l00197"></a>00197 <span class="keyword">public</span>:
<a name="l00198"></a><a class="code" href="../../d7/d65/classShaderGraph.html#a80b72fde911ba080ed248535fdf4e6eb">00198</a>     list&lt;ShaderNode*&gt; <a class="code" href="../../d7/d65/classShaderGraph.html#a80b72fde911ba080ed248535fdf4e6eb">nodes</a>;
<a name="l00199"></a><a class="code" href="../../d7/d65/classShaderGraph.html#a09866f88905599f7370e7758ad0a5bdd">00199</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a09866f88905599f7370e7758ad0a5bdd">finalized</a>;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <a class="code" href="../../d7/d65/classShaderGraph.html#a456fb2d2b79aa6daf706e2b6eb3a8f2d">ShaderGraph</a>();
<a name="l00202"></a>00202     <a class="code" href="../../d7/d65/classShaderGraph.html#a3785980513e5e53d0252fbf12d42c1ee">~ShaderGraph</a>();
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <a class="code" href="../../d7/d65/classShaderGraph.html">ShaderGraph</a> *<a class="code" href="../../d7/d65/classShaderGraph.html#a4df011afdd09f4fe20edea3d07f96428">copy</a>();
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d7/d65/classShaderGraph.html#aca9b802eaea38633d4bda806c0bd4a03">add</a>(<a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *node);
<a name="l00207"></a>00207     <a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *<a class="code" href="../../d7/d65/classShaderGraph.html#af8e9ceb2a7559871a7bb18116d5de781">output</a>();
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a72172fd3ceaad8bed33d7fc560fdefe5">connect</a>(<a class="code" href="../../d1/d7e/classShaderOutput.html">ShaderOutput</a> *from, <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *to);
<a name="l00210"></a>00210     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a2ab71701ad7bf1956a318f40c8bd9afe">disconnect</a>(<a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *to);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a154996bc2f50130b22af01111bd7a72b">finalize</a>(<span class="keywordtype">bool</span> do_bump = <span class="keyword">false</span>, <span class="keywordtype">bool</span> do_osl = <span class="keyword">false</span>);
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 <span class="keyword">protected</span>:
<a name="l00215"></a><a class="code" href="../../d7/d65/classShaderGraph.html#a53ee9f9fba0867784153cea7b7895428">00215</a>     <span class="keyword">typedef</span> pair&lt;ShaderNode* const, ShaderNode*&gt; <a class="code" href="../../d7/d65/classShaderGraph.html#a53ee9f9fba0867784153cea7b7895428">NodePair</a>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a560d700865e074145a03fa0ef62b7445">find_dependencies</a>(set&lt;ShaderNode*&gt;&amp; dependencies, <a class="code" href="../../d2/dfe/classShaderInput.html">ShaderInput</a> *input);
<a name="l00218"></a>00218     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a09e2a16ed670a8643c60d53a943bf8e2">copy_nodes</a>(set&lt;ShaderNode*&gt;&amp; <a class="code" href="../../d7/d65/classShaderGraph.html#a80b72fde911ba080ed248535fdf4e6eb">nodes</a>, map&lt;ShaderNode*, ShaderNode*&gt;&amp; nnodemap);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a0c1a12d9c4cf2fb859bc1fa1ecb51353">remove_proxy_nodes</a>(vector&lt;bool&gt;&amp; removed);
<a name="l00221"></a>00221     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a38242e3874e17bf3e552105b3ba13d7e">break_cycles</a>(<a class="code" href="../../db/d79/classShaderNode.html">ShaderNode</a> *node, vector&lt;bool&gt;&amp; visited, vector&lt;bool&gt;&amp; on_stack);
<a name="l00222"></a>00222     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#afce48358e97988ee2d70d2ca31907117">clean</a>();
<a name="l00223"></a>00223     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a357a0553fd15fd24751869c2afa2428d">bump_from_displacement</a>();
<a name="l00224"></a>00224     <span class="keywordtype">void</span> <a class="code" href="../../d7/d65/classShaderGraph.html#a63c6dfe74aa7c27b93b4de171b968ce1">default_inputs</a>(<span class="keywordtype">bool</span> do_osl);
<a name="l00225"></a>00225 };
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <a class="code" href="../../d5/d05/kernel__compat__cuda_8h.html#ae0c27e57708248c67409956ddc159e18">CCL_NAMESPACE_END</a>
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="preprocessor">#endif </span><span class="comment">/* __GRAPH_H__ */</span>
<a name="l00230"></a>00230 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:23 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
