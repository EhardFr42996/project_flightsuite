<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: object_edit.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">object_edit.c</div>  </div>
</div>
<div class="contents">
<a href="../../d6/db5/object__edit_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2001-2002 by NaN Holding BV.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * Contributor(s): Blender Foundation, 2002-2008 full recode</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;stddef.h&gt;</span> <span class="comment">//for offsetof</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc5/BLI__ghash_8h.html" title="A general (pointer -&gt; pointer) hash table ADT.">BLI_ghash.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d88/BLI__rand_8h.html" title="Random number functions.">BLI_rand.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d93/DNA__armature__types_8h.html">DNA_armature_types.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d88/DNA__curve__types_8h.html">DNA_curve_types.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d75/DNA__group__types_8h.html">DNA_group_types.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d2f/DNA__lattice__types_8h.html">DNA_lattice_types.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../de/db2/DNA__material__types_8h.html">DNA_material_types.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d40/DNA__meta__types_8h.html">DNA_meta_types.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d2b/DNA__property__types_8h.html">DNA_property_types.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/db3/DNA__scene__types_8h.html">DNA_scene_types.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd9/DNA__object__types_8h.html" title="Object is a sort of wrapper for general info.">DNA_object_types.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d60/DNA__object__force_8h.html">DNA_object_force.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html">DNA_meshdata_types.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="../../de/dcc/DNA__vfont__types_8h.html">DNA_vfont_types.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d96/DNA__mesh__types_8h.html">DNA_mesh_types.h</a>&quot;</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc9/IMB__imbuf__types_8h.html" title="Contains defines and structs used throughout the imbuf module.">IMB_imbuf_types.h</a>&quot;</span>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dd0/BKE__anim_8h.html">BKE_anim.h</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddd/BKE__constraint_8h.html">BKE_constraint.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dfc/BKE__curve_8h.html">BKE_curve.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d65/BKE__effect_8h.html">BKE_effect.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/da0/BKE__depsgraph_8h.html">BKE_depsgraph.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d06/BKE__font_8h.html">BKE_font.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d77/BKE__image_8h.html">BKE_image.h</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/db1/BKE__library_8h.html">BKE_library.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d0f/BKE__material_8h.html" title="General operations, lookup, etc. for materials.">BKE_material.h</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dae/BKE__mball_8h.html">BKE_mball.h</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d7f/BKE__mesh_8h.html">BKE_mesh.h</a>&quot;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dac/BKE__object_8h.html" title="General operations, lookup, etc. for blender objects.">BKE_object.h</a>&quot;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d86/BKE__paint_8h.html">BKE_paint.h</a>&quot;</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/BKE__pointcache_8h.html">BKE_pointcache.h</a>&quot;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/db8/BKE__property_8h.html">BKE_property.h</a>&quot;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/de8/BKE__sca_8h.html">BKE_sca.h</a>&quot;</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/df9/BKE__softbody_8h.html">BKE_softbody.h</a>&quot;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d0f/BKE__modifier_8h.html">BKE_modifier.h</a>&quot;</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/dc7/BKE__tessmesh_8h.html">BKE_tessmesh.h</a>&quot;</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d98/ED__armature_8h.html">ED_armature.h</a>&quot;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d71/ED__curve_8h.html">ED_curve.h</a>&quot;</span>
<a name="l00086"></a>00086 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/dd6/ED__mesh_8h.html">ED_mesh.h</a>&quot;</span>
<a name="l00087"></a>00087 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc6/ED__mball_8h.html">ED_mball.h</a>&quot;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d36/ED__lattice_8h.html">ED_lattice.h</a>&quot;</span>
<a name="l00089"></a>00089 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7a/ED__object_8h.html">ED_object.h</a>&quot;</span>
<a name="l00090"></a>00090 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d12/ED__screen_8h.html">ED_screen.h</a>&quot;</span>
<a name="l00091"></a>00091 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/df1/ED__util_8h.html">ED_util.h</a>&quot;</span>
<a name="l00092"></a>00092 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d53/ED__image_8h.html">ED_image.h</a>&quot;</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="preprocessor">#include &quot;<a class="code" href="../../de/ddf/RNA__access_8h.html">RNA_access.h</a>&quot;</span>
<a name="l00095"></a>00095 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d68/RNA__define_8h.html">RNA_define.h</a>&quot;</span>
<a name="l00096"></a>00096 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d68/RNA__enum__types_8h.html">RNA_enum_types.h</a>&quot;</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">/* for menu/popup icons etc etc*/</span>
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/UI__interface_8h.html">UI_interface.h</a>&quot;</span>
<a name="l00101"></a>00101 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7f/WM__api_8h.html">WM_api.h</a>&quot;</span>
<a name="l00102"></a>00102 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddc/WM__types_8h.html">WM_types.h</a>&quot;</span>
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d80/object__intern_8h.html">object_intern.h</a>&quot;</span>  <span class="comment">// own include</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">/* ************* XXX **************** */</span>
<a name="l00107"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a709246132a61a0ef0e86df2ef078d8c4">00107</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a709246132a61a0ef0e86df2ef078d8c4">error</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg)) {}
<a name="l00108"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">00108</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">waitcursor</a>(<span class="keywordtype">int</span> <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(val)) {}
<a name="l00109"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a6f935fee7a3c6e413fac3693c8305992">00109</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a6f935fee7a3c6e413fac3693c8305992">pupmenu</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(msg)) {<span class="keywordflow">return</span> 0;}
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">/* port over here */</span>
<a name="l00112"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a7299ffcb12f2e47b18364e4864d829af">00112</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a7299ffcb12f2e47b18364e4864d829af">error_libdata</a>(<span class="keywordtype">void</span>) {}
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ad45d98c3296503cd40619bf68ab264de">00114</a> <a class="code" href="../../de/de7/structObject.html">Object</a> *<a class="code" href="../../da/d7a/ED__object_8h.html#a01f5782939cff9e5ad72853ac1fff05b">ED_object_context</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>)
<a name="l00115"></a>00115 {
<a name="l00116"></a>00116     <span class="keywordflow">return</span> <a class="code" href="../../df/d01/BKE__context_8h.html#a67398d15e34f7a4b3c0b5eec1bf5fb94">CTX_data_pointer_get_type</a>(C, <span class="stringliteral">&quot;object&quot;</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#aada94b4b642ee7efbcc6ac0dadc8c4b2">RNA_Object</a>).<a class="code" href="../../dd/d80/structPointerRNA.html#a18702e1d8f8c1a63389b3a322536e0e6">data</a>;
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">/* find the correct active object per context</span>
<a name="l00120"></a>00120 <span class="comment"> * note: context can be NULL when called from a enum with PROP_ENUM_NO_CONTEXT */</span>
<a name="l00121"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a9dbafef79751d59673bdb902480ae80c">00121</a> <a class="code" href="../../de/de7/structObject.html">Object</a> *<a class="code" href="../../da/d7a/ED__object_8h.html#a0a87646a151e018a119ed266356bb24b">ED_object_active_context</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00124"></a>00124     <span class="keywordflow">if</span> (C) {
<a name="l00125"></a>00125         ob= <a class="code" href="../../da/d7a/ED__object_8h.html#a01f5782939cff9e5ad72853ac1fff05b">ED_object_context</a>(C);
<a name="l00126"></a>00126         <span class="keywordflow">if</span> (!ob) ob= <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128     <span class="keywordflow">return</span> ob;
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="comment">/* ********* clear/set restrict view *********/</span>
<a name="l00133"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ad5775816c66046065a3869a39fcd41b1">00133</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ad5775816c66046065a3869a39fcd41b1">object_hide_view_clear_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain= <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00136"></a>00136     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l00137"></a>00137     <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00138"></a>00138     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00139"></a>00139     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l00140"></a>00140     <span class="keywordtype">int</span> changed = 0;
<a name="l00141"></a>00141     
<a name="l00142"></a>00142     <span class="comment">/* XXX need a context loop to handle such cases */</span>
<a name="l00143"></a>00143     <span class="keywordflow">for</span> (base = <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base=base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l00144"></a>00144         <span class="keywordflow">if</span> ((base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> &amp; v3d-&gt;<a class="code" href="../../d6/deb/structView3D.html#a45ac0a23240ec719b0952d62190e9130">lay</a>) &amp;&amp; base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>) {
<a name="l00145"></a>00145             base-&gt;<a class="code" href="../../d3/da9/structBase.html#a0e10616272837fff209501e1cd7fb26b">flag</a> |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00146"></a>00146             base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4cb926ee8d882f0a18f0a2dbdea46e73">flag</a> = base-&gt;<a class="code" href="../../d3/da9/structBase.html#a0e10616272837fff209501e1cd7fb26b">flag</a>;
<a name="l00147"></a>00147             base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>; 
<a name="l00148"></a>00148             changed = 1;
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151     <span class="keywordflow">if</span> (changed) {
<a name="l00152"></a>00152         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a719c20d89827ac9351f0d2b5e55e54a8">DAG_id_type_tag</a>(bmain, <a class="code" href="../../d3/dfb/DNA__ID_8h.html#a1f263dac7c79853c097b8ebde25cb0c1">ID_OB</a>);
<a name="l00153"></a>00153         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a1916587a9ec19eb3543b1c1bc54a8ded">DAG_scene_sort</a>(bmain, scene);
<a name="l00154"></a>00154         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, scene);
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="../../d3/d80/object__intern_8h.html#ae3bb831e318b4500e53f53fb61f2b446">00160</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a15b7fa66145e82009f5cca82b1095d04">OBJECT_OT_hide_view_clear</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00161"></a>00161 {
<a name="l00162"></a>00162     
<a name="l00163"></a>00163     <span class="comment">/* identifiers */</span>
<a name="l00164"></a>00164     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Clear Restrict View&quot;</span>;
<a name="l00165"></a>00165     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Reveal the object by setting the hide flag&quot;</span>;
<a name="l00166"></a>00166     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_hide_view_clear&quot;</span>;
<a name="l00167"></a>00167     
<a name="l00168"></a>00168     <span class="comment">/* api callbacks */</span>
<a name="l00169"></a>00169     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#ad5775816c66046065a3869a39fcd41b1">object_hide_view_clear_exec</a>;
<a name="l00170"></a>00170     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#a77a2371bebf89db17c2e83075447972b">ED_operator_view3d_active</a>;
<a name="l00171"></a>00171     
<a name="l00172"></a>00172     <span class="comment">/* flags */</span>
<a name="l00173"></a>00173     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a87b4a5d738a1d4e3fe47958691d14665">00176</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a87b4a5d738a1d4e3fe47958691d14665">object_hide_view_set_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain= <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00179"></a>00179     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00180"></a>00180     <span class="keywordtype">short</span> changed = 0;
<a name="l00181"></a>00181     <span class="keyword">const</span> <span class="keywordtype">int</span> unselected= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;unselected&quot;</span>);
<a name="l00182"></a>00182     
<a name="l00183"></a>00183     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (!unselected) {
<a name="l00185"></a>00185             <span class="keywordflow">if</span> (base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) {
<a name="l00186"></a>00186                 base-&gt;flag &amp;= ~<a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00187"></a>00187                 base-&gt;object-&gt;flag = base-&gt;flag;
<a name="l00188"></a>00188                 base-&gt;object-&gt;restrictflag |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>;
<a name="l00189"></a>00189                 changed = 1;
<a name="l00190"></a>00190                 <span class="keywordflow">if</span> (base==<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a71a9117cf3b8db805eb031926bff279a">BASACT</a>) {
<a name="l00191"></a>00191                     <a class="code" href="../../da/d7a/ED__object_8h.html#af5ba7e089fcd233d467245626007849d">ED_base_object_activate</a>(C, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00192"></a>00192                 }
<a name="l00193"></a>00193             }
<a name="l00194"></a>00194         }
<a name="l00195"></a>00195         <span class="keywordflow">else</span> {
<a name="l00196"></a>00196             <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00197"></a>00197                 base-&gt;object-&gt;restrictflag |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>;
<a name="l00198"></a>00198                 changed = 1;
<a name="l00199"></a>00199             }
<a name="l00200"></a>00200         }   
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (changed) {
<a name="l00205"></a>00205         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a719c20d89827ac9351f0d2b5e55e54a8">DAG_id_type_tag</a>(bmain, <a class="code" href="../../d3/dfb/DNA__ID_8h.html#a1f263dac7c79853c097b8ebde25cb0c1">ID_OB</a>);
<a name="l00206"></a>00206         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a1916587a9ec19eb3543b1c1bc54a8ded">DAG_scene_sort</a>(bmain, scene);
<a name="l00207"></a>00207         
<a name="l00208"></a>00208         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00209"></a>00209         
<a name="l00210"></a>00210     }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a65769dfb5a9af6811fe7821751aae419">00215</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a7e9711c89961bf3718bcc1bbef15d93b">OBJECT_OT_hide_view_set</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00216"></a>00216 {
<a name="l00217"></a>00217     <span class="comment">/* identifiers */</span>
<a name="l00218"></a>00218     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Set Restrict View&quot;</span>;
<a name="l00219"></a>00219     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Hide the object by setting the hide flag&quot;</span>;
<a name="l00220"></a>00220     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_hide_view_set&quot;</span>;
<a name="l00221"></a>00221     
<a name="l00222"></a>00222     <span class="comment">/* api callbacks */</span>
<a name="l00223"></a>00223     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a87b4a5d738a1d4e3fe47958691d14665">object_hide_view_set_exec</a>;
<a name="l00224"></a>00224     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#a77a2371bebf89db17c2e83075447972b">ED_operator_view3d_active</a>;
<a name="l00225"></a>00225     
<a name="l00226"></a>00226     <span class="comment">/* flags */</span>
<a name="l00227"></a>00227     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00228"></a>00228     
<a name="l00229"></a>00229     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;unselected&quot;</span>, 0, <span class="stringliteral">&quot;Unselected&quot;</span>, <span class="stringliteral">&quot;Hide unselected rather than selected objects&quot;</span>);
<a name="l00230"></a>00230     
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">/* 99% same as above except no need for scene refreshing (TODO, update render preview) */</span>
<a name="l00234"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ad4e8198398bbb0eea44fd5939543b1df">00234</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ad4e8198398bbb0eea44fd5939543b1df">object_hide_render_clear_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l00235"></a>00235 {
<a name="l00236"></a>00236     <span class="keywordtype">short</span> changed= 0;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="comment">/* XXX need a context loop to handle such cases */</span>
<a name="l00239"></a>00239     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob, selected_editable_objects) {
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (ob-&gt;restrictflag &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>) {
<a name="l00241"></a>00241             ob-&gt;restrictflag &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>;
<a name="l00242"></a>00242             changed= 1;
<a name="l00243"></a>00243         }
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="keywordflow">if</span> (changed)
<a name="l00248"></a>00248         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#af89de1656e97955a4c54b2ae3c1c5171">ND_SPACE_OUTLINER</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00253"></a><a class="code" href="../../d3/d80/object__intern_8h.html#ab903c5712f7e7c2b7d3a5522fde71c26">00253</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a80ffa0479ad430e3930ca23978343362">OBJECT_OT_hide_render_clear</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="comment">/* identifiers */</span>
<a name="l00257"></a>00257     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Clear Restrict Render&quot;</span>;
<a name="l00258"></a>00258     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Reveal the render object by setting the hide render flag&quot;</span>;
<a name="l00259"></a>00259     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_hide_render_clear&quot;</span>;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="comment">/* api callbacks */</span>
<a name="l00262"></a>00262     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#ad4e8198398bbb0eea44fd5939543b1df">object_hide_render_clear_exec</a>;
<a name="l00263"></a>00263     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#a77a2371bebf89db17c2e83075447972b">ED_operator_view3d_active</a>;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     <span class="comment">/* flags */</span>
<a name="l00266"></a>00266     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a7efd49c75ebbe1c643d346180023da9f">00269</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a7efd49c75ebbe1c643d346180023da9f">object_hide_render_set_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271     <span class="keyword">const</span> <span class="keywordtype">int</span> unselected= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;unselected&quot;</span>);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (!unselected) {
<a name="l00275"></a>00275             <span class="keywordflow">if</span> (base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) {
<a name="l00276"></a>00276                 base-&gt;object-&gt;restrictflag |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>;
<a name="l00277"></a>00277             }
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         <span class="keywordflow">else</span> {
<a name="l00280"></a>00280             <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00281"></a>00281                 base-&gt;object-&gt;restrictflag |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>;
<a name="l00282"></a>00282             }
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00286"></a>00286     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#af89de1656e97955a4c54b2ae3c1c5171">ND_SPACE_OUTLINER</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00287"></a>00287     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a96f8226240d6c0d2a82b6a7a25734331">00290</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a1f57c5e202fa6895209713d1294d8e58">OBJECT_OT_hide_render_set</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292     <span class="comment">/* identifiers */</span>
<a name="l00293"></a>00293     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Set Restrict Render&quot;</span>;
<a name="l00294"></a>00294     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Hide the render object by setting the hide render flag&quot;</span>;
<a name="l00295"></a>00295     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_hide_render_set&quot;</span>;
<a name="l00296"></a>00296 
<a name="l00297"></a>00297     <span class="comment">/* api callbacks */</span>
<a name="l00298"></a>00298     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a7efd49c75ebbe1c643d346180023da9f">object_hide_render_set_exec</a>;
<a name="l00299"></a>00299     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#a77a2371bebf89db17c2e83075447972b">ED_operator_view3d_active</a>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <span class="comment">/* flags */</span>
<a name="l00302"></a>00302     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;unselected&quot;</span>, 0, <span class="stringliteral">&quot;Unselected&quot;</span>, <span class="stringliteral">&quot;Hide unselected rather than selected objects&quot;</span>);
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="comment">/* ******************* toggle editmode operator  ***************** */</span>
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ab21340451f34d5cc21d73360fdd7b22a">00309</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#a3dc41f10c2da040464140768d2898865">ED_object_exit_editmode</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a4cb926ee8d882f0a18f0a2dbdea46e73">flag</a>)
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311     <span class="comment">/* Note! only in exceptional cases should &#39;EM_DO_UNDO&#39; NOT be in the flag */</span>
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00314"></a>00314     <a class="code" href="../../de/de7/structObject.html">Object</a> *obedit= <a class="code" href="../../df/d01/BKE__context_8h.html#a323e283348470c038f3dd98de298a76b">CTX_data_edit_object</a>(C);
<a name="l00315"></a>00315     <span class="keywordtype">int</span> freedata = flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a56f58f037f42277d234426571ee2de12">EM_FREEDATA</a>;
<a name="l00316"></a>00316     
<a name="l00317"></a>00317     <span class="keywordflow">if</span> (obedit==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;
<a name="l00318"></a>00318     
<a name="l00319"></a>00319     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a660a08f2196e720360e276ccf8125171">EM_WAITCURSOR</a>) <a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">waitcursor</a>(1);
<a name="l00320"></a>00320     <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00321"></a>00321         <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *me= obedit-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00322"></a>00322         
<a name="l00323"></a>00323 <span class="comment">//      if (EM_texFaceCheck())</span>
<a name="l00324"></a>00324         
<a name="l00325"></a>00325         <span class="keywordflow">if</span> (me-&gt;<a class="code" href="../../da/d29/structMesh.html#a1b0a1797d0b3927b83f36b2d8d579ddb">edit_btmesh</a>-&gt;<a class="code" href="../../d5/de5/structBMEditMesh.html#a5b91780fbab0c3a8834609b21acde933">bm</a>-&gt;<a class="code" href="../../d7/d18/structBMesh.html#a003a55069d35eec157e4dfb5a0d78165">totvert</a>&gt;<a class="code" href="../../df/d96/DNA__mesh__types_8h.html#a8bf8170452d77e61032a6f0a0cb4620f">MESH_MAX_VERTS</a>) {
<a name="l00326"></a>00326             <a class="code" href="../../d6/db5/object__edit_8c.html#a709246132a61a0ef0e86df2ef078d8c4">error</a>(<span class="stringliteral">&quot;Too many vertices&quot;</span>);
<a name="l00327"></a>00327             <span class="keywordflow">return</span>;
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329         
<a name="l00330"></a>00330         <a class="code" href="../../d5/dd6/ED__mesh_8h.html#a49439770c1f71ab91942cc040effcca0">EDBM_mesh_load</a>(obedit);
<a name="l00331"></a>00331         
<a name="l00332"></a>00332         <span class="keywordflow">if</span> (freedata) {
<a name="l00333"></a>00333             <a class="code" href="../../d5/dd6/ED__mesh_8h.html#a02b853112680711d30075d378c60e77c">EDBM_mesh_free</a>(me-&gt;<a class="code" href="../../da/d29/structMesh.html#a1b0a1797d0b3927b83f36b2d8d579ddb">edit_btmesh</a>);
<a name="l00334"></a>00334             <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(me-&gt;<a class="code" href="../../da/d29/structMesh.html#a1b0a1797d0b3927b83f36b2d8d579ddb">edit_btmesh</a>);
<a name="l00335"></a>00335             me-&gt;<a class="code" href="../../da/d29/structMesh.html#a1b0a1797d0b3927b83f36b2d8d579ddb">edit_btmesh</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337         <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a>) {
<a name="l00338"></a>00338             <a class="code" href="../../d5/dd6/ED__mesh_8h.html#a67add616c5fd97f17bf7870d9b05f3f6">mesh_octree_table</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;e&#39;</span>);
<a name="l00339"></a>00339             <a class="code" href="../../d5/dd6/ED__mesh_8h.html#a3c8665b18a239636c5f8051e7dc547be">mesh_mirrtopo_table</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;e&#39;</span>);
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>) {   
<a name="l00343"></a>00343         <a class="code" href="../../de/dbc/editarmature_8c.html#a2fe4a64b4c9cf17c809df717592d5bbe">ED_armature_from_edit</a>(obedit);
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (freedata)
<a name="l00345"></a>00345             <a class="code" href="../../de/dbc/editarmature_8c.html#aa12e4dd01a83f83ea125ce1215054862">ED_armature_edit_free</a>(obedit);
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>)) {
<a name="l00348"></a>00348         <a class="code" href="../../d7/d55/editcurve_8c.html#abb76c0b3449541b753c8d3dff5bab511">load_editNurb</a>(obedit);
<a name="l00349"></a>00349         <span class="keywordflow">if</span> (freedata) <a class="code" href="../../d7/d55/editcurve_8c.html#af7995beec2696e8253f01ea892eb4bdc">free_editNurb</a>(obedit);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a> &amp;&amp; freedata) {
<a name="l00352"></a>00352         <a class="code" href="../../d9/d5f/editfont_8c.html#a8378ba7bbf7fd14b9d3461b5cadb4312">load_editText</a>(obedit);
<a name="l00353"></a>00353         <span class="keywordflow">if</span> (freedata) <a class="code" href="../../d9/d5f/editfont_8c.html#a5dba5a3e13944446aa84533fdd281cde">free_editText</a>(obedit);
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a>) {
<a name="l00356"></a>00356         <a class="code" href="../../d0/d36/ED__lattice_8h.html#a8b47c2b6ea7e852a58dd379ee568eeaf">load_editLatt</a>(obedit);
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (freedata) <a class="code" href="../../d0/d36/ED__lattice_8h.html#ad6ab5b4e67ff58979b2dbe55e053ba48">free_editLatt</a>(obedit);
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) {
<a name="l00360"></a>00360         <a class="code" href="../../d4/dc6/ED__mball_8h.html#a9bb369b5200cc5df873c46a3ec213da6">load_editMball</a>(obedit);
<a name="l00361"></a>00361         <span class="keywordflow">if</span> (freedata) <a class="code" href="../../d4/dc6/ED__mball_8h.html#a70187d51d56bb9176fe6e52f522135d5">free_editMball</a>(obedit);
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <span class="comment">/* freedata only 0 now on file saves and render */</span>
<a name="l00365"></a>00365     <span class="keywordflow">if</span> (freedata) {
<a name="l00366"></a>00366         <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> pidlist;
<a name="l00367"></a>00367         <a class="code" href="../../db/d21/structPTCacheID.html">PTCacheID</a> *pid;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369         <span class="comment">/* for example; displist make is different in editmode */</span>
<a name="l00370"></a>00370         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// XXX for context</span>
<a name="l00371"></a>00371 
<a name="l00372"></a>00372         <span class="comment">/* flag object caches as outdated */</span>
<a name="l00373"></a>00373         <a class="code" href="../../db/d45/BKE__pointcache_8h.html#a2308780fc8b6f269567217d7e9e9d3e6">BKE_ptcache_ids_from_object</a>(&amp;pidlist, obedit, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
<a name="l00374"></a>00374         <span class="keywordflow">for</span> (pid=pidlist.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; pid; pid=pid-&gt;<a class="code" href="../../db/d21/structPTCacheID.html#aeb3b4392dbaf6ab7166b4f44d18cf93a">next</a>) {
<a name="l00375"></a>00375             <span class="keywordflow">if</span> (pid-&gt;<a class="code" href="../../db/d21/structPTCacheID.html#a643be6b5bf54ba0e7686d8e9cdd426dc">type</a> != <a class="code" href="../../db/d45/BKE__pointcache_8h.html#a89ac9cccf7f8ab9a797952fa679bba4a">PTCACHE_TYPE_PARTICLES</a>) <span class="comment">/* particles don&#39;t need reset on geometry change */</span>
<a name="l00376"></a>00376                 pid-&gt;<a class="code" href="../../db/d21/structPTCacheID.html#af14383358561e231d506da97252ea345">cache</a>-&gt;<a class="code" href="../../d6/d83/structPointCache.html#ae601ac8693d0881eb5da61700e84cf2d">flag</a> |= <a class="code" href="../../d2/d60/DNA__object__force_8h.html#ac268c1b0c0fa511a67c11bab2c8a0f77">PTCACHE_OUTDATED</a>;
<a name="l00377"></a>00377         }
<a name="l00378"></a>00378         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#af94280dc0a245719304fdff91327b1e0">BLI_freelistN</a>(&amp;pidlist);
<a name="l00379"></a>00379         
<a name="l00380"></a>00380         <a class="code" href="../../db/d45/BKE__pointcache_8h.html#ad1036d5ae255fe62240ecef0e2a24a85">BKE_ptcache_object_reset</a>(scene, obedit, <a class="code" href="../../db/d45/BKE__pointcache_8h.html#ad0da786e671a578f5467e04bcfdb99e4">PTCACHE_RESET_OUTDATED</a>);
<a name="l00381"></a>00381 
<a name="l00382"></a>00382         <span class="comment">/* also flush ob recalc, doesn&#39;t take much overhead, but used for particles */</span>
<a name="l00383"></a>00383         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a189b3a96923b2425ee7c0990c0b3fd20">OB_RECALC_OB</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>);
<a name="l00384"></a>00384     
<a name="l00385"></a>00385         <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a58e84e1ebbb3942ca4d7722b6c19c61d">EM_DO_UNDO</a>)
<a name="l00386"></a>00386             <a class="code" href="../../d6/df1/ED__util_8h.html#aa768644f80c2e60cce352dcc11970d1f">ED_undo_push</a>(C, <span class="stringliteral">&quot;Editmode&quot;</span>);
<a name="l00387"></a>00387     
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (flag &amp; EM_WAITCURSOR) <a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">waitcursor</a>(0);
<a name="l00389"></a>00389     
<a name="l00390"></a>00390         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a7ae2665ead51064b03b81e5d39813ad8">NS_MODE_OBJECT</a>, scene);
<a name="l00391"></a>00391 
<a name="l00392"></a>00392         obedit-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>;
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394 }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 
<a name="l00397"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a27307b0b1f78973a53cf0eeae515f575">00397</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#abf5a8346ea6543e8d977bfe1358c5c35">ED_object_enter_editmode</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a4cb926ee8d882f0a18f0a2dbdea46e73">flag</a>)
<a name="l00398"></a>00398 {
<a name="l00399"></a>00399     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00400"></a>00400     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00401"></a>00401     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00402"></a>00402     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l00403"></a>00403     <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00404"></a>00404     <span class="keywordtype">int</span> ok= 0;
<a name="l00405"></a>00405     
<a name="l00406"></a>00406     <span class="keywordflow">if</span> (scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a68db741bd7a79e16f765bba66cf276b1">id</a>.<a class="code" href="../../d8/d7e/structID.html#a56d730e86e0fc566622c5f5ea2a7de9f">lib</a>) <span class="keywordflow">return</span>;
<a name="l00407"></a>00407     
<a name="l00408"></a>00408     <span class="keywordflow">if</span> (sa &amp;&amp; sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>==<a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752caf4af925b582bb7d7590235f90a38c8a9">SPACE_VIEW3D</a>)
<a name="l00409"></a>00409         v3d= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00410"></a>00410     
<a name="l00411"></a>00411     <span class="keywordflow">if</span> ((flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a5cbd2d9b250f19144a4fbcf2a8679f03">EM_IGNORE_LAYER</a>)==0) {
<a name="l00412"></a>00412         base= <a class="code" href="../../df/d01/BKE__context_8h.html#a4f87fdb14b102e8da3f6ce0cfd5db7b4">CTX_data_active_base</a>(C); <span class="comment">/* active layer checked here for view3d */</span>
<a name="l00413"></a>00413 
<a name="l00414"></a>00414         <span class="keywordflow">if</span> (base==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;
<a name="l00415"></a>00415         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v3d &amp;&amp; (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> &amp; v3d-&gt;<a class="code" href="../../d6/deb/structView3D.html#a45ac0a23240ec719b0952d62190e9130">lay</a>)==0) <span class="keywordflow">return</span>;
<a name="l00416"></a>00416         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!v3d &amp;&amp; (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a8c3a6cb18ff56393b617978c497c54aa">lay</a> &amp; scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a506dd867fc58506c37c1e56f6b134056">lay</a>)==0) <span class="keywordflow">return</span>;
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418     <span class="keywordflow">else</span> {
<a name="l00419"></a>00419         base= scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a040bbb56eb7746d04c4ae455e5b1c638">basact</a>;
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ad3568ab74428f47aea1c855024e467f0">ELEM3</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, base, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)) <span class="keywordflow">return</span>;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     ob = base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>;
<a name="l00425"></a>00425     
<a name="l00426"></a>00426     <span class="keywordflow">if</span> (<a class="code" href="../../df/dac/BKE__object_8h.html#a7e66121d861c5070a2b6f9ed04ca87cb">object_data_is_libdata</a>(ob)) {
<a name="l00427"></a>00427         <a class="code" href="../../d6/db5/object__edit_8c.html#a7299ffcb12f2e47b18364e4864d829af">error_libdata</a>();
<a name="l00428"></a>00428         <span class="keywordflow">return</span>;
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430     
<a name="l00431"></a>00431     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a660a08f2196e720360e276ccf8125171">EM_WAITCURSOR</a>) <a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">waitcursor</a>(1);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="comment">/* note, when switching scenes the object can have editmode data but</span>
<a name="l00436"></a>00436 <span class="comment">     * not be scene-&gt;obedit: bug 22954, this avoids calling self eternally */</span>
<a name="l00437"></a>00437     <span class="keywordflow">if</span> ((ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>)==0)
<a name="l00438"></a>00438         <a class="code" href="../../da/d7a/ED__object_8h.html#a863532ca811bdeff8da110d13e95f36e">ED_object_toggle_modes</a>(C, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>;
<a name="l00441"></a>00441     
<a name="l00442"></a>00442     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00443"></a>00443         <a class="code" href="../../d5/de5/structBMEditMesh.html">BMEditMesh</a> *em;
<a name="l00444"></a>00444         ok= 1;
<a name="l00445"></a>00445         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a> = ob;  <span class="comment">/* context sees this */</span>
<a name="l00446"></a>00446 
<a name="l00447"></a>00447         <a class="code" href="../../d5/dd6/ED__mesh_8h.html#ad0ae502cbe75c98b006bf5864e8a5dfe">EDBM_mesh_make</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#ae91ddb50e1e5a0888a5636ce717a8ef3">CTX_data_tool_settings</a>(C), scene, ob);
<a name="l00448"></a>00448 
<a name="l00449"></a>00449         em = <a class="code" href="../../d6/dc7/BKE__tessmesh_8h.html#a4d9806c4d2c9d7777ae1619839d6baed" title="Return the BMEditMesh for a given object.">BMEdit_FromObject</a>(ob);
<a name="l00450"></a>00450         <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#affde14445f49f65ff4f5b592e44ee71a">LIKELY</a>(em)) {
<a name="l00451"></a>00451             <span class="comment">/* order doesn&#39;t matter */</span>
<a name="l00452"></a>00452             <a class="code" href="../../d5/dd6/ED__mesh_8h.html#afc818d571d27864536e18764e9c44a86">EDBM_mesh_normals_update</a>(em);
<a name="l00453"></a>00453             <a class="code" href="../../d6/dc7/BKE__tessmesh_8h.html#afc0e56c3f54c1f596f823eeb1d723611">BMEdit_RecalcTessellation</a>(em);
<a name="l00454"></a>00454             
<a name="l00455"></a>00455             <a class="code" href="../../d5/def/bmesh__marking_8c.html#a2be78c591f24ee32e021a8c9cf1df7d6" title="Select Mode Flush.">BM_mesh_select_mode_flush</a>(em-&gt;<a class="code" href="../../d5/de5/structBMEditMesh.html#a5b91780fbab0c3a8834609b21acde933">bm</a>);
<a name="l00456"></a>00456         }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a013a115fb79ed284e83eccf37f0dda8d">NS_EDITMODE_MESH</a>, scene);
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>) {
<a name="l00461"></a>00461         <a class="code" href="../../d9/d9f/structbArmature.html">bArmature</a> *arm= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00462"></a>00462         <span class="keywordflow">if</span> (!arm) <span class="keywordflow">return</span>;
<a name="l00463"></a>00463         <span class="comment">/*</span>
<a name="l00464"></a>00464 <span class="comment">         * The function object_data_is_libdata make a problem here, the</span>
<a name="l00465"></a>00465 <span class="comment">         * check for ob-&gt;proxy return 0 and let blender enter to edit mode</span>
<a name="l00466"></a>00466 <span class="comment">         * this causes a crash when you try leave the edit mode.</span>
<a name="l00467"></a>00467 <span class="comment">         * The problem is that i can&#39;t remove the ob-&gt;proxy check from</span>
<a name="l00468"></a>00468 <span class="comment">         * object_data_is_libdata that prevent the bugfix #6614, so</span>
<a name="l00469"></a>00469 <span class="comment">         * i add this little hack here.</span>
<a name="l00470"></a>00470 <span class="comment">         */</span>
<a name="l00471"></a>00471         <span class="keywordflow">if</span> (arm-&gt;<a class="code" href="../../d9/d9f/structbArmature.html#aac2e7b42212dbab58684702ed9f0921a">id</a>.<a class="code" href="../../d8/d7e/structID.html#a56d730e86e0fc566622c5f5ea2a7de9f">lib</a>) {
<a name="l00472"></a>00472             <a class="code" href="../../d6/db5/object__edit_8c.html#a7299ffcb12f2e47b18364e4864d829af">error_libdata</a>();
<a name="l00473"></a>00473             <span class="keywordflow">return</span>;
<a name="l00474"></a>00474         }
<a name="l00475"></a>00475         ok=1;
<a name="l00476"></a>00476         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= ob;
<a name="l00477"></a>00477         <a class="code" href="../../de/dbc/editarmature_8c.html#a6b653e4e5f5a043678f51b72abdf350d">ED_armature_to_edit</a>(ob);
<a name="l00478"></a>00478         <span class="comment">/* to ensure all goes in restposition and without striding */</span>
<a name="l00479"></a>00479         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a189b3a96923b2425ee7c0990c0b3fd20">OB_RECALC_OB</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#acd3a68b1b095992c7f50c74a480549bd">OB_RECALC_TIME</a>); <span class="comment">// XXX: should this be OB_RECALC_DATA?</span>
<a name="l00480"></a>00480 
<a name="l00481"></a>00481         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a62a56b717cb2eaa6be46bd5542176375">NS_EDITMODE_ARMATURE</a>, scene);
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>) {
<a name="l00484"></a>00484         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= ob; <span class="comment">// XXX for context</span>
<a name="l00485"></a>00485         ok= 1;
<a name="l00486"></a>00486         <a class="code" href="../../d9/d5f/editfont_8c.html#a0272139021f98ca52ef4ad9184c1ff12">make_editText</a>(ob);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a15c2f36f07a90307cfc161b3908904fb">NS_EDITMODE_TEXT</a>, scene);
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) {
<a name="l00491"></a>00491         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= ob; <span class="comment">// XXX for context</span>
<a name="l00492"></a>00492         ok= 1;
<a name="l00493"></a>00493         <a class="code" href="../../d4/dc6/ED__mball_8h.html#af263f0880a3ec6323e1a3d98c39e64e3">make_editMball</a>(ob);
<a name="l00494"></a>00494 
<a name="l00495"></a>00495         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#aa372dd0df4a44abddf285810e656a2f8">NS_EDITMODE_MBALL</a>, scene);
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a>) {
<a name="l00498"></a>00498         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= ob; <span class="comment">// XXX for context</span>
<a name="l00499"></a>00499         ok= 1;
<a name="l00500"></a>00500         <a class="code" href="../../d0/d36/ED__lattice_8h.html#a0046917039c968dd1ba80cf6ca125d35">make_editLatt</a>(ob);
<a name="l00501"></a>00501         
<a name="l00502"></a>00502         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#aadcd17e03b778311c2dffb3cabc23301">NS_EDITMODE_LATTICE</a>, scene);
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>) {
<a name="l00505"></a>00505         ok= 1;
<a name="l00506"></a>00506         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= ob; <span class="comment">// XXX for context</span>
<a name="l00507"></a>00507         <a class="code" href="../../d7/d55/editcurve_8c.html#ae19e1b4a1381892b6d47c7f45c651cb4">make_editNurb</a>(ob);
<a name="l00508"></a>00508         
<a name="l00509"></a>00509         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#ae6daf15c1b16f989fa3a082b8190edbd">NS_EDITMODE_CURVE</a>, scene);
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511     
<a name="l00512"></a>00512     <span class="keywordflow">if</span> (ok) {
<a name="l00513"></a>00513         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>);
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515     <span class="keywordflow">else</span> {
<a name="l00516"></a>00516         scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// XXX for context</span>
<a name="l00517"></a>00517         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>;
<a name="l00518"></a>00518         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a53c798c29ec45386460a892c62769440">ND_MODE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a7ae2665ead51064b03b81e5d39813ad8">NS_MODE_OBJECT</a>, scene);
<a name="l00519"></a>00519     }
<a name="l00520"></a>00520     
<a name="l00521"></a>00521     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../da/d7a/ED__object_8h.html#a58e84e1ebbb3942ca4d7722b6c19c61d">EM_DO_UNDO</a>) <a class="code" href="../../d6/df1/ED__util_8h.html#aa768644f80c2e60cce352dcc11970d1f">ED_undo_push</a>(C, <span class="stringliteral">&quot;Enter Editmode&quot;</span>);
<a name="l00522"></a>00522     <span class="keywordflow">if</span> (flag &amp; EM_WAITCURSOR) <a class="code" href="../../d6/db5/object__edit_8c.html#a2ce45548122988eaa3d0b9ec7ecbdd7e">waitcursor</a>(0);
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a402aaf5d8f8b354345e2d0fcc4441df4">00525</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a402aaf5d8f8b354345e2d0fcc4441df4">editmode_toggle_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527     <a class="code" href="../../d0/d65/structToolSettings.html">ToolSettings</a> *toolsettings =  <a class="code" href="../../df/d01/BKE__context_8h.html#ae91ddb50e1e5a0888a5636ce717a8ef3">CTX_data_tool_settings</a>(C);
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <span class="keywordflow">if</span> (!<a class="code" href="../../df/d01/BKE__context_8h.html#a323e283348470c038f3dd98de298a76b">CTX_data_edit_object</a>(C))
<a name="l00530"></a>00530         <a class="code" href="../../da/d7a/ED__object_8h.html#abf5a8346ea6543e8d977bfe1358c5c35">ED_object_enter_editmode</a>(C, <a class="code" href="../../da/d7a/ED__object_8h.html#a660a08f2196e720360e276ccf8125171">EM_WAITCURSOR</a>);
<a name="l00531"></a>00531     <span class="keywordflow">else</span>
<a name="l00532"></a>00532         <a class="code" href="../../da/d7a/ED__object_8h.html#a3dc41f10c2da040464140768d2898865">ED_object_exit_editmode</a>(C, <a class="code" href="../../da/d7a/ED__object_8h.html#a56f58f037f42277d234426571ee2de12">EM_FREEDATA</a>|<a class="code" href="../../da/d7a/ED__object_8h.html#a29af110c1f2bdde18ce63daf6c3575f5">EM_FREEUNDO</a>|<a class="code" href="../../da/d7a/ED__object_8h.html#a660a08f2196e720360e276ccf8125171">EM_WAITCURSOR</a>); <span class="comment">/* had EM_DO_UNDO but op flag calls undo too [#24685] */</span>
<a name="l00533"></a>00533     
<a name="l00534"></a>00534     <a class="code" href="../../de/d53/ED__image_8h.html#a1389e2af124f9272f54f37366ec2065b">ED_space_image_uv_sculpt_update</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C), toolsettings);
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00537"></a>00537 }
<a name="l00538"></a>00538 
<a name="l00539"></a><a class="code" href="../../d6/db5/object__edit_8c.html#acd358c5790be7ea20fcac609814eae2e">00539</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#acd358c5790be7ea20fcac609814eae2e">editmode_toggle_poll</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C)
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob = <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     <span class="comment">/* covers proxies too */</span>
<a name="l00544"></a>00544     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ob, ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>) || ((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;lib)
<a name="l00545"></a>00545         <span class="keywordflow">return</span> 0;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a405802c89add02dcf80f5fbcce040b09">OB_RESTRICT_VIEW</a>)
<a name="l00548"></a>00548         <span class="keywordflow">return</span> 0;
<a name="l00549"></a>00549 
<a name="l00550"></a>00550     <span class="keywordflow">return</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a> ||
<a name="l00551"></a>00551             ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a> ||
<a name="l00552"></a>00552             ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a> ||
<a name="l00553"></a>00553             ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>);
<a name="l00554"></a>00554 }
<a name="l00555"></a>00555 
<a name="l00556"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a5a089fdd0c8c52754536bd44f63a9f38">00556</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a96d675bcf5f03a18fc42039c20ff52fb">OBJECT_OT_editmode_toggle</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00557"></a>00557 {
<a name="l00558"></a>00558     
<a name="l00559"></a>00559     <span class="comment">/* identifiers */</span>
<a name="l00560"></a>00560     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Toggle Editmode&quot;</span>;
<a name="l00561"></a>00561     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Toggle object&#39;s editmode&quot;</span>;
<a name="l00562"></a>00562     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_editmode_toggle&quot;</span>;
<a name="l00563"></a>00563     
<a name="l00564"></a>00564     <span class="comment">/* api callbacks */</span>
<a name="l00565"></a>00565     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a402aaf5d8f8b354345e2d0fcc4441df4">editmode_toggle_exec</a>;
<a name="l00566"></a>00566     
<a name="l00567"></a>00567     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#acd358c5790be7ea20fcac609814eae2e">editmode_toggle_poll</a>;
<a name="l00568"></a>00568     
<a name="l00569"></a>00569     <span class="comment">/* flags */</span>
<a name="l00570"></a>00570     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00571"></a>00571 }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 <span class="comment">/* *************************** */</span>
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="../../d6/db5/object__edit_8c.html#acefa0d07972b01ca404729473400d01d">00575</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#acefa0d07972b01ca404729473400d01d">posemode_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l00576"></a>00576 {
<a name="l00577"></a>00577     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base= <a class="code" href="../../df/d01/BKE__context_8h.html#a4f87fdb14b102e8da3f6ce0cfd5db7b4">CTX_data_active_base</a>(C);
<a name="l00578"></a>00578     
<a name="l00579"></a>00579     <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>) {
<a name="l00580"></a>00580         <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>==<a class="code" href="../../df/d01/BKE__context_8h.html#a323e283348470c038f3dd98de298a76b">CTX_data_edit_object</a>(C)) {
<a name="l00581"></a>00581             <a class="code" href="../../da/d7a/ED__object_8h.html#a3dc41f10c2da040464140768d2898865">ED_object_exit_editmode</a>(C, <a class="code" href="../../da/d7a/ED__object_8h.html#a56f58f037f42277d234426571ee2de12">EM_FREEDATA</a>|<a class="code" href="../../da/d7a/ED__object_8h.html#a58e84e1ebbb3942ca4d7722b6c19c61d">EM_DO_UNDO</a>);
<a name="l00582"></a>00582             <a class="code" href="../../d1/d35/poseobject_8c.html#afc4fa94f2ac8d510509731371a31cb60">ED_armature_enter_posemode</a>(C, base);
<a name="l00583"></a>00583         }
<a name="l00584"></a>00584         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550acfed9b4bf4a7e2d3c5ae0b3571e38950">OB_MODE_POSE</a>)
<a name="l00585"></a>00585             <a class="code" href="../../d1/d35/poseobject_8c.html#a7200621a4a246fdc69b0b3089fe918c1">ED_armature_exit_posemode</a>(C, base);
<a name="l00586"></a>00586         <span class="keywordflow">else</span>
<a name="l00587"></a>00587             <a class="code" href="../../d1/d35/poseobject_8c.html#afc4fa94f2ac8d510509731371a31cb60">ED_armature_enter_posemode</a>(C, base);
<a name="l00588"></a>00588         
<a name="l00589"></a>00589         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00590"></a>00590     }
<a name="l00591"></a>00591     
<a name="l00592"></a>00592     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l00593"></a>00593 }
<a name="l00594"></a>00594 
<a name="l00595"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a21f286a310d8407df63aeec5f021f5b4">00595</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a5360e26b7452cf6b411345b68f412b61">OBJECT_OT_posemode_toggle</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot) 
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597     <span class="comment">/* identifiers */</span>
<a name="l00598"></a>00598     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Toggle Pose Mode&quot;</span>;
<a name="l00599"></a>00599     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_posemode_toggle&quot;</span>;
<a name="l00600"></a>00600     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Enable or disable posing/selecting bones&quot;</span>;
<a name="l00601"></a>00601     
<a name="l00602"></a>00602     <span class="comment">/* api callbacks */</span>
<a name="l00603"></a>00603     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#acefa0d07972b01ca404729473400d01d">posemode_exec</a>;
<a name="l00604"></a>00604     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l00605"></a>00605     
<a name="l00606"></a>00606     <span class="comment">/* flag */</span>
<a name="l00607"></a>00607     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ac63d80f895d0969365fd540bf20be939">00610</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ac63d80f895d0969365fd540bf20be939">copymenu_properties</a>(<a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00611"></a>00611 {   
<a name="l00612"></a>00612 <span class="comment">//XXX no longer used - to be removed - replaced by game_properties_copy_exec</span>
<a name="l00613"></a>00613     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l00614"></a>00614     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l00615"></a>00615     <span class="keywordtype">int</span> nr, tot=0;
<a name="l00616"></a>00616     <span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;
<a name="l00617"></a>00617     
<a name="l00618"></a>00618     prop= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00619"></a>00619     <span class="keywordflow">while</span> (prop) {
<a name="l00620"></a>00620         tot++;
<a name="l00621"></a>00621         prop= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a>;
<a name="l00622"></a>00622     }
<a name="l00623"></a>00623     
<a name="l00624"></a>00624     str= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(50 + 33*tot, <span class="stringliteral">&quot;copymenu prop&quot;</span>);
<a name="l00625"></a>00625     
<a name="l00626"></a>00626     <span class="keywordflow">if</span> (tot)
<a name="l00627"></a>00627         strcpy(str, <span class="stringliteral">&quot;Copy Property %t|Replace All|Merge All|%l&quot;</span>);
<a name="l00628"></a>00628     <span class="keywordflow">else</span>
<a name="l00629"></a>00629         strcpy(str, <span class="stringliteral">&quot;Copy Property %t|Clear All (no properties on active)&quot;</span>);
<a name="l00630"></a>00630     
<a name="l00631"></a>00631     tot= 0; 
<a name="l00632"></a>00632     prop= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00633"></a>00633     <span class="keywordflow">while</span> (prop) {
<a name="l00634"></a>00634         tot++;
<a name="l00635"></a>00635         strcat(str, <span class="stringliteral">&quot;|&quot;</span>);
<a name="l00636"></a>00636         strcat(str, prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>);
<a name="l00637"></a>00637         prop= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a>;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     nr= <a class="code" href="../../d6/db5/object__edit_8c.html#a6f935fee7a3c6e413fac3693c8305992">pupmenu</a>(str);
<a name="l00641"></a>00641     
<a name="l00642"></a>00642     <span class="keywordflow">if</span> ( nr==1 || nr==2 ) {
<a name="l00643"></a>00643         <span class="keywordflow">for</span> (base= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l00644"></a>00644             <span class="keywordflow">if</span> ((base != <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a71a9117cf3b8db805eb031926bff279a">BASACT</a>) &amp;&amp;(<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8d25ad9ae79efd1636a91eb64c5d3613">TESTBASELIB</a>(v3d, base))) {
<a name="l00645"></a>00645                 <span class="keywordflow">if</span> (nr==1) { <span class="comment">/* replace */</span>
<a name="l00646"></a>00646                     <a class="code" href="../../d1/db8/BKE__property_8h.html#ac7a35868da33ed464a6dc8025ddee66b">copy_properties</a>( &amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a> );
<a name="l00647"></a>00647                 }
<a name="l00648"></a>00648                 <span class="keywordflow">else</span> {
<a name="l00649"></a>00649                     <span class="keywordflow">for</span> (prop = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; prop; prop= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a> ) {
<a name="l00650"></a>00650                         <a class="code" href="../../d1/db8/BKE__property_8h.html#a77c37d8710bddafe284bbd21b0aeeaa3">set_ob_property</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, prop);
<a name="l00651"></a>00651                     }
<a name="l00652"></a>00652                 }
<a name="l00653"></a>00653             }
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr&gt;0) {
<a name="l00657"></a>00657         prop = <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a09f13df59d10774f0bcf69a054f9d865">BLI_findlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, nr-4); <span class="comment">/* account for first 3 menu items &amp; menu index starting at 1*/</span>
<a name="l00658"></a>00658         
<a name="l00659"></a>00659         <span class="keywordflow">if</span> (prop) {
<a name="l00660"></a>00660             <span class="keywordflow">for</span> (base= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l00661"></a>00661                 <span class="keywordflow">if</span> ((base != <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a71a9117cf3b8db805eb031926bff279a">BASACT</a>) &amp;&amp;(<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8d25ad9ae79efd1636a91eb64c5d3613">TESTBASELIB</a>(v3d, base))) {
<a name="l00662"></a>00662                     <a class="code" href="../../d1/db8/BKE__property_8h.html#a77c37d8710bddafe284bbd21b0aeeaa3">set_ob_property</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, prop);
<a name="l00663"></a>00663                 }
<a name="l00664"></a>00664             }
<a name="l00665"></a>00665         }
<a name="l00666"></a>00666     }
<a name="l00667"></a>00667     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(str);
<a name="l00668"></a>00668     
<a name="l00669"></a>00669 }
<a name="l00670"></a>00670 
<a name="l00671"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ab6a6f6723fb4e8ad4129045abb4fe1ec">00671</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ab6a6f6723fb4e8ad4129045abb4fe1ec">copymenu_logicbricks</a>(<a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00672"></a>00672 {
<a name="l00673"></a>00673 <span class="comment">//XXX no longer used - to be removed - replaced by logicbricks_copy_exec</span>
<a name="l00674"></a>00674     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l00675"></a>00675     
<a name="l00676"></a>00676     <span class="keywordflow">for</span> (base= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l00677"></a>00677         <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a> != ob) {
<a name="l00678"></a>00678             <span class="keywordflow">if</span> (<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8d25ad9ae79efd1636a91eb64c5d3613">TESTBASELIB</a>(v3d, base)) {
<a name="l00679"></a>00679                 
<a name="l00680"></a>00680                 <span class="comment">/* first: free all logic */</span>
<a name="l00681"></a>00681                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9da0ba10eaef0fc1f44d31a9cfd5c2cc">free_sensors</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>);               
<a name="l00682"></a>00682                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac898d6a27dae6861dfe111b34e25dba5">unlink_controllers</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>);
<a name="l00683"></a>00683                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#adef0684ec8735f2c5494a2a531df2fdb">free_controllers</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>);
<a name="l00684"></a>00684                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a45b6959bf13b90403d898be456245994">unlink_actuators</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>);
<a name="l00685"></a>00685                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a87d1ec59ffaffa8ac63caf7fbf97acce">free_actuators</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>);
<a name="l00686"></a>00686                 
<a name="l00687"></a>00687                 <span class="comment">/* now copy it, this also works without logicbricks! */</span>
<a name="l00688"></a>00688                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#aa0b67a9ebe3379d4b145d8a27c8763b4">clear_sca_new_poins_ob</a>(ob);
<a name="l00689"></a>00689                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9d8c6c58d7bfbcc4fe44773ff1cb66c5">copy_sensors</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>);
<a name="l00690"></a>00690                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a59c062adc4fd81c4e87d338de5115499">copy_controllers</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>);
<a name="l00691"></a>00691                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a98f9830489678544d33ee07fe97acb46">copy_actuators</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>);
<a name="l00692"></a>00692                 <a class="code" href="../../dd/de8/BKE__sca_8h.html#a29b7641c21f294b91158ea8082004c84">set_sca_new_poins_ob</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>);
<a name="l00693"></a>00693                 
<a name="l00694"></a>00694                 <span class="comment">/* some menu settings */</span>
<a name="l00695"></a>00695                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a7d2b85001a40e50703176f061109ae7a">scavisflag</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a7d2b85001a40e50703176f061109ae7a">scavisflag</a>;
<a name="l00696"></a>00696                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ae212b6fefec621cfbbff2c7250fc4a3c">scaflag</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae212b6fefec621cfbbff2c7250fc4a3c">scaflag</a>;
<a name="l00697"></a>00697                 
<a name="l00698"></a>00698                 <span class="comment">/* set the initial state */</span>
<a name="l00699"></a>00699                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a0db8d849f3d902f13e2f102848182758">state</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0db8d849f3d902f13e2f102848182758">state</a>;
<a name="l00700"></a>00700                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a5a3666f4a715fa60324a0efec6d722ab">init_state</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5a3666f4a715fa60324a0efec6d722ab">init_state</a>;
<a name="l00701"></a>00701             }
<a name="l00702"></a>00702         }
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704 }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706 <span class="comment">/* both pointers should exist */</span>
<a name="l00707"></a><a class="code" href="../../d6/db5/object__edit_8c.html#afe0446312a6351c776d83f01af807f5a">00707</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#afe0446312a6351c776d83f01af807f5a">copy_texture_space</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *to, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00708"></a>00708 {
<a name="l00709"></a>00709     <span class="keywordtype">float</span> *poin1= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *poin2= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00710"></a>00710     <span class="keywordtype">short</span> texflag= 0;
<a name="l00711"></a>00711     
<a name="l00712"></a>00712     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00713"></a>00713         texflag= ((<a class="code" href="../../da/d29/structMesh.html">Mesh</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag;
<a name="l00714"></a>00714         poin2= ((<a class="code" href="../../da/d29/structMesh.html">Mesh</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00715"></a>00715     }
<a name="l00716"></a>00716     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ad3568ab74428f47aea1c855024e467f0">ELEM3</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>)) {
<a name="l00717"></a>00717         texflag= ((<a class="code" href="../../da/d10/structCurve.html">Curve</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag;
<a name="l00718"></a>00718         poin2= ((<a class="code" href="../../da/d10/structCurve.html">Curve</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) {
<a name="l00721"></a>00721         texflag= ((<a class="code" href="../../d3/d6c/structMetaBall.html">MetaBall</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag;
<a name="l00722"></a>00722         poin2= ((<a class="code" href="../../d3/d6c/structMetaBall.html">MetaBall</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00723"></a>00723     }
<a name="l00724"></a>00724     <span class="keywordflow">else</span>
<a name="l00725"></a>00725         <span class="keywordflow">return</span>;
<a name="l00726"></a>00726         
<a name="l00727"></a>00727     <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00728"></a>00728         ((<a class="code" href="../../da/d29/structMesh.html">Mesh</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag= texflag;
<a name="l00729"></a>00729         poin1= ((<a class="code" href="../../da/d29/structMesh.html">Mesh</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ad3568ab74428f47aea1c855024e467f0">ELEM3</a>(to-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>)) {
<a name="l00732"></a>00732         ((<a class="code" href="../../da/d10/structCurve.html">Curve</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag= texflag;
<a name="l00733"></a>00733         poin1= ((<a class="code" href="../../da/d10/structCurve.html">Curve</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) {
<a name="l00736"></a>00736         ((<a class="code" href="../../d3/d6c/structMetaBall.html">MetaBall</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;texflag= texflag;
<a name="l00737"></a>00737         poin1= ((<a class="code" href="../../d3/d6c/structMetaBall.html">MetaBall</a> *)to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;loc;
<a name="l00738"></a>00738     }
<a name="l00739"></a>00739     <span class="keywordflow">else</span>
<a name="l00740"></a>00740         <span class="keywordflow">return</span>;
<a name="l00741"></a>00741     
<a name="l00742"></a>00742     memcpy(poin1, poin2, 9*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));  <span class="comment">/* this was noted in DNA_mesh, curve, mball */</span>
<a name="l00743"></a>00743     
<a name="l00744"></a>00744     <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00745"></a>00745         <span class="comment">/* pass */</span>
<a name="l00746"></a>00746     }
<a name="l00747"></a>00747     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) {
<a name="l00748"></a>00748         <a class="code" href="../../df/dae/BKE__mball_8h.html#a8780cd0454bbccdf8ac3dd0feac14211">tex_space_mball</a>(to);
<a name="l00749"></a>00749     }
<a name="l00750"></a>00750     <span class="keywordflow">else</span> {
<a name="l00751"></a>00751         <a class="code" href="../../d7/dfc/BKE__curve_8h.html#ac9989f27fff5ac61b86a9e8ec3bf7863">tex_space_curve</a>(to-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>);
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     
<a name="l00754"></a>00754 }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 <span class="comment">/* UNUSED, keep in case we want to copy functionality for use elsewhere */</span>
<a name="l00757"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a2f0f157b24eff777112d6cf3f2894b21">00757</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a2f0f157b24eff777112d6cf3f2894b21">copy_attr</a>(<a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d, <span class="keywordtype">short</span> event)
<a name="l00758"></a>00758 {
<a name="l00759"></a>00759     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00760"></a>00760     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l00761"></a>00761     <a class="code" href="../../da/d10/structCurve.html">Curve</a> *cu, *cu1;
<a name="l00762"></a>00762     <a class="code" href="../../d5/d47/structNurb.html">Nurb</a> *nu;
<a name="l00763"></a>00763     <span class="keywordtype">int</span> do_scene_sort= 0;
<a name="l00764"></a>00764     
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a68db741bd7a79e16f765bba66cf276b1">id</a>.<a class="code" href="../../d8/d7e/structID.html#a56d730e86e0fc566622c5f5ea2a7de9f">lib</a>) <span class="keywordflow">return</span>;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     <span class="keywordflow">if</span> (!(ob=<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a119935c54737bd111df8fd516c390000">OBACT</a>)) <span class="keywordflow">return</span>;
<a name="l00768"></a>00768     
<a name="l00769"></a>00769     <span class="keywordflow">if</span> (scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a1aa1978dba5dab99d35b6ba89e88b5bb">obedit</a>) { <span class="comment">// XXX get from context</span>
<a name="l00770"></a>00770         <span class="comment">/* obedit_copymenu(); */</span>
<a name="l00771"></a>00771         <span class="keywordflow">return</span>;
<a name="l00772"></a>00772     }
<a name="l00773"></a>00773     <span class="keywordflow">if</span> (event==9) {
<a name="l00774"></a>00774         <a class="code" href="../../d6/db5/object__edit_8c.html#ac63d80f895d0969365fd540bf20be939">copymenu_properties</a>(scene, v3d, ob);
<a name="l00775"></a>00775         <span class="keywordflow">return</span>;
<a name="l00776"></a>00776     }
<a name="l00777"></a>00777     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==10) {
<a name="l00778"></a>00778         <a class="code" href="../../d6/db5/object__edit_8c.html#ab6a6f6723fb4e8ad4129045abb4fe1ec">copymenu_logicbricks</a>(scene, v3d, ob);
<a name="l00779"></a>00779         <span class="keywordflow">return</span>;
<a name="l00780"></a>00780     }
<a name="l00781"></a>00781     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==24) {
<a name="l00782"></a>00782         <span class="comment">/* moved to object_link_modifiers */</span>
<a name="l00783"></a>00783         <span class="comment">/* copymenu_modifiers(bmain, scene, v3d, ob); */</span>
<a name="l00784"></a>00784         <span class="keywordflow">return</span>;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     <span class="keywordflow">for</span> (base= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l00788"></a>00788         <span class="keywordflow">if</span> (base != <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a71a9117cf3b8db805eb031926bff279a">BASACT</a>) {
<a name="l00789"></a>00789             <span class="keywordflow">if</span> (<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8d25ad9ae79efd1636a91eb64c5d3613">TESTBASELIB</a>(v3d, base)) {
<a name="l00790"></a>00790                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1bed6d05de7a141e9271fd0985b25a9c">recalc</a> |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a189b3a96923b2425ee7c0990c0b3fd20">OB_RECALC_OB</a>;
<a name="l00791"></a>00791                 
<a name="l00792"></a>00792                 <span class="keywordflow">if</span> (event==1) {  <span class="comment">/* loc */</span>
<a name="l00793"></a>00793                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a56283253ed00c7461cae7602135fbba9">loc</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a56283253ed00c7461cae7602135fbba9">loc</a>);
<a name="l00794"></a>00794                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a64775ee54d6d8362df47b69bc7e07873">dloc</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a64775ee54d6d8362df47b69bc7e07873">dloc</a>);
<a name="l00795"></a>00795                 }
<a name="l00796"></a>00796                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==2) {  <span class="comment">/* rot */</span>
<a name="l00797"></a>00797                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a73a4242dd7998a04e9895fc07c749153">rot</a>);
<a name="l00798"></a>00798                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a31c1663b026c3fdc7861f0b37dc1dfc2">drot</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a31c1663b026c3fdc7861f0b37dc1dfc2">drot</a>);
<a name="l00799"></a>00799 
<a name="l00800"></a>00800                     <a class="code" href="../../d4/d90/BLI__math__rotation_8h.html#ad474b870b380ee0c83901e9199506078">copy_qt_qt</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa6c96b622574614389429499cf9c158a">quat</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa6c96b622574614389429499cf9c158a">quat</a>);
<a name="l00801"></a>00801                     <a class="code" href="../../d4/d90/BLI__math__rotation_8h.html#ad474b870b380ee0c83901e9199506078">copy_qt_qt</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a340465bc2b585500eb421458bed679e9">dquat</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a340465bc2b585500eb421458bed679e9">dquat</a>);
<a name="l00802"></a>00802                 }
<a name="l00803"></a>00803                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==3) {  <span class="comment">/* size */</span>
<a name="l00804"></a>00804                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>);
<a name="l00805"></a>00805                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ac0afd409155d40dcdbedb76aa45b8ee2">dscale</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#ac0afd409155d40dcdbedb76aa45b8ee2">dscale</a>);
<a name="l00806"></a>00806                 }
<a name="l00807"></a>00807                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==4) {  <span class="comment">/* drawtype */</span>
<a name="l00808"></a>00808                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a849f37900ed7ea1f55647f7f4f8ed123">dt</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a849f37900ed7ea1f55647f7f4f8ed123">dt</a>;
<a name="l00809"></a>00809                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a2e4203e6270100e25ef3d5ec64fc31a6">dtx</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a2e4203e6270100e25ef3d5ec64fc31a6">dtx</a>;
<a name="l00810"></a>00810                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a7c962f95df9a7a7ccb78c59f1234e35c">empty_drawtype</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a7c962f95df9a7a7ccb78c59f1234e35c">empty_drawtype</a>;
<a name="l00811"></a>00811                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a9f106829a25bed222ba018f0d6d4f54a">empty_drawsize</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a9f106829a25bed222ba018f0d6d4f54a">empty_drawsize</a>;
<a name="l00812"></a>00812                 }
<a name="l00813"></a>00813                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==5) {  <span class="comment">/* time offs */</span>
<a name="l00814"></a>00814                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a5ef43875b28f238f6f78484e47881f99">sf</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5ef43875b28f238f6f78484e47881f99">sf</a>;
<a name="l00815"></a>00815                 }
<a name="l00816"></a>00816                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==6) {  <span class="comment">/* dupli */</span>
<a name="l00817"></a>00817                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a974897704b58c363ca02c573ac053e9e">dupon</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a974897704b58c363ca02c573ac053e9e">dupon</a>;
<a name="l00818"></a>00818                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1c84fe38b7a976ba4df35b694cb36b47">dupoff</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1c84fe38b7a976ba4df35b694cb36b47">dupoff</a>;
<a name="l00819"></a>00819                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#abe4c622f6da34dd68e712ba4ad78030a">dupsta</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe4c622f6da34dd68e712ba4ad78030a">dupsta</a>;
<a name="l00820"></a>00820                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a43317cb22427c977a3a4275612fbe9f0">dupend</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a43317cb22427c977a3a4275612fbe9f0">dupend</a>;
<a name="l00821"></a>00821                     
<a name="l00822"></a>00822                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1091cd84d4d7227ab41b167e84be3065">transflag</a> &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a09b56b47e42a59a4266c995ded542ea6">OB_DUPLI</a>;
<a name="l00823"></a>00823                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1091cd84d4d7227ab41b167e84be3065">transflag</a> |= (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1091cd84d4d7227ab41b167e84be3065">transflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a09b56b47e42a59a4266c995ded542ea6">OB_DUPLI</a>);
<a name="l00824"></a>00824 
<a name="l00825"></a>00825                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>;
<a name="l00826"></a>00826                     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>)
<a name="l00827"></a>00827                         <a class="code" href="../../d8/db1/BKE__library_8h.html#a43e37bd819b3a44520ff6fbfd9e8962d">id_lib_extern</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>-&gt;<a class="code" href="../../d4/d91/structGroup.html#ab7e17dc53d15eeb5f6c4c7789d92b969">id</a>);
<a name="l00828"></a>00828                 }
<a name="l00829"></a>00829                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==7) {    <span class="comment">/* mass */</span>
<a name="l00830"></a>00830                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a60866179af7cb2aad410ea01de546e4e">mass</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a60866179af7cb2aad410ea01de546e4e">mass</a>;
<a name="l00831"></a>00831                 }
<a name="l00832"></a>00832                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==8) {    <span class="comment">/* damping */</span>
<a name="l00833"></a>00833                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a0f7412e63750dbfc2e4bd485ff7a9920">damping</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0f7412e63750dbfc2e4bd485ff7a9920">damping</a>;
<a name="l00834"></a>00834                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a0216bf8bf0f5207ab1ff917f30305d79">rdamping</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0216bf8bf0f5207ab1ff917f30305d79">rdamping</a>;
<a name="l00835"></a>00835                 }
<a name="l00836"></a>00836                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==11) {   <span class="comment">/* all physical attributes */</span>
<a name="l00837"></a>00837                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa98e0216a27ddd692f1ec329ce4a4db4">gameflag</a> = ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa98e0216a27ddd692f1ec329ce4a4db4">gameflag</a>;
<a name="l00838"></a>00838                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a068e01267176aa1f09b6651fc61ff6f7">inertia</a> = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a068e01267176aa1f09b6651fc61ff6f7">inertia</a>;
<a name="l00839"></a>00839                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af2829a0f4febb82506e7f5d2a99f8a3c">formfactor</a> = ob-&gt;<a class="code" href="../../de/de7/structObject.html#af2829a0f4febb82506e7f5d2a99f8a3c">formfactor</a>;
<a name="l00840"></a>00840                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a0f7412e63750dbfc2e4bd485ff7a9920">damping</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0f7412e63750dbfc2e4bd485ff7a9920">damping</a>;
<a name="l00841"></a>00841                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a0216bf8bf0f5207ab1ff917f30305d79">rdamping</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0216bf8bf0f5207ab1ff917f30305d79">rdamping</a>;
<a name="l00842"></a>00842                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ae7962f09a5ce8487ee62c560579256e6">min_vel</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae7962f09a5ce8487ee62c560579256e6">min_vel</a>;
<a name="l00843"></a>00843                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ab41861bda877603be3fd079c9d8ef0d6">max_vel</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ab41861bda877603be3fd079c9d8ef0d6">max_vel</a>;
<a name="l00844"></a>00844                     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa98e0216a27ddd692f1ec329ce4a4db4">gameflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a53ba2501623bb81463914897c276c1d3">OB_BOUNDS</a>) {
<a name="l00845"></a>00845                         base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a16dc75c68bc6868b924999fea2e85183">collision_boundtype</a> = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a16dc75c68bc6868b924999fea2e85183">collision_boundtype</a>;
<a name="l00846"></a>00846                     }
<a name="l00847"></a>00847                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1fc21f5de759e2ad98ee28422d872191">margin</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1fc21f5de759e2ad98ee28422d872191">margin</a>;
<a name="l00848"></a>00848                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#acaa3b12bf1664333e0bb2a4327faaef6">bsoft</a>= <a class="code" href="../../df/dac/BKE__object_8h.html#a1b25c3dfef9e6b1ab492ccd099103c1f">copy_bulletsoftbody</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#acaa3b12bf1664333e0bb2a4327faaef6">bsoft</a>);
<a name="l00849"></a>00849 
<a name="l00850"></a>00850                 }
<a name="l00851"></a>00851                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==17) {   <span class="comment">/* tex space */</span>
<a name="l00852"></a>00852                     <a class="code" href="../../d6/db5/object__edit_8c.html#afe0446312a6351c776d83f01af807f5a">copy_texture_space</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, ob);
<a name="l00853"></a>00853                 }
<a name="l00854"></a>00854                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==18) {   <span class="comment">/* font settings */</span>
<a name="l00855"></a>00855                     
<a name="l00856"></a>00856                     <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>) {
<a name="l00857"></a>00857                         cu= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00858"></a>00858                         cu1= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00859"></a>00859                         
<a name="l00860"></a>00860                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#aca1e05d7dbab07c38afbf4e56474c1ae">spacemode</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#aca1e05d7dbab07c38afbf4e56474c1ae">spacemode</a>;
<a name="l00861"></a>00861                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a0de9e46069c2ade3242130d71cbf8b8a">spacing</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a0de9e46069c2ade3242130d71cbf8b8a">spacing</a>;
<a name="l00862"></a>00862                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#acbb034dac5b4158a67bcf9150c9fa630">linedist</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#acbb034dac5b4158a67bcf9150c9fa630">linedist</a>;
<a name="l00863"></a>00863                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#aac04bddd4b1292b6bb749e7762131165">shear</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#aac04bddd4b1292b6bb749e7762131165">shear</a>;
<a name="l00864"></a>00864                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad0e4ea215dcd01147ad06b76e581eb9c">fsize</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#ad0e4ea215dcd01147ad06b76e581eb9c">fsize</a>;
<a name="l00865"></a>00865                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a1d0112868c4d31b067bf662f81c83790">xof</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a1d0112868c4d31b067bf662f81c83790">xof</a>;
<a name="l00866"></a>00866                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad28126b68b497a6f89737747072cd928">yof</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#ad28126b68b497a6f89737747072cd928">yof</a>;
<a name="l00867"></a>00867                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#aab9f61871625a95c78c288429b4b6d74">textoncurve</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#aab9f61871625a95c78c288429b4b6d74">textoncurve</a>;
<a name="l00868"></a>00868                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a7aaf33141afe2cd8eb03e34256fd09db">wordspace</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a7aaf33141afe2cd8eb03e34256fd09db">wordspace</a>;
<a name="l00869"></a>00869                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a4efca514209248eed86bc4f38dd3ba67">ulpos</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a4efca514209248eed86bc4f38dd3ba67">ulpos</a>;
<a name="l00870"></a>00870                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a4e0212cf92e3b7f1d2c355632c566905">ulheight</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a4e0212cf92e3b7f1d2c355632c566905">ulheight</a>;
<a name="l00871"></a>00871                         <span class="keywordflow">if</span> (cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a1735002958cbeb8aaf88094ef6596e78">vfont</a>) cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a1735002958cbeb8aaf88094ef6596e78">vfont</a>-&gt;<a class="code" href="../../dc/dbe/structVFont.html#aa6ee47902f7fe209564d555dd4d8969d">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00872"></a>00872                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a1735002958cbeb8aaf88094ef6596e78">vfont</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a1735002958cbeb8aaf88094ef6596e78">vfont</a>;
<a name="l00873"></a>00873                         <a class="code" href="../../d8/db1/BKE__library_8h.html#a967d1ceef29b2612ef6e03194c512ad6">id_us_plus</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a1735002958cbeb8aaf88094ef6596e78">vfont</a>);
<a name="l00874"></a>00874                         <span class="keywordflow">if</span> (cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a97e02bc14fc71f7a56cf4dfb92c6cc4e">vfontb</a>) cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a97e02bc14fc71f7a56cf4dfb92c6cc4e">vfontb</a>-&gt;<a class="code" href="../../dc/dbe/structVFont.html#aa6ee47902f7fe209564d555dd4d8969d">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00875"></a>00875                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a97e02bc14fc71f7a56cf4dfb92c6cc4e">vfontb</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a97e02bc14fc71f7a56cf4dfb92c6cc4e">vfontb</a>;
<a name="l00876"></a>00876                         <a class="code" href="../../d8/db1/BKE__library_8h.html#a967d1ceef29b2612ef6e03194c512ad6">id_us_plus</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a97e02bc14fc71f7a56cf4dfb92c6cc4e">vfontb</a>);
<a name="l00877"></a>00877                         <span class="keywordflow">if</span> (cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abb6c8efed809e4d4d0a9a8cf6ffe08e0">vfonti</a>) cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abb6c8efed809e4d4d0a9a8cf6ffe08e0">vfonti</a>-&gt;<a class="code" href="../../dc/dbe/structVFont.html#aa6ee47902f7fe209564d555dd4d8969d">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00878"></a>00878                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abb6c8efed809e4d4d0a9a8cf6ffe08e0">vfonti</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#abb6c8efed809e4d4d0a9a8cf6ffe08e0">vfonti</a>;
<a name="l00879"></a>00879                         <a class="code" href="../../d8/db1/BKE__library_8h.html#a967d1ceef29b2612ef6e03194c512ad6">id_us_plus</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abb6c8efed809e4d4d0a9a8cf6ffe08e0">vfonti</a>);
<a name="l00880"></a>00880                         <span class="keywordflow">if</span> (cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad2b3c8b2a7e3439d1257ad170329902f">vfontbi</a>) cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad2b3c8b2a7e3439d1257ad170329902f">vfontbi</a>-&gt;<a class="code" href="../../dc/dbe/structVFont.html#aa6ee47902f7fe209564d555dd4d8969d">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad88374dc626795552b5c3f5b77fab1ab">us</a>--;
<a name="l00881"></a>00881                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad2b3c8b2a7e3439d1257ad170329902f">vfontbi</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#ad2b3c8b2a7e3439d1257ad170329902f">vfontbi</a>;
<a name="l00882"></a>00882                         <a class="code" href="../../d8/db1/BKE__library_8h.html#a967d1ceef29b2612ef6e03194c512ad6">id_us_plus</a>((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ad2b3c8b2a7e3439d1257ad170329902f">vfontbi</a>);                     
<a name="l00883"></a>00883 
<a name="l00884"></a>00884                         <a class="code" href="../../d0/d06/BKE__font_8h.html#a34e015d65829050ac2c576349bdac8b2">BKE_text_to_curve</a>(bmain, scene, base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, 0); <span class="comment">/* needed? */</span>
<a name="l00885"></a>00885 
<a name="l00886"></a>00886                         
<a name="l00887"></a>00887                         <a class="code" href="../../d3/db3/BLI__string_8h.html#a98d7c9cb4a81dbe506d1972b306300ce">BLI_strncpy</a>(cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#acd60b5cafe9d5d30adbe63eb5d2564a9">family</a>, cu-&gt;<a class="code" href="../../da/d10/structCurve.html#acd60b5cafe9d5d30adbe63eb5d2564a9">family</a>, <span class="keyword">sizeof</span>(cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#acd60b5cafe9d5d30adbe63eb5d2564a9">family</a>));
<a name="l00888"></a>00888                         
<a name="l00889"></a>00889                         base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1bed6d05de7a141e9271fd0985b25a9c">recalc</a> |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>;
<a name="l00890"></a>00890                     }
<a name="l00891"></a>00891                 }
<a name="l00892"></a>00892                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==19) {   <span class="comment">/* bevel settings */</span>
<a name="l00893"></a>00893                     
<a name="l00894"></a>00894                     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>)) {
<a name="l00895"></a>00895                         cu= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00896"></a>00896                         cu1= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00897"></a>00897                         
<a name="l00898"></a>00898                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a0051539d4e4be6831fed5babb371b19b">bevobj</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a0051539d4e4be6831fed5babb371b19b">bevobj</a>;
<a name="l00899"></a>00899                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#aee5423fad7444492028435713c64be0f">taperobj</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#aee5423fad7444492028435713c64be0f">taperobj</a>;
<a name="l00900"></a>00900                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#aec33e225f723d3068a172028f5e2c22f">width</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#aec33e225f723d3068a172028f5e2c22f">width</a>;
<a name="l00901"></a>00901                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a632137c42cceb1370dd865f64daae1d7">bevresol</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a632137c42cceb1370dd865f64daae1d7">bevresol</a>;
<a name="l00902"></a>00902                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a22c6cd81bc29dbb30accecc67979e587">ext1</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a22c6cd81bc29dbb30accecc67979e587">ext1</a>;
<a name="l00903"></a>00903                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#add39d47101587c286cd77e2045bc9129">ext2</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#add39d47101587c286cd77e2045bc9129">ext2</a>;
<a name="l00904"></a>00904                         
<a name="l00905"></a>00905                         base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1bed6d05de7a141e9271fd0985b25a9c">recalc</a> |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>;
<a name="l00906"></a>00906                     }
<a name="l00907"></a>00907                 }
<a name="l00908"></a>00908                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==25) {   <span class="comment">/* curve resolution */</span>
<a name="l00909"></a>00909 
<a name="l00910"></a>00910                     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>)) {
<a name="l00911"></a>00911                         cu= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00912"></a>00912                         cu1= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00913"></a>00913                         
<a name="l00914"></a>00914                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a69ba1bcc92e21490b438c065ec972cf6">resolu</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#a69ba1bcc92e21490b438c065ec972cf6">resolu</a>;
<a name="l00915"></a>00915                         cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#af7040ffbe95c9d62cd327296a1752b5e">resolu_ren</a>= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#af7040ffbe95c9d62cd327296a1752b5e">resolu_ren</a>;
<a name="l00916"></a>00916                         
<a name="l00917"></a>00917                         nu= cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#ac93326a4cc67ccb5d9725bf0ed3432d1">nurb</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l00918"></a>00918                         
<a name="l00919"></a>00919                         <span class="keywordflow">while</span> (nu) {
<a name="l00920"></a>00920                             nu-&gt;<a class="code" href="../../d5/d47/structNurb.html#aa4d5f2ef5e32e94dcbe14a1a7d946a30">resolu</a>= cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#a69ba1bcc92e21490b438c065ec972cf6">resolu</a>;
<a name="l00921"></a>00921                             nu= nu-&gt;<a class="code" href="../../d5/d47/structNurb.html#a2a65b45cf9d2eb81b3b92d872e777aaa">next</a>;
<a name="l00922"></a>00922                         }
<a name="l00923"></a>00923                         
<a name="l00924"></a>00924                         base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1bed6d05de7a141e9271fd0985b25a9c">recalc</a> |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>;
<a name="l00925"></a>00925                     }
<a name="l00926"></a>00926                 }
<a name="l00927"></a>00927                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==21) {
<a name="l00928"></a>00928                     <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00929"></a>00929                         <a class="code" href="../../db/ddd/structModifierData.html">ModifierData</a> *md = <a class="code" href="../../d3/d0f/BKE__modifier_8h.html#a90fa4bb334209f7e9f25fc6c4a594574">modifiers_findByType</a>(ob, <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435a1eb467ffa009a46723f1bf21be5fd730">eModifierType_Subsurf</a>);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931                         <span class="keywordflow">if</span> (md) {
<a name="l00932"></a>00932                             <a class="code" href="../../db/ddd/structModifierData.html">ModifierData</a> *tmd = <a class="code" href="../../d3/d0f/BKE__modifier_8h.html#a90fa4bb334209f7e9f25fc6c4a594574">modifiers_findByType</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435a1eb467ffa009a46723f1bf21be5fd730">eModifierType_Subsurf</a>);
<a name="l00933"></a>00933 
<a name="l00934"></a>00934                             <span class="keywordflow">if</span> (!tmd) {
<a name="l00935"></a>00935                                 tmd = <a class="code" href="../../d3/d0f/BKE__modifier_8h.html#ad792bc6e3890679e671ffd17a10194c5">modifier_new</a>(<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435a1eb467ffa009a46723f1bf21be5fd730">eModifierType_Subsurf</a>);
<a name="l00936"></a>00936                                 <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a31fdd585d66951dfd084a8e8ee624a8d">modifiers</a>, tmd);
<a name="l00937"></a>00937                             }
<a name="l00938"></a>00938 
<a name="l00939"></a>00939                             <a class="code" href="../../d3/d0f/BKE__modifier_8h.html#a21920e59b89287398d748a987821c7f7">modifier_copyData</a>(md, tmd);
<a name="l00940"></a>00940                             base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a1bed6d05de7a141e9271fd0985b25a9c">recalc</a> |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>;
<a name="l00941"></a>00941                         }
<a name="l00942"></a>00942                     }
<a name="l00943"></a>00943                 }
<a name="l00944"></a>00944                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==22) {
<a name="l00945"></a>00945                     <span class="comment">/* Copy the constraint channels over */</span>
<a name="l00946"></a>00946                     <a class="code" href="../../d4/ddd/BKE__constraint_8h.html#aae4fc24d25acff1839e4df3812990864">copy_constraints</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a15cd252985e63b0a4b12a07297a7aa8b">constraints</a>, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a15cd252985e63b0a4b12a07297a7aa8b">constraints</a>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00947"></a>00947                     
<a name="l00948"></a>00948                     do_scene_sort= 1;
<a name="l00949"></a>00949                 }
<a name="l00950"></a>00950                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==23) {
<a name="l00951"></a>00951                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#aa4ef225512c8db13e0072175a82e5438">softflag</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa4ef225512c8db13e0072175a82e5438">softflag</a>;
<a name="l00952"></a>00952                     <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a65de819e902d20e3001de9ef8cad19df">soft</a>) <a class="code" href="../../d6/df9/BKE__softbody_8h.html#ac796cb7991daed1fc65d8c59c38cd085">sbFree</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a65de819e902d20e3001de9ef8cad19df">soft</a>);
<a name="l00953"></a>00953                     
<a name="l00954"></a>00954                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a65de819e902d20e3001de9ef8cad19df">soft</a>= <a class="code" href="../../df/dac/BKE__object_8h.html#a2ca80bbdfb5be683cec611c7696c0220">copy_softbody</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a65de819e902d20e3001de9ef8cad19df">soft</a>);
<a name="l00955"></a>00955 
<a name="l00956"></a>00956                     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d0f/BKE__modifier_8h.html#a90fa4bb334209f7e9f25fc6c4a594574">modifiers_findByType</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>, <a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435ae1ec58b8e8caf9b712d9e318c1afebf7">eModifierType_Softbody</a>)) {
<a name="l00957"></a>00957                         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#ab5b5ec121d2522c0e8e74e01d6517feb">BLI_addhead</a>(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a31fdd585d66951dfd084a8e8ee624a8d">modifiers</a>, <a class="code" href="../../d3/d0f/BKE__modifier_8h.html#ad792bc6e3890679e671ffd17a10194c5">modifier_new</a>(<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435ae1ec58b8e8caf9b712d9e318c1afebf7">eModifierType_Softbody</a>));
<a name="l00958"></a>00958                     }
<a name="l00959"></a>00959                 }
<a name="l00960"></a>00960                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==26) {
<a name="l00961"></a>00961 <span class="preprocessor">#if 0 // XXX old animation system</span>
<a name="l00962"></a>00962 <span class="preprocessor"></span>                    copy_nlastrips(&amp;base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;nlastrips, &amp;ob-&gt;nlastrips);
<a name="l00963"></a>00963 <span class="preprocessor">#endif // XXX old animation system</span>
<a name="l00964"></a>00964 <span class="preprocessor"></span>                }
<a name="l00965"></a>00965                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==27) {   <span class="comment">/* autosmooth */</span>
<a name="l00966"></a>00966                     <span class="keywordflow">if</span> (base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l00967"></a>00967                         <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *me= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00968"></a>00968                         <a class="code" href="../../da/d29/structMesh.html">Mesh</a> *cme= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00969"></a>00969                         cme-&gt;<a class="code" href="../../da/d29/structMesh.html#ad97b68a3564c0ae6104727c0e854e7da">smoothresh</a>= me-&gt;<a class="code" href="../../da/d29/structMesh.html#ad97b68a3564c0ae6104727c0e854e7da">smoothresh</a>;
<a name="l00970"></a>00970                         <span class="keywordflow">if</span> (me-&gt;<a class="code" href="../../da/d29/structMesh.html#a941cdd9a07c81485677efb6b444eb8ad">flag</a> &amp; <a class="code" href="../../df/d96/DNA__mesh__types_8h.html#aa4493bee2b08682f95236d4fe2cf2539">ME_AUTOSMOOTH</a>)
<a name="l00971"></a>00971                             cme-&gt;<a class="code" href="../../da/d29/structMesh.html#a941cdd9a07c81485677efb6b444eb8ad">flag</a> |= <a class="code" href="../../df/d96/DNA__mesh__types_8h.html#aa4493bee2b08682f95236d4fe2cf2539">ME_AUTOSMOOTH</a>;
<a name="l00972"></a>00972                         <span class="keywordflow">else</span>
<a name="l00973"></a>00973                             cme-&gt;<a class="code" href="../../da/d29/structMesh.html#a941cdd9a07c81485677efb6b444eb8ad">flag</a> &amp;= ~<a class="code" href="../../df/d96/DNA__mesh__types_8h.html#aa4493bee2b08682f95236d4fe2cf2539">ME_AUTOSMOOTH</a>;
<a name="l00974"></a>00974                     }
<a name="l00975"></a>00975                 }
<a name="l00976"></a>00976                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==28) { <span class="comment">/* UV orco */</span>
<a name="l00977"></a>00977                     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>)) {
<a name="l00978"></a>00978                         cu= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00979"></a>00979                         cu1= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00980"></a>00980                         
<a name="l00981"></a>00981                         <span class="keywordflow">if</span> (cu-&gt;<a class="code" href="../../da/d10/structCurve.html#abd5b5dcd85b78434895b347aea37d841">flag</a> &amp; <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#a0d3924cf8507e9810ae3e1c0d65cf770">CU_UV_ORCO</a>)
<a name="l00982"></a>00982                             cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abd5b5dcd85b78434895b347aea37d841">flag</a> |= <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#a0d3924cf8507e9810ae3e1c0d65cf770">CU_UV_ORCO</a>;
<a name="l00983"></a>00983                         <span class="keywordflow">else</span>
<a name="l00984"></a>00984                             cu1-&gt;<a class="code" href="../../da/d10/structCurve.html#abd5b5dcd85b78434895b347aea37d841">flag</a> &amp;= ~<a class="code" href="../../d6/d88/DNA__curve__types_8h.html#a0d3924cf8507e9810ae3e1c0d65cf770">CU_UV_ORCO</a>;
<a name="l00985"></a>00985                     }       
<a name="l00986"></a>00986                 }
<a name="l00987"></a>00987                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==29) { <span class="comment">/* protected bits */</span>
<a name="l00988"></a>00988                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#ac88697264b6e0f80da4e5ebdb96430b5">protectflag</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ac88697264b6e0f80da4e5ebdb96430b5">protectflag</a>;
<a name="l00989"></a>00989                 }
<a name="l00990"></a>00990                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==30) { <span class="comment">/* index object */</span>
<a name="l00991"></a>00991                     base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>;
<a name="l00992"></a>00992                 }
<a name="l00993"></a>00993                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==31) { <span class="comment">/* object color */</span>
<a name="l00994"></a>00994                     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a097c602b13da72154b19976046f63ef3">copy_v4_v4</a>(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>);
<a name="l00995"></a>00995                 }
<a name="l00996"></a>00996             }
<a name="l00997"></a>00997         }
<a name="l00998"></a>00998     }
<a name="l00999"></a>00999     
<a name="l01000"></a>01000     <span class="keywordflow">if</span> (do_scene_sort)
<a name="l01001"></a>01001         <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a1916587a9ec19eb3543b1c1bc54a8ded">DAG_scene_sort</a>(bmain, scene);
<a name="l01002"></a>01002 
<a name="l01003"></a>01003     <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#ac7bea022d30913f94c94aff54e0fc186">DAG_ids_flush_update</a>(bmain, 0);
<a name="l01004"></a>01004 }
<a name="l01005"></a>01005 
<a name="l01006"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a00d7aa9840416c75109f3f9756114539">01006</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a26aa3564d15ae9e56cce569a324df5da">UNUSED_FUNCTION</a>(<a class="code" href="../../d6/db5/object__edit_8c.html#a00d7aa9840416c75109f3f9756114539">copy_attr_menu</a>)(<a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d)
<a name="l01007"></a>01007 {
<a name="l01008"></a>01008     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l01009"></a>01009     <span class="keywordtype">short</span> event;
<a name="l01010"></a>01010     <span class="keywordtype">char</span> <a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[512];
<a name="l01011"></a>01011     
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (!(ob=<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a119935c54737bd111df8fd516c390000">OBACT</a>)) <span class="keywordflow">return</span>;
<a name="l01013"></a>01013     
<a name="l01014"></a>01014     <span class="keywordflow">if</span> (scene-&gt;obedit) { <span class="comment">// XXX get from context</span>
<a name="l01015"></a>01015 <span class="comment">//      if (ob-&gt;type == OB_MESH)</span>
<a name="l01016"></a>01016 <span class="comment">// XXX          mesh_copy_menu();</span>
<a name="l01017"></a>01017         <span class="keywordflow">return</span>;
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019     
<a name="l01020"></a>01020     <span class="comment">/* Object Mode */</span>
<a name="l01021"></a>01021     
<a name="l01022"></a>01022     <span class="comment">/* If you change this menu, don&#39;t forget to update the menu in header_view3d.c</span>
<a name="l01023"></a>01023 <span class="comment">     * view3d_edit_object_copyattrmenu() and in toolbox.c</span>
<a name="l01024"></a>01024 <span class="comment">     */</span>
<a name="l01025"></a>01025     
<a name="l01026"></a>01026     strcpy(str,
<a name="l01027"></a>01027            <span class="stringliteral">&quot;Copy Attributes %t|Location%x1|Rotation%x2|Size%x3|Draw Options%x4|&quot;</span>
<a name="l01028"></a>01028            <span class="stringliteral">&quot;Time Offset%x5|Dupli%x6|Object Color%x31|%l|Mass%x7|Damping%x8|All Physical Attributes%x11|Properties%x9|&quot;</span>
<a name="l01029"></a>01029            <span class="stringliteral">&quot;Logic Bricks%x10|Protected Transform%x29|%l&quot;</span>);
<a name="l01030"></a>01030     
<a name="l01031"></a>01031     strcat (str, <span class="stringliteral">&quot;|Object Constraints%x22&quot;</span>);
<a name="l01032"></a>01032     strcat (str, <span class="stringliteral">&quot;|NLA Strips%x26&quot;</span>);
<a name="l01033"></a>01033     
<a name="l01034"></a>01034 <span class="comment">// XXX  if (OB_TYPE_SUPPORT_MATERIAL(ob-&gt;type)) {</span>
<a name="l01035"></a>01035 <span class="comment">//      strcat(str, &quot;|Texture Space%x17&quot;);</span>
<a name="l01036"></a>01036 <span class="comment">//  }   </span>
<a name="l01037"></a>01037     
<a name="l01038"></a>01038     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>) strcat(str, <span class="stringliteral">&quot;|Font Settings%x18|Bevel Settings%x19&quot;</span>);
<a name="l01039"></a>01039     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>) strcat(str, <span class="stringliteral">&quot;|Bevel Settings%x19|UV Orco%x28&quot;</span>);
<a name="l01040"></a>01040     
<a name="l01041"></a>01041     <span class="keywordflow">if</span> ((ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>) || (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>)) {
<a name="l01042"></a>01042             strcat(str, <span class="stringliteral">&quot;|Curve Resolution%x25&quot;</span>);
<a name="l01043"></a>01043     }
<a name="l01044"></a>01044 
<a name="l01045"></a>01045     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l01046"></a>01046         strcat(str, <span class="stringliteral">&quot;|Subsurf Settings%x21|AutoSmooth%x27&quot;</span>);
<a name="l01047"></a>01047     }
<a name="l01048"></a>01048 
<a name="l01049"></a>01049     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a65de819e902d20e3001de9ef8cad19df">soft</a>) strcat(str, <span class="stringliteral">&quot;|Soft Body Settings%x23&quot;</span>);
<a name="l01050"></a>01050     
<a name="l01051"></a>01051     strcat(str, <span class="stringliteral">&quot;|Pass Index%x30&quot;</span>);
<a name="l01052"></a>01052     
<a name="l01053"></a>01053     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a> || ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>) {
<a name="l01054"></a>01054         strcat(str, <span class="stringliteral">&quot;|Modifiers ...%x24&quot;</span>);
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056 
<a name="l01057"></a>01057     <span class="keyword">event</span>= <a class="code" href="../../d6/db5/object__edit_8c.html#a6f935fee7a3c6e413fac3693c8305992">pupmenu</a>(str);
<a name="l01058"></a>01058     <span class="keywordflow">if</span> (event&lt;= 0) <span class="keywordflow">return</span>;
<a name="l01059"></a>01059     
<a name="l01060"></a>01060     <a class="code" href="../../d6/db5/object__edit_8c.html#a2f0f157b24eff777112d6cf3f2894b21">copy_attr</a>(bmain, scene, v3d, event);
<a name="l01061"></a>01061 }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063 <span class="comment">/* ******************* force field toggle operator ***************** */</span>
<a name="l01064"></a>01064 
<a name="l01065"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a7e168185be6509d21cb2302b5e98285b">01065</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a7e168185be6509d21cb2302b5e98285b">forcefield_toggle_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l01066"></a>01066 {
<a name="l01067"></a>01067     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob = <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l01068"></a>01068 
<a name="l01069"></a>01069     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5af3210d70b057f538ce36c033548836">pd</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01070"></a>01070         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5af3210d70b057f538ce36c033548836">pd</a> = <a class="code" href="../../dc/d65/BKE__effect_8h.html#a1f9e944ae6357270e13c64fa3e39e34c">object_add_collision_fields</a>(<a class="code" href="../../d2/d60/DNA__object__force_8h.html#ac0a610e8040ea8fe8e9b696ab71e2e1ba4cec14f5eac6fcea81c188de2fbf81ed">PFIELD_FORCE</a>);
<a name="l01071"></a>01071 
<a name="l01072"></a>01072     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5af3210d70b057f538ce36c033548836">pd</a>-&gt;<a class="code" href="../../d3/d76/structPartDeflect.html#af87e0d987bb26cc6ef8d580e6c97bc57">forcefield</a> == 0)
<a name="l01073"></a>01073         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5af3210d70b057f538ce36c033548836">pd</a>-&gt;<a class="code" href="../../d3/d76/structPartDeflect.html#af87e0d987bb26cc6ef8d580e6c97bc57">forcefield</a> = <a class="code" href="../../d2/d60/DNA__object__force_8h.html#ac0a610e8040ea8fe8e9b696ab71e2e1ba4cec14f5eac6fcea81c188de2fbf81ed">PFIELD_FORCE</a>;
<a name="l01074"></a>01074     <span class="keywordflow">else</span>
<a name="l01075"></a>01075         ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5af3210d70b057f538ce36c033548836">pd</a>-&gt;<a class="code" href="../../d3/d76/structPartDeflect.html#af87e0d987bb26cc6ef8d580e6c97bc57">forcefield</a> = 0;
<a name="l01076"></a>01076     
<a name="l01077"></a>01077     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1f2c5ee380a0a55abaf43b7bceeb7688">ND_DRAW</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01078"></a>01078 
<a name="l01079"></a>01079     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01080"></a>01080 }
<a name="l01081"></a>01081 
<a name="l01082"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a73e2878e8a96354b7560d211f72b0b82">01082</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a84d1d23e7dd364b1cd43a76e10ff7456">OBJECT_OT_forcefield_toggle</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01083"></a>01083 {
<a name="l01084"></a>01084     
<a name="l01085"></a>01085     <span class="comment">/* identifiers */</span>
<a name="l01086"></a>01086     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Toggle Force Field&quot;</span>;
<a name="l01087"></a>01087     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Toggle object&#39;s force field&quot;</span>;
<a name="l01088"></a>01088     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_forcefield_toggle&quot;</span>;
<a name="l01089"></a>01089     
<a name="l01090"></a>01090     <span class="comment">/* api callbacks */</span>
<a name="l01091"></a>01091     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a7e168185be6509d21cb2302b5e98285b">forcefield_toggle_exec</a>;
<a name="l01092"></a>01092     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01093"></a>01093     
<a name="l01094"></a>01094     <span class="comment">/* flags */</span>
<a name="l01095"></a>01095     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01096"></a>01096 }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 <span class="comment">/* ********************************************** */</span>
<a name="l01099"></a>01099 <span class="comment">/* Motion Paths */</span>
<a name="l01100"></a>01100 
<a name="l01101"></a>01101 <span class="comment">/* For the object with pose/action: update paths for those that have got them</span>
<a name="l01102"></a>01102 <span class="comment"> * This should selectively update paths that exist...</span>
<a name="l01103"></a>01103 <span class="comment"> *</span>
<a name="l01104"></a>01104 <span class="comment"> * To be called from various tools that do incremental updates </span>
<a name="l01105"></a>01105 <span class="comment"> */</span>
<a name="l01106"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ab2260c34cbcd8ae17a589d93604b518f">01106</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#afa353f849a7fd76e81107f48e74ae129">ED_objects_recalculate_paths</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene)
<a name="l01107"></a>01107 {
<a name="l01108"></a>01108     <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> targets = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l01109"></a>01109     
<a name="l01110"></a>01110     <span class="comment">/* loop over objects in scene */</span>
<a name="l01111"></a>01111     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob, selected_editable_objects) 
<a name="l01112"></a>01112     {
<a name="l01113"></a>01113         <span class="comment">/* set flag to force recalc, then grab the relevant bones to target */</span>
<a name="l01114"></a>01114         ob-&gt;avs.recalc |= <a class="code" href="../../dc/d2a/DNA__action__types_8h.html#a9245b686ba91925c8f3d8aa740417f53ad996e2788abb46342086eaa370d78ece">ANIMVIZ_RECALC_PATHS</a>;
<a name="l01115"></a>01115         <a class="code" href="../../df/dd0/BKE__anim_8h.html#a5af9db948cf5935289ca27dab55b5949">animviz_get_object_motionpaths</a>(ob, &amp;targets);
<a name="l01116"></a>01116     }
<a name="l01117"></a>01117     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01118"></a>01118     
<a name="l01119"></a>01119     <span class="comment">/* recalculate paths, then free */</span>
<a name="l01120"></a>01120     <a class="code" href="../../df/dd0/BKE__anim_8h.html#a412c36ec3f04c093569967f56c15945e">animviz_calc_motionpaths</a>(scene, &amp;targets);
<a name="l01121"></a>01121     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#af94280dc0a245719304fdff91327b1e0">BLI_freelistN</a>(&amp;targets);
<a name="l01122"></a>01122 }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124 <span class="comment">/* For the object with pose/action: create path curves for selected bones </span>
<a name="l01125"></a>01125 <span class="comment"> * This recalculates the WHOLE path within the pchan-&gt;pathsf and pchan-&gt;pathef range</span>
<a name="l01126"></a>01126 <span class="comment"> */</span>
<a name="l01127"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a975a8e4a1c73abe81813e915909715b0">01127</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a975a8e4a1c73abe81813e915909715b0">object_calculate_paths_exec</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01128"></a>01128 {
<a name="l01129"></a>01129     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l01130"></a>01130     
<a name="l01131"></a>01131     <span class="comment">/* set up path data for bones being calculated */</span>
<a name="l01132"></a>01132     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob, selected_editable_objects)  
<a name="l01133"></a>01133     {
<a name="l01134"></a>01134         <span class="comment">/* verify makes sure that the selected bone has a bone with the appropriate settings */</span>
<a name="l01135"></a>01135         <a class="code" href="../../df/dd0/BKE__anim_8h.html#ae09979b5b167d9500defcd50d0614d4e">animviz_verify_motionpaths</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, scene, ob, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01136"></a>01136     }
<a name="l01137"></a>01137     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01138"></a>01138     
<a name="l01139"></a>01139     <span class="comment">/* calculate the bones that now have motionpaths... */</span>
<a name="l01140"></a>01140     <span class="comment">// TODO: only make for the selected bones?</span>
<a name="l01141"></a>01141     <a class="code" href="../../da/d7a/ED__object_8h.html#afa353f849a7fd76e81107f48e74ae129">ED_objects_recalculate_paths</a>(C, scene);
<a name="l01142"></a>01142     
<a name="l01143"></a>01143     <span class="comment">/* notifiers for updates */</span>
<a name="l01144"></a>01144     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a72e1ed3dc8d04e8bc84328ec6ef6ce80">ND_POSE</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01145"></a>01145     
<a name="l01146"></a>01146     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>; 
<a name="l01147"></a>01147 }
<a name="l01148"></a>01148 
<a name="l01149"></a><a class="code" href="../../d3/d80/object__intern_8h.html#ae2f8ea805592088457cce77194278e41">01149</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#adccc5e038e259cbd3e6a72d3c84453cd">OBJECT_OT_paths_calculate</a> (<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01150"></a>01150 {
<a name="l01151"></a>01151     <span class="comment">/* identifiers */</span>
<a name="l01152"></a>01152     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Calculate Object Paths&quot;</span>;
<a name="l01153"></a>01153     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_paths_calculate&quot;</span>;
<a name="l01154"></a>01154     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Calculate paths for the selected bones&quot;</span>;
<a name="l01155"></a>01155     
<a name="l01156"></a>01156     <span class="comment">/* api callbacks */</span>
<a name="l01157"></a>01157     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a975a8e4a1c73abe81813e915909715b0">object_calculate_paths_exec</a>;
<a name="l01158"></a>01158     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01159"></a>01159     
<a name="l01160"></a>01160     <span class="comment">/* flags */</span>
<a name="l01161"></a>01161     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01162"></a>01162 }
<a name="l01163"></a>01163 
<a name="l01164"></a>01164 <span class="comment">/* --------- */</span>
<a name="l01165"></a>01165 
<a name="l01166"></a>01166 <span class="comment">/* for the object with pose/action: clear path curves for selected bones only */</span>
<a name="l01167"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a1a2721ececd121ed10e4bd8d5b8106ef">01167</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#a250202e57d79b5bb6effeade62d424f0">ED_objects_clear_paths</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C)
<a name="l01168"></a>01168 {
<a name="l01169"></a>01169     <span class="comment">/* loop over objects in scene */</span>
<a name="l01170"></a>01170     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob, selected_editable_objects) 
<a name="l01171"></a>01171     {
<a name="l01172"></a>01172         <span class="keywordflow">if</span> (ob-&gt;mpath) {
<a name="l01173"></a>01173             <a class="code" href="../../df/dd0/BKE__anim_8h.html#a3ff5e84c0dfc8cceffa38c3048cbede4">animviz_free_motionpath</a>(ob-&gt;mpath);
<a name="l01174"></a>01174             ob-&gt;mpath= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01175"></a>01175             ob-&gt;avs.path_bakeflag &amp;= ~<a class="code" href="../../dc/d2a/DNA__action__types_8h.html#a10649c21734145b9ff1cd2248d610e7bad7695beea9b150e286d2e267cf757ccb">MOTIONPATH_BAKE_HAS_PATHS</a>;
<a name="l01176"></a>01176         }
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01179"></a>01179 }
<a name="l01180"></a>01180 
<a name="l01181"></a>01181 <span class="comment">/* operator callback for this */</span>
<a name="l01182"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a79f77aa84ea22d58a6e5103b5d80420c">01182</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a79f77aa84ea22d58a6e5103b5d80420c">object_clear_paths_exec</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l01183"></a>01183 {   
<a name="l01184"></a>01184     <span class="comment">/* use the backend function for this */</span>
<a name="l01185"></a>01185     <a class="code" href="../../da/d7a/ED__object_8h.html#a250202e57d79b5bb6effeade62d424f0">ED_objects_clear_paths</a>(C);
<a name="l01186"></a>01186     
<a name="l01187"></a>01187     <span class="comment">/* notifiers for updates */</span>
<a name="l01188"></a>01188     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a72e1ed3dc8d04e8bc84328ec6ef6ce80">ND_POSE</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01189"></a>01189     
<a name="l01190"></a>01190     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>; 
<a name="l01191"></a>01191 }
<a name="l01192"></a>01192 
<a name="l01193"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a385bc77746688ebf3a4ffa9af65b677d">01193</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a824065d273eac82ee4d714ba46e9033b">OBJECT_OT_paths_clear</a> (<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01194"></a>01194 {
<a name="l01195"></a>01195     <span class="comment">/* identifiers */</span>
<a name="l01196"></a>01196     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Clear Object Paths&quot;</span>;
<a name="l01197"></a>01197     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_paths_clear&quot;</span>;
<a name="l01198"></a>01198     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Clear path caches for selected bones&quot;</span>;
<a name="l01199"></a>01199     
<a name="l01200"></a>01200     <span class="comment">/* api callbacks */</span>
<a name="l01201"></a>01201     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a79f77aa84ea22d58a6e5103b5d80420c">object_clear_paths_exec</a>;
<a name="l01202"></a>01202     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01203"></a>01203     
<a name="l01204"></a>01204     <span class="comment">/* flags */</span>
<a name="l01205"></a>01205     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01206"></a>01206 }
<a name="l01207"></a>01207 
<a name="l01208"></a>01208 
<a name="l01209"></a>01209 <span class="comment">/********************** Smooth/Flat *********************/</span>
<a name="l01210"></a>01210 
<a name="l01211"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a152280a0436cbf96cc0d3d476bccbb1f">01211</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a152280a0436cbf96cc0d3d476bccbb1f">shade_smooth_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213     <a class="code" href="../../da/d10/structCurve.html">Curve</a> *cu;
<a name="l01214"></a>01214     <a class="code" href="../../d5/d47/structNurb.html">Nurb</a> *nu;
<a name="l01215"></a>01215     <span class="keywordtype">int</span> <a class="code" href="../../d1/d79/btDbvtBroadphase_8cpp.html#a19b1dda96df6332570b535a0683d8076">clear</a>= (strcmp(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a42b15acb4df45b846c38202a208c0c32">idname</a>, <span class="stringliteral">&quot;OBJECT_OT_shade_flat&quot;</span>) == 0);
<a name="l01216"></a>01216     <span class="keywordtype">int</span> done= 0;
<a name="l01217"></a>01217 
<a name="l01218"></a>01218     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob, selected_editable_objects) {
<a name="l01219"></a>01219 
<a name="l01220"></a>01220         <span class="keywordflow">if</span> (ob-&gt;type==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l01221"></a>01221             <a class="code" href="../../df/d7f/BKE__mesh_8h.html#a838ea54c92bdc7896d8f3f5e9ab626d6">mesh_set_smooth_flag</a>(ob, !clear);
<a name="l01222"></a>01222 
<a name="l01223"></a>01223             <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;ob-&gt;id, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>);
<a name="l01224"></a>01224             <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1f2c5ee380a0a55abaf43b7bceeb7688">ND_DRAW</a>, ob);
<a name="l01225"></a>01225 
<a name="l01226"></a>01226             done= 1;
<a name="l01227"></a>01227         }
<a name="l01228"></a>01228         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(ob-&gt;type, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>)) {
<a name="l01229"></a>01229             cu= ob-&gt;data;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231             <span class="keywordflow">for</span> (nu=cu-&gt;<a class="code" href="../../da/d10/structCurve.html#ac93326a4cc67ccb5d9725bf0ed3432d1">nurb</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; nu; nu=nu-&gt;<a class="code" href="../../d5/d47/structNurb.html#a2a65b45cf9d2eb81b3b92d872e777aaa">next</a>) {
<a name="l01232"></a>01232                 <span class="keywordflow">if</span> (!clear) nu-&gt;<a class="code" href="../../d5/d47/structNurb.html#a3cf1c2dec47235e64740549f9bb2b5ff">flag</a> |= <a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html#a2907e1f781802f5886994a86e0ee6fd1">ME_SMOOTH</a>;
<a name="l01233"></a>01233                 <span class="keywordflow">else</span> nu-&gt;<a class="code" href="../../d5/d47/structNurb.html#a3cf1c2dec47235e64740549f9bb2b5ff">flag</a> &amp;= ~<a class="code" href="../../d4/d36/DNA__meshdata__types_8h.html#a2907e1f781802f5886994a86e0ee6fd1">ME_SMOOTH</a>;
<a name="l01234"></a>01234             }
<a name="l01235"></a>01235 
<a name="l01236"></a>01236             <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;ob-&gt;id, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a5753f311c53d8a8f72b1937f33ebb527">OB_RECALC_DATA</a>);
<a name="l01237"></a>01237             <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1f2c5ee380a0a55abaf43b7bceeb7688">ND_DRAW</a>, ob);
<a name="l01238"></a>01238 
<a name="l01239"></a>01239             done= 1;
<a name="l01240"></a>01240         }
<a name="l01241"></a>01241     }
<a name="l01242"></a>01242     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01243"></a>01243 
<a name="l01244"></a>01244     <span class="keywordflow">return</span> (done)? <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>: <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l01245"></a>01245 }
<a name="l01246"></a>01246 
<a name="l01247"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a0d91d66de9feec5005c07823c29d698e">01247</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a0d91d66de9feec5005c07823c29d698e">shade_poll</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C)
<a name="l01248"></a>01248 {
<a name="l01249"></a>01249     <span class="keywordflow">return</span> (<a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>(C) &amp;&amp; !<a class="code" href="../../d1/d12/ED__screen_8h.html#a2de006c5087f64f081d2d4115bde380f">ED_operator_editmesh</a>(C));
<a name="l01250"></a>01250 }
<a name="l01251"></a>01251 
<a name="l01252"></a><a class="code" href="../../d3/d80/object__intern_8h.html#ac082a675b00d6d4375e9e9c069f63bf7">01252</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a9b4b74fbb84161ab6e8a44de1417ed55">OBJECT_OT_shade_flat</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01253"></a>01253 {
<a name="l01254"></a>01254     <span class="comment">/* identifiers */</span>
<a name="l01255"></a>01255     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Shade Flat&quot;</span>;
<a name="l01256"></a>01256     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Display faces &#39;flat&#39;&quot;</span>;
<a name="l01257"></a>01257     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_shade_flat&quot;</span>;
<a name="l01258"></a>01258     
<a name="l01259"></a>01259     <span class="comment">/* api callbacks */</span>
<a name="l01260"></a>01260     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a0d91d66de9feec5005c07823c29d698e">shade_poll</a>;
<a name="l01261"></a>01261     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a152280a0436cbf96cc0d3d476bccbb1f">shade_smooth_exec</a>;
<a name="l01262"></a>01262 
<a name="l01263"></a>01263     <span class="comment">/* flags */</span>
<a name="l01264"></a>01264     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01265"></a>01265 }
<a name="l01266"></a>01266 
<a name="l01267"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a89d696b3333f4dd067bdad985eb23564">01267</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#abb5c4368053dee47a0fc0b5789dff5ca">OBJECT_OT_shade_smooth</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01268"></a>01268 {
<a name="l01269"></a>01269     <span class="comment">/* identifiers */</span>
<a name="l01270"></a>01270     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Shade Smooth&quot;</span>;
<a name="l01271"></a>01271     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Display faces &#39;smooth&#39; (using vertex normals)&quot;</span>;
<a name="l01272"></a>01272     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_shade_smooth&quot;</span>;
<a name="l01273"></a>01273     
<a name="l01274"></a>01274     <span class="comment">/* api callbacks */</span>
<a name="l01275"></a>01275     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a0d91d66de9feec5005c07823c29d698e">shade_poll</a>;
<a name="l01276"></a>01276     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a152280a0436cbf96cc0d3d476bccbb1f">shade_smooth_exec</a>;
<a name="l01277"></a>01277     
<a name="l01278"></a>01278     <span class="comment">/* flags */</span>
<a name="l01279"></a>01279     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01280"></a>01280 }
<a name="l01281"></a>01281 
<a name="l01282"></a>01282 <span class="comment">/* ********************** */</span>
<a name="l01283"></a>01283 
<a name="l01284"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ab5771f64340107842017a635e36db4b2">01284</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a26aa3564d15ae9e56cce569a324df5da">UNUSED_FUNCTION</a>(<a class="code" href="../../d6/db5/object__edit_8c.html#ab5771f64340107842017a635e36db4b2">image_aspect</a>)(<a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene, <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d)
<a name="l01285"></a>01285 {
<a name="l01286"></a>01286     <span class="comment">/* all selected objects with an image map: scale in image aspect */</span>
<a name="l01287"></a>01287     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l01288"></a>01288     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l01289"></a>01289     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *ma;
<a name="l01290"></a>01290     <a class="code" href="../../df/d2d/structTex.html">Tex</a> *tex;
<a name="l01291"></a>01291     <span class="keywordtype">float</span> x, y, space;
<a name="l01292"></a>01292     <span class="keywordtype">int</span> a, b, done;
<a name="l01293"></a>01293     
<a name="l01294"></a>01294     <span class="keywordflow">if</span> (scene-&gt;obedit) <span class="keywordflow">return</span>; <span class="comment">// XXX get from context</span>
<a name="l01295"></a>01295     <span class="keywordflow">if</span> (scene-&gt;id.lib) <span class="keywordflow">return</span>;
<a name="l01296"></a>01296     
<a name="l01297"></a>01297     <span class="keywordflow">for</span> (base= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8e4d7097454ad5b3dfde455bf35b6450">FIRSTBASE</a>; base; base= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a25befa992d0ce8876b7d62176212be68">next</a>) {
<a name="l01298"></a>01298         <span class="keywordflow">if</span> (<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a8d25ad9ae79efd1636a91eb64c5d3613">TESTBASELIB</a>(v3d, base)) {
<a name="l01299"></a>01299             ob= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>;
<a name="l01300"></a>01300             done= 0;
<a name="l01301"></a>01301             
<a name="l01302"></a>01302             <span class="keywordflow">for</span> (a=1; a&lt;=ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>; a++) {
<a name="l01303"></a>01303                 ma= <a class="code" href="../../d4/d0f/BKE__material_8h.html#a941f5112d1047bcbcf3e2212685296a5">give_current_material</a>(ob, a);
<a name="l01304"></a>01304                 <span class="keywordflow">if</span> (ma) {
<a name="l01305"></a>01305                     <span class="keywordflow">for</span> (b=0; b&lt;<a class="code" href="../../d0/d16/DNA__lamp__types_8h.html#a5c921b6ba71dfcfa9a404e101d9bcaf4">MAX_MTEX</a>; b++) {
<a name="l01306"></a>01306                         <span class="keywordflow">if</span> (ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a738a376b474b09dba529b222ba7876d6">mtex</a>[b] &amp;&amp; ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a738a376b474b09dba529b222ba7876d6">mtex</a>[b]-&gt;<a class="code" href="../../dc/ddd/structMTex.html#aef6acbb854984bb254e1cb5b75f821d4">tex</a>) {
<a name="l01307"></a>01307                             tex= ma-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a738a376b474b09dba529b222ba7876d6">mtex</a>[b]-&gt;<a class="code" href="../../dc/ddd/structMTex.html#aef6acbb854984bb254e1cb5b75f821d4">tex</a>;
<a name="l01308"></a>01308                             <span class="keywordflow">if</span> (tex-&gt;<a class="code" href="../../df/d2d/structTex.html#aa7daf61fa1146d430403e81db6acb7cb">type</a>==<a class="code" href="../../dc/d4f/rna__nodetree__types_8h.html#af2375c975e2ce5925f9be76460a1f1c1">TEX_IMAGE</a> &amp;&amp; tex-&gt;<a class="code" href="../../df/d2d/structTex.html#ad2c2c4a8437672ea77fc9cfded61ffaf">ima</a>) {
<a name="l01309"></a>01309                                 <a class="code" href="../../d3/dd9/structImBuf.html">ImBuf</a> *ibuf= <a class="code" href="../../d2/d77/BKE__image_8h.html#a82acf4ed18d05029e80437a655baf008">BKE_image_get_ibuf</a>(tex-&gt;<a class="code" href="../../df/d2d/structTex.html#ad2c2c4a8437672ea77fc9cfded61ffaf">ima</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01310"></a>01310                                 
<a name="l01311"></a>01311                                 <span class="comment">/* texturespace */</span>
<a name="l01312"></a>01312                                 space= 1.0;
<a name="l01313"></a>01313                                 <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) {
<a name="l01314"></a>01314                                     <span class="keywordtype">float</span> <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>[3];
<a name="l01315"></a>01315                                     <a class="code" href="../../df/d7f/BKE__mesh_8h.html#ac4f3c3b63da7e1e65a49d259a39bb7a4">mesh_get_texspace</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, size);
<a name="l01316"></a>01316                                     space= size[0]/size[1];
<a name="l01317"></a>01317                                 }
<a name="l01318"></a>01318                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ad3568ab74428f47aea1c855024e467f0">ELEM3</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>)) {
<a name="l01319"></a>01319                                     <a class="code" href="../../da/d10/structCurve.html">Curve</a> *cu= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l01320"></a>01320                                     space= cu-&gt;<a class="code" href="../../da/d10/structCurve.html#af8034f1be4e7efb108b379efa5f84893">size</a>[0]/cu-&gt;<a class="code" href="../../da/d10/structCurve.html#af8034f1be4e7efb108b379efa5f84893">size</a>[1];
<a name="l01321"></a>01321                                 }
<a name="l01322"></a>01322                             
<a name="l01323"></a>01323                                 x= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#ae7734bc51f5e3e75be66e6f6a26f4f4e">x</a>/space;
<a name="l01324"></a>01324                                 y= ibuf-&gt;<a class="code" href="../../d3/dd9/structImBuf.html#a9b88fc1c373dd2aa0d4c174c87913050">y</a>;
<a name="l01325"></a>01325                                 
<a name="l01326"></a>01326                                 <span class="keywordflow">if</span> (x&gt;y) ob-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>[0]= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>[1]*x/y;
<a name="l01327"></a>01327                                 <span class="keywordflow">else</span> ob-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>[1]= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a46e0f5309f8c13d85e16fa6436acf9f8">size</a>[0]*y/x;
<a name="l01328"></a>01328                                 
<a name="l01329"></a>01329                                 done= 1;
<a name="l01330"></a>01330                                 <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a70d8c170e1f4bbcc010d94405d6a9817">DAG_id_tag_update</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a189b3a96923b2425ee7c0990c0b3fd20">OB_RECALC_OB</a>);                               
<a name="l01331"></a>01331                             }
<a name="l01332"></a>01332                         }
<a name="l01333"></a>01333                         <span class="keywordflow">if</span> (done) <span class="keywordflow">break</span>;
<a name="l01334"></a>01334                     }
<a name="l01335"></a>01335                 }
<a name="l01336"></a>01336                 <span class="keywordflow">if</span> (done) <span class="keywordflow">break</span>;
<a name="l01337"></a>01337             }
<a name="l01338"></a>01338         }
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340     
<a name="l01341"></a>01341 }
<a name="l01342"></a>01342 
<a name="l01343"></a>01343 
<a name="l01344"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a0a170ddcc75c3b9a7a7c001f0cbddb57">01344</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> *<a class="code" href="../../d6/db5/object__edit_8c.html#a0a170ddcc75c3b9a7a7c001f0cbddb57">object_mode_set_itemsf</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(ptr), <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>), <span class="keywordtype">int</span> *free)
<a name="l01345"></a>01345 {   
<a name="l01346"></a>01346     <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> *input = <a class="code" href="../../d1/d4d/rna__object_8c.html#a256ad94afa86293adbc3a77bd0cb13cf">object_mode_items</a>;
<a name="l01347"></a>01347     <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> *item= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01348"></a>01348     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l01349"></a>01349     <span class="keywordtype">int</span> totitem= 0;
<a name="l01350"></a>01350     
<a name="l01351"></a>01351     <span class="keywordflow">if</span> (!C) <span class="comment">/* needed for docs */</span>
<a name="l01352"></a>01352         <span class="keywordflow">return</span> <a class="code" href="../../d1/d4d/rna__object_8c.html#a256ad94afa86293adbc3a77bd0cb13cf">object_mode_items</a>;
<a name="l01353"></a>01353 
<a name="l01354"></a>01354     ob = <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l01355"></a>01355     <span class="keywordflow">while</span> (ob &amp;&amp; input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a63a2e651d1ec3c62fca4064e6ebf32f0">identifier</a>) {
<a name="l01356"></a>01356         <span class="keywordflow">if</span> ((input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a> &amp;&amp; ((ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>) || (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>) ||
<a name="l01357"></a>01357                             (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>) || (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>) ||
<a name="l01358"></a>01358                              (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>) || (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>) || (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a>))) ||
<a name="l01359"></a>01359            (input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550acfed9b4bf4a7e2d3c5ae0b3571e38950">OB_MODE_POSE</a> &amp;&amp; (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>)) ||
<a name="l01360"></a>01360            (input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a20027b5f4381f062402af134bcefe889">OB_MODE_PARTICLE_EDIT</a> &amp;&amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0eef8205764ed3927f48766acf36ea68">particlesystem</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>) ||
<a name="l01361"></a>01361            ((input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a7b8620799f1bc866a5dc5ecaacf987a7">OB_MODE_SCULPT</a> || input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550afa4f66c680fdf8f9cd7ef1ca969b1901">OB_MODE_VERTEX_PAINT</a> ||
<a name="l01362"></a>01362              input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a> || input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550aefdee3fdb0d4e936026d0fbdeb55852d">OB_MODE_TEXTURE_PAINT</a>) &amp;&amp; (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>)) ||
<a name="l01363"></a>01363            (input-&gt;<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a> == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a>))
<a name="l01364"></a>01364             <a class="code" href="../../dc/d7e/rna__define_8c.html#aac347b3d7d22bc34be1afcea3a155550">RNA_enum_item_add</a>(&amp;item, &amp;totitem, input);
<a name="l01365"></a>01365         ++input;
<a name="l01366"></a>01366     }
<a name="l01367"></a>01367 
<a name="l01368"></a>01368     <a class="code" href="../../dc/d7e/rna__define_8c.html#a9c356736035ce93183d416c437a40d1c">RNA_enum_item_end</a>(&amp;item, &amp;totitem);
<a name="l01369"></a>01369 
<a name="l01370"></a>01370     *free= 1;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372     <span class="keywordflow">return</span> item;
<a name="l01373"></a>01373 }
<a name="l01374"></a>01374 
<a name="l01375"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a8eddf0737d0e6b0b10a9fe994a86d2e5">01375</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/db5/object__edit_8c.html#a8eddf0737d0e6b0b10a9fe994a86d2e5">object_mode_op_string</a>(<span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>)
<a name="l01376"></a>01376 {
<a name="l01377"></a>01377     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>)
<a name="l01378"></a>01378         <span class="keywordflow">return</span> <span class="stringliteral">&quot;OBJECT_OT_editmode_toggle&quot;</span>;
<a name="l01379"></a>01379     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a7b8620799f1bc866a5dc5ecaacf987a7">OB_MODE_SCULPT</a>)
<a name="l01380"></a>01380         <span class="keywordflow">return</span> <span class="stringliteral">&quot;SCULPT_OT_sculptmode_toggle&quot;</span>;
<a name="l01381"></a>01381     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550afa4f66c680fdf8f9cd7ef1ca969b1901">OB_MODE_VERTEX_PAINT</a>)
<a name="l01382"></a>01382         <span class="keywordflow">return</span> <span class="stringliteral">&quot;PAINT_OT_vertex_paint_toggle&quot;</span>;
<a name="l01383"></a>01383     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a>)
<a name="l01384"></a>01384         <span class="keywordflow">return</span> <span class="stringliteral">&quot;PAINT_OT_weight_paint_toggle&quot;</span>;
<a name="l01385"></a>01385     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550aefdee3fdb0d4e936026d0fbdeb55852d">OB_MODE_TEXTURE_PAINT</a>)
<a name="l01386"></a>01386         <span class="keywordflow">return</span> <span class="stringliteral">&quot;PAINT_OT_texture_paint_toggle&quot;</span>;
<a name="l01387"></a>01387     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a20027b5f4381f062402af134bcefe889">OB_MODE_PARTICLE_EDIT</a>)
<a name="l01388"></a>01388         <span class="keywordflow">return</span> <span class="stringliteral">&quot;PARTICLE_OT_particle_edit_toggle&quot;</span>;
<a name="l01389"></a>01389     <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550acfed9b4bf4a7e2d3c5ae0b3571e38950">OB_MODE_POSE</a>)
<a name="l01390"></a>01390         <span class="keywordflow">return</span> <span class="stringliteral">&quot;OBJECT_OT_posemode_toggle&quot;</span>;
<a name="l01391"></a>01391     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01392"></a>01392 }
<a name="l01393"></a>01393 
<a name="l01394"></a>01394 <span class="comment">/* checks the mode to be set is compatible with the object</span>
<a name="l01395"></a>01395 <span class="comment"> * should be made into a generic function */</span>
<a name="l01396"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a94b47ec3f36cc89ae8cfa62f59f13f3b">01396</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a94b47ec3f36cc89ae8cfa62f59f13f3b">object_mode_set_compat</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(C), <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l01397"></a>01397 {
<a name="l01398"></a>01398     <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550">ObjectMode</a> <a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;mode&quot;</span>);
<a name="l01399"></a>01399 
<a name="l01400"></a>01400     <span class="keywordflow">if</span> (ob) {
<a name="l01401"></a>01401         <span class="keywordflow">if</span> (mode == <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a>)
<a name="l01402"></a>01402             <span class="keywordflow">return</span> 1;
<a name="l01403"></a>01403 
<a name="l01404"></a>01404         <span class="keywordflow">switch</span>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>) {
<a name="l01405"></a>01405         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a8359f8b129e965da60eca2cbcec21bfc">OB_MESH</a>:
<a name="l01406"></a>01406             <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a7b8620799f1bc866a5dc5ecaacf987a7">OB_MODE_SCULPT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550afa4f66c680fdf8f9cd7ef1ca969b1901">OB_MODE_VERTEX_PAINT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550aefdee3fdb0d4e936026d0fbdeb55852d">OB_MODE_TEXTURE_PAINT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a20027b5f4381f062402af134bcefe889">OB_MODE_PARTICLE_EDIT</a>))
<a name="l01407"></a>01407                 <span class="keywordflow">return</span> 1;
<a name="l01408"></a>01408             <span class="keywordflow">return</span> 0;
<a name="l01409"></a>01409         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a885d669104f0c596dabb147f9371ffc3">OB_CURVE</a>:
<a name="l01410"></a>01410         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ae247d3ec6e691b7752d8a90065428ecb">OB_SURF</a>:
<a name="l01411"></a>01411         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a1a94162b6fc469957966a01d41ff71d6">OB_FONT</a>:
<a name="l01412"></a>01412         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a046d883c32490b5c5ca4c5e7b6504e35">OB_MBALL</a>:
<a name="l01413"></a>01413             <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>))
<a name="l01414"></a>01414                 <span class="keywordflow">return</span> 1;
<a name="l01415"></a>01415             <span class="keywordflow">return</span> 0;
<a name="l01416"></a>01416         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a648672abc238f500c884f10b9416cb27">OB_LATTICE</a>:
<a name="l01417"></a>01417             <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a>))
<a name="l01418"></a>01418                 <span class="keywordflow">return</span> 1;
<a name="l01419"></a>01419         <span class="keywordflow">case</span> <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a17c162dffb7fd4f0acb11d051374609b">OB_ARMATURE</a>:
<a name="l01420"></a>01420             <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>|<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550acfed9b4bf4a7e2d3c5ae0b3571e38950">OB_MODE_POSE</a>))
<a name="l01421"></a>01421                 <span class="keywordflow">return</span> 1;
<a name="l01422"></a>01422         }
<a name="l01423"></a>01423     }
<a name="l01424"></a>01424 
<a name="l01425"></a>01425     <span class="keywordflow">return</span> 0;
<a name="l01426"></a>01426 }
<a name="l01427"></a>01427 
<a name="l01428"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a70576219735278875a71b1ec93eae1cb">01428</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a70576219735278875a71b1ec93eae1cb">object_mode_set_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01429"></a>01429 {
<a name="l01430"></a>01430     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l01431"></a>01431     <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550">ObjectMode</a> <a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;mode&quot;</span>);
<a name="l01432"></a>01432     <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550">ObjectMode</a> <a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> = (ob) ? ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> : <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a>;
<a name="l01433"></a>01433     <span class="keywordtype">int</span> toggle = <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;toggle&quot;</span>);
<a name="l01434"></a>01434 
<a name="l01435"></a>01435     <span class="keywordflow">if</span> (!ob || !<a class="code" href="../../d6/db5/object__edit_8c.html#a94b47ec3f36cc89ae8cfa62f59f13f3b">object_mode_set_compat</a>(C, op, ob))
<a name="l01436"></a>01436         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l01437"></a>01437 
<a name="l01438"></a>01438     <span class="comment">/* Exit current mode if it&#39;s not the mode we&#39;re setting */</span>
<a name="l01439"></a>01439     <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> != <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a> &amp;&amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> != mode)
<a name="l01440"></a>01440         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <a class="code" href="../../d6/db5/object__edit_8c.html#a8eddf0737d0e6b0b10a9fe994a86d2e5">object_mode_op_string</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>), <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01441"></a>01441 
<a name="l01442"></a>01442     <span class="keywordflow">if</span> (mode != <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a>) {
<a name="l01443"></a>01443         <span class="comment">/* Enter new mode */</span>
<a name="l01444"></a>01444         <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> != mode || toggle)
<a name="l01445"></a>01445             <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <a class="code" href="../../d6/db5/object__edit_8c.html#a8eddf0737d0e6b0b10a9fe994a86d2e5">object_mode_op_string</a>(mode), <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01446"></a>01446 
<a name="l01447"></a>01447         <span class="keywordflow">if</span> (toggle) {
<a name="l01448"></a>01448             <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a> == mode)
<a name="l01449"></a>01449                 <span class="comment">/* For toggling, store old mode so we know what to go back to */</span>
<a name="l01450"></a>01450                 ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> = <a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a>;
<a name="l01451"></a>01451             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> != <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a> &amp;&amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a> != mode) {
<a name="l01452"></a>01452                 <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <a class="code" href="../../d6/db5/object__edit_8c.html#a8eddf0737d0e6b0b10a9fe994a86d2e5">object_mode_op_string</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0b0bc03e839d60fd4cdc9e3f69d9a03b">restore_mode</a>), <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01453"></a>01453             }
<a name="l01454"></a>01454         }
<a name="l01455"></a>01455     }
<a name="l01456"></a>01456 
<a name="l01457"></a>01457     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01458"></a>01458 }
<a name="l01459"></a>01459 
<a name="l01460"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a76eeb59dae01020ede76ede1d37913f2">01460</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#aeafcf3cf9a3a4fece07485de3e2ccb12">OBJECT_OT_mode_set</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01461"></a>01461 {
<a name="l01462"></a>01462     <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01463"></a>01463 
<a name="l01464"></a>01464     <span class="comment">/* identifiers */</span>
<a name="l01465"></a>01465     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Set Object Mode&quot;</span>;
<a name="l01466"></a>01466     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Sets the object interaction mode&quot;</span>;
<a name="l01467"></a>01467     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_mode_set&quot;</span>;
<a name="l01468"></a>01468     
<a name="l01469"></a>01469     <span class="comment">/* api callbacks */</span>
<a name="l01470"></a>01470     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a70576219735278875a71b1ec93eae1cb">object_mode_set_exec</a>;
<a name="l01471"></a>01471     
<a name="l01472"></a>01472     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01473"></a>01473     
<a name="l01474"></a>01474     <span class="comment">/* flags */</span>
<a name="l01475"></a>01475     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = 0; <span class="comment">/* no register/undo here, leave it to operators being called */</span>
<a name="l01476"></a>01476     
<a name="l01477"></a>01477     prop= <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;mode&quot;</span>, <a class="code" href="../../d1/d4d/rna__object_8c.html#a256ad94afa86293adbc3a77bd0cb13cf">object_mode_items</a>, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550af1bb3c40f4c542a4dc41414edc7c2d10">OB_MODE_OBJECT</a>, <span class="stringliteral">&quot;Mode&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01478"></a>01478     <a class="code" href="../../dc/d7e/rna__define_8c.html#adb30c6a3157cbd3193ff1a8de159389f">RNA_def_enum_funcs</a>(prop, <a class="code" href="../../d6/db5/object__edit_8c.html#a0a170ddcc75c3b9a7a7c001f0cbddb57">object_mode_set_itemsf</a>);
<a name="l01479"></a>01479 
<a name="l01480"></a>01480     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;toggle&quot;</span>, 0, <span class="stringliteral">&quot;Toggle&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01481"></a>01481 }
<a name="l01482"></a>01482 
<a name="l01483"></a>01483 
<a name="l01484"></a>01484 
<a name="l01485"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a92b677cb724c383e9de79ef5fc3d27c4">01485</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#a863532ca811bdeff8da110d13e95f36e">ED_object_toggle_modes</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>)
<a name="l01486"></a>01486 {
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a7b8620799f1bc866a5dc5ecaacf987a7">OB_MODE_SCULPT</a>)
<a name="l01488"></a>01488         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;SCULPT_OT_sculptmode_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01489"></a>01489     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550afa4f66c680fdf8f9cd7ef1ca969b1901">OB_MODE_VERTEX_PAINT</a>)
<a name="l01490"></a>01490         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;PAINT_OT_vertex_paint_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01491"></a>01491     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a6ab1cede4f6911c8042ca67d0c53b780">OB_MODE_WEIGHT_PAINT</a>)
<a name="l01492"></a>01492         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;PAINT_OT_weight_paint_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01493"></a>01493     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550aefdee3fdb0d4e936026d0fbdeb55852d">OB_MODE_TEXTURE_PAINT</a>)
<a name="l01494"></a>01494         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;PAINT_OT_texture_paint_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01495"></a>01495     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a20027b5f4381f062402af134bcefe889">OB_MODE_PARTICLE_EDIT</a>)
<a name="l01496"></a>01496         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;PARTICLE_OT_particle_edit_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01497"></a>01497     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550acfed9b4bf4a7e2d3c5ae0b3571e38950">OB_MODE_POSE</a>)
<a name="l01498"></a>01498         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;OBJECT_OT_posemode_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01499"></a>01499     <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a36fb08f71e0c90da2a0f21518ef0d550a5aed90bff10a0fd5ad47c9ee79ae4580">OB_MODE_EDIT</a>)
<a name="l01500"></a>01500         <a class="code" href="../../df/db0/wm__event__system_8c.html#a0208cd65e2ce6a150f2653214cfc57dd">WM_operator_name_call</a>(C, <span class="stringliteral">&quot;OBJECT_OT_editmode_toggle&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a2a694a68c0f6fabd97bc24a2cd8286cb">WM_OP_EXEC_REGION_WIN</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01501"></a>01501 }
<a name="l01502"></a>01502 
<a name="l01503"></a>01503 <span class="comment">/************************ Game Properties ***********************/</span>
<a name="l01504"></a>01504 
<a name="l01505"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a867415e380d50cea55c464878f1e420f">01505</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a867415e380d50cea55c464878f1e420f">game_property_new</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01506"></a>01506 {
<a name="l01507"></a>01507     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l01508"></a>01508     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01509"></a>01509     <span class="keywordtype">char</span> <a class="code" href="../../de/de7/structObject.html#ae84d6eddc68ad710a47bc5210c0bd918">name</a>[<a class="code" href="../../d1/db4/DNA__defs_8h.html#ac7c0207aa5a0e10d378be03b68041350">MAX_NAME</a>];
<a name="l01510"></a>01510     <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>= <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;type&quot;</span>);
<a name="l01511"></a>01511 
<a name="l01512"></a>01512     prop= <a class="code" href="../../d1/db8/BKE__property_8h.html#a3c66383443588414bd784c7fbff20e0a">new_property</a>(type);
<a name="l01513"></a>01513     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, prop);
<a name="l01514"></a>01514 
<a name="l01515"></a>01515     <a class="code" href="../../d3/d10/rna__access_8c.html#a810e909d61281bbb2d9fe99f9f2219ab">RNA_string_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;name&quot;</span>, name);
<a name="l01516"></a>01516     <span class="keywordflow">if</span> (name[0] != <span class="charliteral">&#39;\0&#39;</span>) {
<a name="l01517"></a>01517         <a class="code" href="../../d3/db3/BLI__string_8h.html#a98d7c9cb4a81dbe506d1972b306300ce">BLI_strncpy</a>(prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>, name, <span class="keyword">sizeof</span>(prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>));
<a name="l01518"></a>01518     }
<a name="l01519"></a>01519 
<a name="l01520"></a>01520     <a class="code" href="../../d1/db8/BKE__property_8h.html#aa32623fc85b46b2682e207f4679b34b8">unique_property</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, prop, 0); <span class="comment">// make_unique_prop_names(prop-&gt;name);</span>
<a name="l01521"></a>01521 
<a name="l01522"></a>01522     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ac7be0970c2299fd35859f50f8b95bb77">NC_LOGIC</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01523"></a>01523     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01524"></a>01524 }
<a name="l01525"></a>01525 
<a name="l01526"></a>01526 
<a name="l01527"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a5308aada20da4d9dea574e175d5f6c78">01527</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a55c88da9f87917ce12b9ef8cde895f72">OBJECT_OT_game_property_new</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01528"></a>01528 {
<a name="l01529"></a>01529     <span class="comment">/* identifiers */</span>
<a name="l01530"></a>01530     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;New Game Property&quot;</span>;
<a name="l01531"></a>01531     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Create a new property available to the game engine&quot;</span>;
<a name="l01532"></a>01532     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_game_property_new&quot;</span>;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534     <span class="comment">/* api callbacks */</span>
<a name="l01535"></a>01535     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a867415e380d50cea55c464878f1e420f">game_property_new</a>;
<a name="l01536"></a>01536     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01537"></a>01537 
<a name="l01538"></a>01538     <span class="comment">/* flags */</span>
<a name="l01539"></a>01539     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541     <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../d5/ddc/rna__property_8c.html#a7d4bdef83b818d52626b4ff09e4573fc">gameproperty_type_items</a>, <a class="code" href="../../de/d2b/DNA__property__types_8h.html#a923e985059951d28ee4ed304636a90dc">GPROP_FLOAT</a>, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;Type of game property to add&quot;</span>);
<a name="l01542"></a>01542     <a class="code" href="../../dc/d7e/rna__define_8c.html#ac53a3ed18da454971065d5b4e4cb4d62">RNA_def_string</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d1/db4/DNA__defs_8h.html#ac7c0207aa5a0e10d378be03b68041350">MAX_NAME</a>, <span class="stringliteral">&quot;Name&quot;</span>, <span class="stringliteral">&quot;Name of the game property to add&quot;</span>);
<a name="l01543"></a>01543 }
<a name="l01544"></a>01544 
<a name="l01545"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a2d4e8cc82b7038f7544f626cf058e10f">01545</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a2d4e8cc82b7038f7544f626cf058e10f">game_property_remove</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01546"></a>01546 {
<a name="l01547"></a>01547     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l01548"></a>01548     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01549"></a>01549     <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>= <a class="code" href="../../d3/d10/rna__access_8c.html#a852d694fd9e9dbdc92b6a6608e3a73ef">RNA_int_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;index&quot;</span>);
<a name="l01550"></a>01550 
<a name="l01551"></a>01551     <span class="keywordflow">if</span> (!ob)
<a name="l01552"></a>01552         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l01553"></a>01553 
<a name="l01554"></a>01554     prop= <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a09f13df59d10774f0bcf69a054f9d865">BLI_findlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, index);
<a name="l01555"></a>01555 
<a name="l01556"></a>01556     <span class="keywordflow">if</span> (prop) {
<a name="l01557"></a>01557         <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, prop);
<a name="l01558"></a>01558         <a class="code" href="../../d1/db8/BKE__property_8h.html#a3b587bb60a59b47221a2bb466605dfd1">free_property</a>(prop);
<a name="l01559"></a>01559 
<a name="l01560"></a>01560         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ac7be0970c2299fd35859f50f8b95bb77">NC_LOGIC</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01561"></a>01561         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01562"></a>01562     }
<a name="l01563"></a>01563     <span class="keywordflow">else</span> {
<a name="l01564"></a>01564         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l01565"></a>01565     }
<a name="l01566"></a>01566 }
<a name="l01567"></a>01567 
<a name="l01568"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a47893b50795b3816d19beffa06816331">01568</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a0e1624b870969d209f0d2220141e5d55">OBJECT_OT_game_property_remove</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01569"></a>01569 {
<a name="l01570"></a>01570     <span class="comment">/* identifiers */</span>
<a name="l01571"></a>01571     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Remove Game Property&quot;</span>;
<a name="l01572"></a>01572     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Remove game property&quot;</span>;
<a name="l01573"></a>01573     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_game_property_remove&quot;</span>;
<a name="l01574"></a>01574 
<a name="l01575"></a>01575     <span class="comment">/* api callbacks */</span>
<a name="l01576"></a>01576     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a2d4e8cc82b7038f7544f626cf058e10f">game_property_remove</a>;
<a name="l01577"></a>01577     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01578"></a>01578 
<a name="l01579"></a>01579     <span class="comment">/* flags */</span>
<a name="l01580"></a>01580     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01581"></a>01581 
<a name="l01582"></a>01582     <a class="code" href="../../dc/d7e/rna__define_8c.html#ad9b0c75a6330ff1837409c5d1767af62">RNA_def_int</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;index&quot;</span>, 0, 0, INT_MAX, <span class="stringliteral">&quot;Index&quot;</span>, <span class="stringliteral">&quot;Property index to remove &quot;</span>, 0, INT_MAX);
<a name="l01583"></a>01583 }
<a name="l01584"></a>01584 
<a name="l01585"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a49b006918115202ea4638906108aa7ca">01585</a> <span class="preprocessor">#define COPY_PROPERTIES_REPLACE 1</span>
<a name="l01586"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a83684ad4a514f8db3673bddae8099da8">01586</a> <span class="preprocessor"></span><span class="preprocessor">#define COPY_PROPERTIES_MERGE   2</span>
<a name="l01587"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ae5bd121fa41289d6a41dd57b49e9f74d">01587</a> <span class="preprocessor"></span><span class="preprocessor">#define COPY_PROPERTIES_COPY    3</span>
<a name="l01588"></a>01588 <span class="preprocessor"></span>
<a name="l01589"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a97803af2e42fb05db77b13e3d8516099">01589</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> <a class="code" href="../../d6/db5/object__edit_8c.html#a97803af2e42fb05db77b13e3d8516099">game_properties_copy_operations</a>[] ={
<a name="l01590"></a>01590     {<a class="code" href="../../d6/db5/object__edit_8c.html#a49b006918115202ea4638906108aa7ca">COPY_PROPERTIES_REPLACE</a>, <span class="stringliteral">&quot;REPLACE&quot;</span>, 0, <span class="stringliteral">&quot;Replace Properties&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l01591"></a>01591     {<a class="code" href="../../d6/db5/object__edit_8c.html#a83684ad4a514f8db3673bddae8099da8">COPY_PROPERTIES_MERGE</a>, <span class="stringliteral">&quot;MERGE&quot;</span>, 0, <span class="stringliteral">&quot;Merge Properties&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l01592"></a>01592     {<a class="code" href="../../d6/db5/object__edit_8c.html#ae5bd121fa41289d6a41dd57b49e9f74d">COPY_PROPERTIES_COPY</a>, <span class="stringliteral">&quot;COPY&quot;</span>, 0, <span class="stringliteral">&quot;Copy a Property&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l01593"></a>01593     {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}};
<a name="l01594"></a>01594 
<a name="l01595"></a><a class="code" href="../../d6/db5/object__edit_8c.html#aa79b653bd3dafdc2c77cfa37beafd656">01595</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> <a class="code" href="../../d6/db5/object__edit_8c.html#aa79b653bd3dafdc2c77cfa37beafd656">gameprops_items</a>[]= {
<a name="l01596"></a>01596     {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}};
<a name="l01597"></a>01597 
<a name="l01598"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a91cafa3556a804532162c105ae980a25">01598</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> *<a class="code" href="../../d6/db5/object__edit_8c.html#a91cafa3556a804532162c105ae980a25">gameprops_itemf</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(ptr), <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>), <span class="keywordtype">int</span> *free)
<a name="l01599"></a>01599 {   
<a name="l01600"></a>01600     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= <a class="code" href="../../da/d7a/ED__object_8h.html#a0a87646a151e018a119ed266356bb24b">ED_object_active_context</a>(C);
<a name="l01601"></a>01601     <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> tmp = {0, <span class="stringliteral">&quot;&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>};
<a name="l01602"></a>01602     <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> *item= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01603"></a>01603     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01604"></a>01604     <span class="keywordtype">int</span> a, totitem= 0;
<a name="l01605"></a>01605     
<a name="l01606"></a>01606     <span class="keywordflow">if</span> (!ob)
<a name="l01607"></a>01607         <span class="keywordflow">return</span> <a class="code" href="../../d6/db5/object__edit_8c.html#aa79b653bd3dafdc2c77cfa37beafd656">gameprops_items</a>;
<a name="l01608"></a>01608 
<a name="l01609"></a>01609     <span class="keywordflow">for</span> (a=1, prop= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; prop; prop=prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a>, a++) {
<a name="l01610"></a>01610         tmp.<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a9877ecc8d1c18ef7c8c1a79fee82998e">value</a>= a;
<a name="l01611"></a>01611         tmp.<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a63a2e651d1ec3c62fca4064e6ebf32f0">identifier</a>= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>;
<a name="l01612"></a>01612         tmp.<a class="code" href="../../d1/d8a/structEnumPropertyItem.html#a7b7b028a28c6f9f13a9a1289ceabe8e8">name</a>= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>;
<a name="l01613"></a>01613         <a class="code" href="../../dc/d7e/rna__define_8c.html#aac347b3d7d22bc34be1afcea3a155550">RNA_enum_item_add</a>(&amp;item, &amp;totitem, &amp;tmp);
<a name="l01614"></a>01614     }
<a name="l01615"></a>01615 
<a name="l01616"></a>01616     <a class="code" href="../../dc/d7e/rna__define_8c.html#a9c356736035ce93183d416c437a40d1c">RNA_enum_item_end</a>(&amp;item, &amp;totitem);
<a name="l01617"></a>01617     *free= 1;
<a name="l01618"></a>01618 
<a name="l01619"></a>01619     <span class="keywordflow">return</span> item;
<a name="l01620"></a>01620 }
<a name="l01621"></a>01621 
<a name="l01622"></a><a class="code" href="../../d6/db5/object__edit_8c.html#a7da812422e0c750cb88180caa5f99c96">01622</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a7da812422e0c750cb88180caa5f99c96">game_property_copy_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l01623"></a>01623 {
<a name="l01624"></a>01624     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob=<a class="code" href="../../da/d7a/ED__object_8h.html#a0a87646a151e018a119ed266356bb24b">ED_object_active_context</a>(C);
<a name="l01625"></a>01625     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01626"></a>01626     <span class="keywordtype">int</span> <a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a> = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;operation&quot;</span>);
<a name="l01627"></a>01627     <span class="keywordtype">int</span> propid= <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;property&quot;</span>);
<a name="l01628"></a>01628 
<a name="l01629"></a>01629     <span class="keywordflow">if</span> (propid &gt; 0) { <span class="comment">/* copy */</span>
<a name="l01630"></a>01630         prop = <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a09f13df59d10774f0bcf69a054f9d865">BLI_findlink</a>(&amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>, propid-1);
<a name="l01631"></a>01631         
<a name="l01632"></a>01632         <span class="keywordflow">if</span> (prop) {
<a name="l01633"></a>01633             <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob_iter, selected_editable_objects) {
<a name="l01634"></a>01634                 <span class="keywordflow">if</span> (ob != ob_iter)
<a name="l01635"></a>01635                     <a class="code" href="../../d1/db8/BKE__property_8h.html#a77c37d8710bddafe284bbd21b0aeeaa3">set_ob_property</a>(ob_iter, prop);
<a name="l01636"></a>01636             } <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01637"></a>01637         }
<a name="l01638"></a>01638     }
<a name="l01639"></a>01639 
<a name="l01640"></a>01640     <span class="keywordflow">else</span> {
<a name="l01641"></a>01641         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob_iter, selected_editable_objects) {
<a name="l01642"></a>01642             <span class="keywordflow">if</span> (ob != ob_iter) {
<a name="l01643"></a>01643                 <span class="keywordflow">if</span> (type == <a class="code" href="../../d6/db5/object__edit_8c.html#a49b006918115202ea4638906108aa7ca">COPY_PROPERTIES_REPLACE</a>)
<a name="l01644"></a>01644                     <a class="code" href="../../d1/db8/BKE__property_8h.html#ac7a35868da33ed464a6dc8025ddee66b">copy_properties</a>(&amp;ob_iter-&gt;prop, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>);
<a name="l01645"></a>01645 
<a name="l01646"></a>01646                 <span class="comment">/* merge - the default when calling with no argument */</span>
<a name="l01647"></a>01647                 <span class="keywordflow">else</span>
<a name="l01648"></a>01648                     <span class="keywordflow">for</span> (prop = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; prop; prop= prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a>)
<a name="l01649"></a>01649                         <a class="code" href="../../d1/db8/BKE__property_8h.html#a77c37d8710bddafe284bbd21b0aeeaa3">set_ob_property</a>(ob_iter, prop);
<a name="l01650"></a>01650             }
<a name="l01651"></a>01651         }
<a name="l01652"></a>01652         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01653"></a>01653     }
<a name="l01654"></a>01654 
<a name="l01655"></a>01655     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01656"></a>01656 }
<a name="l01657"></a>01657 
<a name="l01658"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a4be2b94b322bbb4255ffeb6d47218198">01658</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ab50ec6054699d78bcc1d4fa4677e8ad7">OBJECT_OT_game_property_copy</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01659"></a>01659 {
<a name="l01660"></a>01660     <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01661"></a>01661     <span class="comment">/* identifiers */</span>
<a name="l01662"></a>01662     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Copy Game Property&quot;</span>;
<a name="l01663"></a>01663     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_game_property_copy&quot;</span>;
<a name="l01664"></a>01664 
<a name="l01665"></a>01665     <span class="comment">/* api callbacks */</span>
<a name="l01666"></a>01666     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#a7da812422e0c750cb88180caa5f99c96">game_property_copy_exec</a>;
<a name="l01667"></a>01667     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01668"></a>01668 
<a name="l01669"></a>01669     <span class="comment">/* flags */</span>
<a name="l01670"></a>01670     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01671"></a>01671 
<a name="l01672"></a>01672     <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;operation&quot;</span>, game_properties_copy_operations, 3, <span class="stringliteral">&quot;Operation&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01673"></a>01673     prop=<a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;property&quot;</span>, gameprops_items, 0, <span class="stringliteral">&quot;Property&quot;</span>, <span class="stringliteral">&quot;Properties to copy&quot;</span>);
<a name="l01674"></a>01674     <a class="code" href="../../dc/d7e/rna__define_8c.html#adb30c6a3157cbd3193ff1a8de159389f">RNA_def_enum_funcs</a>(prop, <a class="code" href="../../d6/db5/object__edit_8c.html#a91cafa3556a804532162c105ae980a25">gameprops_itemf</a>);
<a name="l01675"></a>01675     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#ad2ecde05b67ff7682699554ee5a0bfc9">prop</a> = <a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>;
<a name="l01676"></a>01676 }
<a name="l01677"></a>01677 
<a name="l01678"></a><a class="code" href="../../d6/db5/object__edit_8c.html#af00138c4316a5d80d2591221235bdbe8">01678</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#af00138c4316a5d80d2591221235bdbe8">game_property_clear_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l01679"></a>01679 {
<a name="l01680"></a>01680     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob_iter, selected_editable_objects) {
<a name="l01681"></a>01681         <a class="code" href="../../d1/db8/BKE__property_8h.html#aae0725bc0b90b59e8c594ec32ef8ca68">free_properties</a>(&amp;ob_iter-&gt;prop);
<a name="l01682"></a>01682     }
<a name="l01683"></a>01683     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01684"></a>01684 
<a name="l01685"></a>01685     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ac7be0970c2299fd35859f50f8b95bb77">NC_LOGIC</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01686"></a>01686     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01687"></a>01687 }
<a name="l01688"></a><a class="code" href="../../d3/d80/object__intern_8h.html#aa633bef2d2b9a9f1098814e08f9c9f44">01688</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a77e2e0033f562f666e103f724d0784fd">OBJECT_OT_game_property_clear</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01689"></a>01689 {
<a name="l01690"></a>01690     <span class="comment">/* identifiers */</span>
<a name="l01691"></a>01691     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Clear Game Property&quot;</span>;
<a name="l01692"></a>01692     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_game_property_clear&quot;</span>;
<a name="l01693"></a>01693 
<a name="l01694"></a>01694     <span class="comment">/* api callbacks */</span>
<a name="l01695"></a>01695     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#af00138c4316a5d80d2591221235bdbe8">game_property_clear_exec</a>;
<a name="l01696"></a>01696     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01697"></a>01697 
<a name="l01698"></a>01698     <span class="comment">/* flags */</span>
<a name="l01699"></a>01699     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01700"></a>01700 }
<a name="l01701"></a>01701 
<a name="l01702"></a>01702 <span class="comment">/************************ Copy Logic Bricks ***********************/</span>
<a name="l01703"></a>01703 
<a name="l01704"></a><a class="code" href="../../d6/db5/object__edit_8c.html#af56f31916ae6445b2acf70e4ba90c6f3">01704</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#af56f31916ae6445b2acf70e4ba90c6f3">logicbricks_copy_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l01705"></a>01705 {
<a name="l01706"></a>01706     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob=<a class="code" href="../../da/d7a/ED__object_8h.html#a0a87646a151e018a119ed266356bb24b">ED_object_active_context</a>(C);
<a name="l01707"></a>01707 
<a name="l01708"></a>01708     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob_iter, selected_editable_objects) {
<a name="l01709"></a>01709         <span class="keywordflow">if</span> (ob != ob_iter) {
<a name="l01710"></a>01710             <span class="comment">/* first: free all logic */</span>
<a name="l01711"></a>01711             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9da0ba10eaef0fc1f44d31a9cfd5c2cc">free_sensors</a>(&amp;ob_iter-&gt;sensors);                
<a name="l01712"></a>01712             <a class="code" href="../../dd/de8/BKE__sca_8h.html#ac898d6a27dae6861dfe111b34e25dba5">unlink_controllers</a>(&amp;ob_iter-&gt;controllers);
<a name="l01713"></a>01713             <a class="code" href="../../dd/de8/BKE__sca_8h.html#adef0684ec8735f2c5494a2a531df2fdb">free_controllers</a>(&amp;ob_iter-&gt;controllers);
<a name="l01714"></a>01714             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a45b6959bf13b90403d898be456245994">unlink_actuators</a>(&amp;ob_iter-&gt;actuators);
<a name="l01715"></a>01715             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a87d1ec59ffaffa8ac63caf7fbf97acce">free_actuators</a>(&amp;ob_iter-&gt;actuators);
<a name="l01716"></a>01716         
<a name="l01717"></a>01717             <span class="comment">/* now copy it, this also works without logicbricks! */</span>
<a name="l01718"></a>01718             <a class="code" href="../../dd/de8/BKE__sca_8h.html#aa0b67a9ebe3379d4b145d8a27c8763b4">clear_sca_new_poins_ob</a>(ob);
<a name="l01719"></a>01719             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a9d8c6c58d7bfbcc4fe44773ff1cb66c5">copy_sensors</a>(&amp;ob_iter-&gt;sensors, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#abe754872740b0e577c07c2b0bacd7c00">sensors</a>);
<a name="l01720"></a>01720             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a59c062adc4fd81c4e87d338de5115499">copy_controllers</a>(&amp;ob_iter-&gt;controllers, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae2499a91d26d9dc8829a0505f6008066">controllers</a>);
<a name="l01721"></a>01721             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a98f9830489678544d33ee07fe97acb46">copy_actuators</a>(&amp;ob_iter-&gt;actuators, &amp;ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa80169aa224451d207999b52c86751ad">actuators</a>);
<a name="l01722"></a>01722             <a class="code" href="../../dd/de8/BKE__sca_8h.html#a29b7641c21f294b91158ea8082004c84">set_sca_new_poins_ob</a>(ob_iter);
<a name="l01723"></a>01723         
<a name="l01724"></a>01724             <span class="comment">/* some menu settings */</span>
<a name="l01725"></a>01725             ob_iter-&gt;scavisflag= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a7d2b85001a40e50703176f061109ae7a">scavisflag</a>;
<a name="l01726"></a>01726             ob_iter-&gt;scaflag= ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae212b6fefec621cfbbff2c7250fc4a3c">scaflag</a>;
<a name="l01727"></a>01727         
<a name="l01728"></a>01728             <span class="comment">/* set the initial state */</span>
<a name="l01729"></a>01729             ob_iter-&gt;state= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0db8d849f3d902f13e2f102848182758">state</a>;
<a name="l01730"></a>01730             ob_iter-&gt;init_state= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a5a3666f4a715fa60324a0efec6d722ab">init_state</a>;
<a name="l01731"></a>01731 
<a name="l01732"></a>01732             <span class="keywordflow">if</span> (ob_iter-&gt;totcol==ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>) {
<a name="l01733"></a>01733                 ob_iter-&gt;actcol= ob-&gt;<a class="code" href="../../de/de7/structObject.html#a7f7913949235b61d1cd0b8f343d0cbfc">actcol</a>;
<a name="l01734"></a>01734                 <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ad7623342a2e6e2b7e66123bbdf2975da">NC_OBJECT</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1f2c5ee380a0a55abaf43b7bceeb7688">ND_DRAW</a>, ob_iter);
<a name="l01735"></a>01735             }
<a name="l01736"></a>01736         }
<a name="l01737"></a>01737     }
<a name="l01738"></a>01738     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01739"></a>01739 
<a name="l01740"></a>01740     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#ac7be0970c2299fd35859f50f8b95bb77">NC_LOGIC</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01743"></a>01743 }
<a name="l01744"></a>01744 
<a name="l01745"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a76cf187d5d4fa42041c8b709ef787a7e">01745</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a8ce392e26efdfc773f5634d8f633655c">OBJECT_OT_logic_bricks_copy</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01746"></a>01746 {
<a name="l01747"></a>01747     <span class="comment">/* identifiers */</span>
<a name="l01748"></a>01748     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Copy Logic Bricks to Selected&quot;</span>;
<a name="l01749"></a>01749     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Copy logic bricks to other selected objects&quot;</span>;
<a name="l01750"></a>01750     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_logic_bricks_copy&quot;</span>;
<a name="l01751"></a>01751 
<a name="l01752"></a>01752     <span class="comment">/* api callbacks */</span>
<a name="l01753"></a>01753     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#af56f31916ae6445b2acf70e4ba90c6f3">logicbricks_copy_exec</a>;
<a name="l01754"></a>01754     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01755"></a>01755 
<a name="l01756"></a>01756     <span class="comment">/* flags */</span>
<a name="l01757"></a>01757     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01758"></a>01758 }
<a name="l01759"></a>01759 
<a name="l01760"></a><a class="code" href="../../d6/db5/object__edit_8c.html#ae9cfb3c9e8b64460b525186d5698c593">01760</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/db5/object__edit_8c.html#ae9cfb3c9e8b64460b525186d5698c593">game_physics_copy_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l01761"></a>01761 {
<a name="l01762"></a>01762     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob=<a class="code" href="../../da/d7a/ED__object_8h.html#a0a87646a151e018a119ed266356bb24b">ED_object_active_context</a>(C);
<a name="l01763"></a>01763     
<a name="l01764"></a>01764     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../de/de7/structObject.html">Object</a>*, ob_iter, selected_editable_objects) {
<a name="l01765"></a>01765         <span class="keywordflow">if</span> (ob != ob_iter) {
<a name="l01766"></a>01766             ob_iter-&gt;gameflag = ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa98e0216a27ddd692f1ec329ce4a4db4">gameflag</a>;
<a name="l01767"></a>01767             ob_iter-&gt;gameflag2 = ob-&gt;<a class="code" href="../../de/de7/structObject.html#ab86a040ed0e8609b80350a06a34ca018">gameflag2</a>;
<a name="l01768"></a>01768             ob_iter-&gt;inertia = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a068e01267176aa1f09b6651fc61ff6f7">inertia</a>;
<a name="l01769"></a>01769             ob_iter-&gt;formfactor = ob-&gt;<a class="code" href="../../de/de7/structObject.html#af2829a0f4febb82506e7f5d2a99f8a3c">formfactor</a>;
<a name="l01770"></a>01770             ob_iter-&gt;damping = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0f7412e63750dbfc2e4bd485ff7a9920">damping</a>;
<a name="l01771"></a>01771             ob_iter-&gt;rdamping = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0216bf8bf0f5207ab1ff917f30305d79">rdamping</a>;
<a name="l01772"></a>01772             ob_iter-&gt;min_vel = ob-&gt;<a class="code" href="../../de/de7/structObject.html#ae7962f09a5ce8487ee62c560579256e6">min_vel</a>;
<a name="l01773"></a>01773             ob_iter-&gt;max_vel = ob-&gt;<a class="code" href="../../de/de7/structObject.html#ab41861bda877603be3fd079c9d8ef0d6">max_vel</a>;
<a name="l01774"></a>01774             ob_iter-&gt;obstacleRad = ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad8f05321c8a0b9ab7f8a5bdd73e1fc78">obstacleRad</a>;
<a name="l01775"></a>01775             ob_iter-&gt;mass = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a60866179af7cb2aad410ea01de546e4e">mass</a>;
<a name="l01776"></a>01776             ob_iter-&gt;anisotropicFriction[0] = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a9aa1212ef790ff952c162f4a08eea073">anisotropicFriction</a>[0];
<a name="l01777"></a>01777             ob_iter-&gt;anisotropicFriction[1] = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a9aa1212ef790ff952c162f4a08eea073">anisotropicFriction</a>[1];
<a name="l01778"></a>01778             ob_iter-&gt;anisotropicFriction[2] = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a9aa1212ef790ff952c162f4a08eea073">anisotropicFriction</a>[2];
<a name="l01779"></a>01779             ob_iter-&gt;collision_boundtype = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a16dc75c68bc6868b924999fea2e85183">collision_boundtype</a>;         
<a name="l01780"></a>01780             ob_iter-&gt;margin = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a1fc21f5de759e2ad98ee28422d872191">margin</a>;
<a name="l01781"></a>01781             ob_iter-&gt;bsoft = <a class="code" href="../../df/dac/BKE__object_8h.html#a1b25c3dfef9e6b1ab492ccd099103c1f">copy_bulletsoftbody</a>(ob-&gt;<a class="code" href="../../de/de7/structObject.html#acaa3b12bf1664333e0bb2a4327faaef6">bsoft</a>);
<a name="l01782"></a>01782             <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>) 
<a name="l01783"></a>01783                 ob_iter-&gt;restrictflag |= <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>;
<a name="l01784"></a>01784              <span class="keywordflow">else</span>
<a name="l01785"></a>01785                 ob_iter-&gt;restrictflag &amp;= ~<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab94b52225b1bb3d5083e9855b32902d0">OB_RESTRICT_RENDER</a>;
<a name="l01786"></a>01786         }
<a name="l01787"></a>01787     }
<a name="l01788"></a>01788     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l01789"></a>01789     
<a name="l01790"></a>01790     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l01791"></a>01791 }
<a name="l01792"></a>01792 
<a name="l01793"></a><a class="code" href="../../d3/d80/object__intern_8h.html#a658ec997b490a9d9ac6986055cd1b40f">01793</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/db5/object__edit_8c.html#a658ec997b490a9d9ac6986055cd1b40f">OBJECT_OT_game_physics_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l01794"></a>01794 {
<a name="l01795"></a>01795     <span class="comment">/* identifiers */</span>
<a name="l01796"></a>01796     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Copy Game Physics Properties to Selected&quot;</span>;
<a name="l01797"></a>01797     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Copy game physics properties to other selected objects&quot;</span>;
<a name="l01798"></a>01798     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_game_physics_copy&quot;</span>;
<a name="l01799"></a>01799     
<a name="l01800"></a>01800     <span class="comment">/* api callbacks */</span>
<a name="l01801"></a>01801     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/db5/object__edit_8c.html#ae9cfb3c9e8b64460b525186d5698c593">game_physics_copy_exec</a>;
<a name="l01802"></a>01802     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#adf69a13ccdb50f050485340e86a00d34">ED_operator_object_active_editable</a>;
<a name="l01803"></a>01803     
<a name="l01804"></a>01804     <span class="comment">/* flags */</span>
<a name="l01805"></a>01805     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l01806"></a>01806 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:38 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
