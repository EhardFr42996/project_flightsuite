<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: rayobject.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">rayobject.cpp</div>  </div>
</div>
<div class="contents">
<a href="../../d6/d28/rayobject_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version. </span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2009 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * The Original Code is: all of this file.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * Contributor(s): Andr√© Pinto.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../de/db2/DNA__material__types_8h.html">DNA_material_types.h</a>&quot;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d1b/rayintersection_8h.html">rayintersection.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d42/rayobject_8h.html">rayobject.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd4/raycounter_8h.html">raycounter.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d00/render__types_8h.html">render_types.h</a>&quot;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">/* RayFace</span>
<a name="l00048"></a>00048 <span class="comment"> *</span>
<a name="l00049"></a>00049 <span class="comment"> * note we force always inline here, because compiler refuses to otherwise</span>
<a name="l00050"></a>00050 <span class="comment"> * because function is too long. Since this is code that is called billions</span>
<a name="l00051"></a>00051 <span class="comment"> * of times we really do want to inline. */</span>
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a329561e5b5df1aef5bdee3c247ce483a">00053</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <a class="code" href="../../db/df0/structRayObject.html">RayObject</a>* <a class="code" href="../../d6/d28/rayobject_8cpp.html#a329561e5b5df1aef5bdee3c247ce483a">rayface_from_coords</a>(<a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *rayface, <span class="keywordtype">void</span> *ob, <span class="keywordtype">void</span> *face,
<a name="l00054"></a>00054                                               <span class="keywordtype">float</span> *v1, <span class="keywordtype">float</span> *v2, <span class="keywordtype">float</span> *v3, <span class="keywordtype">float</span> *v4)
<a name="l00055"></a>00055 {
<a name="l00056"></a>00056     rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a> = ob;
<a name="l00057"></a>00057     rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a> = face;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>, v1);
<a name="l00060"></a>00060     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>, v2);
<a name="l00061"></a>00061     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>, v3);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063     <span class="keywordflow">if</span> (v4)
<a name="l00064"></a>00064     {
<a name="l00065"></a>00065         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>, v4);
<a name="l00066"></a>00066         rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a8957e64bbc058b4afedf0529c1436a30">quad</a> = 1;
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068     <span class="keywordflow">else</span>
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070         rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a8957e64bbc058b4afedf0529c1436a30">quad</a> = 0;
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="keywordflow">return</span> <a class="code" href="../../db/d64/rayobject__internal_8h.html#a8f512f38b7313b546e4204946dfd59a5">RE_rayobject_unalignRayFace</a>(rayface);
<a name="l00074"></a>00074 }
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#ade2120155ab0be7e3778f2c9f02e6311">00076</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#ade2120155ab0be7e3778f2c9f02e6311">rayface_from_vlak</a>(<a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *rayface, <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a> *obi, <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *vlr)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078     <a class="code" href="../../d6/d28/rayobject_8cpp.html#a329561e5b5df1aef5bdee3c247ce483a">rayface_from_coords</a>(rayface, obi, vlr, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a> ? vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a> : <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#aae4cdae9afa46b4cd150c490d4bd0081">transform_primitives</a>)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082         <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2fc1e6236f291e8cf3b62c8e0541eb00">mul_m4_v3</a>(obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#aab8aa131c007124b23bffc90c2ad10eb">mat</a>, rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>);
<a name="l00083"></a>00083         <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2fc1e6236f291e8cf3b62c8e0541eb00">mul_m4_v3</a>(obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#aab8aa131c007124b23bffc90c2ad10eb">mat</a>, rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>);
<a name="l00084"></a>00084         <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2fc1e6236f291e8cf3b62c8e0541eb00">mul_m4_v3</a>(obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#aab8aa131c007124b23bffc90c2ad10eb">mat</a>, rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d42/rayobject_8h.html#ab83e02191c23c8ec00a34fc79259d547">RE_rayface_isQuad</a>(rayface))
<a name="l00087"></a>00087             <a class="code" href="../../d3/d8c/BLI__math__matrix_8h.html#a2fc1e6236f291e8cf3b62c8e0541eb00">mul_m4_v3</a>(obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#aab8aa131c007124b23bffc90c2ad10eb">mat</a>, rayface-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>);
<a name="l00088"></a>00088     }
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#ab45bdcb41d8a3fdf3e7135163b307b60">00091</a> <a class="code" href="../../db/df0/structRayObject.html">RayObject</a>* <a class="code" href="../../d8/d42/rayobject_8h.html#a747e3ea348c87a83b4579fcd7debfa17">RE_rayface_from_vlak</a>(<a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *rayface, <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a> *obi, <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *vlr)
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <span class="keywordflow">return</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a329561e5b5df1aef5bdee3c247ce483a">rayface_from_coords</a>(rayface, obi, vlr, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a>, vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a> ? vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>-&gt;<a class="code" href="../../db/dcb/structVertRen.html#a99943e087d353404599bd07028959ac0">co</a> : 0);
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="comment">/* VlakPrimitive */</span>
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a59d9c6b81824f869794dd5f9f92b265d">00098</a> <a class="code" href="../../db/df0/structRayObject.html">RayObject</a>* <a class="code" href="../../d8/d42/rayobject_8h.html#a59d9c6b81824f869794dd5f9f92b265d">RE_vlakprimitive_from_vlak</a>(<a class="code" href="../../d2/d4c/structVlakPrimitive.html">VlakPrimitive</a> *face, <span class="keyword">struct</span> <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a> *obi, <span class="keyword">struct</span> <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *vlr)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a2c8c01bf81c9a4fbbd6a725c7c6a9743">ob</a> = obi;
<a name="l00101"></a>00101     face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a9d3208a26220be26118007875217f3f5">face</a> = vlr;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="keywordflow">return</span> <a class="code" href="../../db/d64/rayobject__internal_8h.html#a8399e1ac92e4fa64218812636246dc97">RE_rayobject_unalignVlakPrimitive</a>(face);
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">/* Checks for ignoring faces or materials */</span>
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#af1e7c4df0fac7e8313c8f2ced4fa32f7">00108</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#af1e7c4df0fac7e8313c8f2ced4fa32f7">vlr_check_intersect</a>(<a class="code" href="../../d8/d95/structIsect.html">Isect</a> *is, <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a> *obi, <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *vlr)
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110     <span class="comment">/* for baking selected to active non-traceable materials might still</span>
<a name="l00111"></a>00111 <span class="comment">     * be in the raytree */</span>
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (!(vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a219484d9d7348a4e9d8b7368eb05efdc">flag</a> &amp; <a class="code" href="../../db/d00/render__types_8h.html#ab3bc3d9ccd012df4f5e37d9086c3bc1e">R_TRACEBLE</a>))
<a name="l00113"></a>00113         <span class="keywordflow">return</span> 0;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* I know... cpu cycle waste, might do smarter once */</span>
<a name="l00116"></a>00116     <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#aafb5b78d6ceeb852039d6efaca33b00f">mode</a>==<a class="code" href="../../d1/d1b/rayintersection_8h.html#acb514bfd8ddb54e2e79a06ea36f9a5e5">RE_RAY_MIRROR</a>)
<a name="l00117"></a>00117         <span class="keywordflow">return</span> !(vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a78b2a38b4bda0548ffc7a140bd5824ca">mat</a>-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ad4773378c42a4167bdd615d67997535e">mode</a> &amp; <a class="code" href="../../de/db2/DNA__material__types_8h.html#a0b02e3e0afacbc7473b8ed9984a65c01">MA_ONLYCAST</a>);
<a name="l00118"></a>00118     <span class="keywordflow">else</span>
<a name="l00119"></a>00119         <span class="keywordflow">return</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a49ff3e5756e5101ce4d2e6ffea128707">lay</a> &amp; obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#a5967e8ad343eccf6daa1f05ab9b33ae9">lay</a>);
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#ab9c76cb709d7fe8d26708a59d03cb593">00122</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#ab9c76cb709d7fe8d26708a59d03cb593">vlr_check_intersect_solid</a>(<a class="code" href="../../d8/d95/structIsect.html">Isect</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(is), <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>* <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(obi), <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *vlr)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <span class="comment">/* solid material types only */</span>
<a name="l00125"></a>00125     <span class="keywordflow">if</span> (vlr-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a78b2a38b4bda0548ffc7a140bd5824ca">mat</a>-&gt;<a class="code" href="../../d2/d10/structMaterial.html#ab2181c8ca6ce7ebdb8858702b9dd044c">material_type</a> == <a class="code" href="../../de/db2/DNA__material__types_8h.html#a09a77831b74012f8cfd878618eed207d">MA_TYPE_SURFACE</a>)
<a name="l00126"></a>00126         <span class="keywordflow">return</span> 1;
<a name="l00127"></a>00127     <span class="keywordflow">else</span>
<a name="l00128"></a>00128         <span class="keywordflow">return</span> 0;
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a29a57a81714f4379c9a6c2a83c19ac71">00131</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a29a57a81714f4379c9a6c2a83c19ac71">vlr_check_bake</a>(<a class="code" href="../../d8/d95/structIsect.html">Isect</a> *is, <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>* obi, <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(vlr))
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133     <span class="keywordflow">return</span> (obi-&gt;<a class="code" href="../../da/d94/structObjectInstanceRen.html#a5fff117b9a9f28a20b0e3fc4bee69d18">obr</a>-&gt;<a class="code" href="../../d2/d24/structObjectRen.html#a5f57bfcc678111ef224f8438829d21ff">ob</a> != is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a97e76364a7af505b39b7fa1e4617890a">userdata</a>);
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">/* Ray Triangle/Quad Intersection */</span>
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a22aca5e31a84c93c9051b0e5d7388ced">00138</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a22aca5e31a84c93c9051b0e5d7388ced">isec_tri_quad</a>(<span class="keywordtype">float</span> start[3], <span class="keywordtype">float</span> dir[3], <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *face, <span class="keywordtype">float</span> uv[2], <span class="keywordtype">float</span> *lambda)
<a name="l00139"></a>00139 {
<a name="l00140"></a>00140     <span class="keywordtype">float</span> co1[3], co2[3], co3[3], co4[3];
<a name="l00141"></a>00141     <span class="keywordtype">float</span> t0[3], t1[3], x[3], r[3], m[3], u, v, divdet, det1, l;
<a name="l00142"></a>00142     <span class="keywordtype">int</span> quad;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     quad= <a class="code" href="../../d8/d42/rayobject_8h.html#ab83e02191c23c8ec00a34fc79259d547">RE_rayface_isQuad</a>(face);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co1, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>);
<a name="l00147"></a>00147     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co2, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>);
<a name="l00148"></a>00148     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co3, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(r, dir);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="comment">/* intersect triangle */</span>
<a name="l00153"></a>00153     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t0, co3, co2);
<a name="l00154"></a>00154     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t1, co3, co1);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(x, r, t1);
<a name="l00157"></a>00157     divdet= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(t0, x);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(m, start, co3);
<a name="l00160"></a>00160     det1= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(m, x);
<a name="l00161"></a>00161     
<a name="l00162"></a>00162     <span class="keywordflow">if</span> (divdet != 0.0f) {
<a name="l00163"></a>00163         divdet= 1.0f/divdet;
<a name="l00164"></a>00164         v= det1*divdet;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (v &lt; RE_RAYTRACE_EPSILON &amp;&amp; v &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00167"></a>00167             <span class="keywordtype">float</span> cros[3];
<a name="l00168"></a>00168 
<a name="l00169"></a>00169             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(cros, m, t0);
<a name="l00170"></a>00170             u= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, r);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             <span class="keywordflow">if</span> (u &lt; <a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; (v + u) &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00173"></a>00173                 l= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, t1);
<a name="l00174"></a>00174 
<a name="l00175"></a>00175                 <span class="comment">/* check if intersection is within ray length */</span>
<a name="l00176"></a>00176                 <span class="keywordflow">if</span> (l &gt; -<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; l &lt; *lambda) {
<a name="l00177"></a>00177                     uv[0]= u;
<a name="l00178"></a>00178                     uv[1]= v;
<a name="l00179"></a>00179                     *lambda= l;
<a name="l00180"></a>00180                     <span class="keywordflow">return</span> 1;
<a name="l00181"></a>00181                 }
<a name="l00182"></a>00182             }
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <span class="comment">/* intersect second triangle in quad */</span>
<a name="l00187"></a>00187     <span class="keywordflow">if</span> (quad) {
<a name="l00188"></a>00188         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co4, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>);
<a name="l00189"></a>00189         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t0, co3, co4);
<a name="l00190"></a>00190         divdet= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(t0, x);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192         <span class="keywordflow">if</span> (divdet != 0.0f) {
<a name="l00193"></a>00193             divdet= 1.0f/divdet;
<a name="l00194"></a>00194             v = det1*divdet;
<a name="l00195"></a>00195             
<a name="l00196"></a>00196             <span class="keywordflow">if</span> (v &lt; RE_RAYTRACE_EPSILON &amp;&amp; v &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00197"></a>00197                 <span class="keywordtype">float</span> cros[3];
<a name="l00198"></a>00198 
<a name="l00199"></a>00199                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(cros, m, t0);
<a name="l00200"></a>00200                 u= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, r);
<a name="l00201"></a>00201     
<a name="l00202"></a>00202                 <span class="keywordflow">if</span> (u &lt; <a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; (v + u) &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00203"></a>00203                     l= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, t1);
<a name="l00204"></a>00204                     
<a name="l00205"></a>00205                     <span class="keywordflow">if</span> (l &gt;- <a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; l &lt; *lambda) {
<a name="l00206"></a>00206                         uv[0]= u;
<a name="l00207"></a>00207                         uv[1]= -(1.0f + v + u);
<a name="l00208"></a>00208                         *lambda= l;
<a name="l00209"></a>00209                         <span class="keywordflow">return</span> 2;
<a name="l00210"></a>00210                     }
<a name="l00211"></a>00211                 }
<a name="l00212"></a>00212             }
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <span class="keywordflow">return</span> 0;
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">/* Simpler yes/no Ray Triangle/Quad Intersection */</span>
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a6590b894c757706228dc331be978922c">00221</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a6590b894c757706228dc331be978922c">isec_tri_quad_neighbour</a>(<span class="keywordtype">float</span> start[3], <span class="keywordtype">float</span> dir[3], <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *face)
<a name="l00222"></a>00222 {
<a name="l00223"></a>00223     <span class="keywordtype">float</span> co1[3], co2[3], co3[3], co4[3];
<a name="l00224"></a>00224     <span class="keywordtype">float</span> t0[3], t1[3], x[3], r[3], m[3], u, v, divdet, det1;
<a name="l00225"></a>00225     <span class="keywordtype">int</span> quad;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227     quad= <a class="code" href="../../d8/d42/rayobject_8h.html#ab83e02191c23c8ec00a34fc79259d547">RE_rayface_isQuad</a>(face);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co1, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>);
<a name="l00230"></a>00230     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co2, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>);
<a name="l00231"></a>00231     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co3, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a728bb3f38e925644683c9ace0cee4977">negate_v3_v3</a>(r, dir); <span class="comment">/* note, different than above function */</span>
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="comment">/* intersect triangle */</span>
<a name="l00236"></a>00236     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t0, co3, co2);
<a name="l00237"></a>00237     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t1, co3, co1);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(x, r, t1);
<a name="l00240"></a>00240     divdet= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(t0, x);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(m, start, co3);
<a name="l00243"></a>00243     det1= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(m, x);
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     <span class="keywordflow">if</span> (divdet != 0.0f) {
<a name="l00246"></a>00246         divdet= 1.0f/divdet;
<a name="l00247"></a>00247         v= det1*divdet;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249         <span class="keywordflow">if</span> (v &lt; RE_RAYTRACE_EPSILON &amp;&amp; v &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00250"></a>00250             <span class="keywordtype">float</span> cros[3];
<a name="l00251"></a>00251 
<a name="l00252"></a>00252             <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(cros, m, t0);
<a name="l00253"></a>00253             u= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, r);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255             <span class="keywordflow">if</span> (u &lt; <a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; (v + u) &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>))
<a name="l00256"></a>00256                 <span class="keywordflow">return</span> 1;
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">/* intersect second triangle in quad */</span>
<a name="l00261"></a>00261     <span class="keywordflow">if</span> (quad) {
<a name="l00262"></a>00262         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a6cf5ea9576bb2186e5c71a02480875eb">copy_v3_v3</a>(co4, face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>);
<a name="l00263"></a>00263         <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a55cc5423278e715951545237ac71fb8b">sub_v3_v3v3</a>(t0, co3, co4);
<a name="l00264"></a>00264         divdet= <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(t0, x);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266         <span class="keywordflow">if</span> (divdet != 0.0f) {
<a name="l00267"></a>00267             divdet= 1.0f/divdet;
<a name="l00268"></a>00268             v = det1*divdet;
<a name="l00269"></a>00269             
<a name="l00270"></a>00270             <span class="keywordflow">if</span> (v &lt; RE_RAYTRACE_EPSILON &amp;&amp; v &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>)) {
<a name="l00271"></a>00271                 <span class="keywordtype">float</span> cros[3];
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                 <a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a8828e92cd5d3d481c95a1745c94c1c6f">cross_v3_v3v3</a>(cros, m, t0);
<a name="l00274"></a>00274                 u= divdet*<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a76629ccfe891bccda30f790ed501e959">dot_v3v3</a>(cros, r);
<a name="l00275"></a>00275     
<a name="l00276"></a>00276                 <span class="keywordflow">if</span> (u &lt; <a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a> &amp;&amp; (v + u) &gt; -(1.0f+<a class="code" href="../../d1/d1b/rayintersection_8h.html#a35ba3e8495fcd7f5a5c21989c4a0f3ca">RE_RAYTRACE_EPSILON</a>))
<a name="l00277"></a>00277                     <span class="keywordflow">return</span> 2;
<a name="l00278"></a>00278             }
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="keywordflow">return</span> 0;
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 <span class="comment">/* RayFace intersection with checks and neighbor verifaction included,</span>
<a name="l00286"></a>00286 <span class="comment"> * Isect is modified if the face is hit. */</span>
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#aa866dec546739e9e37833d0911dbd8e1">00288</a> <a class="code" href="../../d9/d3d/BLI__math__inline_8h.html#a1561ccf2f13545d9520cc57100ec7d1c">MALWAYS_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#aa866dec546739e9e37833d0911dbd8e1">intersect_rayface</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *hit_obj, <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *face, <a class="code" href="../../d8/d95/structIsect.html">Isect</a> *is)
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290     <span class="keywordtype">float</span> dist, uv[2];
<a name="l00291"></a>00291     <span class="keywordtype">int</span> ok= 0;
<a name="l00292"></a>00292     
<a name="l00293"></a>00293     <span class="comment">/* avoid self-intersection */</span>
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95090a47baf9c8cfae81d93c0c00496d">orig</a>.<a class="code" href="../../d8/d95/structIsect.html#a10754fec745de036f768ad08aa2ecf0b">ob</a> == face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a> &amp;&amp; is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95090a47baf9c8cfae81d93c0c00496d">orig</a>.<a class="code" href="../../d8/d95/structIsect.html#a4039183fbf64f9c7064bf551e0aa5463">face</a> == face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>)
<a name="l00295"></a>00295         <span class="keywordflow">return</span> 0;
<a name="l00296"></a>00296         
<a name="l00297"></a>00297     <span class="comment">/* check if we should intersect this face */</span>
<a name="l00298"></a>00298     <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a512145db8ec6b167b4c82d1c736c10c3">check</a> == <a class="code" href="../../d1/d1b/rayintersection_8h.html#ae5e08b683b8fa6d16d6ab3b435d7b362">RE_CHECK_VLR_RENDER</a>)
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#af1e7c4df0fac7e8313c8f2ced4fa32f7">vlr_check_intersect</a>(is, (<a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>, (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>) == 0)
<a name="l00301"></a>00301             <span class="keywordflow">return</span> 0;
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a512145db8ec6b167b4c82d1c736c10c3">check</a> == <a class="code" href="../../d1/d1b/rayintersection_8h.html#a1156926d2730a1018c3bd3cda8d539b6">RE_CHECK_VLR_NON_SOLID_MATERIAL</a>)
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#af1e7c4df0fac7e8313c8f2ced4fa32f7">vlr_check_intersect</a>(is, (<a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>, (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>) == 0)
<a name="l00306"></a>00306             <span class="keywordflow">return</span> 0;
<a name="l00307"></a>00307         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#ab9c76cb709d7fe8d26708a59d03cb593">vlr_check_intersect_solid</a>(is, (<a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>, (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>) == 0)
<a name="l00308"></a>00308             <span class="keywordflow">return</span> 0;
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a512145db8ec6b167b4c82d1c736c10c3">check</a> == <a class="code" href="../../d1/d1b/rayintersection_8h.html#ad249fbb85e91cbc2a60348577ed2e18a">RE_CHECK_VLR_BAKE</a>) {
<a name="l00311"></a>00311         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#a29a57a81714f4379c9a6c2a83c19ac71">vlr_check_bake</a>(is, (<a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>, (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>) == 0)
<a name="l00312"></a>00312             <span class="keywordflow">return</span> 0;
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="comment">/* ray counter */</span>
<a name="l00316"></a>00316     <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(is-&gt;raycounter-&gt;faces.test);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     dist= is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a7e2ebcd892f602b918637b2bb6995a71">dist</a>;
<a name="l00319"></a>00319     ok= <a class="code" href="../../d6/d28/rayobject_8cpp.html#a22aca5e31a84c93c9051b0e5d7388ced">isec_tri_quad</a>(is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a45530d3cd35832f49f760fd29110a960">start</a>, is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a8b9991c88aa299d1fa62a0870ae867ed">dir</a>, face, uv, &amp;dist);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="keywordflow">if</span> (ok) {
<a name="l00322"></a>00322     
<a name="l00323"></a>00323         <span class="comment">/* when a shadow ray leaves a face, it can be little outside the edges</span>
<a name="l00324"></a>00324 <span class="comment">         * of it, causing intersection to be detected in its neighbor face */</span>
<a name="l00325"></a>00325         <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d8/d95/structIsect.html#ad42eefac9a854dcdd239f0bf2de73ae3">skip</a> &amp; <a class="code" href="../../d1/d1b/rayintersection_8h.html#a85bab024ca87d0e8d0693fb2c67bf716">RE_SKIP_VLR_NEIGHBOUR</a>)
<a name="l00326"></a>00326         {
<a name="l00327"></a>00327             <span class="keywordflow">if</span> (dist &lt; 0.1f &amp;&amp; is-&gt;orig.ob == face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>)
<a name="l00328"></a>00328             {
<a name="l00329"></a>00329                 <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> * a = (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95090a47baf9c8cfae81d93c0c00496d">orig</a>.<a class="code" href="../../d8/d95/structIsect.html#a4039183fbf64f9c7064bf551e0aa5463">face</a>;
<a name="l00330"></a>00330                 <a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a> * b = (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332                 <span class="comment">/* so there&#39;s a shared edge or vertex, let&#39;s intersect ray with</span>
<a name="l00333"></a>00333 <span class="comment">                 * face itself, if that&#39;s true we can safely return 1, otherwise</span>
<a name="l00334"></a>00334 <span class="comment">                 * we assume the intersection is invalid, 0 */</span>
<a name="l00335"></a>00335                 <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>==b-&gt;v1 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>==b-&gt;v1 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>==b-&gt;v1 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>==b-&gt;v1
<a name="l00336"></a>00336                 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>==b-&gt;v2 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>==b-&gt;v2 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>==b-&gt;v2 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>==b-&gt;v2
<a name="l00337"></a>00337                 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>==b-&gt;v3 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>==b-&gt;v3 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>==b-&gt;v3 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>==b-&gt;v3
<a name="l00338"></a>00338                 || (b-&gt;v4 &amp;&amp; (a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ad00653a4aaa14efe7934baa17225e145">v1</a>==b-&gt;v4 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#a04c76ece1792f1c07dd601b11254d846">v2</a>==b-&gt;v4 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#abc220dbcc598d6e4533377e07cf956b9">v3</a>==b-&gt;v4 || a-&gt;<a class="code" href="../../da/da0/structVlakRen.html#ac1f0e575388f0de96ebaec99757d6de3">v4</a>==b-&gt;v4))) {
<a name="l00339"></a>00339                     <span class="comment">/* create RayFace from original face, transformed if necessary */</span>
<a name="l00340"></a>00340                     <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> origface;
<a name="l00341"></a>00341                     <a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a> *ob= (<a class="code" href="../../da/d94/structObjectInstanceRen.html">ObjectInstanceRen</a>*)is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95090a47baf9c8cfae81d93c0c00496d">orig</a>.<a class="code" href="../../d8/d95/structIsect.html#a10754fec745de036f768ad08aa2ecf0b">ob</a>;
<a name="l00342"></a>00342                     <a class="code" href="../../d6/d28/rayobject_8cpp.html#ade2120155ab0be7e3778f2c9f02e6311">rayface_from_vlak</a>(&amp;origface, ob, (<a class="code" href="../../da/da0/structVlakRen.html">VlakRen</a>*)is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95090a47baf9c8cfae81d93c0c00496d">orig</a>.<a class="code" href="../../d8/d95/structIsect.html#a4039183fbf64f9c7064bf551e0aa5463">face</a>);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344                     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d28/rayobject_8cpp.html#a6590b894c757706228dc331be978922c">isec_tri_quad_neighbour</a>(is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a45530d3cd35832f49f760fd29110a960">start</a>, is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a8b9991c88aa299d1fa62a0870ae867ed">dir</a>, &amp;origface))
<a name="l00345"></a>00345                     {
<a name="l00346"></a>00346                         <span class="keywordflow">return</span> 0;
<a name="l00347"></a>00347                     }
<a name="l00348"></a>00348                 }
<a name="l00349"></a>00349             }
<a name="l00350"></a>00350         }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352         <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(is-&gt;raycounter-&gt;faces.<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         is-&gt;<a class="code" href="../../d8/d95/structIsect.html#ac894b12911c645a27bdcacaec05f61fc">isect</a>= ok;  <span class="comment">// which half of the quad</span>
<a name="l00355"></a>00355         is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a7e2ebcd892f602b918637b2bb6995a71">dist</a>= dist;
<a name="l00356"></a>00356         is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a456c1a28d340008560e7f17a47661fa9">u</a>= uv[0]; is-&gt;<a class="code" href="../../d8/d95/structIsect.html#ae538d07a7296ee59175b07f6e4905427">v</a>= uv[1];
<a name="l00357"></a>00357 
<a name="l00358"></a>00358         is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>.<a class="code" href="../../d8/d95/structIsect.html#a10754fec745de036f768ad08aa2ecf0b">ob</a>   = face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a78d2398385de07f790a9aadf632c583d">ob</a>;
<a name="l00359"></a>00359         is-&gt;<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>.<a class="code" href="../../d8/d95/structIsect.html#a4039183fbf64f9c7064bf551e0aa5463">face</a> = face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a852ea0b93cf12182cecbd975010462c6">face</a>;
<a name="l00360"></a>00360 <span class="preprocessor">#ifdef RT_USE_LAST_HIT</span>
<a name="l00361"></a>00361 <span class="preprocessor"></span>        is-&gt;<a class="code" href="../../d8/d95/structIsect.html#ab0cb44ae24599f4300980a1f59ad2e8e">last_hit</a> = hit_obj;
<a name="l00362"></a>00362 <span class="preprocessor">#endif</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span>        <span class="keywordflow">return</span> 1;
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     <span class="keywordflow">return</span> 0;
<a name="l00367"></a>00367 }
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 <span class="comment">/* Intersection */</span>
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a0e2cc67056598f6f2d886e6e96438250">00371</a> <span class="keywordtype">int</span> <a class="code" href="../../d8/d42/rayobject_8h.html#ac587698542b72b0bf642becde81dd883">RE_rayobject_raycast</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <a class="code" href="../../d8/d95/structIsect.html">Isect</a> *isec)
<a name="l00372"></a>00372 {
<a name="l00373"></a>00373     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(isec-&gt;raycounter-&gt;raycast.test);
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <span class="comment">/* setup vars used on raycast */</span>
<a name="l00378"></a>00378     <span class="keywordflow">for</span> (i=0; i&lt;3; i++)
<a name="l00379"></a>00379     {
<a name="l00380"></a>00380         isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a63e3000579e9fc904b7a6fd403ea5b7d">idot_axis</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]      = 1.0f / isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a8b9991c88aa299d1fa62a0870ae867ed">dir</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00381"></a>00381         
<a name="l00382"></a>00382         isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a63e3000579e9fc904b7a6fd403ea5b7d">idot_axis</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; 0.0 ? 1 : 0;
<a name="l00383"></a>00383         isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*i+1]   = 1 - isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00384"></a>00384         
<a name="l00385"></a>00385         isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = i+3*isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00386"></a>00386         isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*i+1]   = i+3*isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#a95f250659ebdccba82c4ef382ae294bc">bv_index</a>[2*i+1];
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="preprocessor">#ifdef RT_USE_LAST_HIT  </span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>    <span class="comment">/* last hit heuristic */</span>
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#aafb5b78d6ceeb852039d6efaca33b00f">mode</a>==<a class="code" href="../../d1/d1b/rayintersection_8h.html#acd1dd533a06af58d2e9269daf63f8ac9">RE_RAY_SHADOW</a> &amp;&amp; isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#ab0cb44ae24599f4300980a1f59ad2e8e">last_hit</a>)
<a name="l00392"></a>00392     {
<a name="l00393"></a>00393         <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(isec-&gt;raycounter-&gt;rayshadow_last_hit.test);
<a name="l00394"></a>00394         
<a name="l00395"></a>00395         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#a674362169a2a3df4f620927f9ff9eb53">RE_rayobject_intersect</a>(isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#ab0cb44ae24599f4300980a1f59ad2e8e">last_hit</a>, isec))
<a name="l00396"></a>00396         {
<a name="l00397"></a>00397             <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(isec-&gt;raycounter-&gt;raycast.<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>);
<a name="l00398"></a>00398             <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(isec-&gt;raycounter-&gt;rayshadow_last_hit.<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>);
<a name="l00399"></a>00399             <span class="keywordflow">return</span> 1;
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 <span class="preprocessor">#endif</span>
<a name="l00403"></a>00403 <span class="preprocessor"></span>
<a name="l00404"></a>00404 <span class="preprocessor">#ifdef RT_USE_HINT</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>    isec-&gt;hit_hint = 0;
<a name="l00406"></a>00406 <span class="preprocessor">#endif</span>
<a name="l00407"></a>00407 <span class="preprocessor"></span>
<a name="l00408"></a>00408     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d28/rayobject_8cpp.html#a674362169a2a3df4f620927f9ff9eb53">RE_rayobject_intersect</a>(r, isec))
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410         <a class="code" href="../../d9/dd4/raycounter_8h.html#a0a88babd5af3e76895caae1d6c85c7b9">RE_RC_COUNT</a>(isec-&gt;raycounter-&gt;raycast.<a class="code" href="../../d8/d95/structIsect.html#a764d54daa7eb9890e4e77c70a7b0e12f">hit</a>);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <span class="preprocessor">#ifdef RT_USE_HINT</span>
<a name="l00413"></a>00413 <span class="preprocessor"></span>        isec-&gt;<a class="code" href="../../d8/d95/structIsect.html#abbfb5f8ba9c1fdd3187c2a687207353b">hint</a> = isec-&gt;hit_hint;
<a name="l00414"></a>00414 <span class="preprocessor">#endif</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>        <span class="keywordflow">return</span> 1;
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     <span class="keywordflow">return</span> 0;
<a name="l00419"></a>00419 }
<a name="l00420"></a>00420 
<a name="l00421"></a><a class="code" href="../../db/d64/rayobject__internal_8h.html#abd06ba395c7563c68be377daa14bbf82">00421</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a674362169a2a3df4f620927f9ff9eb53">RE_rayobject_intersect</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <a class="code" href="../../d8/d95/structIsect.html">Isect</a> *<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423     <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a8e804170af74c701bbcb30d966957cad">RE_rayobject_isRayFace</a>(r))
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <span class="keywordflow">return</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#aa866dec546739e9e37833d0911dbd8e1">intersect_rayface</a>(r, (<a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a>*) <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r), i);
<a name="l00426"></a>00426     }
<a name="l00427"></a>00427     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#adfe813579c171b3e1e1536b811dc4551">RE_rayobject_isVlakPrimitive</a>(r))
<a name="l00428"></a>00428     {
<a name="l00429"></a>00429         <span class="comment">//TODO optimize (useless copy to RayFace to avoid duplicate code)</span>
<a name="l00430"></a>00430         <a class="code" href="../../d2/d4c/structVlakPrimitive.html">VlakPrimitive</a> *face = (<a class="code" href="../../d2/d4c/structVlakPrimitive.html">VlakPrimitive</a>*) <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00431"></a>00431         <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> nface;
<a name="l00432"></a>00432         <a class="code" href="../../d6/d28/rayobject_8cpp.html#ade2120155ab0be7e3778f2c9f02e6311">rayface_from_vlak</a>(&amp;nface, face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a2c8c01bf81c9a4fbbd6a725c7c6a9743">ob</a>, face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a9d3208a26220be26118007875217f3f5">face</a>);
<a name="l00433"></a>00433 
<a name="l00434"></a>00434         <span class="keywordflow">return</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#aa866dec546739e9e37833d0911dbd8e1">intersect_rayface</a>(r, &amp;nface, i);
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a185b20d1fd11c64198536a26f14a430f">RE_rayobject_isRayAPI</a>(r))
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438         r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00439"></a>00439         <span class="keywordflow">return</span> r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#a0f8484bd00c3d9e8850f3c7a7b5f6a92">raycast</a>(r, i);
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441     <span class="keywordflow">else</span> {
<a name="l00442"></a>00442         <a class="code" href="../../d5/d8e/Value_8h.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(0);
<a name="l00443"></a>00443         <span class="keywordflow">return</span> 0;
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="comment">/* Building */</span>
<a name="l00448"></a>00448 
<a name="l00449"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a6403f7dbf3c5b299cfb428a0e7e079d8">00449</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#a2ffbe81f0f537e9d372d0dd39ac10340">RE_rayobject_add</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *o)
<a name="l00450"></a>00450 {
<a name="l00451"></a>00451     r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00452"></a>00452     <span class="keywordflow">return</span> r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#a4d206a52ec910dbd699818dcc3120ef4">add</a>(r, o);
<a name="l00453"></a>00453 }
<a name="l00454"></a>00454 
<a name="l00455"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a2aa8301ec8095e4b03f67b9358e39ddb">00455</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#a2aa8301ec8095e4b03f67b9358e39ddb">RE_rayobject_done</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r)
<a name="l00456"></a>00456 {
<a name="l00457"></a>00457     r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00458"></a>00458     r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#aa4bc39295f72e76a5e5e6fa94e339759">done</a>(r);
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#af4b74982854a6ab7eb993e18064d1838">00461</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#af4b74982854a6ab7eb993e18064d1838">RE_rayobject_free</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r)
<a name="l00462"></a>00462 {
<a name="l00463"></a>00463     r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00464"></a>00464     r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#ae353501d8836c2c31a5548fcc3403e48">free</a>(r);
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="../../db/d64/rayobject__internal_8h.html#a17480521f24e48b8166ad9ca6a12532f">00467</a> <span class="keywordtype">float</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a17480521f24e48b8166ad9ca6a12532f">RE_rayobject_cost</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r)
<a name="l00468"></a>00468 {
<a name="l00469"></a>00469     <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a8e804170af74c701bbcb30d966957cad">RE_rayobject_isRayFace</a>(r) || <a class="code" href="../../db/d64/rayobject__internal_8h.html#adfe813579c171b3e1e1536b811dc4551">RE_rayobject_isVlakPrimitive</a>(r))
<a name="l00470"></a>00470     {
<a name="l00471"></a>00471         <span class="keywordflow">return</span> 1.0f;
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a185b20d1fd11c64198536a26f14a430f">RE_rayobject_isRayAPI</a>(r))
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00476"></a>00476         <span class="keywordflow">return</span> r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#a9ca64fbe0c63638bbf3b8e88e698c1aa">cost</a>(r);
<a name="l00477"></a>00477     }
<a name="l00478"></a>00478     <span class="keywordflow">else</span> {
<a name="l00479"></a>00479         <a class="code" href="../../d5/d8e/Value_8h.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(0);
<a name="l00480"></a>00480         <span class="keywordflow">return</span> 1.0f;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">/* Bounding Boxes */</span>
<a name="l00485"></a>00485 
<a name="l00486"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a4d44227cddfe06984a54cf67cb616dc6">00486</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#ae08fcc3b995c8afcc537055b862669ac">RE_rayobject_merge_bb</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <span class="keywordtype">float</span> *<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, <span class="keywordtype">float</span> *<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)
<a name="l00487"></a>00487 {
<a name="l00488"></a>00488     <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a8e804170af74c701bbcb30d966957cad">RE_rayobject_isRayFace</a>(r))
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490         <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> *face = (<a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a>*) <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00491"></a>00491         
<a name="l00492"></a>00492         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>, min, max);
<a name="l00493"></a>00493         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>, min, max);
<a name="l00494"></a>00494         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>, min, max);
<a name="l00495"></a>00495         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d42/rayobject_8h.html#ab83e02191c23c8ec00a34fc79259d547">RE_rayface_isQuad</a>(face)) <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(face-&gt;<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>, min, max);
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#adfe813579c171b3e1e1536b811dc4551">RE_rayobject_isVlakPrimitive</a>(r))
<a name="l00498"></a>00498     {
<a name="l00499"></a>00499         <a class="code" href="../../d2/d4c/structVlakPrimitive.html">VlakPrimitive</a> *face = (<a class="code" href="../../d2/d4c/structVlakPrimitive.html">VlakPrimitive</a>*) <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00500"></a>00500         <a class="code" href="../../d3/d7c/structRayFace.html">RayFace</a> nface;
<a name="l00501"></a>00501         <a class="code" href="../../d6/d28/rayobject_8cpp.html#ade2120155ab0be7e3778f2c9f02e6311">rayface_from_vlak</a>(&amp;nface, face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a2c8c01bf81c9a4fbbd6a725c7c6a9743">ob</a>, face-&gt;<a class="code" href="../../d2/d4c/structVlakPrimitive.html#a9d3208a26220be26118007875217f3f5">face</a>);
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(nface.<a class="code" href="../../d3/d7c/structRayFace.html#a5804dd7dcc75ac65c74374be4a6d2ef3">v1</a>, min, max);
<a name="l00504"></a>00504         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(nface.<a class="code" href="../../d3/d7c/structRayFace.html#a838c95af23a7378cb471e241322b148c">v2</a>, min, max);
<a name="l00505"></a>00505         <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(nface.<a class="code" href="../../d3/d7c/structRayFace.html#af2caa05d5b8cd4ce8e945e31312b47cd">v3</a>, min, max);
<a name="l00506"></a>00506         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d42/rayobject_8h.html#ab83e02191c23c8ec00a34fc79259d547">RE_rayface_isQuad</a>(&amp;nface)) <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a56471388e0045022014f3a365af6b34a">DO_MINMAX</a>(nface.<a class="code" href="../../d3/d7c/structRayFace.html#a2dac7ef9210e8a14baf9f3fe1a614863">v4</a>, min, max);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a185b20d1fd11c64198536a26f14a430f">RE_rayobject_isRayAPI</a>(r))
<a name="l00509"></a>00509     {
<a name="l00510"></a>00510         r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00511"></a>00511         r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#af91b08d03c94f41f8d1f9a8b08c135ff">bb</a>(r, min, max);
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513     <span class="keywordflow">else</span>
<a name="l00514"></a>00514         <a class="code" href="../../d5/d8e/Value_8h.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(0);
<a name="l00515"></a>00515 }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517 <span class="comment">/* Hints */</span>
<a name="l00518"></a>00518 
<a name="l00519"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#a00316c200c96776de41c184d337bada2">00519</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#a18cbef867f739a79dc773536fea93efe">RE_rayobject_hint_bb</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <a class="code" href="../../d0/d57/structRayHint.html">RayHint</a> *hint, <span class="keywordtype">float</span> *<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, <span class="keywordtype">float</span> *<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521     <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a8e804170af74c701bbcb30d966957cad">RE_rayobject_isRayFace</a>(r) || <a class="code" href="../../db/d64/rayobject__internal_8h.html#adfe813579c171b3e1e1536b811dc4551">RE_rayobject_isVlakPrimitive</a>(r))
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523         <span class="keywordflow">return</span>;
<a name="l00524"></a>00524     }
<a name="l00525"></a>00525     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a185b20d1fd11c64198536a26f14a430f">RE_rayobject_isRayAPI</a>(r))
<a name="l00526"></a>00526     {
<a name="l00527"></a>00527         r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00528"></a>00528         <span class="keywordflow">return</span> r-&gt;<a class="code" href="../../db/df0/structRayObject.html#a54407929986dee6a75c929968783d3d0">api</a>-&gt;<a class="code" href="../../d5/de0/structRayObjectAPI.html#af7ee9813bcf3e748924fb99013637e4d">hint_bb</a>(r, hint, min, max);
<a name="l00529"></a>00529     }
<a name="l00530"></a>00530     <span class="keywordflow">else</span>
<a name="l00531"></a>00531         <a class="code" href="../../d5/d8e/Value_8h.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(0);
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 <span class="comment">/* RayObjectControl */</span>
<a name="l00535"></a>00535 
<a name="l00536"></a><a class="code" href="../../db/d64/rayobject__internal_8h.html#a7c1f703eea97f911129c550154b42cb6">00536</a> <span class="keywordtype">int</span> <a class="code" href="../../d6/d28/rayobject_8cpp.html#a6ed9f045d875f9c237c5e38155758f8e">RE_rayobjectcontrol_test_break</a>(<a class="code" href="../../d0/ded/structRayObjectControl.html">RayObjectControl</a> *<a class="code" href="../../db/df0/structRayObject.html#abe96bdb7e2254679024e3d3a05ec5ec9">control</a>)
<a name="l00537"></a>00537 {
<a name="l00538"></a>00538     <span class="keywordflow">if</span> (control-&gt;<a class="code" href="../../d0/ded/structRayObjectControl.html#a944b71caf5800ed423947c07c8ff9e9d">test_break</a>)
<a name="l00539"></a>00539         <span class="keywordflow">return</span> control-&gt;<a class="code" href="../../d0/ded/structRayObjectControl.html#a944b71caf5800ed423947c07c8ff9e9d">test_break</a>(control-&gt;<a class="code" href="../../d0/ded/structRayObjectControl.html#a8e6b78131c66ca4b16590876d8c0f6e6">data</a>);
<a name="l00540"></a>00540 
<a name="l00541"></a>00541     <span class="keywordflow">return</span> 0;
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="../../d6/d28/rayobject_8cpp.html#af173031b8f9017b3177401250e89ccb4">00544</a> <span class="keywordtype">void</span> <a class="code" href="../../d8/d42/rayobject_8h.html#a60847153060abf48cda87a70436363ed">RE_rayobject_set_control</a>(<a class="code" href="../../db/df0/structRayObject.html">RayObject</a> *r, <span class="keywordtype">void</span> *<a class="code" href="../../d2/d3a/AUD__JOSResampleReader_8cpp.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a>, <a class="code" href="../../db/d64/rayobject__internal_8h.html#aba8683722d9a64efb1650e5780c0108a">RE_rayobjectcontrol_test_break_callback</a> <a class="code" href="../../d6/d95/rayshade_8c.html#addcfe7c39a71dffc8e622f705df6d5d1">test_break</a>)
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546     <span class="keywordflow">if</span> (<a class="code" href="../../db/d64/rayobject__internal_8h.html#a185b20d1fd11c64198536a26f14a430f">RE_rayobject_isRayAPI</a>(r))
<a name="l00547"></a>00547     {
<a name="l00548"></a>00548         r = <a class="code" href="../../db/d64/rayobject__internal_8h.html#a10024283812b5959353e98ff104417e4">RE_rayobject_align</a>(r);
<a name="l00549"></a>00549         r-&gt;<a class="code" href="../../db/df0/structRayObject.html#abe96bdb7e2254679024e3d3a05ec5ec9">control</a>.<a class="code" href="../../d0/ded/structRayObjectControl.html#a8e6b78131c66ca4b16590876d8c0f6e6">data</a> = <a class="code" href="../../d2/d3a/AUD__JOSResampleReader_8cpp.html#a511ae0b1c13f95e5f08f1a0dd3da3d93">data</a>;
<a name="l00550"></a>00550         r-&gt;<a class="code" href="../../db/df0/structRayObject.html#abe96bdb7e2254679024e3d3a05ec5ec9">control</a>.<a class="code" href="../../d0/ded/structRayObjectControl.html#a944b71caf5800ed423947c07c8ff9e9d">test_break</a> = <a class="code" href="../../d6/d95/rayshade_8c.html#addcfe7c39a71dffc8e622f705df6d5d1">test_break</a>;
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552 }
<a name="l00553"></a>00553 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:45 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
