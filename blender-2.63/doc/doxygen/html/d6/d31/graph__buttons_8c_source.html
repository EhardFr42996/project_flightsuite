<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: graph_buttons.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">graph_buttons.c</div>  </div>
</div>
<div class="contents">
<a href="../../d6/d31/graph__buttons_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version. </span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2009 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * </span>
<a name="l00022"></a>00022 <span class="comment"> * Contributor(s): Blender Foundation, Joshua Leung</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00025"></a>00025 <span class="comment"> */</span>
<a name="l00026"></a>00026 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/ddb/DNA__anim__types_8h.html">DNA_anim_types.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/dd9/DNA__object__types_8h.html" title="Object is a sort of wrapper for general info.">DNA_object_types.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/db3/DNA__scene__types_8h.html">DNA_scene_types.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d88/BLI__rand_8h.html" title="Random number functions.">BLI_rand.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d61/BLF__translation_8h.html">BLF_translation.h</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/da0/BKE__depsgraph_8h.html">BKE_depsgraph.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../da/dba/BKE__fcurve_8h.html">BKE_fcurve.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/da3/BKE__screen_8h.html">BKE_screen.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d47/BKE__unit_8h.html">BKE_unit.h</a>&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7f/WM__api_8h.html">WM_api.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddc/WM__types_8h.html">WM_types.h</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../de/ddf/RNA__access_8h.html">RNA_access.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d6f/ED__anim__api_8h.html">ED_anim_api.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df9/ED__keyframing_8h.html">ED_keyframing.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d12/ED__screen_8h.html">ED_screen.h</a>&quot;</span>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/UI__interface_8h.html">UI_interface.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d96/UI__resources_8h.html">UI_resources.h</a>&quot;</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d57/graph__intern_8h.html">graph_intern.h</a>&quot;</span>   <span class="comment">// own include</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="comment">/* XXX */</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">/* temporary definition for limits of float number buttons (FLT_MAX tends to infinity with old system) */</span>
<a name="l00075"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a35bb92eb6b9f863c1ef779b16c97a2de">00075</a> <span class="preprocessor">#define UI_FLT_MAX  10000.0f</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">/* ******************* graph editor space &amp; buttons ************** */</span>
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a6528098cfb32b4d700763dc3053b1eb5">00080</a> <span class="preprocessor">#define B_REDR 1</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="comment">/* -------------- */</span>
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a8987c0e1b04a9cf8181bdb0a45937a5d">00084</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a8987c0e1b04a9cf8181bdb0a45937a5d">do_graph_region_buttons</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>), <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg), <span class="keywordtype">int</span> event)
<a name="l00085"></a>00085 {
<a name="l00086"></a>00086     <span class="comment">//Scene *scene= CTX_data_scene(C);</span>
<a name="l00087"></a>00087     
<a name="l00088"></a>00088     <span class="keywordflow">switch</span>(event) {
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091     
<a name="l00092"></a>00092     <span class="comment">/* default for now */</span>
<a name="l00093"></a>00093     <span class="comment">//WM_event_add_notifier(C, NC_OBJECT|ND_TRANSFORM, ob);</span>
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="comment">/* -------------- */</span>
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">00098</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> **ale, <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> **fcu)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <a class="code" href="../../d6/dca/structbAnimContext.html">bAnimContext</a> ac;
<a name="l00101"></a>00101     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *elem= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00102"></a>00102     
<a name="l00103"></a>00103     <span class="comment">/* for now, only draw if we could init the anim-context info (necessary for all animation-related tools) </span>
<a name="l00104"></a>00104 <span class="comment">     * to work correctly is able to be correctly retrieved. There&#39;s no point showing empty panels?</span>
<a name="l00105"></a>00105 <span class="comment">     */</span>
<a name="l00106"></a>00106     <span class="keywordflow">if</span> (<a class="code" href="../../dc/d01/anim__filter_8c.html#af1a4fda8e00ccbf101c60f9b991ef1cd">ANIM_animdata_get_context</a>(C, &amp;ac) == 0) 
<a name="l00107"></a>00107         <span class="keywordflow">return</span> 0;
<a name="l00108"></a>00108     
<a name="l00109"></a>00109     <span class="comment">/* try to find &#39;active&#39; F-Curve */</span>
<a name="l00110"></a>00110     elem= <a class="code" href="../../df/d57/graph__intern_8h.html#a8c105815d493013a2062484ece432d2d">get_active_fcurve_channel</a>(&amp;ac);
<a name="l00111"></a>00111     <span class="keywordflow">if</span> (elem == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) 
<a name="l00112"></a>00112         <span class="keywordflow">return</span> 0;
<a name="l00113"></a>00113     
<a name="l00114"></a>00114     <span class="keywordflow">if</span> (fcu)
<a name="l00115"></a>00115         *fcu= (<a class="code" href="../../d6/df2/structFCurve.html">FCurve</a>*)elem-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#a954a70adedee38f0fe952eda8c704fff">data</a>;
<a name="l00116"></a>00116     <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> (ale)
<a name="l00117"></a>00117         *ale= elem;
<a name="l00118"></a>00118     <span class="keywordflow">else</span>
<a name="l00119"></a>00119         <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(elem);
<a name="l00120"></a>00120     
<a name="l00121"></a>00121     <span class="keywordflow">return</span> 1;
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a6490689fda064095972deb740cd06fe1">00124</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a6490689fda064095972deb740cd06fe1">graph_panel_poll</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(pt))
<a name="l00125"></a>00125 {
<a name="l00126"></a>00126     <span class="keywordflow">return</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="comment">/* -------------- */</span>
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">/* Graph Editor View Settings */</span>
<a name="l00132"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#ab196241bcc7533f46404468db31bc285">00132</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#ab196241bcc7533f46404468db31bc285">graph_panel_view</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *pa)
<a name="l00133"></a>00133 {
<a name="l00134"></a>00134     <a class="code" href="../../de/de7/structbScreen.html">bScreen</a> *sc= <a class="code" href="../../df/d01/BKE__context_8h.html#aa054e49f38f3c9becfebc4013ecf457f">CTX_wm_screen</a>(C);
<a name="l00135"></a>00135     <a class="code" href="../../d1/d53/structSpaceIpo.html">SpaceIpo</a> *sipo= <a class="code" href="../../df/d01/BKE__context_8h.html#ad20e2cf64c65e788e236de7d3507f01a">CTX_wm_space_graph</a>(C);
<a name="l00136"></a>00136     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00137"></a>00137     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> spaceptr, sceneptr;
<a name="l00138"></a>00138     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col, *sub, *row;
<a name="l00139"></a>00139     
<a name="l00140"></a>00140     <span class="comment">/* get RNA pointers for use when creating the UI elements */</span>
<a name="l00141"></a>00141     <a class="code" href="../../d3/d10/rna__access_8c.html#a2ce5c1d9b520b00730820e0e118dd4e1">RNA_id_pointer_create</a>(&amp;scene-&gt;<a class="code" href="../../d9/d27/structScene.html#a68db741bd7a79e16f765bba66cf276b1">id</a>, &amp;sceneptr);
<a name="l00142"></a>00142     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(&amp;sc-&gt;<a class="code" href="../../de/de7/structbScreen.html#ac661d280cae6952ebc9f9c95279cf6f2">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#afad9dd83aa74bdfe3a28358a7ad794e1">RNA_SpaceGraphEditor</a>, sipo, &amp;spaceptr);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="comment">/* 2D-Cursor */</span>
<a name="l00145"></a>00145     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 0);
<a name="l00146"></a>00146         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;spaceptr, <span class="stringliteral">&quot;show_cursor&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00147"></a>00147         
<a name="l00148"></a>00148         sub= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(col, 1);
<a name="l00149"></a>00149         <a class="code" href="../../d8/d1e/UI__interface_8h.html#ace838ed32c66a6979e0df3cbaa7327b1">uiLayoutSetActive</a>(sub, <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(&amp;spaceptr, <span class="stringliteral">&quot;show_cursor&quot;</span>)); 
<a name="l00150"></a>00150             <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa730a1dee89b370a0e66e9e79503f15d">uiItemO</a>(sub, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Cursor from Selection&quot;</span>), ICON_NONE, <span class="stringliteral">&quot;GRAPH_OT_frame_jump&quot;</span>);
<a name="l00151"></a>00151         
<a name="l00152"></a>00152         sub= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(col, 1);
<a name="l00153"></a>00153         <a class="code" href="../../d8/d1e/UI__interface_8h.html#ace838ed32c66a6979e0df3cbaa7327b1">uiLayoutSetActive</a>(sub, <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(&amp;spaceptr, <span class="stringliteral">&quot;show_cursor&quot;</span>)); 
<a name="l00154"></a>00154             row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a81b59d1d72c4105842646d41bc39c972">uiLayoutSplit</a>(sub, 0.7, 1);
<a name="l00155"></a>00155                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(row, &amp;sceneptr, <span class="stringliteral">&quot;frame_current&quot;</span>, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Cursor X&quot;</span>), ICON_NONE);
<a name="l00156"></a>00156                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a6acba52fa82a73c1af44e3d52ddc5be2">uiItemEnumO</a>(row, <span class="stringliteral">&quot;GRAPH_OT_snap&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;To Keys&quot;</span>), 0, <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../df/d57/graph__intern_8h.html#aeac2de18c0ed342a690b3e2ba3c52426ad4558b950f5b7d607c240586d4c05482">GRAPHKEYS_SNAP_CFRA</a>);
<a name="l00157"></a>00157             row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a81b59d1d72c4105842646d41bc39c972">uiLayoutSplit</a>(sub, 0.7, 1);
<a name="l00158"></a>00158                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(row, &amp;spaceptr, <span class="stringliteral">&quot;cursor_position_y&quot;</span>, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Cursor Y&quot;</span>), ICON_NONE);
<a name="l00159"></a>00159                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a6acba52fa82a73c1af44e3d52ddc5be2">uiItemEnumO</a>(row, <span class="stringliteral">&quot;GRAPH_OT_snap&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;To Keys&quot;</span>), 0, <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../df/d57/graph__intern_8h.html#aeac2de18c0ed342a690b3e2ba3c52426a1320a5ef152ff79269a468de733477b1">GRAPHKEYS_SNAP_VALUE</a>);
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">/* ******************* active F-Curve ************** */</span>
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a8182dc284dcaa2e7022040cc4b7a8854">00164</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a8182dc284dcaa2e7022040cc4b7a8854">graph_panel_properties</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *pa)
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *ale;
<a name="l00167"></a>00167     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu;
<a name="l00168"></a>00168     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> fcu_ptr;
<a name="l00169"></a>00169     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout = pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>;
<a name="l00170"></a>00170     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col, *row, *sub;
<a name="l00171"></a>00171     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l00172"></a>00172     <span class="keywordtype">char</span> name[256];
<a name="l00173"></a>00173     <span class="keywordtype">int</span> icon = 0;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, &amp;ale, &amp;fcu))
<a name="l00176"></a>00176         <span class="keywordflow">return</span>;
<a name="l00177"></a>00177     
<a name="l00178"></a>00178     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(layout);
<a name="l00179"></a>00179     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a678b88dc2247856d2d804986daf134cb">uiBlockSetHandleFunc</a>(block, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a8987c0e1b04a9cf8181bdb0a45937a5d">do_graph_region_buttons</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00180"></a>00180     
<a name="l00181"></a>00181     <span class="comment">/* F-Curve pointer */</span>
<a name="l00182"></a>00182     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a9555d4bb91199dd152117bf23c0f0dca">RNA_FCurve</a>, fcu, &amp;fcu_ptr);
<a name="l00183"></a>00183     
<a name="l00184"></a>00184     <span class="comment">/* user-friendly &#39;name&#39; for F-Curve */</span>
<a name="l00185"></a>00185     <span class="comment">/* TODO: only show the path if this is invalid? */</span>
<a name="l00186"></a>00186     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 0);
<a name="l00187"></a>00187         icon= <a class="code" href="../../d2/de8/anim__ipo__utils_8c.html#ab8555e692b761b4b68a2f1afde8dd757">getname_anim_fcurve</a>(name, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, fcu);
<a name="l00188"></a>00188         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, name, icon);
<a name="l00189"></a>00189         
<a name="l00190"></a>00190     <span class="comment">/* RNA-Path Editing - only really should be enabled when things aren&#39;t working */</span>
<a name="l00191"></a>00191     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00192"></a>00192         <a class="code" href="../../d8/d1e/UI__interface_8h.html#aabd4b845f9f1fba3b60ef625c75d3355">uiLayoutSetEnabled</a>(col, (fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#ad6eecd82ed24f053525b459881e405ea">flag</a> &amp; <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#ac0aededd6dcdcaa6f2dcf7d0f812e464a08981f44fd5fba6615e561ed5d1c7d67">FCURVE_DISABLED</a>)!=0); 
<a name="l00193"></a>00193         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;fcu_ptr, <span class="stringliteral">&quot;data_path&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, ICON_RNA);
<a name="l00194"></a>00194         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;fcu_ptr, <span class="stringliteral">&quot;array_index&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00195"></a>00195         
<a name="l00196"></a>00196     <span class="comment">/* color settings */</span>
<a name="l00197"></a>00197     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00198"></a>00198         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Display Color:&quot;</span>), ICON_NONE);
<a name="l00199"></a>00199         
<a name="l00200"></a>00200         row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(col, 1);
<a name="l00201"></a>00201             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(row, &amp;fcu_ptr, <span class="stringliteral">&quot;color_mode&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, ICON_NONE);
<a name="l00202"></a>00202             
<a name="l00203"></a>00203             sub= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(row, 1);
<a name="l00204"></a>00204                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#aabd4b845f9f1fba3b60ef625c75d3355">uiLayoutSetEnabled</a>(sub, (fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a3faf7e74a2917ab11502354a75bb5151">color_mode</a>==<a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a487b675d1b8ea6d6e9b8fd91f3a77f8aa688e3bcda25a7835697e5b6f2389956c">FCURVE_COLOR_CUSTOM</a>));
<a name="l00205"></a>00205                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(sub, &amp;fcu_ptr, <span class="stringliteral">&quot;color&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, ICON_NONE);
<a name="l00206"></a>00206     
<a name="l00207"></a>00207     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ale);
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/* ******************* active Keyframe ************** */</span>
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">/* get &#39;active&#39; keyframe for panel editing */</span>
<a name="l00213"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#ac95e7acf98993644c4907b9977ee8e03">00213</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#ac95e7acf98993644c4907b9977ee8e03">get_active_fcurve_keyframe_edit</a>(<a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu, <a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> **bezt, <a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> **prevbezt)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> *b;
<a name="l00216"></a>00216     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00217"></a>00217     
<a name="l00218"></a>00218     <span class="comment">/* zero the pointers */</span>
<a name="l00219"></a>00219     *bezt = *prevbezt = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00220"></a>00220     
<a name="l00221"></a>00221     <span class="comment">/* sanity checks */</span>
<a name="l00222"></a>00222     <span class="keywordflow">if</span> ((fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a799ab2725f85e5ee19e9ef88a8d6b006">bezt</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#adec915e7ed4f2b66b12313566bf5c33f">totvert</a> == 0))
<a name="l00223"></a>00223         <span class="keywordflow">return</span> 0;
<a name="l00224"></a>00224         
<a name="l00225"></a>00225     <span class="comment">/* find first selected keyframe for now, and call it the active one </span>
<a name="l00226"></a>00226 <span class="comment">     *  - this is a reasonable assumption, given that whenever anyone </span>
<a name="l00227"></a>00227 <span class="comment">     *    wants to edit numerically, there is likely to only be 1 vert selected</span>
<a name="l00228"></a>00228 <span class="comment">     */</span>
<a name="l00229"></a>00229     <span class="keywordflow">for</span> (i=0, b=fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a799ab2725f85e5ee19e9ef88a8d6b006">bezt</a>; i &lt; fcu-&gt;totvert; i++, b++) {
<a name="l00230"></a>00230         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d88/DNA__curve__types_8h.html#a30e90c4df6243a5254d5a1b61c5c8a9c">BEZSELECTED</a>(b)) {
<a name="l00231"></a>00231             <span class="comment">/* found </span>
<a name="l00232"></a>00232 <span class="comment">             *  - &#39;previous&#39; is either the one before, of the keyframe itself (which is still fine)</span>
<a name="l00233"></a>00233 <span class="comment">             *      XXX: we can just make this null instead if needed</span>
<a name="l00234"></a>00234 <span class="comment">             */</span>
<a name="l00235"></a>00235             *prevbezt = (i &gt; 0) ? b-1 : b;
<a name="l00236"></a>00236             *bezt = b;
<a name="l00237"></a>00237             
<a name="l00238"></a>00238             <span class="keywordflow">return</span> 1;
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241     
<a name="l00242"></a>00242     <span class="comment">/* not found */</span>
<a name="l00243"></a>00243     <span class="keywordflow">return</span> 0;
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">/* update callback for active keyframe properties - base updates stuff */</span>
<a name="l00247"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a866f91bcf6e024d4b280578fb89e153c">00247</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a866f91bcf6e024d4b280578fb89e153c">graphedit_activekey_update_cb</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">void</span> *fcu_ptr, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(bezt_ptr))
<a name="l00248"></a>00248 {
<a name="l00249"></a>00249     <a class="code" href="../../d1/d53/structSpaceIpo.html">SpaceIpo</a> *sipo= <a class="code" href="../../df/d01/BKE__context_8h.html#ad20e2cf64c65e788e236de7d3507f01a">CTX_wm_space_graph</a>(C);
<a name="l00250"></a>00250     <span class="keyword">const</span> <span class="keywordtype">short</span> use_handle = !(sipo-&gt;<a class="code" href="../../d1/d53/structSpaceIpo.html#afb3a36cb2d2bf16fbe5787baa810e4ea">flag</a> &amp; <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a1c8d4978dc9d97d9e9921d916b9af6dd">SIPO_NOHANDLES</a>);
<a name="l00251"></a>00251     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu = (<a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *)fcu_ptr;
<a name="l00252"></a>00252     
<a name="l00253"></a>00253     <span class="comment">/* make sure F-Curve and its handles are still valid after this editing */</span>
<a name="l00254"></a>00254     <a class="code" href="../../da/dba/BKE__fcurve_8h.html#ab62b2de349c531a4c12bc371ba85344c">sort_time_fcurve</a>(fcu);
<a name="l00255"></a>00255     <a class="code" href="../../da/dba/BKE__fcurve_8h.html#abad77ca653f43c257d897dd681f7ec33">testhandles_fcurve</a>(fcu, use_handle);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">/* update callback for active keyframe properties - handle-editing wrapper */</span>
<a name="l00259"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">00259</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">graphedit_activekey_handles_cb</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">void</span> *fcu_ptr, <span class="keywordtype">void</span> *bezt_ptr)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261     <a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> *bezt = (<a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> *)bezt_ptr;
<a name="l00262"></a>00262     
<a name="l00263"></a>00263     <span class="comment">/* since editing the handles, make sure they&#39;re set to types which are receptive to editing </span>
<a name="l00264"></a>00264 <span class="comment">     * see transform_conversions.c :: createTransGraphEditData(), last step in second loop</span>
<a name="l00265"></a>00265 <span class="comment">     */</span>
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(bezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#af6f1298c6043038ba343b76054feb920">h1</a>, <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45eca4030ebec929ea300ba646458062c761b">HD_AUTO</a>, <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45eca015592fc9e4aa078609a35b5bc00e698">HD_AUTO_ANIM</a>) &amp;&amp; <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(bezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#ad4c02b7166fdff040ebb931ed1d4bfc0">h2</a>, <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45eca4030ebec929ea300ba646458062c761b">HD_AUTO</a>, <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45eca015592fc9e4aa078609a35b5bc00e698">HD_AUTO_ANIM</a>)) {
<a name="l00267"></a>00267         <span class="comment">/* by changing to aligned handles, these can now be moved... */</span>
<a name="l00268"></a>00268         bezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#af6f1298c6043038ba343b76054feb920">h1</a>= <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45ecacf967643ac26269318a51fe281992051">HD_ALIGN</a>;
<a name="l00269"></a>00269         bezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#ad4c02b7166fdff040ebb931ed1d4bfc0">h2</a>= <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#aae1919333e2c55cb17830a26b0ce45ecacf967643ac26269318a51fe281992051">HD_ALIGN</a>;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271     
<a name="l00272"></a>00272     <span class="comment">/* now call standard updates */</span>
<a name="l00273"></a>00273     <a class="code" href="../../d6/d31/graph__buttons_8c.html#a866f91bcf6e024d4b280578fb89e153c">graphedit_activekey_update_cb</a>(C, fcu_ptr, bezt_ptr);
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a7cde92e442fe3256438150689bdf2dec">00276</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7cde92e442fe3256438150689bdf2dec">graph_panel_key_properties</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *pa)
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *ale;
<a name="l00279"></a>00279     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu;
<a name="l00280"></a>00280     <a class="code" href="../../d5/dd9/structBezTriple.html">BezTriple</a> *bezt, *prevbezt;
<a name="l00281"></a>00281     
<a name="l00282"></a>00282     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout = pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>;
<a name="l00283"></a>00283     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col;
<a name="l00284"></a>00284     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, &amp;ale, &amp;fcu))
<a name="l00287"></a>00287         <span class="keywordflow">return</span>;
<a name="l00288"></a>00288     
<a name="l00289"></a>00289     block = <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(layout);
<a name="l00290"></a>00290     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a678b88dc2247856d2d804986daf134cb">uiBlockSetHandleFunc</a>(block, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a8987c0e1b04a9cf8181bdb0a45937a5d">do_graph_region_buttons</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00291"></a>00291     
<a name="l00292"></a>00292     <span class="comment">/* only show this info if there are keyframes to edit */</span>
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d31/graph__buttons_8c.html#ac95e7acf98993644c4907b9977ee8e03">get_active_fcurve_keyframe_edit</a>(fcu, &amp;bezt, &amp;prevbezt)) {
<a name="l00294"></a>00294         <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> bezt_ptr, id_ptr, fcu_prop_ptr;
<a name="l00295"></a>00295         <a class="code" href="../../d0/de5/structPropertyRNA.html">PropertyRNA</a> *fcu_prop = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00296"></a>00296         <a class="code" href="../../d5/dd7/structuiBut.html">uiBut</a> *but;
<a name="l00297"></a>00297         <span class="keywordtype">int</span> unit = <a class="code" href="../../dd/d47/BKE__unit_8h.html#ad653784a283ccd587d43cb9d844ae9b3">B_UNIT_NONE</a>;
<a name="l00298"></a>00298         
<a name="l00299"></a>00299         <span class="comment">/* RNA pointer to keyframe, to allow editing */</span>
<a name="l00300"></a>00300         <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#aa39461c6eb29ac870f57590d1f0fa5ee">RNA_Keyframe</a>, bezt, &amp;bezt_ptr);
<a name="l00301"></a>00301         
<a name="l00302"></a>00302         <span class="comment">/* get property that F-Curve affects, for some unit-conversion magic */</span>
<a name="l00303"></a>00303         <a class="code" href="../../d3/d10/rna__access_8c.html#a2ce5c1d9b520b00730820e0e118dd4e1">RNA_id_pointer_create</a>(ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;id_ptr);
<a name="l00304"></a>00304         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d10/rna__access_8c.html#a003cb660a44918af456e10e005495f86">RNA_path_resolve</a>(&amp;id_ptr, fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a4b841fbabd01a3fd639b7672dcc1da7a">rna_path</a>, &amp;fcu_prop_ptr, &amp;fcu_prop) &amp;&amp; fcu_prop) {
<a name="l00305"></a>00305             <span class="comment">/* determine the unit for this property */</span>
<a name="l00306"></a>00306             unit = <a class="code" href="../../de/d7e/RNA__types_8h.html#a949f2f7bae19c6fda0a6f60c640fa903">RNA_SUBTYPE_UNIT</a>(<a class="code" href="../../d3/d10/rna__access_8c.html#ac2188d2835e07f6dd15491f6764cae78">RNA_property_subtype</a>(fcu_prop));
<a name="l00307"></a>00307         }       
<a name="l00308"></a>00308         
<a name="l00309"></a>00309         <span class="comment">/* interpolation */</span>
<a name="l00310"></a>00310         col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 0);
<a name="l00311"></a>00311             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;bezt_ptr, <span class="stringliteral">&quot;interpolation&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00312"></a>00312             
<a name="l00313"></a>00313         <span class="comment">/* numerical coordinate editing </span>
<a name="l00314"></a>00314 <span class="comment">         *  - we use the button-versions of the calls so that we can attach special update handlers</span>
<a name="l00315"></a>00315 <span class="comment">         *    and unit conversion magic that cannot be achieved using a purely RNA-approach</span>
<a name="l00316"></a>00316 <span class="comment">         */</span>
<a name="l00317"></a>00317         <span class="comment">// XXX: </span>
<a name="l00318"></a>00318         col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00319"></a>00319             <span class="comment">/* keyframe itself */</span>
<a name="l00320"></a>00320             {
<a name="l00321"></a>00321                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Key:&quot;</span>), ICON_NONE);
<a name="l00322"></a>00322                 
<a name="l00323"></a>00323                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Frame&quot;</span>), 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00324"></a>00324                                 &amp;bezt_ptr, <span class="stringliteral">&quot;co&quot;</span>, 0, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00325"></a>00325                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a866f91bcf6e024d4b280578fb89e153c">graphedit_activekey_update_cb</a>, fcu, bezt);
<a name="l00326"></a>00326                 
<a name="l00327"></a>00327                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Value&quot;</span>), 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00328"></a>00328                                 &amp;bezt_ptr, <span class="stringliteral">&quot;co&quot;</span>, 1, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00329"></a>00329                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a866f91bcf6e024d4b280578fb89e153c">graphedit_activekey_update_cb</a>, fcu, bezt);
<a name="l00330"></a>00330                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a6f824ca652737b7137471269fecf8c49">uiButSetUnitType</a>(but, unit);
<a name="l00331"></a>00331             }
<a name="l00332"></a>00332             
<a name="l00333"></a>00333             <span class="comment">/* previous handle - only if previous was Bezier interpolation */</span>
<a name="l00334"></a>00334             <span class="keywordflow">if</span> ((prevbezt) &amp;&amp; (prevbezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#a2b20e9a54cf1f1637920ae56f75d0926">ipo</a> == <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#ad74346e6c15814750cc9c5eb6369fda5a9163255a4d331348a32c994ea1b191ce">BEZT_IPO_BEZ</a>)) {
<a name="l00335"></a>00335                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Left Handle:&quot;</span>), ICON_NONE);
<a name="l00336"></a>00336                 
<a name="l00337"></a>00337                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <span class="stringliteral">&quot;X&quot;</span>, 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00338"></a>00338                                 &amp;bezt_ptr, <span class="stringliteral">&quot;handle_left&quot;</span>, 0, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00339"></a>00339                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">graphedit_activekey_handles_cb</a>, fcu, bezt);
<a name="l00340"></a>00340                 
<a name="l00341"></a>00341                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <span class="stringliteral">&quot;Y&quot;</span>, 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00342"></a>00342                                 &amp;bezt_ptr, <span class="stringliteral">&quot;handle_left&quot;</span>, 1, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00343"></a>00343                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">graphedit_activekey_handles_cb</a>, fcu, bezt);
<a name="l00344"></a>00344                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a6f824ca652737b7137471269fecf8c49">uiButSetUnitType</a>(but, unit);
<a name="l00345"></a>00345             }
<a name="l00346"></a>00346             
<a name="l00347"></a>00347             <span class="comment">/* next handle - only if current is Bezier interpolation */</span>
<a name="l00348"></a>00348             <span class="keywordflow">if</span> (bezt-&gt;<a class="code" href="../../d5/dd9/structBezTriple.html#a2b20e9a54cf1f1637920ae56f75d0926">ipo</a> == <a class="code" href="../../d6/d88/DNA__curve__types_8h.html#ad74346e6c15814750cc9c5eb6369fda5a9163255a4d331348a32c994ea1b191ce">BEZT_IPO_BEZ</a>) {
<a name="l00349"></a>00349                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Right Handle:&quot;</span>), ICON_NONE);
<a name="l00350"></a>00350                 
<a name="l00351"></a>00351                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <span class="stringliteral">&quot;X&quot;</span>, 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00352"></a>00352                                 &amp;bezt_ptr, <span class="stringliteral">&quot;handle_right&quot;</span>, 0, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00353"></a>00353                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">graphedit_activekey_handles_cb</a>, fcu, bezt);
<a name="l00354"></a>00354                 
<a name="l00355"></a>00355                 but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab7f2f1d4c87c6811aea6150dfe23b2e7">uiDefButR</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#aaf0952059602752258dccaa015d7b54a">NUM</a>, <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#a6528098cfb32b4d700763dc3053b1eb5">B_REDR</a>, <span class="stringliteral">&quot;Y&quot;</span>, 0, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00356"></a>00356                                 &amp;bezt_ptr, <span class="stringliteral">&quot;handle_right&quot;</span>, 1, 0, 0, -1, -1, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00357"></a>00357                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5141bb3f1021e8274b810efbc1ab41c8">graphedit_activekey_handles_cb</a>, fcu, bezt);
<a name="l00358"></a>00358                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a6f824ca652737b7137471269fecf8c49">uiButSetUnitType</a>(but, unit);
<a name="l00359"></a>00359             }
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361     <span class="keywordflow">else</span> {
<a name="l00362"></a>00362         <span class="keywordflow">if</span> ((fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a799ab2725f85e5ee19e9ef88a8d6b006">bezt</a> == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#afd96cdfbbfd2b148482ca111cefa1f74">modifiers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>)) {
<a name="l00363"></a>00363             <span class="comment">/* modifiers only - so no keyframes to be active */</span>
<a name="l00364"></a>00364             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(layout, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;F-Curve only has F-Modifiers&quot;</span>), ICON_NONE);
<a name="l00365"></a>00365             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(layout, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;See Modifiers panel below&quot;</span>), ICON_INFO);
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a568e66419fe835c1baaabb739b305e0a">fpt</a>) {
<a name="l00368"></a>00368             <span class="comment">/* samples only */</span>
<a name="l00369"></a>00369             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(layout, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;F-Curve doesn&#39;t have any keyframes as it only contains sampled points&quot;</span>),
<a name="l00370"></a>00370                     ICON_NONE);
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372         <span class="keywordflow">else</span>
<a name="l00373"></a>00373             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(layout, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;No active keyframe on F-Curve&quot;</span>), ICON_NONE);
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375     
<a name="l00376"></a>00376     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ale);
<a name="l00377"></a>00377 }
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">/* ******************* drivers ******************************** */</span>
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">00381</a> <span class="preprocessor">#define B_IPO_DEPCHANGE     10</span>
<a name="l00382"></a>00382 <span class="preprocessor"></span>
<a name="l00383"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#adfa3b0043704789a548d9c4579a2488f">00383</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#adfa3b0043704789a548d9c4579a2488f">do_graph_region_driver_buttons</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg), <span class="keywordtype">int</span> event)
<a name="l00384"></a>00384 {
<a name="l00385"></a>00385     <a class="code" href="../../d0/dc0/structMain.html">Main</a> *bmain= <a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C);
<a name="l00386"></a>00386     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00387"></a>00387     
<a name="l00388"></a>00388     <span class="keywordflow">switch</span> (event) {
<a name="l00389"></a>00389         <span class="keywordflow">case</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">B_IPO_DEPCHANGE</a>:
<a name="l00390"></a>00390         {
<a name="l00391"></a>00391             <span class="comment">/* rebuild depsgraph for the new deps */</span>
<a name="l00392"></a>00392             <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#a1916587a9ec19eb3543b1c1bc54a8ded">DAG_scene_sort</a>(bmain, scene);
<a name="l00393"></a>00393             
<a name="l00394"></a>00394             <span class="comment">/* force an update of depsgraph */</span>
<a name="l00395"></a>00395             <a class="code" href="../../d2/da0/BKE__depsgraph_8h.html#ac7bea022d30913f94c94aff54e0fc186">DAG_ids_flush_update</a>(bmain, 0);
<a name="l00396"></a>00396         }
<a name="l00397"></a>00397             <span class="keywordflow">break</span>;
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399     
<a name="l00400"></a>00400     <span class="comment">/* default for now */</span>
<a name="l00401"></a>00401     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a93a7b7f4bba572e9176db2aa580d7aa9">ND_FRAME</a>, scene); <span class="comment">// XXX could use better notifier</span>
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="comment">/* callback to remove the active driver */</span>
<a name="l00405"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a7c2ee681702773a2a464a42c72f6561a">00405</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7c2ee681702773a2a464a42c72f6561a">driver_remove_cb</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">void</span> *ale_v, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg))
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *ale= (<a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *)ale_v;
<a name="l00408"></a>00408     <a class="code" href="../../d8/d7e/structID.html">ID</a> *<span class="keywordtype">id</span>= ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>;
<a name="l00409"></a>00409     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu= ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#a954a70adedee38f0fe952eda8c704fff">data</a>;
<a name="l00410"></a>00410     <a class="code" href="../../df/df0/structReportList.html">ReportList</a> *reports = <a class="code" href="../../df/d01/BKE__context_8h.html#ac83792b6e00e841cdb896c9c0230bde7">CTX_wm_reports</a>(C);
<a name="l00411"></a>00411     
<a name="l00412"></a>00412     <span class="comment">/* try to get F-Curve that driver lives on, and ID block which has this AnimData */</span>
<a name="l00413"></a>00413     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keywordtype">id</span>, fcu))
<a name="l00414"></a>00414         <span class="keywordflow">return</span>;
<a name="l00415"></a>00415     
<a name="l00416"></a>00416     <span class="comment">/* call API method to remove this driver  */</span>    
<a name="l00417"></a>00417     <a class="code" href="../../d0/d93/drivers_8c.html#a58f287588341edc380e8085a96e85ddf">ANIM_remove_driver</a>(reports, <span class="keywordtype">id</span>, fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a4b841fbabd01a3fd639b7672dcc1da7a">rna_path</a>, fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#ad63b7b4ef28bdd8a212bd6e35e954208">array_index</a>, 0);
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">/* callback to add a target variable to the active driver */</span>
<a name="l00421"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a9eea4ba4bbd90836903dcd7379aa4e69">00421</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a9eea4ba4bbd90836903dcd7379aa4e69">driver_add_var_cb</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(C), <span class="keywordtype">void</span> *driver_v, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg))
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423     <a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *driver= (<a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *)driver_v;
<a name="l00424"></a>00424     
<a name="l00425"></a>00425     <span class="comment">/* add a new variable */</span>
<a name="l00426"></a>00426     <a class="code" href="../../da/dba/BKE__fcurve_8h.html#a8f9bdffc0203c985fe46a3d84f880f44">driver_add_new_variable</a>(driver);
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="comment">/* callback to remove target variable from active driver */</span>
<a name="l00430"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a2c80f0c8bf79a58e6cec717c9c123661">00430</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a2c80f0c8bf79a58e6cec717c9c123661">driver_delete_var_cb</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(C), <span class="keywordtype">void</span> *driver_v, <span class="keywordtype">void</span> *dvar_v)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432     <a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *driver= (<a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *)driver_v;
<a name="l00433"></a>00433     <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar= (<a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *)dvar_v;
<a name="l00434"></a>00434     
<a name="l00435"></a>00435     <span class="comment">/* remove the active variable */</span>
<a name="l00436"></a>00436     <a class="code" href="../../da/dba/BKE__fcurve_8h.html#ae2ee39c1c3566aecc68ab6f67324fa28">driver_free_variable</a>(driver, dvar);
<a name="l00437"></a>00437 }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="comment">/* callback to reset the driver&#39;s flags */</span>
<a name="l00440"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#af4a7c04a0b4fb01897a3706392dc5179">00440</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#af4a7c04a0b4fb01897a3706392dc5179">driver_update_flags_cb</a> (<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(C), <span class="keywordtype">void</span> *fcu_v, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg))
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu= (<a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *)fcu_v;
<a name="l00443"></a>00443     <a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *driver= fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a6c79ab38bad6125a0c63120a5bf4dd3e">driver</a>;
<a name="l00444"></a>00444     
<a name="l00445"></a>00445     <span class="comment">/* clear invalid flags */</span>
<a name="l00446"></a>00446     fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#ad6eecd82ed24f053525b459881e405ea">flag</a> &amp;= ~<a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#ac0aededd6dcdcaa6f2dcf7d0f812e464a08981f44fd5fba6615e561ed5d1c7d67">FCURVE_DISABLED</a>; <span class="comment">// XXX?</span>
<a name="l00447"></a>00447     driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a27db0085bcd979ac13ceac31c92c7478">flag</a> &amp;= ~<a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#aac7cb5ac3a18e0d26ee4bf5f22464a2fa199e1528ba0e102857fc8f1414057af6">DRIVER_FLAG_INVALID</a>;
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 <span class="comment">/* drivers panel poll */</span>
<a name="l00451"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a4c40d738501fad0eb2b60aaa5e135f30">00451</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a4c40d738501fad0eb2b60aaa5e135f30">graph_panel_drivers_poll</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(pt))
<a name="l00452"></a>00452 {
<a name="l00453"></a>00453     <a class="code" href="../../d1/d53/structSpaceIpo.html">SpaceIpo</a> *sipo= <a class="code" href="../../df/d01/BKE__context_8h.html#ad20e2cf64c65e788e236de7d3507f01a">CTX_wm_space_graph</a>(C);
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (sipo-&gt;<a class="code" href="../../d1/d53/structSpaceIpo.html#ad04487c00586c56a6162e0b2b90a8153">mode</a> != <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#ac791b66a82093c303b1b2aaf4f185edea19e04e65e68aa9dccc6fae6b458f7cf0">SIPO_MODE_DRIVERS</a>)
<a name="l00456"></a>00456         <span class="keywordflow">return</span> 0;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     <span class="keywordflow">return</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 <span class="comment">/* settings for &#39;single property&#39; driver variable type */</span>
<a name="l00462"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a7834698d59b8894b13cc4558cd241236">00462</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7834698d59b8894b13cc4558cd241236">graph_panel_driverVar__singleProp</a>(<a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout, <a class="code" href="../../d8/d7e/structID.html">ID</a> *<span class="keywordtype">id</span>, <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[0];
<a name="l00465"></a>00465     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> dtar_ptr;
<a name="l00466"></a>00466     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *row, *col;
<a name="l00467"></a>00467     
<a name="l00468"></a>00468     <span class="comment">/* initialize RNA pointer to the target */</span>
<a name="l00469"></a>00469     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar, &amp;dtar_ptr); 
<a name="l00470"></a>00470     
<a name="l00471"></a>00471     <span class="comment">/* Target ID */</span>
<a name="l00472"></a>00472     row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(layout, 0);
<a name="l00473"></a>00473         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(row, &amp;dtar_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Prop:&quot;</span>));
<a name="l00474"></a>00474     
<a name="l00475"></a>00475     <span class="comment">/* Target Property */</span>
<a name="l00476"></a>00476     <span class="comment">// TODO: make this less technical...</span>
<a name="l00477"></a>00477     <span class="keywordflow">if</span> (dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>) {
<a name="l00478"></a>00478         <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> root_ptr;
<a name="l00479"></a>00479         
<a name="l00480"></a>00480         <span class="comment">/* get pointer for resolving the property selected */</span>
<a name="l00481"></a>00481         <a class="code" href="../../d3/d10/rna__access_8c.html#a2ce5c1d9b520b00730820e0e118dd4e1">RNA_id_pointer_create</a>(dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;root_ptr);
<a name="l00482"></a>00482         
<a name="l00483"></a>00483         col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00484"></a>00484         <span class="comment">/* rna path */</span>
<a name="l00485"></a>00485         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a23f4a2ed9f079a6770554dee7e486480">uiTemplatePathBuilder</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;data_path&quot;</span>, &amp;root_ptr, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Path&quot;</span>));
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 <span class="comment">/* settings for &#39;rotation difference&#39; driver variable type */</span>
<a name="l00490"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a006b3464c836e6fdcf1594f70a48e491">00490</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a006b3464c836e6fdcf1594f70a48e491">graph_panel_driverVar__rotDiff</a>(<a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout, <a class="code" href="../../d8/d7e/structID.html">ID</a> *<span class="keywordtype">id</span>, <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar)
<a name="l00491"></a>00491 {
<a name="l00492"></a>00492     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[0];
<a name="l00493"></a>00493     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar2= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[1];
<a name="l00494"></a>00494     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob1 = (<a class="code" href="../../de/de7/structObject.html">Object</a> *)dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>;
<a name="l00495"></a>00495     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob2 = (<a class="code" href="../../de/de7/structObject.html">Object</a> *)dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>;
<a name="l00496"></a>00496     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> dtar_ptr, dtar2_ptr;
<a name="l00497"></a>00497     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col;
<a name="l00498"></a>00498     
<a name="l00499"></a>00499     <span class="comment">/* initialize RNA pointer to the target */</span>
<a name="l00500"></a>00500     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar, &amp;dtar_ptr); 
<a name="l00501"></a>00501     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar2, &amp;dtar2_ptr); 
<a name="l00502"></a>00502     
<a name="l00503"></a>00503     <span class="comment">/* Bone 1 */</span>
<a name="l00504"></a>00504     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00505"></a>00505         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Bone 1:&quot;</span>));
<a name="l00506"></a>00506         
<a name="l00507"></a>00507         <span class="keywordflow">if</span> (dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a> &amp;&amp; ob1-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>) {
<a name="l00508"></a>00508             <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> tar_ptr;
<a name="l00509"></a>00509             
<a name="l00510"></a>00510             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#ae2b0387c81a46dc2c2b140800fc33931">RNA_Pose</a>, ob1-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>, &amp;tar_ptr);
<a name="l00511"></a>00511             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ae83fd9e836adeded2c561a1fdd020b5a">uiItemPointerR</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;bone_target&quot;</span>, &amp;tar_ptr, <span class="stringliteral">&quot;bones&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, ICON_BONE_DATA);
<a name="l00512"></a>00512         }
<a name="l00513"></a>00513     
<a name="l00514"></a>00514     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00515"></a>00515         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(col, &amp;dtar2_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Bone 2:&quot;</span>));
<a name="l00516"></a>00516         
<a name="l00517"></a>00517         <span class="keywordflow">if</span> (dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a> &amp;&amp; ob2-&gt;pose) {
<a name="l00518"></a>00518             <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> tar_ptr;
<a name="l00519"></a>00519             
<a name="l00520"></a>00520             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#ae2b0387c81a46dc2c2b140800fc33931">RNA_Pose</a>, ob2-&gt;pose, &amp;tar_ptr);
<a name="l00521"></a>00521             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ae83fd9e836adeded2c561a1fdd020b5a">uiItemPointerR</a>(col, &amp;dtar2_ptr, <span class="stringliteral">&quot;bone_target&quot;</span>, &amp;tar_ptr, <span class="stringliteral">&quot;bones&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, ICON_BONE_DATA);
<a name="l00522"></a>00522         }
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 <span class="comment">/* settings for &#39;location difference&#39; driver variable type */</span>
<a name="l00526"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#ab64b4f96bd36da1a0a9a9a2e35a16435">00526</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#ab64b4f96bd36da1a0a9a9a2e35a16435">graph_panel_driverVar__locDiff</a>(<a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout, <a class="code" href="../../d8/d7e/structID.html">ID</a> *<span class="keywordtype">id</span>, <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar)
<a name="l00527"></a>00527 {
<a name="l00528"></a>00528     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[0];
<a name="l00529"></a>00529     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar2= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[1];
<a name="l00530"></a>00530     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob1 = (<a class="code" href="../../de/de7/structObject.html">Object</a> *)dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>;
<a name="l00531"></a>00531     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob2 = (<a class="code" href="../../de/de7/structObject.html">Object</a> *)dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>;
<a name="l00532"></a>00532     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> dtar_ptr, dtar2_ptr;
<a name="l00533"></a>00533     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col;
<a name="l00534"></a>00534     
<a name="l00535"></a>00535     <span class="comment">/* initialize RNA pointer to the target */</span>
<a name="l00536"></a>00536     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar, &amp;dtar_ptr); 
<a name="l00537"></a>00537     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar2, &amp;dtar2_ptr); 
<a name="l00538"></a>00538     
<a name="l00539"></a>00539     <span class="comment">/* Bone 1 */</span>
<a name="l00540"></a>00540     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00541"></a>00541         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Ob/Bone 1:&quot;</span>));
<a name="l00542"></a>00542         
<a name="l00543"></a>00543         <span class="keywordflow">if</span> (dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a> &amp;&amp; ob1-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>) {
<a name="l00544"></a>00544             <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> tar_ptr;
<a name="l00545"></a>00545             
<a name="l00546"></a>00546             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#ae2b0387c81a46dc2c2b140800fc33931">RNA_Pose</a>, ob1-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>, &amp;tar_ptr);
<a name="l00547"></a>00547             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ae83fd9e836adeded2c561a1fdd020b5a">uiItemPointerR</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;bone_target&quot;</span>, &amp;tar_ptr, <span class="stringliteral">&quot;bones&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, ICON_BONE_DATA);
<a name="l00548"></a>00548         }
<a name="l00549"></a>00549         
<a name="l00550"></a>00550         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;transform_space&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00551"></a>00551     
<a name="l00552"></a>00552     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00553"></a>00553         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(col, &amp;dtar2_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Ob/Bone 2:&quot;</span>));
<a name="l00554"></a>00554         
<a name="l00555"></a>00555         <span class="keywordflow">if</span> (dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a> &amp;&amp; ob2-&gt;pose) {
<a name="l00556"></a>00556             <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> tar_ptr;
<a name="l00557"></a>00557             
<a name="l00558"></a>00558             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(dtar2-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#ae2b0387c81a46dc2c2b140800fc33931">RNA_Pose</a>, ob2-&gt;pose, &amp;tar_ptr);
<a name="l00559"></a>00559             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ae83fd9e836adeded2c561a1fdd020b5a">uiItemPointerR</a>(col, &amp;dtar2_ptr, <span class="stringliteral">&quot;bone_target&quot;</span>, &amp;tar_ptr, <span class="stringliteral">&quot;bones&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, ICON_BONE_DATA);
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561         
<a name="l00562"></a>00562         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;dtar2_ptr, <span class="stringliteral">&quot;transform_space&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00563"></a>00563 }
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 <span class="comment">/* settings for &#39;transform channel&#39; driver variable type */</span>
<a name="l00566"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a3ddd45505fea817eac724e1ddc16efb1">00566</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a3ddd45505fea817eac724e1ddc16efb1">graph_panel_driverVar__transChan</a>(<a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout, <a class="code" href="../../d8/d7e/structID.html">ID</a> *<span class="keywordtype">id</span>, <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar)
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568     <a class="code" href="../../df/d26/structDriverTarget.html">DriverTarget</a> *dtar= &amp;dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a7f717ae819c408739d15204e1de98219">targets</a>[0];
<a name="l00569"></a>00569     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob = (<a class="code" href="../../de/de7/structObject.html">Object</a> *)dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>;
<a name="l00570"></a>00570     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> dtar_ptr;
<a name="l00571"></a>00571     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col, *sub;
<a name="l00572"></a>00572     
<a name="l00573"></a>00573     <span class="comment">/* initialize RNA pointer to the target */</span>
<a name="l00574"></a>00574     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(<span class="keywordtype">id</span>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a6fb6645db5e92eae71af0576956a1d54">RNA_DriverTarget</a>, dtar, &amp;dtar_ptr); 
<a name="l00575"></a>00575     
<a name="l00576"></a>00576     <span class="comment">/* properties */</span>
<a name="l00577"></a>00577     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00578"></a>00578         <a class="code" href="../../d8/d1e/UI__interface_8h.html#acc85f4b8f6e490b3fda7338a95047b2d">uiTemplateAnyID</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;id_type&quot;</span>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Ob/Bone:&quot;</span>));
<a name="l00579"></a>00579         
<a name="l00580"></a>00580         <span class="keywordflow">if</span> (dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a> &amp;&amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>) {
<a name="l00581"></a>00581             <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> tar_ptr;
<a name="l00582"></a>00582             
<a name="l00583"></a>00583             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(dtar-&gt;<a class="code" href="../../df/d26/structDriverTarget.html#abf59e6fd45af3532b4a1342a4376eb59">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#ae2b0387c81a46dc2c2b140800fc33931">RNA_Pose</a>, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a23522fc15312fc5d99e1e1f68c579c25">pose</a>, &amp;tar_ptr);
<a name="l00584"></a>00584             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ae83fd9e836adeded2c561a1fdd020b5a">uiItemPointerR</a>(col, &amp;dtar_ptr, <span class="stringliteral">&quot;bone_target&quot;</span>, &amp;tar_ptr, <span class="stringliteral">&quot;bones&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, ICON_BONE_DATA);
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586         
<a name="l00587"></a>00587         sub= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(layout, 1);
<a name="l00588"></a>00588             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(sub, &amp;dtar_ptr, <span class="stringliteral">&quot;transform_type&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00589"></a>00589             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(sub, &amp;dtar_ptr, <span class="stringliteral">&quot;transform_space&quot;</span>, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Space&quot;</span>), ICON_NONE);
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592 <span class="comment">/* driver settings for active F-Curve (only for &#39;Drivers&#39; mode) */</span>
<a name="l00593"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#adcadaa7db5825cd7097198bc0054cdf0">00593</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#adcadaa7db5825cd7097198bc0054cdf0">graph_panel_drivers</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *pa)
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *ale;
<a name="l00596"></a>00596     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu;
<a name="l00597"></a>00597     <a class="code" href="../../d3/d1e/structChannelDriver.html">ChannelDriver</a> *driver;
<a name="l00598"></a>00598     <a class="code" href="../../d1/d24/structDriverVar.html">DriverVar</a> *dvar;
<a name="l00599"></a>00599     
<a name="l00600"></a>00600     <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> driver_ptr;
<a name="l00601"></a>00601     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col;
<a name="l00602"></a>00602     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l00603"></a>00603     <a class="code" href="../../d5/dd7/structuiBut.html">uiBut</a> *but;
<a name="l00604"></a>00604     
<a name="l00605"></a>00605     <span class="comment">/* Get settings from context */</span>
<a name="l00606"></a>00606     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, &amp;ale, &amp;fcu))
<a name="l00607"></a>00607         <span class="keywordflow">return</span>;
<a name="l00608"></a>00608     driver= fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#a6c79ab38bad6125a0c63120a5bf4dd3e">driver</a>;
<a name="l00609"></a>00609     
<a name="l00610"></a>00610     <span class="comment">/* set event handler for panel */</span>
<a name="l00611"></a>00611     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>); <span class="comment">// xxx?</span>
<a name="l00612"></a>00612     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a678b88dc2247856d2d804986daf134cb">uiBlockSetHandleFunc</a>(block, <a class="code" href="../../d6/d31/graph__buttons_8c.html#adfa3b0043704789a548d9c4579a2488f">do_graph_region_driver_buttons</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00613"></a>00613     
<a name="l00614"></a>00614     <span class="comment">/* general actions - management */</span>
<a name="l00615"></a>00615     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 0);
<a name="l00616"></a>00616     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(col);
<a name="l00617"></a>00617         but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#aff9055599f7d998b2b3ff2f02c6fb597">uiDefBut</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a02c336ab5ee16270de92af2f3f2cb5eb">BUT</a>, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">B_IPO_DEPCHANGE</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Update Dependencies&quot;</span>), 0, 0, 10*<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, 22,
<a name="l00618"></a>00618                       <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0, 0, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#a7163975dd2031d6463da225baaf59bfb">TIP_</a>(<span class="stringliteral">&quot;Force updates of dependencies&quot;</span>));
<a name="l00619"></a>00619         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#af4a7c04a0b4fb01897a3706392dc5179">driver_update_flags_cb</a>, fcu, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00620"></a>00620         
<a name="l00621"></a>00621         but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#aff9055599f7d998b2b3ff2f02c6fb597">uiDefBut</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a02c336ab5ee16270de92af2f3f2cb5eb">BUT</a>, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">B_IPO_DEPCHANGE</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Remove Driver&quot;</span>), 0, 0, 10*<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, 18,
<a name="l00622"></a>00622                       <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0, 0, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#a7163975dd2031d6463da225baaf59bfb">TIP_</a>(<span class="stringliteral">&quot;Remove this driver&quot;</span>));
<a name="l00623"></a>00623         <a class="code" href="../../d8/d1e/UI__interface_8h.html#aeb04b1acc3bfca77e8ceec6590d59ef2">uiButSetNFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7c2ee681702773a2a464a42c72f6561a">driver_remove_cb</a>, <a class="code" href="../../da/d2b/mallocn_8c.html#a949901146866de87c434b2a6e225d2ec">MEM_dupallocN</a>(ale), <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00624"></a>00624         
<a name="l00625"></a>00625     <span class="comment">/* driver-level settings - type, expressions, and errors */</span>
<a name="l00626"></a>00626     <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#af750cd8ae9c393328fb8d8a1faad059d">RNA_Driver</a>, driver, &amp;driver_ptr);
<a name="l00627"></a>00627     
<a name="l00628"></a>00628     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 1);
<a name="l00629"></a>00629     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(col);
<a name="l00630"></a>00630         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;driver_ptr, <span class="stringliteral">&quot;type&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00631"></a>00631         
<a name="l00632"></a>00632         <span class="comment">/* show expression box if doing scripted drivers, and/or error messages when invalid drivers exist */</span>
<a name="l00633"></a>00633         <span class="keywordflow">if</span> (driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a3945d10db5e98f2de0797cef16a43fbb">type</a> == <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a473d8cf531a0db376806d5149760dfd3a373b8dd334d78c62a7d8f4726046dea8">DRIVER_TYPE_PYTHON</a>) {
<a name="l00634"></a>00634             <span class="comment">/* expression */</span>
<a name="l00635"></a>00635             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;driver_ptr, <span class="stringliteral">&quot;expression&quot;</span>, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Expr&quot;</span>), ICON_NONE);
<a name="l00636"></a>00636             
<a name="l00637"></a>00637             <span class="comment">/* errors? */</span>
<a name="l00638"></a>00638             <span class="keywordflow">if</span> (driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a27db0085bcd979ac13ceac31c92c7478">flag</a> &amp; <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#aac7cb5ac3a18e0d26ee4bf5f22464a2fa199e1528ba0e102857fc8f1414057af6">DRIVER_FLAG_INVALID</a>)
<a name="l00639"></a>00639                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;ERROR: invalid Python expression&quot;</span>), ICON_ERROR);
<a name="l00640"></a>00640         }
<a name="l00641"></a>00641         <span class="keywordflow">else</span> {
<a name="l00642"></a>00642             <span class="comment">/* errors? */</span>
<a name="l00643"></a>00643             <span class="keywordflow">if</span> (driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a27db0085bcd979ac13ceac31c92c7478">flag</a> &amp; <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#aac7cb5ac3a18e0d26ee4bf5f22464a2fa199e1528ba0e102857fc8f1414057af6">DRIVER_FLAG_INVALID</a>)
<a name="l00644"></a>00644                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(col, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;ERROR: invalid target channel(s)&quot;</span>), ICON_ERROR);
<a name="l00645"></a>00645         }
<a name="l00646"></a>00646         
<a name="l00647"></a>00647     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 1);
<a name="l00648"></a>00648         <span class="comment">/* debug setting */</span>
<a name="l00649"></a>00649         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(col, &amp;driver_ptr, <span class="stringliteral">&quot;show_debug_info&quot;</span>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ICON_NONE);
<a name="l00650"></a>00650         
<a name="l00651"></a>00651         <span class="comment">/* value of driver */</span>
<a name="l00652"></a>00652         <span class="keywordflow">if</span> (driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a27db0085bcd979ac13ceac31c92c7478">flag</a> &amp; <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#aac7cb5ac3a18e0d26ee4bf5f22464a2fa14eb2a558a371fb4fdd55edd034c18cb">DRIVER_FLAG_SHOWDEBUG</a>) {
<a name="l00653"></a>00653             <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(col, 1);
<a name="l00654"></a>00654             <span class="keywordtype">char</span> valBuf[32];
<a name="l00655"></a>00655             
<a name="l00656"></a>00656             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(row, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Driver Value:&quot;</span>), ICON_NONE);
<a name="l00657"></a>00657             
<a name="l00658"></a>00658             <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(valBuf, <span class="keyword">sizeof</span>(valBuf), <span class="stringliteral">&quot;%.3f&quot;</span>, driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a7597121f661e483bb9164843c105ca67">curval</a>);
<a name="l00659"></a>00659             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(row, valBuf, ICON_NONE);
<a name="l00660"></a>00660         }
<a name="l00661"></a>00661     
<a name="l00662"></a>00662     <span class="comment">/* add driver variables */</span>
<a name="l00663"></a>00663     col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 0);
<a name="l00664"></a>00664     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(col);
<a name="l00665"></a>00665         but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#aff9055599f7d998b2b3ff2f02c6fb597">uiDefBut</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a02c336ab5ee16270de92af2f3f2cb5eb">BUT</a>, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">B_IPO_DEPCHANGE</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Add Variable&quot;</span>), 0, 0, 10*<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00666"></a>00666                       <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0, 0, 0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#a7163975dd2031d6463da225baaf59bfb">TIP_</a>(<span class="stringliteral">&quot;Add a new target variable for this Driver&quot;</span>));
<a name="l00667"></a>00667         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a9eea4ba4bbd90836903dcd7379aa4e69">driver_add_var_cb</a>, driver, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00668"></a>00668     
<a name="l00669"></a>00669     <span class="comment">/* loop over targets, drawing them */</span>
<a name="l00670"></a>00670     <span class="keywordflow">for</span> (dvar= driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a14d54c061db1124addaba9a6a80cce1e">variables</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; dvar; dvar= dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a6cbe874a49fab44dd2e2ec49b5a35da1">next</a>) {
<a name="l00671"></a>00671         <a class="code" href="../../dd/d80/structPointerRNA.html">PointerRNA</a> dvar_ptr;
<a name="l00672"></a>00672         <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *box, *row;
<a name="l00673"></a>00673         
<a name="l00674"></a>00674         <span class="comment">/* sub-layout column for this variable&#39;s settings */</span>
<a name="l00675"></a>00675         col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 1);
<a name="l00676"></a>00676         
<a name="l00677"></a>00677         <span class="comment">/* header panel */</span>
<a name="l00678"></a>00678         box= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a5570dc8f239e27a98c5fdbb965572d35">uiLayoutBox</a>(col);
<a name="l00679"></a>00679             <span class="comment">/* first row context info for driver */</span>
<a name="l00680"></a>00680             <a class="code" href="../../d3/d10/rna__access_8c.html#a1f8fb80da9a6450a51ab2e9b97264f01">RNA_pointer_create</a>(ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;<a class="code" href="../../de/ddf/RNA__access_8h.html#a31d5f4e61b61c88c1a46299e03279013">RNA_DriverVariable</a>, dvar, &amp;dvar_ptr);
<a name="l00681"></a>00681             
<a name="l00682"></a>00682             row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(box, 0);
<a name="l00683"></a>00683             block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(row);
<a name="l00684"></a>00684                 <span class="comment">/* variable name */</span>
<a name="l00685"></a>00685                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(row, &amp;dvar_ptr, <span class="stringliteral">&quot;name&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, ICON_NONE);
<a name="l00686"></a>00686                 
<a name="l00687"></a>00687                 <span class="comment">/* remove button */</span>
<a name="l00688"></a>00688                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a273f9460f5ebaa8e186d34a949d1f862">uiBlockSetEmboss</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a54c054495b4966d6e51e0c5ccb5d72f4">UI_EMBOSSN</a>);
<a name="l00689"></a>00689                     but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#afb370449e683507d2b022aec0be66046">uiDefIconBut</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a02c336ab5ee16270de92af2f3f2cb5eb">BUT</a>, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a5e0be76c03716810e27880b69c15332b">B_IPO_DEPCHANGE</a>, ICON_X, 290, 0, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>,
<a name="l00690"></a>00690                                       <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.0, 0.0, 0.0, 0.0, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Delete target variable&quot;</span>));
<a name="l00691"></a>00691                     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d6/d31/graph__buttons_8c.html#a2c80f0c8bf79a58e6cec717c9c123661">driver_delete_var_cb</a>, driver, dvar);
<a name="l00692"></a>00692                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a273f9460f5ebaa8e186d34a949d1f862">uiBlockSetEmboss</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a505992b59501cd825ea7f6d7ad3358a6">UI_EMBOSS</a>);
<a name="l00693"></a>00693             
<a name="l00694"></a>00694             <span class="comment">/* variable type */</span>
<a name="l00695"></a>00695             row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(box, 0);
<a name="l00696"></a>00696                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a979d9b6768e6d5a505ea6947f2465bc1">uiItemR</a>(row, &amp;dvar_ptr, <span class="stringliteral">&quot;type&quot;</span>, 0, <span class="stringliteral">&quot;&quot;</span>, ICON_NONE);
<a name="l00697"></a>00697                 
<a name="l00698"></a>00698         <span class="comment">/* variable type settings */</span>
<a name="l00699"></a>00699         box= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a5570dc8f239e27a98c5fdbb965572d35">uiLayoutBox</a>(col);
<a name="l00700"></a>00700             <span class="comment">/* controls to draw depends on the type of variable */</span>
<a name="l00701"></a>00701             <span class="keywordflow">switch</span> (dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a1d286addd47402783d2353b855db04f3">type</a>) {
<a name="l00702"></a>00702                 <span class="keywordflow">case</span> <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a5fab844c1ef7db8f17ccb4ae57b7934ca6b0fec76581d1fea1e98f1bbba577ed7">DVAR_TYPE_SINGLE_PROP</a>: <span class="comment">/* single property */</span>
<a name="l00703"></a>00703                     <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7834698d59b8894b13cc4558cd241236">graph_panel_driverVar__singleProp</a>(box, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, dvar);
<a name="l00704"></a>00704                     <span class="keywordflow">break</span>;
<a name="l00705"></a>00705                 <span class="keywordflow">case</span> <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a5fab844c1ef7db8f17ccb4ae57b7934ca43572bc69ffd8cfd2858971d2c4acc7c">DVAR_TYPE_ROT_DIFF</a>: <span class="comment">/* rotational difference */</span>
<a name="l00706"></a>00706                     <a class="code" href="../../d6/d31/graph__buttons_8c.html#a006b3464c836e6fdcf1594f70a48e491">graph_panel_driverVar__rotDiff</a>(box, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, dvar);
<a name="l00707"></a>00707                     <span class="keywordflow">break</span>;
<a name="l00708"></a>00708                 <span class="keywordflow">case</span> <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a5fab844c1ef7db8f17ccb4ae57b7934ca00f802d5fcbeea4503bd9a15ecc38f1e">DVAR_TYPE_LOC_DIFF</a>: <span class="comment">/* location difference */</span>
<a name="l00709"></a>00709                     <a class="code" href="../../d6/d31/graph__buttons_8c.html#ab64b4f96bd36da1a0a9a9a2e35a16435">graph_panel_driverVar__locDiff</a>(box, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, dvar);
<a name="l00710"></a>00710                     <span class="keywordflow">break</span>;
<a name="l00711"></a>00711                 <span class="keywordflow">case</span> <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#a5fab844c1ef7db8f17ccb4ae57b7934ca189c989aa474667a72eeaa4db54dc750">DVAR_TYPE_TRANSFORM_CHAN</a>: <span class="comment">/* transform channel */</span>
<a name="l00712"></a>00712                     <a class="code" href="../../d6/d31/graph__buttons_8c.html#a3ddd45505fea817eac724e1ddc16efb1">graph_panel_driverVar__transChan</a>(box, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, dvar);
<a name="l00713"></a>00713                     <span class="keywordflow">break</span>;
<a name="l00714"></a>00714             }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716             <span class="comment">/* value of variable */</span>
<a name="l00717"></a>00717             <span class="keywordflow">if</span> (driver-&gt;<a class="code" href="../../d3/d1e/structChannelDriver.html#a27db0085bcd979ac13ceac31c92c7478">flag</a> &amp; <a class="code" href="../../d5/ddb/DNA__anim__types_8h.html#aac7cb5ac3a18e0d26ee4bf5f22464a2fa14eb2a558a371fb4fdd55edd034c18cb">DRIVER_FLAG_SHOWDEBUG</a>) {
<a name="l00718"></a>00718                 <span class="keywordtype">char</span> valBuf[32];
<a name="l00719"></a>00719 
<a name="l00720"></a>00720                 box= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a5570dc8f239e27a98c5fdbb965572d35">uiLayoutBox</a>(col);
<a name="l00721"></a>00721                 row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(box, 1);
<a name="l00722"></a>00722                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(row, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Value:&quot;</span>), ICON_NONE);
<a name="l00723"></a>00723                 
<a name="l00724"></a>00724                 <a class="code" href="../../d3/db3/BLI__string_8h.html#a150551c0e3b1dc65b4c9021461f468a9">BLI_snprintf</a>(valBuf, <span class="keyword">sizeof</span>(valBuf), <span class="stringliteral">&quot;%.3f&quot;</span>, dvar-&gt;<a class="code" href="../../d1/d24/structDriverVar.html#a0f21aa0140e861189e1920e6829483e5">curval</a>);
<a name="l00725"></a>00725                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a35f187f3b43444171e2ffb0a080c0fe7">uiItemL</a>(row, valBuf, ICON_NONE);
<a name="l00726"></a>00726             }
<a name="l00727"></a>00727     }
<a name="l00728"></a>00728     
<a name="l00729"></a>00729     <span class="comment">/* cleanup */</span>
<a name="l00730"></a>00730     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ale);
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733 <span class="comment">/* ******************* f-modifiers ******************************** */</span>
<a name="l00734"></a>00734 <span class="comment">/* all the drawing code is in editors/animation/fmodifier_ui.c */</span>
<a name="l00735"></a>00735 
<a name="l00736"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a04bfced0cc0614b457d5453516b3196a">00736</a> <span class="preprocessor">#define B_FMODIFIER_REDRAW      20</span>
<a name="l00737"></a>00737 <span class="preprocessor"></span>
<a name="l00738"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#aae0b4abb295823af61e16f9d890765e7">00738</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#aae0b4abb295823af61e16f9d890765e7">do_graph_region_modifier_buttons</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg), <span class="keywordtype">int</span> event)
<a name="l00739"></a>00739 {
<a name="l00740"></a>00740     <span class="keywordflow">switch</span> (event) {
<a name="l00741"></a>00741         <span class="keywordflow">case</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a04bfced0cc0614b457d5453516b3196a">B_FMODIFIER_REDRAW</a>: <span class="comment">// XXX this should send depsgraph updates too</span>
<a name="l00742"></a>00742             <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a367b640edd611357ec6de8d1923d027e">NC_ANIMATION</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); <span class="comment">// XXX need a notifier specially for F-Modifiers</span>
<a name="l00743"></a>00743             <span class="keywordflow">break</span>;
<a name="l00744"></a>00744     }
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#a1e75dbafbd01b6eeea20bd90f0a4daae">00747</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a1e75dbafbd01b6eeea20bd90f0a4daae">graph_panel_modifiers</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *pa) 
<a name="l00748"></a>00748 {
<a name="l00749"></a>00749     <a class="code" href="../../d6/dfc/structbAnimListElem.html">bAnimListElem</a> *ale;
<a name="l00750"></a>00750     <a class="code" href="../../d6/df2/structFCurve.html">FCurve</a> *fcu;
<a name="l00751"></a>00751     <a class="code" href="../../dc/d68/structFModifier.html">FModifier</a> *fcm;
<a name="l00752"></a>00752     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *col, *row;
<a name="l00753"></a>00753     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l00754"></a>00754     
<a name="l00755"></a>00755     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d31/graph__buttons_8c.html#a17c4ae2c42f1a4cb7c706d74cef86f62">graph_panel_context</a>(C, &amp;ale, &amp;fcu))
<a name="l00756"></a>00756         <span class="keywordflow">return</span>;
<a name="l00757"></a>00757     
<a name="l00758"></a>00758     block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>);
<a name="l00759"></a>00759     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a678b88dc2247856d2d804986daf134cb">uiBlockSetHandleFunc</a>(block, <a class="code" href="../../d6/d31/graph__buttons_8c.html#aae0b4abb295823af61e16f9d890765e7">do_graph_region_modifier_buttons</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00760"></a>00760     
<a name="l00761"></a>00761     <span class="comment">/* &#39;add modifier&#39; button at top of panel */</span>
<a name="l00762"></a>00762     {
<a name="l00763"></a>00763         row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 0);
<a name="l00764"></a>00764         block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a103df17c27f04aa1a4d649c3d1ea349c">uiLayoutGetBlock</a>(row);
<a name="l00765"></a>00765         
<a name="l00766"></a>00766         <span class="comment">// XXX for now, this will be a operator button which calls a &#39;add modifier&#39; operator</span>
<a name="l00767"></a>00767         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a39f6feb379a204eabeadb5613bd6435e">uiDefButO</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a02c336ab5ee16270de92af2f3f2cb5eb">BUT</a>, <span class="stringliteral">&quot;GRAPH_OT_fmodifier_add&quot;</span>, <a class="code" href="../../d4/ddc/WM__types_8h.html#a871a83db4e53fc6c6872b5ac7cc94f39a0a4b36fb214cf9c59486cd041c118bd6">WM_OP_INVOKE_REGION_WIN</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(<span class="stringliteral">&quot;Add Modifier&quot;</span>),
<a name="l00768"></a>00768                   10, 0, 150, 20, <a class="code" href="../../d6/d61/BLF__translation_8h.html#a7163975dd2031d6463da225baaf59bfb">TIP_</a>(<span class="stringliteral">&quot;Adds a new F-Curve Modifier for the active F-Curve&quot;</span>));
<a name="l00769"></a>00769         
<a name="l00770"></a>00770         <span class="comment">/* copy/paste (as sub-row)*/</span>
<a name="l00771"></a>00771         row= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4aaa709c2b2a5eb251c2693567599659">uiLayoutRow</a>(row, 1);
<a name="l00772"></a>00772             <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa730a1dee89b370a0e66e9e79503f15d">uiItemO</a>(row, <span class="stringliteral">&quot;&quot;</span>, ICON_COPYDOWN, <span class="stringliteral">&quot;GRAPH_OT_fmodifier_copy&quot;</span>);
<a name="l00773"></a>00773             <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa730a1dee89b370a0e66e9e79503f15d">uiItemO</a>(row, <span class="stringliteral">&quot;&quot;</span>, ICON_PASTEDOWN, <span class="stringliteral">&quot;GRAPH_OT_fmodifier_paste&quot;</span>);
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775     
<a name="l00776"></a>00776     <span class="comment">/* draw each modifier */</span>
<a name="l00777"></a>00777     <span class="keywordflow">for</span> (fcm= fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#afd96cdfbbfd2b148482ca111cefa1f74">modifiers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; fcm; fcm= fcm-&gt;<a class="code" href="../../dc/d68/structFModifier.html#a2b03be89329aab5401fcd674e0f2d9ca">next</a>) {
<a name="l00778"></a>00778         col= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa162d3b20924285fb9b3668337cb86d2">uiLayoutColumn</a>(pa-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>, 1);
<a name="l00779"></a>00779         
<a name="l00780"></a>00780         <a class="code" href="../../d8/dc2/fmodifier__ui_8c.html#ab114886e7e85870b0989f368c1e07c49">ANIM_uiTemplate_fmodifier_draw</a>(col, ale-&gt;<a class="code" href="../../d6/dfc/structbAnimListElem.html#ad2686a20c9c11e9889e3f4d9a60b8b8c">id</a>, &amp;fcu-&gt;<a class="code" href="../../d6/df2/structFCurve.html#afd96cdfbbfd2b148482ca111cefa1f74">modifiers</a>, fcm);
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ale);
<a name="l00784"></a>00784 }
<a name="l00785"></a>00785 
<a name="l00786"></a>00786 <span class="comment">/* ******************* general ******************************** */</span>
<a name="l00787"></a>00787 
<a name="l00788"></a><a class="code" href="../../df/d57/graph__intern_8h.html#a8fae87234d04d88e128973a35c351684">00788</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#a6e23bae7d8df793ebd397e4e200e86e2">graph_buttons_register</a>(<a class="code" href="../../d7/da9/structARegionType.html">ARegionType</a> *art)
<a name="l00789"></a>00789 {
<a name="l00790"></a>00790     <a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a> *pt;
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     pt= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a>), <span class="stringliteral">&quot;spacetype graph panel view&quot;</span>);
<a name="l00793"></a>00793     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <span class="stringliteral">&quot;GRAPH_PT_view&quot;</span>);
<a name="l00794"></a>00794     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#ac756acf10cf5ce5b2eebe6cb3b8668f1">label</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(<span class="stringliteral">&quot;View Properties&quot;</span>));
<a name="l00795"></a>00795     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#ab196241bcc7533f46404468db31bc285">graph_panel_view</a>;
<a name="l00796"></a>00796     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a5ba9e2b7b449e551bddb4b5c2573235d">flag</a> |= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab9f0f03edbbf07e116523a7cc48f0f6c">PNL_DEFAULT_CLOSED</a>;
<a name="l00797"></a>00797     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;art-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>, pt);
<a name="l00798"></a>00798     
<a name="l00799"></a>00799     pt= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a>), <span class="stringliteral">&quot;spacetype graph panel properties&quot;</span>);
<a name="l00800"></a>00800     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <span class="stringliteral">&quot;GRAPH_PT_properties&quot;</span>);
<a name="l00801"></a>00801     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#ac756acf10cf5ce5b2eebe6cb3b8668f1">label</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(<span class="stringliteral">&quot;Active F-Curve&quot;</span>));
<a name="l00802"></a>00802     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a8182dc284dcaa2e7022040cc4b7a8854">graph_panel_properties</a>;
<a name="l00803"></a>00803     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a6490689fda064095972deb740cd06fe1">graph_panel_poll</a>;
<a name="l00804"></a>00804     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;art-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>, pt);
<a name="l00805"></a>00805     
<a name="l00806"></a>00806     pt= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a>), <span class="stringliteral">&quot;spacetype graph panel properties&quot;</span>);
<a name="l00807"></a>00807     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <span class="stringliteral">&quot;GRAPH_PT_key_properties&quot;</span>);
<a name="l00808"></a>00808     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#ac756acf10cf5ce5b2eebe6cb3b8668f1">label</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(<span class="stringliteral">&quot;Active Keyframe&quot;</span>));
<a name="l00809"></a>00809     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a7cde92e442fe3256438150689bdf2dec">graph_panel_key_properties</a>;
<a name="l00810"></a>00810     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a6490689fda064095972deb740cd06fe1">graph_panel_poll</a>;
<a name="l00811"></a>00811     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;art-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>, pt);
<a name="l00812"></a>00812 
<a name="l00813"></a>00813 
<a name="l00814"></a>00814     pt= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a>), <span class="stringliteral">&quot;spacetype graph panel drivers&quot;</span>);
<a name="l00815"></a>00815     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <span class="stringliteral">&quot;GRAPH_PT_drivers&quot;</span>);
<a name="l00816"></a>00816     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#ac756acf10cf5ce5b2eebe6cb3b8668f1">label</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(<span class="stringliteral">&quot;Drivers&quot;</span>));
<a name="l00817"></a>00817     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#adcadaa7db5825cd7097198bc0054cdf0">graph_panel_drivers</a>;
<a name="l00818"></a>00818     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a4c40d738501fad0eb2b60aaa5e135f30">graph_panel_drivers_poll</a>;
<a name="l00819"></a>00819     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;art-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>, pt);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821     pt= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a>), <span class="stringliteral">&quot;spacetype graph panel modifiers&quot;</span>);
<a name="l00822"></a>00822     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <span class="stringliteral">&quot;GRAPH_PT_modifiers&quot;</span>);
<a name="l00823"></a>00823     strcpy(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#ac756acf10cf5ce5b2eebe6cb3b8668f1">label</a>, <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(<span class="stringliteral">&quot;Modifiers&quot;</span>));
<a name="l00824"></a>00824     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a1e75dbafbd01b6eeea20bd90f0a4daae">graph_panel_modifiers</a>;
<a name="l00825"></a>00825     pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a>= <a class="code" href="../../d6/d31/graph__buttons_8c.html#a6490689fda064095972deb740cd06fe1">graph_panel_poll</a>;
<a name="l00826"></a>00826     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;art-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>, pt);
<a name="l00827"></a>00827 }
<a name="l00828"></a>00828 
<a name="l00829"></a><a class="code" href="../../d6/d31/graph__buttons_8c.html#ac1244722e2894b375c764b49fbaa485b">00829</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#ac1244722e2894b375c764b49fbaa485b">graph_properties</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(op))
<a name="l00830"></a>00830 {
<a name="l00831"></a>00831     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l00832"></a>00832     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar= <a class="code" href="../../df/d57/graph__intern_8h.html#a19278b371240a9e379c6d6fc91e4d9df">graph_has_buttons_region</a>(sa);
<a name="l00833"></a>00833     
<a name="l00834"></a>00834     <span class="keywordflow">if</span> (ar)
<a name="l00835"></a>00835         <a class="code" href="../../d1/d12/ED__screen_8h.html#a51b56d6a91ecd2fd3aac98659c8db1b6">ED_region_toggle_hidden</a>(C, ar);
<a name="l00836"></a>00836 
<a name="l00837"></a>00837     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00838"></a>00838 }
<a name="l00839"></a>00839 
<a name="l00840"></a><a class="code" href="../../df/d57/graph__intern_8h.html#a639bc1a545e8109765b6830543561849">00840</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d31/graph__buttons_8c.html#ad0e43629b86532f1bf624a61bc7448c5">GRAPH_OT_properties</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00841"></a>00841 {
<a name="l00842"></a>00842     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Properties&quot;</span>;
<a name="l00843"></a>00843     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;GRAPH_OT_properties&quot;</span>;
<a name="l00844"></a>00844     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Toggle display properties panel&quot;</span>;
<a name="l00845"></a>00845     
<a name="l00846"></a>00846     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d6/d31/graph__buttons_8c.html#ac1244722e2894b375c764b49fbaa485b">graph_properties</a>;
<a name="l00847"></a>00847     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d1/d12/ED__screen_8h.html#a783714e9d0dbf420f5aff1fa36ced7f3">ED_operator_graphedit_active</a>;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849     <span class="comment">/* flags */</span>
<a name="l00850"></a>00850     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = 0;
<a name="l00851"></a>00851 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:23 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
