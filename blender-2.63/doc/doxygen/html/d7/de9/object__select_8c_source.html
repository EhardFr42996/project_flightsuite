<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: object_select.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">object_select.c</div>  </div>
</div>
<div class="contents">
<a href="../../d7/de9/object__select_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2001-2002 by NaN Holding BV.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * Contributor(s): Blender Foundation, 2002-2008 full recode</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/ddb/DNA__anim__types_8h.html">DNA_anim_types.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d75/DNA__group__types_8h.html">DNA_group_types.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../de/db2/DNA__material__types_8h.html">DNA_material_types.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df0/DNA__modifier__types_8h.html">DNA_modifier_types.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d2b/DNA__property__types_8h.html">DNA_property_types.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/db3/DNA__scene__types_8h.html">DNA_scene_types.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d93/DNA__armature__types_8h.html">DNA_armature_types.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d3e/BLI__listbase_8h.html">BLI_listbase.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d88/BLI__rand_8h.html" title="Random number functions.">BLI_rand.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/db3/BLI__string_8h.html">BLI_string.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/df5/BKE__group_8h.html">BKE_group.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9a/BKE__main_8h.html">BKE_main.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d0f/BKE__material_8h.html" title="General operations, lookup, etc. for materials.">BKE_material.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../db/dca/BKE__particle_8h.html">BKE_particle.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/db8/BKE__property_8h.html">BKE_property.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d40/BKE__report_8h.html">BKE_report.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d53/BKE__scene_8h.html">BKE_scene.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/db1/BKE__library_8h.html">BKE_library.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dbd/BKE__deform_8h.html" title="support for deformation groups and hooks.">BKE_deform.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7f/WM__api_8h.html">WM_api.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddc/WM__types_8h.html">WM_types.h</a>&quot;</span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7a/ED__object_8h.html">ED_object.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d12/ED__screen_8h.html">ED_screen.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../da/df9/ED__keyframing_8h.html">ED_keyframing.h</a>&quot;</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/UI__interface_8h.html">UI_interface.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d96/UI__resources_8h.html">UI_resources.h</a>&quot;</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="../../de/ddf/RNA__access_8h.html">RNA_access.h</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d68/RNA__define_8h.html">RNA_define.h</a>&quot;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d68/RNA__enum__types_8h.html">RNA_enum_types.h</a>&quot;</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d80/object__intern_8h.html">object_intern.h</a>&quot;</span>
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">/************************ Exported **************************/</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">/* simple API for object selection, rather than just using the flag</span>
<a name="l00082"></a>00082 <span class="comment"> * this takes into account the &#39;restrict selection in 3d view&#39; flag.</span>
<a name="l00083"></a>00083 <span class="comment"> * deselect works always, the restriction just prevents selection */</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">/* Note: send a NC_SCENE|ND_OB_SELECT notifier yourself! (or </span>
<a name="l00086"></a>00086 <span class="comment"> * or a NC_SCENE|ND_OB_VISIBLE in case of visibility toggling */</span>
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="../../d7/de9/object__select_8c.html#a2d21ae8df01747a16eaab4b88e25e9a5">00088</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(<a class="code" href="../../d3/da9/structBase.html">Base</a> *base, <span class="keywordtype">short</span> mode)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090     <span class="keywordflow">if</span> (base) {
<a name="l00091"></a>00091         <span class="keywordflow">if</span> (mode==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>) {
<a name="l00092"></a>00092             <span class="keywordflow">if</span> (!(base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#afc7a8aca0c2cf33c6323883e313362b0">restrictflag</a> &amp; <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a0a7b633594bee6f715ff6e8525317276">OB_RESTRICT_SELECT</a>))
<a name="l00093"></a>00093                 base-&gt;<a class="code" href="../../d3/da9/structBase.html#a0e10616272837fff209501e1cd7fb26b">flag</a> |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode==<a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>) {
<a name="l00096"></a>00096             base-&gt;<a class="code" href="../../d3/da9/structBase.html#a0e10616272837fff209501e1cd7fb26b">flag</a> &amp;= ~<a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00097"></a>00097         }
<a name="l00098"></a>00098         base-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4cb926ee8d882f0a18f0a2dbdea46e73">flag</a>= base-&gt;<a class="code" href="../../d3/da9/structBase.html#a0e10616272837fff209501e1cd7fb26b">flag</a>;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">/* also to set active NULL */</span>
<a name="l00103"></a><a class="code" href="../../d7/de9/object__select_8c.html#ad513998e08f0b882bf0911532426f7f4">00103</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d7a/ED__object_8h.html#af5ba7e089fcd233d467245626007849d">ED_base_object_activate</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/da9/structBase.html">Base</a> *base)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00106"></a>00106     
<a name="l00107"></a>00107     <span class="comment">/* sets scene-&gt;basact */</span>
<a name="l00108"></a>00108     <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a71a9117cf3b8db805eb031926bff279a">BASACT</a>= base;
<a name="l00109"></a>00109     
<a name="l00110"></a>00110     <span class="keywordflow">if</span> (base) {
<a name="l00111"></a>00111         
<a name="l00112"></a>00112         <span class="comment">/* XXX old signals, remember to handle notifiers now! */</span>
<a name="l00113"></a>00113         <span class="comment">//      select_actionchannel_by_name(base-&gt;object-&gt;action, &quot;Object&quot;, 1);</span>
<a name="l00114"></a>00114         
<a name="l00115"></a>00115         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a2072407a0c536bf373bd0b6b7c159c5c">ND_OB_ACTIVE</a>, scene);
<a name="l00116"></a>00116     }
<a name="l00117"></a>00117     <span class="keywordflow">else</span>
<a name="l00118"></a>00118         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a2072407a0c536bf373bd0b6b7c159c5c">ND_OB_ACTIVE</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">/********************** Selection Operators **********************/</span>
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">00123</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>)
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125     <span class="comment">/* we don&#39;t check for linked scenes here, selection is</span>
<a name="l00126"></a>00126 <span class="comment">     * still allowed then for inspection of scene */</span>
<a name="l00127"></a>00127     <a class="code" href="../../de/de7/structObject.html">Object</a> *obact= <a class="code" href="../../df/d01/BKE__context_8h.html#a86fd97bb1e59c64106c001ab29db25c7">CTX_data_active_object</a>(C);
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="keywordflow">if</span> (<a class="code" href="../../df/d01/BKE__context_8h.html#a323e283348470c038f3dd98de298a76b">CTX_data_edit_object</a>(C))
<a name="l00130"></a>00130         <span class="keywordflow">return</span> 0;
<a name="l00131"></a>00131     <span class="keywordflow">if</span> (obact &amp;&amp; obact-&gt;<a class="code" href="../../de/de7/structObject.html#a4f90725f5876b309d325c84ae4f5c51b">mode</a>)
<a name="l00132"></a>00132         <span class="keywordflow">return</span> 0;
<a name="l00133"></a>00133     
<a name="l00134"></a>00134     <span class="keywordflow">return</span> 1;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">/************************ Select by Type *************************/</span>
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="../../d7/de9/object__select_8c.html#ae71f3529d46929d930f2d4fabc333451">00139</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#ae71f3529d46929d930f2d4fabc333451">object_select_by_type_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141     <span class="keywordtype">short</span> obtype, extend;
<a name="l00142"></a>00142     
<a name="l00143"></a>00143     obtype = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;type&quot;</span>);
<a name="l00144"></a>00144     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00145"></a>00145         
<a name="l00146"></a>00146     <span class="keywordflow">if</span> (extend == 0) {
<a name="l00147"></a>00147         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00148"></a>00148             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152     
<a name="l00153"></a>00153     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00154"></a>00154         <span class="keywordflow">if</span> (base-&gt;object-&gt;type==obtype) {
<a name="l00155"></a>00155             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00156"></a>00156         }
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00159"></a>00159     
<a name="l00160"></a>00160     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00161"></a>00161     
<a name="l00162"></a>00162     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="../../d7/de9/object__select_8c.html#a2716cdb9bfb4c4ec5300411b7632ac50">00165</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#ac5e2bce3bdb46ee773fe3b1853b50607">OBJECT_OT_select_by_type</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <span class="comment">/* identifiers */</span>
<a name="l00168"></a>00168     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select By Type&quot;</span>;
<a name="l00169"></a>00169     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select all visible objects that are of a type&quot;</span>;
<a name="l00170"></a>00170     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_by_type&quot;</span>;
<a name="l00171"></a>00171     
<a name="l00172"></a>00172     <span class="comment">/* api callbacks */</span>
<a name="l00173"></a>00173     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d6/dae/wm__operators_8c.html#a926375c583166540cfa96299e433e071">WM_menu_invoke</a>;
<a name="l00174"></a>00174     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#ae71f3529d46929d930f2d4fabc333451">object_select_by_type_exec</a>;
<a name="l00175"></a>00175     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00176"></a>00176     
<a name="l00177"></a>00177     <span class="comment">/* flags */</span>
<a name="l00178"></a>00178     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00179"></a>00179     
<a name="l00180"></a>00180     <span class="comment">/* properties */</span>
<a name="l00181"></a>00181     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Extend&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00182"></a>00182     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#ad2ecde05b67ff7682699554ee5a0bfc9">prop</a> = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../d1/d4d/rna__object_8c.html#ad337e16e34aa349ce749e8ccffb1f05b">object_type_items</a>, 1, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00183"></a>00183 }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 <span class="comment">/*********************** Selection by Links *********************/</span>
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="../../d7/de9/object__select_8c.html#ac55b476fe9ebacee9960300922fff866">00187</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> <a class="code" href="../../d7/de9/object__select_8c.html#ac55b476fe9ebacee9960300922fff866">prop_select_linked_types</a>[] = {
<a name="l00188"></a>00188     <span class="comment">//{1, &quot;IPO&quot;, 0, &quot;Object IPO&quot;, &quot;&quot;}, // XXX depreceated animation system stuff...</span>
<a name="l00189"></a>00189     {2, <span class="stringliteral">&quot;OBDATA&quot;</span>, 0, <span class="stringliteral">&quot;Object Data&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00190"></a>00190     {3, <span class="stringliteral">&quot;MATERIAL&quot;</span>, 0, <span class="stringliteral">&quot;Material&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00191"></a>00191     {4, <span class="stringliteral">&quot;TEXTURE&quot;</span>, 0, <span class="stringliteral">&quot;Texture&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00192"></a>00192     {5, <span class="stringliteral">&quot;DUPGROUP&quot;</span>, 0, <span class="stringliteral">&quot;Dupligroup&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00193"></a>00193     {6, <span class="stringliteral">&quot;PARTICLE&quot;</span>, 0, <span class="stringliteral">&quot;Particle System&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00194"></a>00194     {7, <span class="stringliteral">&quot;LIBRARY&quot;</span>, 0, <span class="stringliteral">&quot;Library&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00195"></a>00195     {8, <span class="stringliteral">&quot;LIBRARY_OBDATA&quot;</span>, 0, <span class="stringliteral">&quot;Library (Object Data)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00196"></a>00196     {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}
<a name="l00197"></a>00197 };
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="../../d7/de9/object__select_8c.html#a4ca7f8540aa97075c878872e9db5c666">00199</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a4ca7f8540aa97075c878872e9db5c666">object_select_linked_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00200"></a>00200 {
<a name="l00201"></a>00201     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00202"></a>00202     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00203"></a>00203     <span class="keywordtype">void</span> *obdata = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00204"></a>00204     <a class="code" href="../../d2/d10/structMaterial.html">Material</a> *mat = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *mat1;
<a name="l00205"></a>00205     <a class="code" href="../../df/d2d/structTex.html">Tex</a> *tex= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00206"></a>00206     <span class="keywordtype">int</span> a, b;
<a name="l00207"></a>00207     <span class="keywordtype">int</span> nr = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;type&quot;</span>);
<a name="l00208"></a>00208     <span class="keywordtype">short</span> changed = 0, extend;
<a name="l00209"></a>00209     <span class="comment">/* events (nr):</span>
<a name="l00210"></a>00210 <span class="comment">     * Object Ipo: 1</span>
<a name="l00211"></a>00211 <span class="comment">     * ObData: 2</span>
<a name="l00212"></a>00212 <span class="comment">     * Current Material: 3</span>
<a name="l00213"></a>00213 <span class="comment">     * Current Texture: 4</span>
<a name="l00214"></a>00214 <span class="comment">     * DupliGroup: 5</span>
<a name="l00215"></a>00215 <span class="comment">     * PSys: 6</span>
<a name="l00216"></a>00216 <span class="comment">     */</span>
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00219"></a>00219     
<a name="l00220"></a>00220     <span class="keywordflow">if</span> (extend == 0) {
<a name="l00221"></a>00221         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00222"></a>00222             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00223"></a>00223         }
<a name="l00224"></a>00224         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226     
<a name="l00227"></a>00227     ob= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a119935c54737bd111df8fd516c390000">OBACT</a>;
<a name="l00228"></a>00228     <span class="keywordflow">if</span> (ob==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) { 
<a name="l00229"></a>00229         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;No Active Object&quot;</span>);
<a name="l00230"></a>00230         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232     
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (nr==1) {    
<a name="l00234"></a>00234             <span class="comment">// XXX old animation system</span>
<a name="l00235"></a>00235         <span class="comment">//ipo= ob-&gt;ipo;</span>
<a name="l00236"></a>00236         <span class="comment">//if (ipo==0) return OPERATOR_CANCELLED;</span>
<a name="l00237"></a>00237         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==2) {
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00241"></a>00241         obdata= ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==3 || nr==4) {
<a name="l00244"></a>00244         mat= <a class="code" href="../../d4/d0f/BKE__material_8h.html#a941f5112d1047bcbcf3e2212685296a5">give_current_material</a>(ob, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a7f7913949235b61d1cd0b8f343d0cbfc">actcol</a>);
<a name="l00245"></a>00245         <span class="keywordflow">if</span> (mat==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00246"></a>00246         <span class="keywordflow">if</span> (nr==4) {
<a name="l00247"></a>00247             <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a738a376b474b09dba529b222ba7876d6">mtex</a>[ (<span class="keywordtype">int</span>)mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#aa46bcc073208499e9effaae0a7fb4e37">texact</a> ]) tex= mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#a738a376b474b09dba529b222ba7876d6">mtex</a>[ (int)mat-&gt;<a class="code" href="../../d2/d10/structMaterial.html#aa46bcc073208499e9effaae0a7fb4e37">texact</a> ]-&gt;<a class="code" href="../../dc/ddd/structMTex.html#aef6acbb854984bb254e1cb5b75f821d4">tex</a>;
<a name="l00248"></a>00248             <a class="code" href="../../dd/db6/paraloopend_8h.html#a65986f23fef03474a87b62a14beafe42">if</a> (tex==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==5) {
<a name="l00252"></a>00252         <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==6) {
<a name="l00255"></a>00255         <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0eef8205764ed3927f48766acf36ea68">particlesystem</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==7) {
<a name="l00258"></a>00258         <span class="comment">/* do nothing */</span>
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==8) {
<a name="l00261"></a>00261         <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263     <span class="keywordflow">else</span>
<a name="l00264"></a>00264         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00265"></a>00265     
<a name="l00266"></a>00266     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00267"></a>00267         <span class="keywordflow">if</span> (nr==1) {
<a name="l00268"></a>00268                 <span class="comment">// XXX old animation system</span>
<a name="l00269"></a>00269             <span class="comment">//if (base-&gt;object-&gt;ipo==ipo) base-&gt;flag |= SELECT;</span>
<a name="l00270"></a>00270             <span class="comment">//changed = 1;</span>
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==2) {
<a name="l00273"></a>00273             <span class="keywordflow">if</span> (base-&gt;object-&gt;data==obdata) base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00274"></a>00274             changed = 1;
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==3 || nr==4) {
<a name="l00277"></a>00277             ob= base-&gt;object;
<a name="l00278"></a>00278             
<a name="l00279"></a>00279             <span class="keywordflow">for</span> (a=1; a&lt;=ob-&gt;<a class="code" href="../../de/de7/structObject.html#ad3bbabfca98cb47923254dd04d6961ac">totcol</a>; a++) {
<a name="l00280"></a>00280                 mat1= <a class="code" href="../../d4/d0f/BKE__material_8h.html#a941f5112d1047bcbcf3e2212685296a5">give_current_material</a>(ob, a);
<a name="l00281"></a>00281                 <span class="keywordflow">if</span> (nr==3) {
<a name="l00282"></a>00282                     <span class="keywordflow">if</span> (mat1==mat) base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00283"></a>00283                     changed = 1;
<a name="l00284"></a>00284                 }
<a name="l00285"></a>00285                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mat1 &amp;&amp; nr==4) {
<a name="l00286"></a>00286                     <span class="keywordflow">for</span> (b=0; b&lt;<a class="code" href="../../d0/d16/DNA__lamp__types_8h.html#a5c921b6ba71dfcfa9a404e101d9bcaf4">MAX_MTEX</a>; b++) {
<a name="l00287"></a>00287                         <span class="keywordflow">if</span> (mat1-&gt;mtex[b]) {
<a name="l00288"></a>00288                             <span class="keywordflow">if</span> (tex==mat1-&gt;mtex[b]-&gt;tex) {
<a name="l00289"></a>00289                                 base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00290"></a>00290                                 changed = 1;
<a name="l00291"></a>00291                                 <span class="keywordflow">break</span>;
<a name="l00292"></a>00292                             }
<a name="l00293"></a>00293                         }
<a name="l00294"></a>00294                     }
<a name="l00295"></a>00295                 }
<a name="l00296"></a>00296             }
<a name="l00297"></a>00297         }
<a name="l00298"></a>00298         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==5) {
<a name="l00299"></a>00299             <span class="keywordflow">if</span> (base-&gt;object-&gt;dup_group==ob-&gt;<a class="code" href="../../de/de7/structObject.html#a3f0daef111a437533e48f6209429b49f">dup_group</a>) {
<a name="l00300"></a>00300                 base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00301"></a>00301                 changed = 1;
<a name="l00302"></a>00302             }
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==6) {
<a name="l00305"></a>00305             <span class="comment">/* loop through other, then actives particles*/</span>
<a name="l00306"></a>00306             <a class="code" href="../../d4/d14/structParticleSystem.html">ParticleSystem</a> *psys;
<a name="l00307"></a>00307             <a class="code" href="../../d4/d14/structParticleSystem.html">ParticleSystem</a> *psys_act;
<a name="l00308"></a>00308             
<a name="l00309"></a>00309             <span class="keywordflow">for</span> (psys=base-&gt;object-&gt;particlesystem.first; psys; psys=psys-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a734228c70c56227c6f7a29145a5f5b57">next</a>) {
<a name="l00310"></a>00310                 <span class="keywordflow">for</span> (psys_act=ob-&gt;<a class="code" href="../../de/de7/structObject.html#a0eef8205764ed3927f48766acf36ea68">particlesystem</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; psys_act; psys_act=psys_act-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a734228c70c56227c6f7a29145a5f5b57">next</a>) {
<a name="l00311"></a>00311                     <span class="keywordflow">if</span> (psys-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a3b53997470f35e5d3a5e99ba52fb1c3a">part</a> == psys_act-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a3b53997470f35e5d3a5e99ba52fb1c3a">part</a>) {
<a name="l00312"></a>00312                         base-&gt;<a class="code" href="../../d4/d14/structParticleSystem.html#a947c785248ab9746099a34c8bc093e8f">flag</a> |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00313"></a>00313                         changed = 1;
<a name="l00314"></a>00314                         <span class="keywordflow">break</span>;
<a name="l00315"></a>00315                     }
<a name="l00316"></a>00316                 }
<a name="l00317"></a>00317                 
<a name="l00318"></a>00318                 <span class="keywordflow">if</span> (base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) {
<a name="l00319"></a>00319                     <span class="keywordflow">break</span>;
<a name="l00320"></a>00320                 }
<a name="l00321"></a>00321             }
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==7) {
<a name="l00324"></a>00324             <span class="keywordflow">if</span> (ob-&gt;<a class="code" href="../../de/de7/structObject.html#a879e9a4b2068335bf9b33dab896e439b">id</a>.<a class="code" href="../../d8/d7e/structID.html#a56d730e86e0fc566622c5f5ea2a7de9f">lib</a> == base-&gt;object-&gt;<a class="code" href="../../da/d4d/structLibrary.html#a26257357bfced5837d7507da22f18c5a">id</a>.<a class="code" href="../../d8/d7e/structID.html#a56d730e86e0fc566622c5f5ea2a7de9f">lib</a>) {
<a name="l00325"></a>00325                 base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00326"></a>00326                 changed= 1;
<a name="l00327"></a>00327             }
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==8) {
<a name="l00330"></a>00330             <span class="keywordflow">if</span> (base-&gt;object-&gt;data &amp;&amp; ((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)ob-&gt;<a class="code" href="../../de/de7/structObject.html#af121d9ecf1402708a17302a8a615cbfe">data</a>)-&gt;lib == ((<a class="code" href="../../d8/d7e/structID.html">ID</a> *)base-&gt;object-&gt;data)-&gt;lib) {
<a name="l00331"></a>00331                 base-&gt;flag |= <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>;
<a name="l00332"></a>00332                 changed= 1;
<a name="l00333"></a>00333             }
<a name="l00334"></a>00334         }
<a name="l00335"></a>00335         base-&gt;object-&gt;flag= base-&gt;flag;
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00338"></a>00338     
<a name="l00339"></a>00339     <span class="keywordflow">if</span> (changed) {
<a name="l00340"></a>00340         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00341"></a>00341         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343     
<a name="l00344"></a>00344     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="../../d7/de9/object__select_8c.html#a18d823b1ca6a6f709c2f07f0c60b2876">00347</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#a0fdda486b518a876c527022e0610d5cd">OBJECT_OT_select_linked</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349     <span class="comment">/* identifiers */</span>
<a name="l00350"></a>00350     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select Linked&quot;</span>;
<a name="l00351"></a>00351     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select all visible objects that are linked&quot;</span>;
<a name="l00352"></a>00352     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_linked&quot;</span>;
<a name="l00353"></a>00353     
<a name="l00354"></a>00354     <span class="comment">/* api callbacks */</span>
<a name="l00355"></a>00355     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d6/dae/wm__operators_8c.html#a926375c583166540cfa96299e433e071">WM_menu_invoke</a>;
<a name="l00356"></a>00356     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a4ca7f8540aa97075c878872e9db5c666">object_select_linked_exec</a>;
<a name="l00357"></a>00357     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00358"></a>00358     
<a name="l00359"></a>00359     <span class="comment">/* flags */</span>
<a name="l00360"></a>00360     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00361"></a>00361     
<a name="l00362"></a>00362     <span class="comment">/* properties */</span>
<a name="l00363"></a>00363     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Extend&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00364"></a>00364     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#ad2ecde05b67ff7682699554ee5a0bfc9">prop</a> = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;type&quot;</span>, prop_select_linked_types, 0, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="comment">/*********************** Selected Grouped ********************/</span>
<a name="l00368"></a>00368 
<a name="l00369"></a><a class="code" href="../../d7/de9/object__select_8c.html#ac6a6f0af2600cad0f95bc2867da40a42">00369</a> <span class="keyword">static</span> <a class="code" href="../../d1/d8a/structEnumPropertyItem.html">EnumPropertyItem</a> <a class="code" href="../../d7/de9/object__select_8c.html#ac6a6f0af2600cad0f95bc2867da40a42">prop_select_grouped_types</a>[] = {
<a name="l00370"></a>00370     {1, <span class="stringliteral">&quot;CHILDREN_RECURSIVE&quot;</span>, 0, <span class="stringliteral">&quot;Children&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00371"></a>00371     {2, <span class="stringliteral">&quot;CHILDREN&quot;</span>, 0, <span class="stringliteral">&quot;Immediate Children&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00372"></a>00372     {3, <span class="stringliteral">&quot;PARENT&quot;</span>, 0, <span class="stringliteral">&quot;Parent&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00373"></a>00373     {4, <span class="stringliteral">&quot;SIBLINGS&quot;</span>, 0, <span class="stringliteral">&quot;Siblings&quot;</span>, <span class="stringliteral">&quot;Shared Parent&quot;</span>},
<a name="l00374"></a>00374     {5, <span class="stringliteral">&quot;TYPE&quot;</span>, 0, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;Shared object type&quot;</span>},
<a name="l00375"></a>00375     {6, <span class="stringliteral">&quot;LAYER&quot;</span>, 0, <span class="stringliteral">&quot;Layer&quot;</span>, <span class="stringliteral">&quot;Shared layers&quot;</span>},
<a name="l00376"></a>00376     {7, <span class="stringliteral">&quot;GROUP&quot;</span>, 0, <span class="stringliteral">&quot;Group&quot;</span>, <span class="stringliteral">&quot;Shared group&quot;</span>},
<a name="l00377"></a>00377     {8, <span class="stringliteral">&quot;HOOK&quot;</span>, 0, <span class="stringliteral">&quot;Hook&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},
<a name="l00378"></a>00378     {9, <span class="stringliteral">&quot;PASS&quot;</span>, 0, <span class="stringliteral">&quot;Pass&quot;</span>, <span class="stringliteral">&quot;Render pass Index&quot;</span>},
<a name="l00379"></a>00379     {10, <span class="stringliteral">&quot;COLOR&quot;</span>, 0, <span class="stringliteral">&quot;Color&quot;</span>, <span class="stringliteral">&quot;Object Color&quot;</span>},
<a name="l00380"></a>00380     {11, <span class="stringliteral">&quot;PROPERTIES&quot;</span>, 0, <span class="stringliteral">&quot;Properties&quot;</span>, <span class="stringliteral">&quot;Game Properties&quot;</span>},
<a name="l00381"></a>00381     {12, <span class="stringliteral">&quot;KEYINGSET&quot;</span>, 0, <span class="stringliteral">&quot;Keying Set&quot;</span>, <span class="stringliteral">&quot;Objects included in active Keying Set&quot;</span>},
<a name="l00382"></a>00382     {0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, NULL}
<a name="l00383"></a>00383 };
<a name="l00384"></a>00384 
<a name="l00385"></a><a class="code" href="../../d7/de9/object__select_8c.html#a0f3623c716473ce60993a623ed5a0e08">00385</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a0f3623c716473ce60993a623ed5a0e08">select_grouped_children</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob, <span class="keywordtype">int</span> recursive)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387     <span class="keywordtype">short</span> changed = 0;
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00390"></a>00390         <span class="keywordflow">if</span> (ob == base-&gt;object-&gt;<a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a>) {
<a name="l00391"></a>00391             <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00392"></a>00392                 <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00393"></a>00393                 changed = 1;
<a name="l00394"></a>00394             }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396             <span class="keywordflow">if</span> (recursive)
<a name="l00397"></a>00397                 changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a0f3623c716473ce60993a623ed5a0e08">select_grouped_children</a>(C, base-&gt;object, 1);
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00401"></a>00401     <span class="keywordflow">return</span> changed;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a><a class="code" href="../../d7/de9/object__select_8c.html#ad77d05aa37e51c79cfb303943b52d777">00404</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#ad77d05aa37e51c79cfb303943b52d777">select_grouped_parent</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>) <span class="comment">/* Makes parent active and de-selected OBACT */</span>
<a name="l00405"></a>00405 {
<a name="l00406"></a>00406     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00407"></a>00407     <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d= <a class="code" href="../../df/d01/BKE__context_8h.html#a88ab4a564441708766a6b4ace3b17908">CTX_wm_view3d</a>(C);
<a name="l00408"></a>00408 
<a name="l00409"></a>00409     <span class="keywordtype">short</span> changed = 0;
<a name="l00410"></a>00410     <a class="code" href="../../d3/da9/structBase.html">Base</a> *baspar, *basact= <a class="code" href="../../df/d01/BKE__context_8h.html#a4f87fdb14b102e8da3f6ce0cfd5db7b4">CTX_data_active_base</a>(C);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (!basact || !(basact-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a>)) <span class="keywordflow">return</span> 0; <span class="comment">/* we know OBACT is valid */</span>
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     baspar= <a class="code" href="../../d8/d53/BKE__scene_8h.html#af038ab52dca2267b6418721c13b81e74">object_in_scene</a>(basact-&gt;<a class="code" href="../../d3/da9/structBase.html#a74bed66e64803246e406c1ed2dd7f1ab">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a>, scene);
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     <span class="comment">/* can be NULL if parent in other scene */</span>
<a name="l00417"></a>00417     <span class="keywordflow">if</span> (baspar &amp;&amp; <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#af4d876834a14c05afefb98c69828d366">BASE_SELECTABLE</a>(v3d, baspar)) {
<a name="l00418"></a>00418         <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(basact, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00419"></a>00419         <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(baspar, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00420"></a>00420         <a class="code" href="../../da/d7a/ED__object_8h.html#af5ba7e089fcd233d467245626007849d">ED_base_object_activate</a>(C, baspar);
<a name="l00421"></a>00421         changed = 1;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423     <span class="keywordflow">return</span> changed;
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 
<a name="l00427"></a><a class="code" href="../../d7/de9/object__select_8c.html#a44c51fa433cb077dcfc225ac9b914c65">00427</a> <span class="preprocessor">#define GROUP_MENU_MAX  24</span>
<a name="l00428"></a><a class="code" href="../../d7/de9/object__select_8c.html#a6befcd17aa99365b13ef5c206f4a6c93">00428</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a6befcd17aa99365b13ef5c206f4a6c93">select_grouped_group</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)  <span class="comment">/* Select objects in the same group as the active */</span>
<a name="l00429"></a>00429 {
<a name="l00430"></a>00430     <span class="keywordtype">short</span> changed = 0;
<a name="l00431"></a>00431     <a class="code" href="../../d4/d91/structGroup.html">Group</a> *group, *ob_groups[<a class="code" href="../../d7/de9/object__select_8c.html#a44c51fa433cb077dcfc225ac9b914c65">GROUP_MENU_MAX</a>];
<a name="l00432"></a>00432     <span class="keywordtype">int</span> group_count=0, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00433"></a>00433     <a class="code" href="../../d9/d4b/structuiPopupMenu.html">uiPopupMenu</a> *pup;
<a name="l00434"></a>00434     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436     <span class="keywordflow">for</span> (group=<a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C)-&gt;group.first; group &amp;&amp; group_count &lt; GROUP_MENU_MAX; group=group-&gt;<span class="keywordtype">id</span>.next) {
<a name="l00437"></a>00437         <span class="keywordflow">if</span> (<a class="code" href="../../d2/df5/BKE__group_8h.html#ad5a2f1b7be24a719b00ed2b01963fb33">object_in_group</a> (ob, group)) {
<a name="l00438"></a>00438             ob_groups[group_count] = group;
<a name="l00439"></a>00439             group_count++;
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443     <span class="keywordflow">if</span> (!group_count)
<a name="l00444"></a>00444         <span class="keywordflow">return</span> 0;
<a name="l00445"></a>00445     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (group_count == 1) {
<a name="l00446"></a>00446         group = ob_groups[0];
<a name="l00447"></a>00447         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00448"></a>00448             <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) &amp;&amp; <a class="code" href="../../d2/df5/BKE__group_8h.html#ad5a2f1b7be24a719b00ed2b01963fb33">object_in_group</a>(base-&gt;object, group)) {
<a name="l00449"></a>00449                 <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00450"></a>00450                 changed = 1;
<a name="l00451"></a>00451             }
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00454"></a>00454         <span class="keywordflow">return</span> changed;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="comment">/* build the menu. */</span>
<a name="l00458"></a>00458     pup= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a402c012d9cde0ff0f0808c25c4213d43">uiPupMenuBegin</a>(C, <span class="stringliteral">&quot;Select Group&quot;</span>, ICON_NONE);
<a name="l00459"></a>00459     layout= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8c1b07b81987cdc2168a7417f9104cca">uiPupMenuLayout</a>(pup);
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <span class="keywordflow">for</span> (<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;group_count; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00462"></a>00462         group = ob_groups[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00463"></a>00463         <a class="code" href="../../d8/d1e/UI__interface_8h.html#aca3e28252a7712df7f6cd0d82d97de9b">uiItemStringO</a>(layout, group-&gt;<a class="code" href="../../d4/d91/structGroup.html#ab7e17dc53d15eeb5f6c4c7789d92b969">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>+2, 0, <span class="stringliteral">&quot;OBJECT_OT_select_same_group&quot;</span>, <span class="stringliteral">&quot;group&quot;</span>, group-&gt;<a class="code" href="../../d4/d91/structGroup.html#ab7e17dc53d15eeb5f6c4c7789d92b969">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>);
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3ab0b4d9de253d473a16d4f329d8b50f">uiPupMenuEnd</a>(C, pup);
<a name="l00467"></a>00467     <span class="keywordflow">return</span> changed; <span class="comment">// The operator already handle this!</span>
<a name="l00468"></a>00468 }
<a name="l00469"></a>00469 
<a name="l00470"></a><a class="code" href="../../d7/de9/object__select_8c.html#a014b5ba541d6e3522f939ddcfab6dcf5">00470</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a014b5ba541d6e3522f939ddcfab6dcf5">select_grouped_object_hooks</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00471"></a>00471 {
<a name="l00472"></a>00472     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00473"></a>00473     <a class="code" href="../../d6/deb/structView3D.html">View3D</a> *v3d= <a class="code" href="../../df/d01/BKE__context_8h.html#a88ab4a564441708766a6b4ace3b17908">CTX_wm_view3d</a>(C);
<a name="l00474"></a>00474 
<a name="l00475"></a>00475     <span class="keywordtype">short</span> changed = 0;
<a name="l00476"></a>00476     <a class="code" href="../../d3/da9/structBase.html">Base</a> *base;
<a name="l00477"></a>00477     <a class="code" href="../../db/ddd/structModifierData.html">ModifierData</a> *md;
<a name="l00478"></a>00478     <a class="code" href="../../d8/d2c/structHookModifierData.html">HookModifierData</a> *hmd;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="keywordflow">for</span> (md = ob-&gt;<a class="code" href="../../de/de7/structObject.html#a31fdd585d66951dfd084a8e8ee624a8d">modifiers</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; md; md=md-&gt;<a class="code" href="../../db/ddd/structModifierData.html#a3021bdd74b5a4d99e4ea5ee3a19f8560">next</a>) {
<a name="l00481"></a>00481         <span class="keywordflow">if</span> (md-&gt;<a class="code" href="../../db/ddd/structModifierData.html#a06b3bfe88f9205bc474fa4a267732b8e">type</a>==<a class="code" href="../../da/df0/DNA__modifier__types_8h.html#a96ba018ea46fb28e626c3b573aca5435a82ec76427c7cc0b352e6aadb2e3d0b89">eModifierType_Hook</a>) {
<a name="l00482"></a>00482             hmd= (<a class="code" href="../../d8/d2c/structHookModifierData.html">HookModifierData</a>*) md;
<a name="l00483"></a>00483             <span class="keywordflow">if</span> (hmd-&gt;<a class="code" href="../../d8/d2c/structHookModifierData.html#ae539a97632b216b678294b1c1fa80a88">object</a> &amp;&amp; !(hmd-&gt;<a class="code" href="../../d8/d2c/structHookModifierData.html#ae539a97632b216b678294b1c1fa80a88">object</a>-&gt;<a class="code" href="../../de/de7/structObject.html#a4cb926ee8d882f0a18f0a2dbdea46e73">flag</a> &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00484"></a>00484                 base= <a class="code" href="../../d8/d53/BKE__scene_8h.html#af038ab52dca2267b6418721c13b81e74">object_in_scene</a>(hmd-&gt;<a class="code" href="../../d8/d2c/structHookModifierData.html#ae539a97632b216b678294b1c1fa80a88">object</a>, scene);
<a name="l00485"></a>00485                 <span class="keywordflow">if</span> (base &amp;&amp; (<a class="code" href="../../d4/db3/DNA__scene__types_8h.html#af4d876834a14c05afefb98c69828d366">BASE_SELECTABLE</a>(v3d, base))) {
<a name="l00486"></a>00486                     <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00487"></a>00487                     changed = 1;
<a name="l00488"></a>00488                 }
<a name="l00489"></a>00489             }
<a name="l00490"></a>00490         }
<a name="l00491"></a>00491     }
<a name="l00492"></a>00492     <span class="keywordflow">return</span> changed;
<a name="l00493"></a>00493 }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 <span class="comment">/* Select objects with the same parent as the active (siblings),</span>
<a name="l00496"></a>00496 <span class="comment"> * parent can be NULL also */</span>
<a name="l00497"></a><a class="code" href="../../d7/de9/object__select_8c.html#a5e8408dd7f3d51779296e39fb6ccf9fd">00497</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a5e8408dd7f3d51779296e39fb6ccf9fd">select_grouped_siblings</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <span class="keywordtype">short</span> changed = 0;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00502"></a>00502         <span class="keywordflow">if</span> ((base-&gt;object-&gt;parent==ob-&gt;<a class="code" href="../../de/de7/structObject.html#acefcc0d10011d68526b827509403b951">parent</a>)  &amp;&amp; !(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00503"></a>00503             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00504"></a>00504             changed = 1;
<a name="l00505"></a>00505         }
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00508"></a>00508     <span class="keywordflow">return</span> changed;
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a><a class="code" href="../../d7/de9/object__select_8c.html#af503ff8028028f8c86f1f81732c8e82d">00511</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#af503ff8028028f8c86f1f81732c8e82d">select_grouped_type</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00512"></a>00512 {
<a name="l00513"></a>00513     <span class="keywordtype">short</span> changed = 0;
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00516"></a>00516         <span class="keywordflow">if</span> ((base-&gt;object-&gt;type == ob-&gt;<a class="code" href="../../de/de7/structObject.html#a8137cf4265bcaaf2fc7c91a9ccd8e4f4">type</a>) &amp;&amp; !(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00517"></a>00517             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00518"></a>00518             changed = 1;
<a name="l00519"></a>00519         }
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00522"></a>00522     <span class="keywordflow">return</span> changed;
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a><a class="code" href="../../d7/de9/object__select_8c.html#a9779f42b712615137134132751304d53">00525</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a9779f42b712615137134132751304d53">select_grouped_layer</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527     <span class="keywordtype">char</span> changed = 0;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00530"></a>00530         <span class="keywordflow">if</span> ((base-&gt;lay &amp; ob-&gt;<a class="code" href="../../de/de7/structObject.html#aa9cfa964651e1e2f3044c9c79cf004b3">lay</a>) &amp;&amp; !(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00531"></a>00531             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00532"></a>00532             changed = 1;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00536"></a>00536     <span class="keywordflow">return</span> changed;
<a name="l00537"></a>00537 }
<a name="l00538"></a>00538 
<a name="l00539"></a><a class="code" href="../../d7/de9/object__select_8c.html#adaf8d7174aee04f920d413019b894b5d">00539</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#adaf8d7174aee04f920d413019b894b5d">select_grouped_index_object</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     <span class="keywordtype">char</span> changed = 0;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00544"></a>00544         <span class="keywordflow">if</span> ((base-&gt;object-&gt;index == ob-&gt;<a class="code" href="../../de/de7/structObject.html#a82d960f06759ba165265b23c7e13908b">index</a>) &amp;&amp; !(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>)) {
<a name="l00545"></a>00545             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00546"></a>00546             changed = 1;
<a name="l00547"></a>00547         }
<a name="l00548"></a>00548     }
<a name="l00549"></a>00549     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00550"></a>00550     <span class="keywordflow">return</span> changed;
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a><a class="code" href="../../d7/de9/object__select_8c.html#a05fbb72398a4e24bcde2e9f6e7d043a5">00553</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a05fbb72398a4e24bcde2e9f6e7d043a5">select_grouped_color</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00554"></a>00554 {
<a name="l00555"></a>00555     <span class="keywordtype">char</span> changed = 0;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00558"></a>00558         <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) &amp;&amp; (<a class="code" href="../../d3/d86/BLI__math__vector_8h.html#a38c22cf1e33ef0dd26cb0317cf341c73">compare_v3v3</a>(base-&gt;object-&gt;col, ob-&gt;<a class="code" href="../../de/de7/structObject.html#a4c1b357960580f8c11b177ccf9ceccb8">col</a>, 0.005f))) {
<a name="l00559"></a>00559             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00560"></a>00560             changed = 1;
<a name="l00561"></a>00561         }
<a name="l00562"></a>00562     }
<a name="l00563"></a>00563     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00564"></a>00564     <span class="keywordflow">return</span> changed;
<a name="l00565"></a>00565 }
<a name="l00566"></a>00566 
<a name="l00567"></a><a class="code" href="../../d7/de9/object__select_8c.html#af789d1d98a63d5fe4a88b8079aa43f57">00567</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#af789d1d98a63d5fe4a88b8079aa43f57">objects_share_gameprop</a>(<a class="code" href="../../de/de7/structObject.html">Object</a> *a, <a class="code" href="../../de/de7/structObject.html">Object</a> *b)
<a name="l00568"></a>00568 {
<a name="l00569"></a>00569     <a class="code" href="../../d8/d4a/structbProperty.html">bProperty</a> *prop;
<a name="l00570"></a>00570     <span class="comment">/*make a copy of all its properties*/</span>
<a name="l00571"></a>00571 
<a name="l00572"></a>00572     <span class="keywordflow">for</span> ( prop= a-&gt;<a class="code" href="../../de/de7/structObject.html#a08b5ac6620501dec9b98cb9f8c9a1fa3">prop</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; prop; prop = prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#a00f412f0af27917829febb5132a160d9">next</a> ) {
<a name="l00573"></a>00573         <span class="keywordflow">if</span> ( <a class="code" href="../../d1/db8/BKE__property_8h.html#a5eb6a05f373ac49c852787f0f0603327">get_ob_property</a>(b, prop-&gt;<a class="code" href="../../d8/d4a/structbProperty.html#af53e660a2ef1b82aacbc1d2017ad7d2c">name</a>) )
<a name="l00574"></a>00574             <span class="keywordflow">return</span> 1;
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576     <span class="keywordflow">return</span> 0;
<a name="l00577"></a>00577 }
<a name="l00578"></a>00578 
<a name="l00579"></a><a class="code" href="../../d7/de9/object__select_8c.html#ad912b68cc54e843a850e01ae5efcf2d6">00579</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#ad912b68cc54e843a850e01ae5efcf2d6">select_grouped_gameprops</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *ob)
<a name="l00580"></a>00580 {
<a name="l00581"></a>00581     <span class="keywordtype">char</span> changed = 0;
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) {
<a name="l00584"></a>00584         <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) &amp;&amp; (<a class="code" href="../../d7/de9/object__select_8c.html#af789d1d98a63d5fe4a88b8079aa43f57">objects_share_gameprop</a>(base-&gt;object, ob))) {
<a name="l00585"></a>00585             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00586"></a>00586             changed = 1;
<a name="l00587"></a>00587         }
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00590"></a>00590     <span class="keywordflow">return</span> changed;
<a name="l00591"></a>00591 }
<a name="l00592"></a>00592 
<a name="l00593"></a><a class="code" href="../../d7/de9/object__select_8c.html#a95e4c6bbf7aec82c15cc7e8d5dfdbe61">00593</a> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="../../d7/de9/object__select_8c.html#a95e4c6bbf7aec82c15cc7e8d5dfdbe61">select_grouped_keyingset</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../de/de7/structObject.html">Object</a> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(ob))
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595     <a class="code" href="../../d4/d2c/structKeyingSet.html">KeyingSet</a> *ks = <a class="code" href="../../de/d5c/keyingsets_8c.html#a57710981cd6b72dc0c3694421001f49d">ANIM_scene_get_active_keyingset</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00596"></a>00596     <span class="keywordtype">short</span> changed = 0;
<a name="l00597"></a>00597     
<a name="l00598"></a>00598     <span class="comment">/* firstly, validate KeyingSet */</span>
<a name="l00599"></a>00599     <span class="keywordflow">if</span> ((ks == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (<a class="code" href="../../de/d5c/keyingsets_8c.html#a8c097ae31ab0b1dc959448ec09889cf7">ANIM_validate_keyingset</a>(C, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ks) != 0))
<a name="l00600"></a>00600         <span class="keywordflow">return</span> 0;
<a name="l00601"></a>00601     
<a name="l00602"></a>00602     <span class="comment">/* select each object that Keying Set refers to */</span>
<a name="l00603"></a>00603     <span class="comment">// TODO: perhaps to be more in line with the rest of these, we should only take objects </span>
<a name="l00604"></a>00604     <span class="comment">// if the passed in object is included in this too</span>
<a name="l00605"></a>00605     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, selectable_bases) 
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         <span class="comment">/* only check for this object if it isn&#39;t selected already, to limit time wasted */</span>
<a name="l00608"></a>00608         <span class="keywordflow">if</span> ((base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) == 0) {
<a name="l00609"></a>00609             <a class="code" href="../../dc/d37/structKS__Path.html">KS_Path</a> *ksp;
<a name="l00610"></a>00610             
<a name="l00611"></a>00611             <span class="comment">/* this is the slow way... we could end up with &gt; 500 items here, </span>
<a name="l00612"></a>00612 <span class="comment">             * with none matching, but end up doing this on 1000 objects...</span>
<a name="l00613"></a>00613 <span class="comment">             */</span>
<a name="l00614"></a>00614             <span class="keywordflow">for</span> (ksp = ks-&gt;<a class="code" href="../../d4/d2c/structKeyingSet.html#a886536223416f3dbc721fe77a43a350b">paths</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ksp; ksp = ksp-&gt;<a class="code" href="../../dc/d37/structKS__Path.html#a1a4c3bf627d5885bdaf1cd80f27d3811">next</a>) {
<a name="l00615"></a>00615                 <span class="comment">/* if id matches, select then stop looping (match found) */</span>
<a name="l00616"></a>00616                 <span class="keywordflow">if</span> (ksp-&gt;<a class="code" href="../../dc/d37/structKS__Path.html#a5aeacd5ecdb1482cc651db9ba8f6ebd8">id</a> == (<a class="code" href="../../d8/d7e/structID.html">ID</a> *)base-&gt;object) {
<a name="l00617"></a>00617                     <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00618"></a>00618                     changed = 1;
<a name="l00619"></a>00619                     <span class="keywordflow">break</span>;
<a name="l00620"></a>00620                 }
<a name="l00621"></a>00621             }
<a name="l00622"></a>00622         }
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00625"></a>00625         
<a name="l00626"></a>00626     <span class="keywordflow">return</span> changed;
<a name="l00627"></a>00627 }
<a name="l00628"></a>00628 
<a name="l00629"></a><a class="code" href="../../d7/de9/object__select_8c.html#a893b7da9523748dfb573ac26c0069f00">00629</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a893b7da9523748dfb573ac26c0069f00">object_select_grouped_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00630"></a>00630 {
<a name="l00631"></a>00631     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00632"></a>00632     <a class="code" href="../../de/de7/structObject.html">Object</a> *ob;
<a name="l00633"></a>00633     <span class="keywordtype">int</span> nr = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;type&quot;</span>);
<a name="l00634"></a>00634     <span class="keywordtype">short</span> changed = 0, extend;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00637"></a>00637     
<a name="l00638"></a>00638     <span class="keywordflow">if</span> (extend == 0) {
<a name="l00639"></a>00639         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00640"></a>00640             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00641"></a>00641             changed = 1;
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645     
<a name="l00646"></a>00646     ob= <a class="code" href="../../d4/db3/DNA__scene__types_8h.html#a119935c54737bd111df8fd516c390000">OBACT</a>;
<a name="l00647"></a>00647     <span class="keywordflow">if</span> (ob==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) { 
<a name="l00648"></a>00648         <a class="code" href="../../d2/d40/BKE__report_8h.html#a704625c22b5bb0148eea14635968537a">BKE_report</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#a07dcf0c512e769205201c34c254f4049">reports</a>, <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ae4f179a72db5cca021a37ec4c6fe4c68a77427e7d5e1c0e3f2fbe37425794e319">RPT_ERROR</a>, <span class="stringliteral">&quot;No Active Object&quot;</span>);
<a name="l00649"></a>00649         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651     
<a name="l00652"></a>00652     <span class="keywordflow">if</span> (nr==1)      changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a0f3623c716473ce60993a623ed5a0e08">select_grouped_children</a>(C, ob, 1);
<a name="l00653"></a>00653     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==2) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a0f3623c716473ce60993a623ed5a0e08">select_grouped_children</a>(C, ob, 0);
<a name="l00654"></a>00654     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==3) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#ad77d05aa37e51c79cfb303943b52d777">select_grouped_parent</a>(C);
<a name="l00655"></a>00655     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==4) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a5e8408dd7f3d51779296e39fb6ccf9fd">select_grouped_siblings</a>(C, ob);
<a name="l00656"></a>00656     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==5) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#af503ff8028028f8c86f1f81732c8e82d">select_grouped_type</a>(C, ob);
<a name="l00657"></a>00657     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==6) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a9779f42b712615137134132751304d53">select_grouped_layer</a>(C, ob);
<a name="l00658"></a>00658     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==7) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a6befcd17aa99365b13ef5c206f4a6c93">select_grouped_group</a>(C, ob);
<a name="l00659"></a>00659     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==8) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a014b5ba541d6e3522f939ddcfab6dcf5">select_grouped_object_hooks</a>(C, ob);
<a name="l00660"></a>00660     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==9) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#adaf8d7174aee04f920d413019b894b5d">select_grouped_index_object</a>(C, ob);
<a name="l00661"></a>00661     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==10)    changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a05fbb72398a4e24bcde2e9f6e7d043a5">select_grouped_color</a>(C, ob);
<a name="l00662"></a>00662     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==11)    changed |= <a class="code" href="../../d7/de9/object__select_8c.html#ad912b68cc54e843a850e01ae5efcf2d6">select_grouped_gameprops</a>(C, ob);
<a name="l00663"></a>00663     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nr==12) changed |= <a class="code" href="../../d7/de9/object__select_8c.html#a95e4c6bbf7aec82c15cc7e8d5dfdbe61">select_grouped_keyingset</a>(C, ob);
<a name="l00664"></a>00664     
<a name="l00665"></a>00665     <span class="keywordflow">if</span> (changed) {
<a name="l00666"></a>00666         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00667"></a>00667         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00668"></a>00668     }
<a name="l00669"></a>00669     
<a name="l00670"></a>00670     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a1f73d37a649632bed12f1ee51e2af55b">OPERATOR_CANCELLED</a>;
<a name="l00671"></a>00671 }
<a name="l00672"></a>00672 
<a name="l00673"></a><a class="code" href="../../d7/de9/object__select_8c.html#a5264235a79f73cf4f3f3a0987433f808">00673</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#aaba71dda7755f81913f10848029279a7">OBJECT_OT_select_grouped</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00674"></a>00674 {
<a name="l00675"></a>00675     <span class="comment">/* identifiers */</span>
<a name="l00676"></a>00676     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select Grouped&quot;</span>;
<a name="l00677"></a>00677     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select all visible objects grouped by various properties&quot;</span>;
<a name="l00678"></a>00678     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_grouped&quot;</span>;
<a name="l00679"></a>00679     
<a name="l00680"></a>00680     <span class="comment">/* api callbacks */</span>
<a name="l00681"></a>00681     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a712df4059514069aeb44df0248922812">invoke</a> = <a class="code" href="../../d6/dae/wm__operators_8c.html#a926375c583166540cfa96299e433e071">WM_menu_invoke</a>;
<a name="l00682"></a>00682     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a893b7da9523748dfb573ac26c0069f00">object_select_grouped_exec</a>;
<a name="l00683"></a>00683     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00684"></a>00684     
<a name="l00685"></a>00685     <span class="comment">/* flags */</span>
<a name="l00686"></a>00686     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00687"></a>00687     
<a name="l00688"></a>00688     <span class="comment">/* properties */</span>
<a name="l00689"></a>00689     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Extend&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00690"></a>00690     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#ad2ecde05b67ff7682699554ee5a0bfc9">prop</a> = <a class="code" href="../../dc/d7e/rna__define_8c.html#af2ad58c3924113813903fe1b6a2bd5ac">RNA_def_enum</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;type&quot;</span>, prop_select_grouped_types, 0, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00691"></a>00691 }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 <span class="comment">/************************* Select by Layer **********************/</span>
<a name="l00694"></a>00694 
<a name="l00695"></a><a class="code" href="../../d7/de9/object__select_8c.html#a14d482775d3ca2bb612ca97e6dcb8572">00695</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a14d482775d3ca2bb612ca97e6dcb8572">object_select_by_layer_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00696"></a>00696 {
<a name="l00697"></a>00697     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> layernum;
<a name="l00698"></a>00698     <span class="keywordtype">short</span> extend;
<a name="l00699"></a>00699     
<a name="l00700"></a>00700     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00701"></a>00701     layernum = <a class="code" href="../../d3/d10/rna__access_8c.html#a852d694fd9e9dbdc92b6a6608e3a73ef">RNA_int_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;layers&quot;</span>);
<a name="l00702"></a>00702     
<a name="l00703"></a>00703     <span class="keywordflow">if</span> (extend == 0) {
<a name="l00704"></a>00704         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00705"></a>00705             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00706"></a>00706         }
<a name="l00707"></a>00707         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00708"></a>00708     }
<a name="l00709"></a>00709         
<a name="l00710"></a>00710     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00711"></a>00711         <span class="keywordflow">if</span> (base-&gt;lay == (1&lt;&lt; (layernum -1)))
<a name="l00712"></a>00712             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00715"></a>00715     
<a name="l00716"></a>00716     <span class="comment">/* undo? */</span>
<a name="l00717"></a>00717     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00718"></a>00718     
<a name="l00719"></a>00719     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00720"></a>00720 }
<a name="l00721"></a>00721 
<a name="l00722"></a><a class="code" href="../../d7/de9/object__select_8c.html#a91e972ddb77c4d997e3ad8874172621f">00722</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#acb0f77cc28bd3761bf8b87c18f4f48c1">OBJECT_OT_select_by_layer</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00723"></a>00723 {
<a name="l00724"></a>00724     <span class="comment">/* identifiers */</span>
<a name="l00725"></a>00725     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select by Layer&quot;</span>;
<a name="l00726"></a>00726     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select all visible objects on a layer&quot;</span>;
<a name="l00727"></a>00727     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_by_layer&quot;</span>;
<a name="l00728"></a>00728     
<a name="l00729"></a>00729     <span class="comment">/* api callbacks */</span>
<a name="l00730"></a>00730     <span class="comment">/*ot-&gt;invoke = XXX - need a int grid popup*/</span>
<a name="l00731"></a>00731     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a14d482775d3ca2bb612ca97e6dcb8572">object_select_by_layer_exec</a>;
<a name="l00732"></a>00732     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00733"></a>00733     
<a name="l00734"></a>00734     <span class="comment">/* flags */</span>
<a name="l00735"></a>00735     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00736"></a>00736     
<a name="l00737"></a>00737     <span class="comment">/* properties */</span>
<a name="l00738"></a>00738     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Extend&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00739"></a>00739     <a class="code" href="../../dc/d7e/rna__define_8c.html#ad9b0c75a6330ff1837409c5d1767af62">RNA_def_int</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;layers&quot;</span>, 1, 1, 20, <span class="stringliteral">&quot;Layer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1, 20);
<a name="l00740"></a>00740 }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742 <span class="comment">/**************************** (De)select All ****************************/</span>
<a name="l00743"></a>00743 
<a name="l00744"></a><a class="code" href="../../d7/de9/object__select_8c.html#a2e8edec1d01ec59743590317d7121c54">00744</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a2e8edec1d01ec59743590317d7121c54">object_select_all_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00745"></a>00745 {
<a name="l00746"></a>00746     <span class="keywordtype">int</span> action = <a class="code" href="../../d3/d10/rna__access_8c.html#adf28976d740b269f80b747eb62fea6ce">RNA_enum_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;action&quot;</span>);
<a name="l00747"></a>00747     
<a name="l00748"></a>00748     <span class="comment">/* passthrough if no objects are visible */</span>
<a name="l00749"></a>00749     <span class="keywordflow">if</span> (<a class="code" href="../../df/d01/BKE__context_8h.html#a94bd6fd14d9df8885855a8ca0aea7c17">CTX_DATA_COUNT</a>(C, visible_bases) == 0) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     <span class="keywordflow">if</span> (action == <a class="code" href="../../d4/d7f/WM__api_8h.html#a070b8f09bd544f3d0bd5786ca00cda02">SEL_TOGGLE</a>) {
<a name="l00752"></a>00752         action = <a class="code" href="../../d4/d7f/WM__api_8h.html#af76323cc5b70d4cbeca6b3887e166fb8">SEL_SELECT</a>;
<a name="l00753"></a>00753         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00754"></a>00754             <span class="keywordflow">if</span> (base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) {
<a name="l00755"></a>00755                 action = <a class="code" href="../../d4/d7f/WM__api_8h.html#a94dcbe0e237e6d615cad805221261370">SEL_DESELECT</a>;
<a name="l00756"></a>00756                 <span class="keywordflow">break</span>;
<a name="l00757"></a>00757             }
<a name="l00758"></a>00758         }
<a name="l00759"></a>00759         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00763"></a>00763         <span class="keywordflow">switch</span> (action) {
<a name="l00764"></a>00764         <span class="keywordflow">case</span> <a class="code" href="../../d4/d7f/WM__api_8h.html#af76323cc5b70d4cbeca6b3887e166fb8">SEL_SELECT</a>:
<a name="l00765"></a>00765             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00766"></a>00766             <span class="keywordflow">break</span>;
<a name="l00767"></a>00767         <span class="keywordflow">case</span> <a class="code" href="../../d4/d7f/WM__api_8h.html#a94dcbe0e237e6d615cad805221261370">SEL_DESELECT</a>:
<a name="l00768"></a>00768             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00769"></a>00769             <span class="keywordflow">break</span>;
<a name="l00770"></a>00770         <span class="keywordflow">case</span> <a class="code" href="../../d4/d7f/WM__api_8h.html#ac906797cc9a2787004c6ad16b8151913">SEL_INVERT</a>:
<a name="l00771"></a>00771             <span class="keywordflow">if</span> (base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) {
<a name="l00772"></a>00772                 <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00773"></a>00773             }
<a name="l00774"></a>00774             <span class="keywordflow">else</span> {
<a name="l00775"></a>00775                 <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00776"></a>00776             }
<a name="l00777"></a>00777             <span class="keywordflow">break</span>;
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00781"></a>00781     
<a name="l00782"></a>00782     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00783"></a>00783     
<a name="l00784"></a>00784     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00787"></a><a class="code" href="../../d7/de9/object__select_8c.html#aa05f18e475fad6b1bf9e5e9646988d0e">00787</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#a79d43aec21a9e8c44abe93999b2e8f43">OBJECT_OT_select_all</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00788"></a>00788 {
<a name="l00789"></a>00789     
<a name="l00790"></a>00790     <span class="comment">/* identifiers */</span>
<a name="l00791"></a>00791     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;(De)select All&quot;</span>;
<a name="l00792"></a>00792     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Change selection of all visible objects in scene&quot;</span>;
<a name="l00793"></a>00793     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_all&quot;</span>;
<a name="l00794"></a>00794     
<a name="l00795"></a>00795     <span class="comment">/* api callbacks */</span>
<a name="l00796"></a>00796     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a2e8edec1d01ec59743590317d7121c54">object_select_all_exec</a>;
<a name="l00797"></a>00797     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00798"></a>00798     
<a name="l00799"></a>00799     <span class="comment">/* flags */</span>
<a name="l00800"></a>00800     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00801"></a>00801 
<a name="l00802"></a>00802     <a class="code" href="../../d6/dae/wm__operators_8c.html#ab59cd94616324bb4f3668be8f64bdcd8">WM_operator_properties_select_all</a>(ot);
<a name="l00803"></a>00803 }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805 <span class="comment">/**************************** Select In The Same Group ****************************/</span>
<a name="l00806"></a>00806 
<a name="l00807"></a><a class="code" href="../../d7/de9/object__select_8c.html#a922591123ce70a499c82358a18766953">00807</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a922591123ce70a499c82358a18766953">object_select_same_group_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00808"></a>00808 {
<a name="l00809"></a>00809     <a class="code" href="../../d4/d91/structGroup.html">Group</a> *group;
<a name="l00810"></a>00810     <span class="keywordtype">char</span> group_name[<a class="code" href="../../d3/dfb/DNA__ID_8h.html#a6d7bce2e9ad79af316c9690a5b84b75c">MAX_ID_NAME</a>];
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     <span class="comment">/* passthrough if no objects are visible */</span>
<a name="l00813"></a>00813     <span class="keywordflow">if</span> (<a class="code" href="../../df/d01/BKE__context_8h.html#a94bd6fd14d9df8885855a8ca0aea7c17">CTX_DATA_COUNT</a>(C, visible_bases) == 0) <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l00814"></a>00814 
<a name="l00815"></a>00815     <a class="code" href="../../d3/d10/rna__access_8c.html#a810e909d61281bbb2d9fe99f9f2219ab">RNA_string_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;group&quot;</span>, group_name);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     <span class="keywordflow">for</span> (group=<a class="code" href="../../df/d01/BKE__context_8h.html#ae849d2f7c2427ac6b75ee0c5ffcead6c">CTX_data_main</a>(C)-&gt;group.first;   group; group=group-&gt;<a class="code" href="../../d4/d91/structGroup.html#ab7e17dc53d15eeb5f6c4c7789d92b969">id</a>.<a class="code" href="../../d8/d7e/structID.html#acaa676f1c6169b19d5c23a4f6ea5186c">next</a>) {
<a name="l00818"></a>00818         <span class="keywordflow">if</span> (!strcmp(group-&gt;<a class="code" href="../../d4/d91/structGroup.html#ab7e17dc53d15eeb5f6c4c7789d92b969">id</a>.<a class="code" href="../../d8/d7e/structID.html#ad43a3d119e40a8479518fd876781e692">name</a>, group_name))
<a name="l00819"></a>00819             <span class="keywordflow">break</span>;
<a name="l00820"></a>00820     }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     <span class="keywordflow">if</span> (!group)
<a name="l00823"></a>00823         <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#ac593ccb5bdf99609d37aac1dc5b03eee">OPERATOR_PASS_THROUGH</a>;
<a name="l00824"></a>00824 
<a name="l00825"></a>00825     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00826"></a>00826         <span class="keywordflow">if</span> (!(base-&gt;flag &amp; <a class="code" href="../../db/d17/fcurve_8c.html#a53dc4af00adc7b3b4d12eafb71596dfc">SELECT</a>) &amp;&amp; <a class="code" href="../../d2/df5/BKE__group_8h.html#ad5a2f1b7be24a719b00ed2b01963fb33">object_in_group</a>(base-&gt;object, group))
<a name="l00827"></a>00827             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00828"></a>00828     }
<a name="l00829"></a>00829     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00832"></a>00832     
<a name="l00833"></a>00833     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00834"></a>00834 }
<a name="l00835"></a>00835 
<a name="l00836"></a><a class="code" href="../../d7/de9/object__select_8c.html#af25337deeb66d26e5ac3dd6e80b6ef08">00836</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#ac2b65c146b9bfe43eb0f82afcf953d19">OBJECT_OT_select_same_group</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00837"></a>00837 {
<a name="l00838"></a>00838     
<a name="l00839"></a>00839     <span class="comment">/* identifiers */</span>
<a name="l00840"></a>00840     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select Same Group&quot;</span>;
<a name="l00841"></a>00841     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select object in the same group&quot;</span>;
<a name="l00842"></a>00842     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_same_group&quot;</span>;
<a name="l00843"></a>00843     
<a name="l00844"></a>00844     <span class="comment">/* api callbacks */</span>
<a name="l00845"></a>00845     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a922591123ce70a499c82358a18766953">object_select_same_group_exec</a>;
<a name="l00846"></a>00846     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00847"></a>00847     
<a name="l00848"></a>00848     <span class="comment">/* flags */</span>
<a name="l00849"></a>00849     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00850"></a>00850 
<a name="l00851"></a>00851     <a class="code" href="../../dc/d7e/rna__define_8c.html#ac53a3ed18da454971065d5b4e4cb4d62">RNA_def_string</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;group&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d3/dfb/DNA__ID_8h.html#a6d7bce2e9ad79af316c9690a5b84b75c">MAX_ID_NAME</a>, <span class="stringliteral">&quot;Group&quot;</span>, <span class="stringliteral">&quot;Name of the group to select&quot;</span>);
<a name="l00852"></a>00852 }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854 <span class="comment">/**************************** Select Mirror ****************************/</span>
<a name="l00855"></a><a class="code" href="../../d7/de9/object__select_8c.html#a55cba3b3446dae579804c8060e92ac27">00855</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#a55cba3b3446dae579804c8060e92ac27">object_select_mirror_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00856"></a>00856 {
<a name="l00857"></a>00857     <a class="code" href="../../d9/d27/structScene.html">Scene</a> *scene= <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C);
<a name="l00858"></a>00858     <span class="keywordtype">short</span> extend;
<a name="l00859"></a>00859     
<a name="l00860"></a>00860     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00861"></a>00861     
<a name="l00862"></a>00862     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, primbase, selected_bases) {
<a name="l00863"></a>00863         <span class="keywordtype">char</span> tmpname[<a class="code" href="../../d2/d93/DNA__armature__types_8h.html#a73ee51878d99f5d1256478b2d3cb6883">MAXBONENAME</a>];
<a name="l00864"></a>00864 
<a name="l00865"></a>00865         <a class="code" href="../../d7/dbd/BKE__deform_8h.html#a13c8067511267c6d95644db2450a367a">flip_side_name</a>(tmpname, primbase-&gt;object-&gt;id.name+2, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00866"></a>00866         
<a name="l00867"></a>00867         <span class="keywordflow">if</span> (strcmp(tmpname, primbase-&gt;object-&gt;id.name+2)!=0) { <span class="comment">/* names differ */</span>
<a name="l00868"></a>00868             <a class="code" href="../../de/de7/structObject.html">Object</a> *ob= (<a class="code" href="../../de/de7/structObject.html">Object</a> *)<a class="code" href="../../d8/db1/BKE__library_8h.html#acb5f76f4bade78a03b7328ed4944c702">find_id</a>(<span class="stringliteral">&quot;OB&quot;</span>, tmpname);
<a name="l00869"></a>00869             <span class="keywordflow">if</span> (ob) {
<a name="l00870"></a>00870                 <a class="code" href="../../d3/da9/structBase.html">Base</a> *secbase= <a class="code" href="../../d8/d53/BKE__scene_8h.html#af038ab52dca2267b6418721c13b81e74">object_in_scene</a>(ob, scene);
<a name="l00871"></a>00871 
<a name="l00872"></a>00872                 <span class="keywordflow">if</span> (secbase) {
<a name="l00873"></a>00873                     <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(secbase, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00874"></a>00874                 }
<a name="l00875"></a>00875             }
<a name="l00876"></a>00876         }
<a name="l00877"></a>00877         
<a name="l00878"></a>00878         <span class="keywordflow">if</span> (extend == 0) <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(primbase, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00879"></a>00879         
<a name="l00880"></a>00880     }
<a name="l00881"></a>00881     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00882"></a>00882     
<a name="l00883"></a>00883     <span class="comment">/* undo? */</span>
<a name="l00884"></a>00884     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00885"></a>00885     
<a name="l00886"></a>00886     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00887"></a>00887 }
<a name="l00888"></a>00888 
<a name="l00889"></a><a class="code" href="../../d7/de9/object__select_8c.html#a8a8a43b504130fa171a3f1d6387f0d5d">00889</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#a9003c71b7c98359108b58f8aef3ca83e">OBJECT_OT_select_mirror</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00890"></a>00890 {
<a name="l00891"></a>00891     
<a name="l00892"></a>00892     <span class="comment">/* identifiers */</span>
<a name="l00893"></a>00893     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select Mirror&quot;</span>;
<a name="l00894"></a>00894     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Select the Mirror objects of the selected object eg. L.sword -&gt; R.sword&quot;</span>;
<a name="l00895"></a>00895     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_mirror&quot;</span>;
<a name="l00896"></a>00896     
<a name="l00897"></a>00897     <span class="comment">/* api callbacks */</span>
<a name="l00898"></a>00898     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a55cba3b3446dae579804c8060e92ac27">object_select_mirror_exec</a>;
<a name="l00899"></a>00899     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00900"></a>00900     
<a name="l00901"></a>00901     <span class="comment">/* flags */</span>
<a name="l00902"></a>00902     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00903"></a>00903     
<a name="l00904"></a>00904     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, 0, <span class="stringliteral">&quot;Extend&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00905"></a>00905 }
<a name="l00906"></a>00906 
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 <span class="comment">/**************************** Select Random ****************************/</span>
<a name="l00909"></a>00909 
<a name="l00910"></a><a class="code" href="../../d7/de9/object__select_8c.html#abffeac0026650dc94dbdbaf9e64ae08b">00910</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/de9/object__select_8c.html#abffeac0026650dc94dbdbaf9e64ae08b">object_select_random_exec</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../d3/d19/structwmOperator.html">wmOperator</a> *op)
<a name="l00911"></a>00911 {   
<a name="l00912"></a>00912     <span class="keywordtype">float</span> percent;
<a name="l00913"></a>00913     <span class="keywordtype">short</span> extend;
<a name="l00914"></a>00914     
<a name="l00915"></a>00915     extend= <a class="code" href="../../d3/d10/rna__access_8c.html#a3a81efded6e2e77b384a5d7db179d4b9">RNA_boolean_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;extend&quot;</span>);
<a name="l00916"></a>00916     
<a name="l00917"></a>00917     <span class="keywordflow">if</span> (extend == 0) {
<a name="l00918"></a>00918         <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00919"></a>00919             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#a4df561d775f9f3c0df70f202f357eabb">BA_DESELECT</a>);
<a name="l00920"></a>00920         }
<a name="l00921"></a>00921         <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923     percent = <a class="code" href="../../d3/d10/rna__access_8c.html#a99bfb3295a4df6fef29f16924fd24c79">RNA_float_get</a>(op-&gt;<a class="code" href="../../d3/d19/structwmOperator.html#ab29f54bc949a386e57fa0211637bbbbe">ptr</a>, <span class="stringliteral">&quot;percent&quot;</span>)/100.0f;
<a name="l00924"></a>00924         
<a name="l00925"></a>00925     <a class="code" href="../../df/d01/BKE__context_8h.html#a63ffcaf5af72270fb66c773139bdedb2">CTX_DATA_BEGIN</a>(C, <a class="code" href="../../d3/da9/structBase.html">Base</a>*, base, visible_bases) {
<a name="l00926"></a>00926         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d88/BLI__rand_8h.html#a28a49a5f3f27a0875de8142fdcab7bd2">BLI_frand</a>() &lt; percent) {
<a name="l00927"></a>00927             <a class="code" href="../../da/d7a/ED__object_8h.html#a01ac0829970381f4f64f23ca405f8ab1">ED_base_object_select</a>(base, <a class="code" href="../../d9/dd9/DNA__object__types_8h.html#ab0df02a4e2042be1a106dce7cc150e33">BA_SELECT</a>);
<a name="l00928"></a>00928         }
<a name="l00929"></a>00929     }
<a name="l00930"></a>00930     <a class="code" href="../../df/d01/BKE__context_8h.html#af19e54c354c69aacc4c6f2e2fcafde0f">CTX_DATA_END</a>;
<a name="l00931"></a>00931     
<a name="l00932"></a>00932     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#a61261a6b5ea948eee6d42c7e7ee18166">NC_SCENE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a59ea6c7f4b5448c4c4912e8893a031f4">ND_OB_SELECT</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0bcac8ad3452a040293c01084665a258">CTX_data_scene</a>(C));
<a name="l00933"></a>00933     
<a name="l00934"></a>00934     <span class="keywordflow">return</span> <a class="code" href="../../de/dc1/DNA__windowmanager__types_8h.html#a818d2533e88d91a930488ab021d18474">OPERATOR_FINISHED</a>;
<a name="l00935"></a>00935 }
<a name="l00936"></a>00936 
<a name="l00937"></a><a class="code" href="../../d7/de9/object__select_8c.html#ab07363a658db25fe8a4ca9194f6f3fc4">00937</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d80/object__intern_8h.html#a526f12c24136034df8be90c303435a18">OBJECT_OT_select_random</a>(<a class="code" href="../../de/d5e/structwmOperatorType.html">wmOperatorType</a> *ot)
<a name="l00938"></a>00938 {
<a name="l00939"></a>00939     <span class="comment">/* identifiers */</span>
<a name="l00940"></a>00940     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a04a27d629d618d3991e1825683ecbd99">name</a> = <span class="stringliteral">&quot;Select Random&quot;</span>;
<a name="l00941"></a>00941     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aa66ab7b95cf41f92a6da53c53e873db4">description</a> = <span class="stringliteral">&quot;Set select on random visible objects&quot;</span>;
<a name="l00942"></a>00942     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a46882f447e704ec2b65bf69bf826a306">idname</a> = <span class="stringliteral">&quot;OBJECT_OT_select_random&quot;</span>;
<a name="l00943"></a>00943     
<a name="l00944"></a>00944     <span class="comment">/* api callbacks */</span>
<a name="l00945"></a>00945     <span class="comment">/*ot-&gt;invoke = object_select_random_invoke XXX - need a number popup ;*/</span>
<a name="l00946"></a>00946     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#acf19aee20badd3857d211524b081a939">exec</a> = <a class="code" href="../../d7/de9/object__select_8c.html#abffeac0026650dc94dbdbaf9e64ae08b">object_select_random_exec</a>;
<a name="l00947"></a>00947     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#aecedd63f8c02cb14ac8e91014550c7d9">poll</a> = <a class="code" href="../../d7/de9/object__select_8c.html#a1d99a74c40e20836b71f6b373a135963">objects_selectable_poll</a>;
<a name="l00948"></a>00948     
<a name="l00949"></a>00949     <span class="comment">/* flags */</span>
<a name="l00950"></a>00950     ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a0f07ac6290f51c0a39e25940bf8c9d78">flag</a> = <a class="code" href="../../d4/ddc/WM__types_8h.html#adb7cbb6b0205d00b470cbd1f158bb489">OPTYPE_REGISTER</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a0884b8bbb246819cf52a01174d687370">OPTYPE_UNDO</a>;
<a name="l00951"></a>00951     
<a name="l00952"></a>00952     <span class="comment">/* properties */</span>
<a name="l00953"></a>00953     <a class="code" href="../../dc/d7e/rna__define_8c.html#a8e5fcbcf969e10621649d1c563ef0b9e">RNA_def_float_percentage</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;percent&quot;</span>, 50.f, 0.0f, 100.0f, <span class="stringliteral">&quot;Percent&quot;</span>, <span class="stringliteral">&quot;Percentage of objects to select randomly&quot;</span>, 0.f, 100.0f);
<a name="l00954"></a>00954     <a class="code" href="../../dc/d7e/rna__define_8c.html#a6025d606b895666e4099441c3dae79fe">RNA_def_boolean</a>(ot-&gt;<a class="code" href="../../de/d5e/structwmOperatorType.html#a7f4c35af5aa349f0e4a90a1f0710ddc6">srna</a>, <span class="stringliteral">&quot;extend&quot;</span>, <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Extend Selection&quot;</span>, <span class="stringliteral">&quot;Extend selection instead of deselecting everything first&quot;</span>);
<a name="l00955"></a>00955 }
<a name="l00956"></a>00956 
<a name="l00957"></a>00957 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:41 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
