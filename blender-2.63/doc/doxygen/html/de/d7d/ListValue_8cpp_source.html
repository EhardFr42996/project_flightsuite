<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: ListValue.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">ListValue.cpp</div>  </div>
</div>
<div class="contents">
<a href="../../de/d7d/ListValue_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="comment">// ListValue.cpp: implementation of the CListValue class.</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment"></span><span class="comment">/*</span>
<a name="l00008"></a>00008 <span class="comment"> * Copyright (c) 1996-2000 Erwin Coumans &lt;coockie@acm.org&gt;</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * Permission to use, copy, modify, distribute and sell this software</span>
<a name="l00011"></a>00011 <span class="comment"> * and its documentation for any purpose is hereby granted without fee,</span>
<a name="l00012"></a>00012 <span class="comment"> * provided that the above copyright notice appear in all copies and</span>
<a name="l00013"></a>00013 <span class="comment"> * that both that copyright notice and this permission notice appear</span>
<a name="l00014"></a>00014 <span class="comment"> * in supporting documentation.  Erwin Coumans makes no</span>
<a name="l00015"></a>00015 <span class="comment"> * representations about the suitability of this software for any</span>
<a name="l00016"></a>00016 <span class="comment"> * purpose.  It is provided &quot;as is&quot; without express or implied warranty.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/db8/ListValue_8h.html">ListValue.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../de/dc8/StringValue_8h.html">StringValue.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../de/dcc/VoidValue_8h.html">VoidValue.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/d8c/BoolValue_8h.html">BoolValue.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d59/BLO__sys__types_8h.html">BLO_sys_types.h</a>&quot;</span> <span class="comment">/* for intptr_t support */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00032"></a>00032 <span class="comment">// Construction/Destruction</span>
<a name="l00034"></a>00034 <span class="comment"></span>
<a name="l00035"></a><a class="code" href="../../d6/de7/classCListValue.html#afd7e3bc0e5729f86030dadb0f3216037">00035</a> <a class="code" href="../../d6/de7/classCListValue.html#afd7e3bc0e5729f86030dadb0f3216037">CListValue::CListValue</a>()
<a name="l00036"></a>00036 : <a class="code" href="../../d6/dd4/classCPropValue.html">CPropValue</a>()
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038     m_bReleaseContents=<span class="keyword">true</span>;
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="../../d6/de7/classCListValue.html#acaa85986a48e85284278162dd0722162">00043</a> <a class="code" href="../../d6/de7/classCListValue.html#acaa85986a48e85284278162dd0722162">CListValue::~CListValue</a>()
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045 
<a name="l00046"></a>00046     <span class="keywordflow">if</span> (m_bReleaseContents) {
<a name="l00047"></a>00047         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;m_pValueArray.size();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00048"></a>00048             m_pValueArray[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Release();
<a name="l00049"></a>00049         }
<a name="l00050"></a>00050     }
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="../../de/d7d/ListValue_8cpp.html#a88a02e3e01f9729e4ed4abc249845014">00054</a> <span class="keyword">static</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a> <a class="code" href="../../de/d7d/ListValue_8cpp.html#a88a02e3e01f9729e4ed4abc249845014">gstrListRep</a>=<a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a>(<span class="stringliteral">&quot;List&quot;</span>);
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="../../d6/de7/classCListValue.html#a8df5414ad9a4ee4b11f1fca2ab5e87e0">00056</a> <span class="keyword">const</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a> &amp; <a class="code" href="../../d6/de7/classCListValue.html#a8df5414ad9a4ee4b11f1fca2ab5e87e0">CListValue::GetText</a>()
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058     gstrListRep = <span class="stringliteral">&quot;[&quot;</span>;
<a name="l00059"></a>00059     <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a> commastr = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00062"></a>00062     {
<a name="l00063"></a>00063         gstrListRep += commastr;
<a name="l00064"></a>00064         gstrListRep += <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#adeadcd0baa034c5e560bc4ef3c4b738f">GetText</a>();
<a name="l00065"></a>00065         commastr = <span class="stringliteral">&quot;,&quot;</span>;
<a name="l00066"></a>00066     }
<a name="l00067"></a>00067     gstrListRep += <span class="stringliteral">&quot;]&quot;</span>;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="keywordflow">return</span> <a class="code" href="../../de/d7d/ListValue_8cpp.html#a88a02e3e01f9729e4ed4abc249845014">gstrListRep</a>;
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="../../d6/de7/classCListValue.html#a607778359af7a04082864c4475d616d6">00074</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d6/de7/classCListValue.html#a607778359af7a04082864c4475d616d6">CListValue::GetReplica</a>()
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* replica = <span class="keyword">new</span> <a class="code" href="../../d6/de7/classCListValue.html#afd7e3bc0e5729f86030dadb0f3216037">CListValue</a>(*<span class="keyword">this</span>);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     replica-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a53058a1dfe4047a13e62446494991fe2">ProcessReplica</a>();
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     replica-&gt;m_bReleaseContents=<span class="keyword">true</span>; <span class="comment">// for copy, complete array is copied for now...</span>
<a name="l00081"></a>00081     <span class="comment">// copy all values</span>
<a name="l00082"></a>00082     <span class="keywordtype">int</span> numelements = m_pValueArray.size();
<a name="l00083"></a>00083     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;
<a name="l00084"></a>00084     replica-&gt;m_pValueArray.resize(numelements);
<a name="l00085"></a>00085     <span class="keywordflow">for</span> (i=0;i&lt;m_pValueArray.size();i++)
<a name="l00086"></a>00086         replica-&gt;m_pValueArray[i] = m_pValueArray[i]-&gt;GetReplica();
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keywordflow">return</span> replica;
<a name="l00090"></a>00090 };
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">00094</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">CListValue::SetValue</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096     <a class="code" href="../../d5/d8e/Value_8h.html#a809722017a8fe1fa6a4d543bef60330c">assertd</a>(i &lt; m_pValueArray.size());
<a name="l00097"></a>00097     m_pValueArray[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]=val;
<a name="l00098"></a>00098 }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">00102</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">CListValue::Resize</a>(<span class="keywordtype">int</span> num)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104     m_pValueArray.resize(num);
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="../../d6/de7/classCListValue.html#a43f761baf3295d8d928315ada9093d88">00109</a> <span class="keywordtype">void</span> <a class="code" href="../../db/d57/classSG__DList.html#af84669f60b6797dcc88d4d0e9a7e3ae4">CListValue::Remove</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111     <a class="code" href="../../d5/d8e/Value_8h.html#a809722017a8fe1fa6a4d543bef60330c">assertd</a>(i&lt;m_pValueArray.size());
<a name="l00112"></a>00112     m_pValueArray.erase(m_pValueArray.begin()+<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="../../d6/de7/classCListValue.html#af15dd2d30e3da5ce713b6d7341d2ca88">00117</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#af15dd2d30e3da5ce713b6d7341d2ca88">CListValue::ReleaseAndRemoveAll</a>()
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;m_pValueArray.size();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00120"></a>00120         m_pValueArray[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00121"></a>00121     m_pValueArray.clear();<span class="comment">//.Clear();</span>
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="../../d6/de7/classCListValue.html#aecd532f5a0cb3c6f6b9bc234267c006e">00126</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d6/de7/classCListValue.html#aecd532f5a0cb3c6f6b9bc234267c006e">CListValue::FindValue</a>(<span class="keyword">const</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a> &amp; name)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>(); <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00129"></a>00129         <span class="keywordflow">if</span> (<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a527cb1ea6cdfba49c2357d49e3ef4f6c">GetName</a>() == name)
<a name="l00130"></a>00130             <span class="keywordflow">return</span> <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="../../d6/de7/classCListValue.html#a267722d48f838bc02d62b13ad65910fd">00135</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d6/de7/classCListValue.html#aecd532f5a0cb3c6f6b9bc234267c006e">CListValue::FindValue</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * name)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>(); <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00138"></a>00138         <span class="keywordflow">if</span> (<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a527cb1ea6cdfba49c2357d49e3ef4f6c">GetName</a>() == name)
<a name="l00139"></a>00139             <span class="keywordflow">return</span> <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="../../d6/de7/classCListValue.html#a42ec90a1f7c5e78b8262b948a1c823d1">00144</a> <span class="keywordtype">bool</span> <a class="code" href="../../d6/de7/classCListValue.html#a42ec90a1f7c5e78b8262b948a1c823d1">CListValue::SearchValue</a>(<a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val)
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00147"></a>00147         <span class="keywordflow">if</span> (val == <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>))
<a name="l00148"></a>00148             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00149"></a>00149     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="../../d6/de7/classCListValue.html#a6491243e7ba057f07f1d44fd2b3c7007">00154</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#a6491243e7ba057f07f1d44fd2b3c7007">CListValue::SetReleaseOnDestruct</a>(<span class="keywordtype">bool</span> bReleaseContents)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156     m_bReleaseContents = bReleaseContents;
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="../../d6/de7/classCListValue.html#a18acf9a41b6ed927d931143806bd1852">00161</a> <span class="keywordtype">bool</span> <a class="code" href="../../d6/de7/classCListValue.html#a18acf9a41b6ed927d931143806bd1852">CListValue::RemoveValue</a>(<a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val)
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163     <span class="keywordtype">bool</span> result=<span class="keyword">false</span>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>()-1;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&gt;=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--)
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (val == <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>))
<a name="l00167"></a>00167         {
<a name="l00168"></a>00168             <a class="code" href="../../db/d57/classSG__DList.html#af84669f60b6797dcc88d4d0e9a7e3ae4">Remove</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00169"></a>00169             result=<span class="keyword">true</span>;
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171     <span class="keywordflow">return</span> result;
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="../../d6/de7/classCListValue.html#a1d8a0f67df037cfcc86c067d89be10b2">00176</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#a1d8a0f67df037cfcc86c067d89be10b2">CListValue::MergeList</a>(<a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *otherlist)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="keywordtype">int</span> numelements = this-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00180"></a>00180     <span class="keywordtype">int</span> numotherelements = otherlist-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">Resize</a>(numelements+numotherelements);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;numotherelements;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00186"></a>00186     {
<a name="l00187"></a>00187         <a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">SetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+numelements,otherlist-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00191"></a><a class="code" href="../../d6/de7/classCListValue.html#acbfe6b5d4c20563c0fc95e1beb190ce5">00191</a> <span class="keywordtype">bool</span> <a class="code" href="../../d6/de7/classCListValue.html#acbfe6b5d4c20563c0fc95e1beb190ce5">CListValue::CheckEqual</a>(<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* first,<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* second)
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193     <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* eqval =  ((<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>*)first)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#af9d895d1ab275e10d528f0b180b6b40e">Calc</a>(<a class="code" href="../../d5/d8e/Value_8h.html#a53728733f70bc051a7f0fe6f820e0afba7a529fc84741fa5d3f1a21726a168ed5">VALUE_EQL_OPERATOR</a>,(<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>*)second);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keywordflow">if</span> (eqval==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00198"></a>00198         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00199"></a>00199     <span class="keyword">const</span> <a class="code" href="../../d6/dce/classSTR__String.html">STR_String</a>&amp; text = eqval-&gt;<a class="code" href="../../d7/d9c/classCValue.html#adeadcd0baa034c5e560bc4ef3c4b738f">GetText</a>();
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (&amp;text==&amp;<a class="code" href="../../d3/de8/classCBoolValue.html#a68347aad71ea5521dbfeca47f26f57d7">CBoolValue::sTrueString</a>)
<a name="l00201"></a>00201     {
<a name="l00202"></a>00202         result = <span class="keyword">true</span>;
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204     eqval-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00205"></a>00205     <span class="keywordflow">return</span> result;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/* ---------------------------------------------------------------------</span>
<a name="l00211"></a>00211 <span class="comment"> * Some stuff taken from the header</span>
<a name="l00212"></a>00212 <span class="comment"> * --------------------------------------------------------------------- */</span>
<a name="l00213"></a><a class="code" href="../../d6/de7/classCListValue.html#a33838b942ee5661cd9e9691b4a49ae67">00213</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d6/de7/classCListValue.html#a33838b942ee5661cd9e9691b4a49ae67">CListValue::Calc</a>(<a class="code" href="../../d5/d8e/Value_8h.html#a53728733f70bc051a7f0fe6f820e0afb">VALUE_OPERATOR</a> op,<a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *val)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <span class="comment">//assert(false); // todo: implement me!</span>
<a name="l00216"></a>00216     <span class="keyword">static</span> <span class="keywordtype">int</span> error_printed =  0;
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (error_printed==0) {
<a name="l00218"></a>00218         fprintf(stderr, <span class="stringliteral">&quot;CValueList::Calc not yet implemented\n&quot;</span>);
<a name="l00219"></a>00219         error_printed = 1;
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="../../d6/de7/classCListValue.html#a37368ace6ea0144cf8734a3ce825280b">00224</a> <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* <a class="code" href="../../d6/de7/classCListValue.html#a37368ace6ea0144cf8734a3ce825280b">CListValue::CalcFinal</a>(<a class="code" href="../../d5/d8e/Value_8h.html#a16f8e19dd66c5875dc88ae14ac8c9821">VALUE_DATA_TYPE</a> dtype,
<a name="l00225"></a>00225                               <a class="code" href="../../d5/d8e/Value_8h.html#a53728733f70bc051a7f0fe6f820e0afb">VALUE_OPERATOR</a> op,
<a name="l00226"></a>00226                               <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* val)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228     <span class="comment">//assert(false); // todo: implement me!</span>
<a name="l00229"></a>00229     <span class="keyword">static</span> <span class="keywordtype">int</span> error_printed =  0;
<a name="l00230"></a>00230     <span class="keywordflow">if</span> (error_printed==0) {
<a name="l00231"></a>00231         fprintf(stderr, <span class="stringliteral">&quot;CValueList::CalcFinal not yet implemented\n&quot;</span>);
<a name="l00232"></a>00232         error_printed = 1;
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00235"></a>00235 }
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="../../d6/de7/classCListValue.html#ab20ce4d43a9f9aec11731aa4abddb059">00239</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#ab20ce4d43a9f9aec11731aa4abddb059">CListValue::Add</a>(<a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* value)
<a name="l00240"></a>00240 {
<a name="l00241"></a>00241     m_pValueArray.push_back(value);
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="../../d6/de7/classCListValue.html#abac17efc43578083ca1b2ee48a3ac27a">00246</a> <span class="keywordtype">double</span> <a class="code" href="../../d6/de7/classCListValue.html#abac17efc43578083ca1b2ee48a3ac27a">CListValue::GetNumber</a>()
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248     <span class="keywordflow">return</span> -1;
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 
<a name="l00253"></a><a class="code" href="../../d6/de7/classCListValue.html#aac31f2694a4dc8b0c72de5d2134f4237">00253</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/de7/classCListValue.html#aac31f2694a4dc8b0c72de5d2134f4237">CListValue::SetModified</a>(<span class="keywordtype">bool</span> bModified)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255     <a class="code" href="../../d6/de7/classCListValue.html#aac31f2694a4dc8b0c72de5d2134f4237">CValue::SetModified</a>(bModified);
<a name="l00256"></a>00256     <span class="keywordtype">int</span> numels = <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;numels;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00259"></a>00259         <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a69f600cea35efebcaa572b0d8a244c6f">SetModified</a>(bModified);
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 
<a name="l00264"></a><a class="code" href="../../d6/de7/classCListValue.html#a411c6d41b1bf598afc270be736769d07">00264</a> <span class="keywordtype">bool</span> <a class="code" href="../../d6/de7/classCListValue.html#a411c6d41b1bf598afc270be736769d07">CListValue::IsModified</a>()
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266     <span class="keywordtype">bool</span> bmod = <a class="code" href="../../d6/de7/classCListValue.html#a411c6d41b1bf598afc270be736769d07">CValue::IsModified</a>(); <span class="comment">//normal own flag</span>
<a name="l00267"></a>00267     <span class="keywordtype">int</span> numels = <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;numels;<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)
<a name="l00270"></a>00270         bmod = bmod || <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#a679fb0230a806c757b4371d5c622e8cd">IsModified</a>();
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="keywordflow">return</span> bmod;
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 <span class="preprocessor">#ifdef WITH_PYTHON</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>
<a name="l00277"></a>00277 <span class="comment">/* --------------------------------------------------------------------- */</span>
<a name="l00278"></a>00278 <span class="comment">/* Python interface ---------------------------------------------------- */</span>
<a name="l00279"></a>00279 <span class="comment">/* --------------------------------------------------------------------- */</span>
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 Py_ssize_t listvalue_bufferlen(PyObject* <span class="keyword">self</span>)
<a name="l00282"></a>00282 {
<a name="l00283"></a>00283     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *list= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(<span class="keyword">self</span>));
<a name="l00284"></a>00284     <span class="keywordflow">if</span> (list==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00285"></a>00285         <span class="keywordflow">return</span> 0;
<a name="l00286"></a>00286     
<a name="l00287"></a>00287     <span class="keywordflow">return</span> (Py_ssize_t)list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 PyObject* listvalue_buffer_item(PyObject* <span class="keyword">self</span>, Py_ssize_t index)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *list= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(<span class="keyword">self</span>));
<a name="l00293"></a>00293     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *cval;
<a name="l00294"></a>00294     
<a name="l00295"></a>00295     <span class="keywordflow">if</span> (list==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00296"></a>00296         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;val = CList[i], &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00297"></a>00297         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299     
<a name="l00300"></a>00300     <span class="keywordtype">int</span> count = list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00301"></a>00301     
<a name="l00302"></a>00302     <span class="keywordflow">if</span> (index &lt; 0)
<a name="l00303"></a>00303         index = count+index;
<a name="l00304"></a>00304     
<a name="l00305"></a>00305     <span class="keywordflow">if</span> (index &lt; 0 || index &gt;= count) {
<a name="l00306"></a>00306         PyErr_SetString(PyExc_IndexError, <span class="stringliteral">&quot;CList[i]: Python ListIndex out of range in CValueList&quot;</span>);
<a name="l00307"></a>00307         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309     
<a name="l00310"></a>00310     cval= list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(index);
<a name="l00311"></a>00311     
<a name="l00312"></a>00312     PyObject* pyobj = cval-&gt;ConvertValueToPython();
<a name="l00313"></a>00313     <span class="keywordflow">if</span> (pyobj)
<a name="l00314"></a>00314         <span class="keywordflow">return</span> pyobj;
<a name="l00315"></a>00315     <span class="keywordflow">else</span>
<a name="l00316"></a>00316         <span class="keywordflow">return</span> cval-&gt;GetProxy();
<a name="l00317"></a>00317 }
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 PyObject* listvalue_mapping_subscript(PyObject* <span class="keyword">self</span>, PyObject* pyindex)
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *list= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(<span class="keyword">self</span>));
<a name="l00322"></a>00322     <span class="keywordflow">if</span> (list==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00323"></a>00323         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;value = CList[i], &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00324"></a>00324         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326     
<a name="l00327"></a>00327     <span class="keywordflow">if</span> (PyUnicode_Check(pyindex))
<a name="l00328"></a>00328     {
<a name="l00329"></a>00329         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *item = ((<a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>*) list)-&gt;FindValue(_PyUnicode_AsString(pyindex));
<a name="l00330"></a>00330         <span class="keywordflow">if</span> (item) {
<a name="l00331"></a>00331             PyObject* pyobj = item-&gt;ConvertValueToPython();
<a name="l00332"></a>00332             <span class="keywordflow">if</span> (pyobj)
<a name="l00333"></a>00333                 <span class="keywordflow">return</span> pyobj;
<a name="l00334"></a>00334             <span class="keywordflow">else</span>
<a name="l00335"></a>00335                 <span class="keywordflow">return</span> item-&gt;GetProxy();
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PyLong_Check(pyindex))
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340         <span class="keywordtype">int</span> index = PyLong_AsSsize_t(pyindex);
<a name="l00341"></a>00341         <span class="keywordflow">return</span> listvalue_buffer_item(<span class="keyword">self</span>, index); <span class="comment">/* wont add a ref */</span>
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     PyErr_Format(PyExc_KeyError,
<a name="l00345"></a>00345                  <span class="stringliteral">&quot;CList[key]: &#39;%R&#39; key not in list&quot;</span>, pyindex);
<a name="l00346"></a>00346     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="comment">/* just slice it into a python list... */</span>
<a name="l00351"></a>00351 PyObject* listvalue_buffer_slice(PyObject* <span class="keyword">self</span>,Py_ssize_t ilow, Py_ssize_t ihigh)
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *list= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(<span class="keyword">self</span>));
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (list==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00355"></a>00355         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;val = CList[i:j], &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00356"></a>00356         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358     
<a name="l00359"></a>00359     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;
<a name="l00360"></a>00360     PyObject *newlist;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     <span class="keywordflow">if</span> (ilow &lt; 0) ilow = 0;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <span class="keywordtype">int</span> n = ((<a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>*) list)-&gt;GetCount();
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     <span class="keywordflow">if</span> (ihigh &gt;= n)
<a name="l00367"></a>00367         ihigh = n;
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (ihigh &lt; ilow)
<a name="l00369"></a>00369         ihigh = ilow;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     newlist = PyList_New(ihigh - ilow);
<a name="l00372"></a>00372     <span class="keywordflow">if</span> (!newlist)
<a name="l00373"></a>00373         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="keywordflow">for</span> (i = ilow, j = 0; i &lt; ihigh; i++, j++)
<a name="l00376"></a>00376     {
<a name="l00377"></a>00377         PyObject* pyobj = list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;ConvertValueToPython();
<a name="l00378"></a>00378         <span class="keywordflow">if</span> (!pyobj)
<a name="l00379"></a>00379             pyobj = list-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;GetProxy();
<a name="l00380"></a>00380         PyList_SET_ITEM(newlist, i, pyobj);
<a name="l00381"></a>00381     }   
<a name="l00382"></a>00382     <span class="keywordflow">return</span> newlist;
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="comment">/* clist + list, return a list that python owns */</span>
<a name="l00387"></a>00387 <span class="keyword">static</span> PyObject *listvalue_buffer_concat(PyObject * <span class="keyword">self</span>, PyObject * other)
<a name="l00388"></a>00388 {
<a name="l00389"></a>00389     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *listval= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(<span class="keyword">self</span>));
<a name="l00390"></a>00390     Py_ssize_t <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, numitems, numitems_orig;
<a name="l00391"></a>00391     
<a name="l00392"></a>00392     <span class="keywordflow">if</span> (listval==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00393"></a>00393         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;CList+other, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00394"></a>00394         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396     
<a name="l00397"></a>00397     numitems_orig= listval-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00398"></a>00398     
<a name="l00399"></a>00399     <span class="comment">// for now, we support CListValue concatenated with items</span>
<a name="l00400"></a>00400     <span class="comment">// and CListValue concatenated to Python Lists</span>
<a name="l00401"></a>00401     <span class="comment">// and CListValue concatenated with another CListValue</span>
<a name="l00402"></a>00402     
<a name="l00403"></a>00403     <span class="comment">/* Shallow copy, don&#39;t use listval-&gt;GetReplica(), it will screw up with KX_GameObjects */</span>
<a name="l00404"></a>00404     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* listval_new = <span class="keyword">new</span> <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>();
<a name="l00405"></a>00405     
<a name="l00406"></a>00406     <span class="keywordflow">if</span> (PyList_Check(other))
<a name="l00407"></a>00407     {
<a name="l00408"></a>00408         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* listitemval;
<a name="l00409"></a>00409         <span class="keywordtype">bool</span> <a class="code" href="../../d3/d22/seqeffects_8c.html#a7b34dac1400e04787532993b40ad9814">error</a> = <span class="keyword">false</span>;
<a name="l00410"></a>00410         
<a name="l00411"></a>00411         numitems = PyList_GET_SIZE(other);
<a name="l00412"></a>00412         
<a name="l00413"></a>00413         <span class="comment">/* copy the first part of the list */</span>
<a name="l00414"></a>00414         listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">Resize</a>(numitems_orig + numitems);
<a name="l00415"></a>00415         <span class="keywordflow">for</span> (i=0;i&lt;numitems_orig;i++)
<a name="l00416"></a>00416             listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">SetValue</a>(i, listval-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l00417"></a>00417         
<a name="l00418"></a>00418         <span class="keywordflow">for</span> (i=0;i&lt;numitems;i++)
<a name="l00419"></a>00419         {
<a name="l00420"></a>00420             listitemval = listval-&gt;ConvertPythonToValue(PyList_GetItem(other,i), <span class="stringliteral">&quot;cList + pyList: CListValue, &quot;</span>);
<a name="l00421"></a>00421             
<a name="l00422"></a>00422             <span class="keywordflow">if</span> (listitemval) {
<a name="l00423"></a>00423                 listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">SetValue</a>(i+numitems_orig, listitemval);
<a name="l00424"></a>00424             } <span class="keywordflow">else</span> {
<a name="l00425"></a>00425                 error= <span class="keyword">true</span>;
<a name="l00426"></a>00426                 <span class="keywordflow">break</span>;
<a name="l00427"></a>00427             }
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429         
<a name="l00430"></a>00430         <span class="keywordflow">if</span> (error) {
<a name="l00431"></a>00431             listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">Resize</a>(numitems_orig+i); <span class="comment">/* resize so we don&#39;t try release NULL pointers */</span>
<a name="l00432"></a>00432             listval_new-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00433"></a>00433             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* ConvertPythonToValue above sets the error */</span> 
<a name="l00434"></a>00434         }
<a name="l00435"></a>00435     
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PyObject_TypeCheck(other, &amp;CListValue::Type)) {
<a name="l00438"></a>00438         <span class="comment">// add items from otherlist to this list</span>
<a name="l00439"></a>00439         <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a>* otherval = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(other));
<a name="l00440"></a>00440         <span class="keywordflow">if</span> (otherval==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00441"></a>00441             listval_new-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00442"></a>00442             PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;CList+other, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00443"></a>00443             <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445         
<a name="l00446"></a>00446         numitems = otherval-&gt;<a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00447"></a>00447         
<a name="l00448"></a>00448         <span class="comment">/* copy the first part of the list */</span>
<a name="l00449"></a>00449         listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a66157044277e58ae435abcca61d6ce46">Resize</a>(numitems_orig + numitems); <span class="comment">/* resize so we don&#39;t try release NULL pointers */</span>
<a name="l00450"></a>00450         <span class="keywordflow">for</span> (i=0;i&lt;numitems_orig;i++)
<a name="l00451"></a>00451             listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">SetValue</a>(i, listval-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l00452"></a>00452         
<a name="l00453"></a>00453         <span class="comment">/* now copy the other part of the list */</span>
<a name="l00454"></a>00454         <span class="keywordflow">for</span> (i=0;i&lt;numitems;i++)
<a name="l00455"></a>00455             listval_new-&gt;<a class="code" href="../../d6/de7/classCListValue.html#a9859783d4e0ee515956925778f8bcf5a">SetValue</a>(i+numitems_orig, otherval-&gt;<a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;<a class="code" href="../../d7/d9c/classCValue.html#afbffee1cbf1ba190723f69445a2471ca">AddRef</a>());
<a name="l00456"></a>00456         
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458     <span class="keywordflow">return</span> listval_new-&gt;NewProxy(<span class="keyword">true</span>); <span class="comment">/* python owns this list */</span>
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 <span class="keyword">static</span> <span class="keywordtype">int</span> listvalue_buffer_contains(PyObject *self_v, PyObject *value)
<a name="l00462"></a>00462 {
<a name="l00463"></a>00463     <a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">self</span>= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/de7/classCListValue.html">CListValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(self_v));
<a name="l00464"></a>00464     
<a name="l00465"></a>00465     <span class="keywordflow">if</span> (<span class="keyword">self</span>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00466"></a>00466         PyErr_SetString(PyExc_SystemError, <span class="stringliteral">&quot;val in CList, &quot;</span>BGE_PROXY_ERROR_MSG);
<a name="l00467"></a>00467         <span class="keywordflow">return</span> -1;
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469     
<a name="l00470"></a>00470     <span class="keywordflow">if</span> (PyUnicode_Check(value)) {
<a name="l00471"></a>00471         <span class="keywordflow">if</span> (self-&gt;FindValue((<span class="keyword">const</span> <span class="keywordtype">char</span> *)_PyUnicode_AsString(value))) {
<a name="l00472"></a>00472             <span class="keywordflow">return</span> 1;
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PyObject_TypeCheck(value, &amp;CValue::Type)) { <span class="comment">/* not dict like at all but this worked before __contains__ was used */</span>
<a name="l00476"></a>00476         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *item= <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *<span class="keyword">&gt;</span>(BGE_PROXY_REF(value));
<a name="l00477"></a>00477         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <span class="keyword">self</span>-&gt;GetCount(); i++)
<a name="l00478"></a>00478             <span class="keywordflow">if</span> (self-&gt;GetValue(i) == item) <span class="comment">// Com</span>
<a name="l00479"></a>00479                 <span class="keywordflow">return</span> 1;
<a name="l00480"></a>00480         
<a name="l00481"></a>00481     } <span class="comment">// not using CheckEqual</span>
<a name="l00482"></a>00482     
<a name="l00483"></a>00483     <span class="keywordflow">return</span> 0;
<a name="l00484"></a>00484 }
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="keyword">static</span>  PySequenceMethods listvalue_as_sequence = {
<a name="l00488"></a>00488     listvalue_bufferlen,<span class="comment">//(inquiry)buffer_length, /*sq_length*/</span>
<a name="l00489"></a>00489     listvalue_buffer_concat, <span class="comment">/*sq_concat*/</span>
<a name="l00490"></a>00490     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">/*sq_repeat*/</span>
<a name="l00491"></a>00491     listvalue_buffer_item, <span class="comment">/*sq_item*/</span>
<a name="l00492"></a>00492 <span class="comment">// TODO, slicing in py3</span>
<a name="l00493"></a>00493     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">// listvalue_buffer_slice, /*sq_slice*/</span>
<a name="l00494"></a>00494     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">/*sq_ass_item*/</span>
<a name="l00495"></a>00495     <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">/*sq_ass_slice*/</span>
<a name="l00496"></a>00496     (objobjproc)listvalue_buffer_contains,  <span class="comment">/* sq_contains */</span>
<a name="l00497"></a>00497     (binaryfunc) <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="comment">/* sq_inplace_concat */</span>
<a name="l00498"></a>00498     (ssizeargfunc) NULL, <span class="comment">/* sq_inplace_repeat */</span>
<a name="l00499"></a>00499 };
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="comment">/* Is this one used ? */</span>
<a name="l00504"></a>00504 <span class="keyword">static</span>  PyMappingMethods instance_as_mapping = {
<a name="l00505"></a>00505     listvalue_bufferlen, <span class="comment">/*mp_length*/</span>
<a name="l00506"></a>00506     listvalue_mapping_subscript, <span class="comment">/*mp_subscript*/</span>
<a name="l00507"></a>00507     NULL <span class="comment">/*mp_ass_subscript*/</span>
<a name="l00508"></a>00508 };
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 PyTypeObject CListValue::Type = {
<a name="l00513"></a>00513     PyVarObject_HEAD_INIT(NULL, 0)
<a name="l00514"></a>00514     <span class="stringliteral">&quot;CListValue&quot;</span>,           <span class="comment">/*tp_name*/</span>
<a name="l00515"></a>00515     <span class="keyword">sizeof</span>(PyObjectPlus_Proxy), <span class="comment">/*tp_basicsize*/</span>
<a name="l00516"></a>00516     0,              <span class="comment">/*tp_itemsize*/</span>
<a name="l00517"></a>00517     <span class="comment">/* methods */</span>
<a name="l00518"></a>00518     py_base_dealloc,            <span class="comment">/*tp_dealloc*/</span>
<a name="l00519"></a>00519     0,              <span class="comment">/*tp_print*/</span>
<a name="l00520"></a>00520     0,          <span class="comment">/*tp_getattr*/</span>
<a name="l00521"></a>00521     0,          <span class="comment">/*tp_setattr*/</span>
<a name="l00522"></a>00522     0,          <span class="comment">/*tp_compare*/</span>
<a name="l00523"></a>00523     py_base_repr, <span class="comment">/*tp_repr*/</span>
<a name="l00524"></a>00524     0,                  <span class="comment">/*tp_as_number*/</span>
<a name="l00525"></a>00525     &amp;listvalue_as_sequence, <span class="comment">/*tp_as_sequence*/</span>
<a name="l00526"></a>00526     &amp;instance_as_mapping,           <span class="comment">/*tp_as_mapping*/</span>
<a name="l00527"></a>00527     0,                  <span class="comment">/*tp_hash*/</span>
<a name="l00528"></a>00528     0,              <span class="comment">/*tp_call */</span>
<a name="l00529"></a>00529     0,
<a name="l00530"></a>00530     NULL,
<a name="l00531"></a>00531     NULL,
<a name="l00532"></a>00532     0,
<a name="l00533"></a>00533     Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE,
<a name="l00534"></a>00534     0,0,0,0,0,0,0,
<a name="l00535"></a>00535     Methods,
<a name="l00536"></a>00536     0,
<a name="l00537"></a>00537     0,
<a name="l00538"></a>00538     &amp;CValue::Type,
<a name="l00539"></a>00539     0,0,0,0,0,0,
<a name="l00540"></a>00540     py_base_new
<a name="l00541"></a>00541 };
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 PyMethodDef CListValue::Methods[] = {
<a name="l00544"></a>00544     <span class="comment">/* List style access */</span>
<a name="l00545"></a>00545     {<span class="stringliteral">&quot;append&quot;</span>, (PyCFunction)CListValue::sPyappend,METH_O},
<a name="l00546"></a>00546     {<span class="stringliteral">&quot;reverse&quot;</span>, (PyCFunction)CListValue::sPyreverse,METH_NOARGS},
<a name="l00547"></a>00547     {<span class="stringliteral">&quot;index&quot;</span>, (PyCFunction)CListValue::sPyindex,METH_O},
<a name="l00548"></a>00548     {<span class="stringliteral">&quot;count&quot;</span>, (PyCFunction)CListValue::sPycount,METH_O},
<a name="l00549"></a>00549 
<a name="l00550"></a>00550     <span class="comment">/* Dict style access */</span>
<a name="l00551"></a>00551     {<span class="stringliteral">&quot;get&quot;</span>, (PyCFunction)CListValue::sPyget,METH_VARARGS},
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="comment">/* Own cvalue funcs */</span>
<a name="l00554"></a>00554     {<span class="stringliteral">&quot;from_id&quot;</span>, (PyCFunction)CListValue::sPyfrom_id,METH_O},
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,NULL} <span class="comment">//Sentinel</span>
<a name="l00557"></a>00557 };
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 PyAttributeDef CListValue::Attributes[] = {
<a name="l00560"></a>00560     { NULL }    <span class="comment">//Sentinel</span>
<a name="l00561"></a>00561 };
<a name="l00562"></a>00562 
<a name="l00563"></a>00563 PyObject* CListValue::Pyappend(PyObject* value)
<a name="l00564"></a>00564 {
<a name="l00565"></a>00565     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* objval = ConvertPythonToValue(value, <span class="stringliteral">&quot;CList.append(i): CValueList, &quot;</span>);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="keywordflow">if</span> (!objval) <span class="comment">/* ConvertPythonToValue sets the error */</span>
<a name="l00568"></a>00568         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00569"></a>00569 
<a name="l00570"></a>00570     <span class="keywordflow">if</span> (!BGE_PROXY_PYOWNS(m_proxy)) {
<a name="l00571"></a>00571         PyErr_SetString(PyExc_TypeError, <span class="stringliteral">&quot;CList.append(i): this CValueList is used internally for the game engine and can&#39;t be modified&quot;</span>);
<a name="l00572"></a>00572         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <a class="code" href="../../d6/de7/classCListValue.html#ab20ce4d43a9f9aec11731aa4abddb059">Add</a>(objval);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577     Py_RETURN_NONE;
<a name="l00578"></a>00578 }
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 PyObject* CListValue::Pyreverse()
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582     std::reverse(m_pValueArray.begin(),m_pValueArray.end());
<a name="l00583"></a>00583     Py_RETURN_NONE;
<a name="l00584"></a>00584 }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 PyObject* CListValue::Pyindex(PyObject *value)
<a name="l00587"></a>00587 {
<a name="l00588"></a>00588     PyObject* result = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* checkobj = ConvertPythonToValue(value, <span class="stringliteral">&quot;val = cList[i]: CValueList, &quot;</span>);
<a name="l00591"></a>00591     <span class="keywordflow">if</span> (checkobj==NULL)
<a name="l00592"></a>00592         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* ConvertPythonToValue sets the error */</span>
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="keywordtype">int</span> numelem = <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00595"></a>00595     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;numelem;i++)
<a name="l00596"></a>00596     {
<a name="l00597"></a>00597         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* elem =          <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i);
<a name="l00598"></a>00598         <span class="keywordflow">if</span> (checkobj==elem || <a class="code" href="../../d6/de7/classCListValue.html#acbfe6b5d4c20563c0fc95e1beb190ce5">CheckEqual</a>(checkobj,elem))
<a name="l00599"></a>00599         {
<a name="l00600"></a>00600             result = PyLong_FromSsize_t(i);
<a name="l00601"></a>00601             <span class="keywordflow">break</span>;
<a name="l00602"></a>00602         }
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604     checkobj-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="keywordflow">if</span> (result==NULL) {
<a name="l00607"></a>00607         PyErr_SetString(PyExc_ValueError, <span class="stringliteral">&quot;CList.index(x): x not in CListValue&quot;</span>);
<a name="l00608"></a>00608     }
<a name="l00609"></a>00609     <span class="keywordflow">return</span> result;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 PyObject* CListValue::Pycount(PyObject* value)
<a name="l00616"></a>00616 {
<a name="l00617"></a>00617     <span class="keywordtype">int</span> numfound = 0;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* checkobj = ConvertPythonToValue(value, <span class="stringliteral">&quot;&quot;</span>); <span class="comment">/* error ignored */</span>
<a name="l00620"></a>00620 
<a name="l00621"></a>00621     <span class="keywordflow">if</span> (checkobj==NULL) { <span class="comment">/* in this case just return that there are no items in the list */</span>
<a name="l00622"></a>00622         PyErr_Clear();
<a name="l00623"></a>00623         <span class="keywordflow">return</span> PyLong_FromSsize_t(0);
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625 
<a name="l00626"></a>00626     <span class="keywordtype">int</span> numelem = <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00627"></a>00627     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;numelem;i++)
<a name="l00628"></a>00628     {
<a name="l00629"></a>00629         <a class="code" href="../../d7/d9c/classCValue.html">CValue</a>* elem =          <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i);
<a name="l00630"></a>00630         <span class="keywordflow">if</span> (checkobj==elem || <a class="code" href="../../d6/de7/classCListValue.html#acbfe6b5d4c20563c0fc95e1beb190ce5">CheckEqual</a>(checkobj,elem))
<a name="l00631"></a>00631         {
<a name="l00632"></a>00632             numfound ++;
<a name="l00633"></a>00633         }
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635     checkobj-&gt;<a class="code" href="../../d7/d9c/classCValue.html#ad20cd92d44698a94dd8137fca86d85e3">Release</a>();
<a name="l00636"></a>00636 
<a name="l00637"></a>00637     <span class="keywordflow">return</span> PyLong_FromSsize_t(numfound);
<a name="l00638"></a>00638 }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="comment">/* Matches python dict.get(key, [default]) */</span>
<a name="l00641"></a>00641 PyObject* CListValue::Pyget(PyObject *args)
<a name="l00642"></a>00642 {
<a name="l00643"></a>00643     <span class="keywordtype">char</span> *key;
<a name="l00644"></a>00644     PyObject* def = Py_None;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="keywordflow">if</span> (!PyArg_ParseTuple(args, <span class="stringliteral">&quot;s|O:get&quot;</span>, &amp;key, &amp;def))
<a name="l00647"></a>00647         <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649     <a class="code" href="../../d7/d9c/classCValue.html">CValue</a> *item = <a class="code" href="../../d6/de7/classCListValue.html#aecd532f5a0cb3c6f6b9bc234267c006e">FindValue</a>((<span class="keyword">const</span> <span class="keywordtype">char</span> *)key);
<a name="l00650"></a>00650     <span class="keywordflow">if</span> (item) {
<a name="l00651"></a>00651         PyObject* pyobj = item-&gt;ConvertValueToPython();
<a name="l00652"></a>00652         <span class="keywordflow">if</span> (pyobj)
<a name="l00653"></a>00653             <span class="keywordflow">return</span> pyobj;
<a name="l00654"></a>00654         <span class="keywordflow">else</span>
<a name="l00655"></a>00655             <span class="keywordflow">return</span> item-&gt;GetProxy();
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657     Py_INCREF(def);
<a name="l00658"></a>00658     <span class="keywordflow">return</span> def;
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 PyObject* CListValue::Pyfrom_id(PyObject* value)
<a name="l00663"></a>00663 {
<a name="l00664"></a>00664     uintptr_t <span class="keywordtype">id</span>= (uintptr_t)PyLong_AsVoidPtr(value);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666     <span class="keywordflow">if</span> (PyErr_Occurred())
<a name="l00667"></a>00667         <span class="keywordflow">return</span> NULL;
<a name="l00668"></a>00668 
<a name="l00669"></a>00669     <span class="keywordtype">int</span> numelem = <a class="code" href="../../d6/de7/classCListValue.html#abdbc617f2a8ab49346008d4ac857f9b4">GetCount</a>();
<a name="l00670"></a>00670     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;numelem;i++)
<a name="l00671"></a>00671     {
<a name="l00672"></a>00672         <span class="keywordflow">if</span> (reinterpret_cast&lt;uintptr_t&gt;(m_pValueArray[i]-&gt;m_proxy) == <span class="keywordtype">id</span>)
<a name="l00673"></a>00673             <span class="keywordflow">return</span> <a class="code" href="../../d6/de7/classCListValue.html#aa388a5dfd4110408735fc6926c7464b4">GetValue</a>(i)-&gt;GetProxy();
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675     PyErr_SetString(PyExc_IndexError, <span class="stringliteral">&quot;from_id(#): id not found in CValueList&quot;</span>);
<a name="l00676"></a>00676     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00677"></a>00677 
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680 <span class="preprocessor">#endif // WITH_PYTHON</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:29 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
