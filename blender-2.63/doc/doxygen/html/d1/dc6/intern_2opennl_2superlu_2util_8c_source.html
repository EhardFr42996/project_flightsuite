<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: util.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">util.c</div>  </div>
</div>
<div class="contents">
<a href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="comment">/*</span>
<a name="l00005"></a>00005 <span class="comment"> * -- SuperLU routine (version 3.0) --</span>
<a name="l00006"></a>00006 <span class="comment"> * Univ. of California Berkeley, Xerox Palo Alto Research Center,</span>
<a name="l00007"></a>00007 <span class="comment"> * and Lawrence Berkeley National Lab.</span>
<a name="l00008"></a>00008 <span class="comment"> * October 15, 2003</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> */</span>
<a name="l00011"></a>00011 <span class="comment">/*</span>
<a name="l00012"></a>00012 <span class="comment">  Copyright (c) 1994 by Xerox Corporation.  All rights reserved.</span>
<a name="l00013"></a>00013 <span class="comment"> </span>
<a name="l00014"></a>00014 <span class="comment">  THIS MATERIAL IS PROVIDED AS IS, WITH ABSOLUTELY NO WARRANTY</span>
<a name="l00015"></a>00015 <span class="comment">  EXPRESSED OR IMPLIED.  ANY USE IS AT YOUR OWN RISK.</span>
<a name="l00016"></a>00016 <span class="comment"> </span>
<a name="l00017"></a>00017 <span class="comment">  Permission is hereby granted to use or copy this program for any</span>
<a name="l00018"></a>00018 <span class="comment">  purpose, provided the above notices are retained on all copies.</span>
<a name="l00019"></a>00019 <span class="comment">  Permission to modify the code and to distribute modified code is</span>
<a name="l00020"></a>00020 <span class="comment">  granted, provided the above notices are retained, and a notice that</span>
<a name="l00021"></a>00021 <span class="comment">  the code was modified is included with the above copyright notice.</span>
<a name="l00022"></a>00022 <span class="comment">*/</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d07/ssp__defs_8h.html">ssp_defs.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;util.h&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">/* prototypes */</span>
<a name="l00029"></a>00029 <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a60256c1cabadcd15f555ed6e9d7eedef">LUFactFlops</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat);
<a name="l00030"></a>00030 <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#afdfc4cfea288d5639fb7321929550b8a">LUSolveFlops</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat);
<a name="l00031"></a>00031 <span class="keywordtype">float</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a5789a3d7549a127e955680283ecfe44e">SpaSize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> np, <span class="keywordtype">float</span> sum_npw);
<a name="l00032"></a>00032 <span class="keywordtype">float</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a9daf07581bce8c0f5c879c5899ce419c">DenseSize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">float</span> sum_nw);
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">/* </span>
<a name="l00035"></a>00035 <span class="comment"> * Global statistics variale</span>
<a name="l00036"></a>00036 <span class="comment"> */</span>
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#abd38b081866ed2c3e4959c4c0560913c">00038</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a060bded38730c2e58fa7f7e19c43ba08">superlu_abort_and_exit</a>(<span class="keywordtype">char</span>* msg)
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040     fprintf(stderr, <span class="stringliteral">&quot;%s&quot;</span>, msg);
<a name="l00041"></a>00041     exit (-1);
<a name="l00042"></a>00042 }
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">/*</span>
<a name="l00045"></a>00045 <span class="comment"> * Set the default values for the options argument.</span>
<a name="l00046"></a>00046 <span class="comment"> */</span>
<a name="l00047"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a4792687285a879f7955029421ba99795">00047</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a4792687285a879f7955029421ba99795">set_default_options</a>(<a class="code" href="../../d8/dc6/structsuperlu__options__t.html">superlu_options_t</a> *<a class="code" href="../../d3/d77/cycles__test_8cpp.html#ae5dd30972ef2b22e7bb03125f3c4a8c8">options</a>)
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#acbd3cc1d27bbaf5bc168ebbbd6bf60fe">Fact</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ac785c8235480e5cfef9848d89c047c0aae0bd0c48044d1267a827ce526249e168">DOFACT</a>;
<a name="l00050"></a>00050     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#a3fe998e3518ad90532072fa8929a1e2f">Equil</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ae6553118ce91b9c08f9376941ae1536fa99f136a862ba5c7d16967231c29f09d6">YES</a>;
<a name="l00051"></a>00051     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#af6e41a7d8ca989c5396f6edc67be0409">ColPerm</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#abd17bbb14f57694750d96639e738e89cafc08a15679354a375b679f7d907867c3">COLAMD</a>;
<a name="l00052"></a>00052     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#ae574f08a3f4094dae8f635690b71d944">DiagPivotThresh</a> = 1.0;
<a name="l00053"></a>00053     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#a23fa8259c7091d82f10f0dfc7718dc36">Trans</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a0c4e17b2d5cea33f9991ccc6a6678d62a8ccffb9caebb7b4520a0653005b22f43">NOTRANS</a>;
<a name="l00054"></a>00054     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#a3e40fb39641e0caf27feb6998d21d98a">IterRefine</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a7e73e9d3a9caeec3586c03e01c494e37a5f3a3710645b9041f06dfe164fb336a3">NOREFINE</a>;
<a name="l00055"></a>00055     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#aad1b52d0366ae8601e97fab5c470c45d">SymmetricMode</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ae6553118ce91b9c08f9376941ae1536fa0d077f5b932ce05e5b9f30c6087a2f31">NO</a>;
<a name="l00056"></a>00056     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#aa75cfd534f156c78b7dc69e7e68596da">PivotGrowth</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ae6553118ce91b9c08f9376941ae1536fa0d077f5b932ce05e5b9f30c6087a2f31">NO</a>;
<a name="l00057"></a>00057     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#a3394d6658ec588071a9fee24a728eb07">ConditionNumber</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ae6553118ce91b9c08f9376941ae1536fa0d077f5b932ce05e5b9f30c6087a2f31">NO</a>;
<a name="l00058"></a>00058     options-&gt;<a class="code" href="../../d8/dc6/structsuperlu__options__t.html#aafe514c5a01fe24b70cc636621a86576">PrintStat</a> = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ae6553118ce91b9c08f9376941ae1536fa99f136a862ba5c7d16967231c29f09d6">YES</a>;
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">/* Deallocate the structure pointing to the actual storage of the matrix. */</span>
<a name="l00062"></a>00062 <span class="keywordtype">void</span>
<a name="l00063"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a2c43be55861c6e4ee5b806ac16cc382c">00063</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#ac16a0aea75cf99b4d38ec4ede6f13eb4">Destroy_SuperMatrix_Store</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keywordtype">void</span>
<a name="l00069"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a4257e4d9cca1db286b73154d81ec3880">00069</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a27491a8171a480d6c98e6d1e535e1973">Destroy_CompCol_Matrix</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d6/d61/structNCformat.html">NCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;rowind );
<a name="l00072"></a>00072     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d6/d61/structNCformat.html">NCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;colptr );
<a name="l00073"></a>00073     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d6/d61/structNCformat.html">NCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;nzval );
<a name="l00074"></a>00074     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="keywordtype">void</span>
<a name="l00078"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a98cbb427c29a6be1760288b63857bc12">00078</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a6292e6a8f2b75101294f2e99927b5d2a">Destroy_CompRow_Matrix</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d5/d4d/structNRformat.html">NRformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;colind );
<a name="l00081"></a>00081     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d5/d4d/structNRformat.html">NRformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;rowptr );
<a name="l00082"></a>00082     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( ((<a class="code" href="../../d5/d4d/structNRformat.html">NRformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;nzval );
<a name="l00083"></a>00083     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keywordtype">void</span>
<a name="l00087"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ade01201644d38ff78cd1824ff2e5022b">00087</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#aea724a390aed4ef00a4b8ed783c60014">Destroy_SuperNode_Matrix</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00088"></a>00088 {
<a name="l00089"></a>00089     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;rowind );
<a name="l00090"></a>00090     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;rowind_colptr );
<a name="l00091"></a>00091     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;nzval );
<a name="l00092"></a>00092     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;nzval_colptr );
<a name="l00093"></a>00093     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;col_to_sup );
<a name="l00094"></a>00094     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../db/d39/structSCformat.html">SCformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;sup_to_col );
<a name="l00095"></a>00095     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">/* A is of type Stype==NCP */</span>
<a name="l00099"></a>00099 <span class="keywordtype">void</span>
<a name="l00100"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a4de38e1c0ef18dd0791cb206c7f5348f">00100</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a7285ca16a0b84b4333d71efeb65c0126">Destroy_CompCol_Permuted</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../d6/d92/structNCPformat.html">NCPformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;colbeg );
<a name="l00103"></a>00103     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( ((<a class="code" href="../../d6/d92/structNCPformat.html">NCPformat</a> *)A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>)-&gt;colend );
<a name="l00104"></a>00104     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">/* A is of type Stype==DN */</span>
<a name="l00108"></a>00108 <span class="keywordtype">void</span>
<a name="l00109"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9f7e658f2e17e08b2d88fadc11f2b437">00109</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a301f89dc9483e5bcdc47fc96e8645cf7">Destroy_Dense_Matrix</a>(<a class="code" href="../../d8/d79/structSuperMatrix.html">SuperMatrix</a> *A)
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111     <a class="code" href="../../da/d7e/structDNformat.html">DNformat</a>* Astore = A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a>;
<a name="l00112"></a>00112     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> (Astore-&gt;<a class="code" href="../../da/d7e/structDNformat.html#a54a061275c52aa9e38f4cb65da46d48c">nzval</a>);
<a name="l00113"></a>00113     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a> ( A-&gt;<a class="code" href="../../d8/d79/structSuperMatrix.html#a73ebca1b46bb24536226b9378e01c5b5">Store</a> );
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="comment">/*</span>
<a name="l00117"></a>00117 <span class="comment"> * Reset repfnz[] for the current column </span>
<a name="l00118"></a>00118 <span class="comment"> */</span>
<a name="l00119"></a>00119 <span class="keywordtype">void</span>
<a name="l00120"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ab71db926d60d7b8fd739df197b766366">00120</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a67bce8b2142b3be41583de4fbea02cb0">resetrep_col</a> (<span class="keyword">const</span> <span class="keywordtype">int</span> nseg, <span class="keyword">const</span> <span class="keywordtype">int</span> *segrep, <span class="keywordtype">int</span> *repfnz)
<a name="l00121"></a>00121 {
<a name="l00122"></a>00122     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, irep;
<a name="l00123"></a>00123     
<a name="l00124"></a>00124     <span class="keywordflow">for</span> (i = 0; i &lt; nseg; i++) {
<a name="l00125"></a>00125     irep = segrep[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00126"></a>00126     repfnz[irep] = <a class="code" href="../../db/d97/OBSTACLE_8h.html#a635ddf654f4aa61672a262c09b92f644a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a>;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">/*</span>
<a name="l00132"></a>00132 <span class="comment"> * Count the total number of nonzeros in factors L and U,  and in the </span>
<a name="l00133"></a>00133 <span class="comment"> * symmetrically reduced L. </span>
<a name="l00134"></a>00134 <span class="comment"> */</span>
<a name="l00135"></a>00135 <span class="keywordtype">void</span>
<a name="l00136"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#acac794ae60517b94cb755975b51b9538">00136</a> <a class="code" href="../../d9/d07/ssp__defs_8h.html#a8086902aa8be3fc7d04c3c82ec3a79dc">countnz</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *xprune, <span class="keywordtype">int</span> *nnzL, <span class="keywordtype">int</span> *nnzU, <a class="code" href="../../d3/d6e/structGlobalLU__t.html">GlobalLU_t</a> *Glu)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="keywordtype">int</span>          nsuper, fsupc, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;
<a name="l00139"></a>00139     <span class="keywordtype">int</span>          nnzL0, jlen, irep;
<a name="l00140"></a>00140     <span class="keywordtype">int</span>          *xsup, *xlsub;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142     xsup   = Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#a94902a11c68912c2d456a58edd29f31d">xsup</a>;
<a name="l00143"></a>00143     xlsub  = Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#ac6f1655e303e2947524c29182d0f6a1e">xlsub</a>;
<a name="l00144"></a>00144     *nnzL  = 0;
<a name="l00145"></a>00145     *nnzU  = (Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#a4cbf4786dd6fc6541d5e097b27ab6835">xusub</a>)[n];
<a name="l00146"></a>00146     nnzL0  = 0;
<a name="l00147"></a>00147     nsuper = (Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#afe003e9f68a924d5ba66c6f655bea55c">supno</a>)[n];
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="keywordflow">if</span> ( n &lt;= 0 ) <span class="keywordflow">return</span>;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     <span class="comment">/* </span>
<a name="l00152"></a>00152 <span class="comment">     * For each supernode</span>
<a name="l00153"></a>00153 <span class="comment">     */</span>
<a name="l00154"></a>00154     <span class="keywordflow">for</span> (i = 0; i &lt;= nsuper; i++) {
<a name="l00155"></a>00155     fsupc = xsup[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00156"></a>00156     jlen = xlsub[fsupc+1] - xlsub[fsupc];
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="keywordflow">for</span> (j = fsupc; j &lt; xsup[i+1]; j++) {
<a name="l00159"></a>00159         *nnzL += jlen;
<a name="l00160"></a>00160         *nnzU += j - fsupc + 1;
<a name="l00161"></a>00161         jlen--;
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163     irep = xsup[i+1] - 1;
<a name="l00164"></a>00164     nnzL0 += xprune[irep] - xlsub[irep];
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166     
<a name="l00167"></a>00167     <span class="comment">/* printf(&quot;\tNo of nonzeros in symm-reduced L = %d\n&quot;, nnzL0);*/</span>
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/*</span>
<a name="l00173"></a>00173 <span class="comment"> * Fix up the data storage lsub for L-subscripts. It removes the subscript</span>
<a name="l00174"></a>00174 <span class="comment"> * sets for structural pruning, and applies permuation to the remaining</span>
<a name="l00175"></a>00175 <span class="comment"> * subscripts.</span>
<a name="l00176"></a>00176 <span class="comment"> */</span>
<a name="l00177"></a>00177 <span class="keywordtype">void</span>
<a name="l00178"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a4b97838714471334eba3f4de948d6e7a">00178</a> <a class="code" href="../../d9/d07/ssp__defs_8h.html#a7061332d759d7e4d73c1b2e5cb0bf2bf">fixupL</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">int</span> *perm_r, <a class="code" href="../../d3/d6e/structGlobalLU__t.html">GlobalLU_t</a> *Glu)
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <span class="keyword">register</span> <span class="keywordtype">int</span> nsuper, fsupc, nextl, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k, jstrt;
<a name="l00181"></a>00181     <span class="keywordtype">int</span>          *xsup, *lsub, *xlsub;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keywordflow">if</span> ( n &lt;= 1 ) <span class="keywordflow">return</span>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     xsup   = Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#a94902a11c68912c2d456a58edd29f31d">xsup</a>;
<a name="l00186"></a>00186     lsub   = Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#a4e7e8cd3ba09e252a04eaf0b8af5fccd">lsub</a>;
<a name="l00187"></a>00187     xlsub  = Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#ac6f1655e303e2947524c29182d0f6a1e">xlsub</a>;
<a name="l00188"></a>00188     nextl  = 0;
<a name="l00189"></a>00189     nsuper = (Glu-&gt;<a class="code" href="../../d3/d6e/structGlobalLU__t.html#afe003e9f68a924d5ba66c6f655bea55c">supno</a>)[n];
<a name="l00190"></a>00190     
<a name="l00191"></a>00191     <span class="comment">/* </span>
<a name="l00192"></a>00192 <span class="comment">     * For each supernode ...</span>
<a name="l00193"></a>00193 <span class="comment">     */</span>
<a name="l00194"></a>00194     <span class="keywordflow">for</span> (i = 0; i &lt;= nsuper; i++) {
<a name="l00195"></a>00195     fsupc = xsup[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00196"></a>00196     jstrt = xlsub[fsupc];
<a name="l00197"></a>00197     xlsub[fsupc] = nextl;
<a name="l00198"></a>00198     <span class="keywordflow">for</span> (j = jstrt; j &lt; xlsub[fsupc+1]; j++) {
<a name="l00199"></a>00199         lsub[nextl] = perm_r[lsub[j]]; <span class="comment">/* Now indexed into P*A */</span>
<a name="l00200"></a>00200         nextl++;
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <span class="keywordflow">for</span> (k = fsupc+1; k &lt; xsup[i+1]; k++) 
<a name="l00203"></a>00203             xlsub[k] = nextl;   <span class="comment">/* Other columns in supernode i */</span>
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207     xlsub[n] = nextl;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="comment">/*</span>
<a name="l00212"></a>00212 <span class="comment"> * Diagnostic print of segment info after panel_dfs().</span>
<a name="l00213"></a>00213 <span class="comment"> */</span>
<a name="l00214"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a48208ca68e95c765c0c55c12b196d79e">00214</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a9e2ebe03503cdfc4ab20306d028ca312">print_panel_seg</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> jcol, <span class="keywordtype">int</span> nseg, 
<a name="l00215"></a>00215              <span class="keywordtype">int</span> *segrep, <span class="keywordtype">int</span> *repfnz)
<a name="l00216"></a>00216 {
<a name="l00217"></a>00217     <span class="keywordtype">int</span> j, k;
<a name="l00218"></a>00218     
<a name="l00219"></a>00219     <span class="keywordflow">for</span> (j = jcol; j &lt; jcol+w; j++) {
<a name="l00220"></a>00220     printf(<span class="stringliteral">&quot;\tcol %d:\n&quot;</span>, j);
<a name="l00221"></a>00221     <span class="keywordflow">for</span> (k = 0; k &lt; nseg; k++)
<a name="l00222"></a>00222         printf(<span class="stringliteral">&quot;\t\tseg %d, segrep %d, repfnz %d\n&quot;</span>, k, 
<a name="l00223"></a>00223             segrep[k], repfnz[(j-jcol)*n + segrep[k]]);
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="keywordtype">void</span>
<a name="l00230"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a3b979ab4f4e75bdc1b89106dde6c8d72">00230</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a9b8745daf1fd22070364570977fe1ccc">StatInit</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat)
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232     <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, w, panel_size, relax;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     panel_size = <a class="code" href="../../d8/de1/sp__ienv_8c.html#a21109476f1261abd6b256a393f5fd9e7">sp_ienv</a>(1);
<a name="l00235"></a>00235     relax = <a class="code" href="../../d8/de1/sp__ienv_8c.html#a21109476f1261abd6b256a393f5fd9e7">sp_ienv</a>(2);
<a name="l00236"></a>00236     w = <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#adca8259e9d345c7cbaaa0608a1acdfd4">SUPERLU_MAX</a>(panel_size, relax);
<a name="l00237"></a>00237     stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a9a15399d38ecaf731ec300977f268b75">panel_histo</a> = <a class="code" href="../../df/dd5/memory_8c.html#aaf51f82a79c361236a2d825a59a63403">intCalloc</a>(w+1);
<a name="l00238"></a>00238     stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a5eccc9eba32b749c87f7a97991cfdc18">utime</a> = (<span class="keywordtype">double</span> *) <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a55a5ed83733c30850c14cc7b3f922a54">SUPERLU_MALLOC</a>(<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72a2b9cc65b188ff2b2b764a5f8160c4bfc">NPHASES</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (!stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a5eccc9eba32b749c87f7a97991cfdc18">utime</a>) <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aa4b133a54309e2c6e4ba69f3ff1141c2">ABORT</a>(<span class="stringliteral">&quot;SUPERLU_MALLOC fails for stat-&gt;utime&quot;</span>);
<a name="l00240"></a>00240     stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a> = (<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a> *) <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a55a5ed83733c30850c14cc7b3f922a54">SUPERLU_MALLOC</a>(<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72a2b9cc65b188ff2b2b764a5f8160c4bfc">NPHASES</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a>));
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (!stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>) <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aa4b133a54309e2c6e4ba69f3ff1141c2">ABORT</a>(<span class="stringliteral">&quot;SUPERLU_MALLOC fails for stat-&gt;ops&quot;</span>);
<a name="l00242"></a>00242     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72a2b9cc65b188ff2b2b764a5f8160c4bfc">NPHASES</a>; ++<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {
<a name="l00243"></a>00243         stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a5eccc9eba32b749c87f7a97991cfdc18">utime</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.;
<a name="l00244"></a>00244         stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.;
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="keywordtype">void</span>
<a name="l00250"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aa157fecae472b8ef5ce79bd59876099d">00250</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#aef88fef229bf26ba82b50d99c20ad915">StatPrint</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat)
<a name="l00251"></a>00251 {
<a name="l00252"></a>00252     <span class="keywordtype">double</span>         *utime;
<a name="l00253"></a>00253     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a>        *ops;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     utime = stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a5eccc9eba32b749c87f7a97991cfdc18">utime</a>;
<a name="l00256"></a>00256     ops   = stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>;
<a name="l00257"></a>00257     printf(<span class="stringliteral">&quot;Factor time  = %8.2f\n&quot;</span>, utime[<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72a1b6692b56d378abb85bd49063721d034">FACT</a>]);
<a name="l00258"></a>00258     <span class="keywordflow">if</span> ( utime[FACT] != 0.0 )
<a name="l00259"></a>00259       printf(<span class="stringliteral">&quot;Factor flops = %e\tMflops = %8.2f\n&quot;</span>, ops[FACT],
<a name="l00260"></a>00260          ops[FACT]*1e-6/utime[FACT]);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     printf(<span class="stringliteral">&quot;Solve time   = %8.2f\n&quot;</span>, utime[<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72ab9fc7975179c642bbac2b6ffd8fa3579">SOLVE</a>]);
<a name="l00263"></a>00263     <span class="keywordflow">if</span> ( utime[SOLVE] != 0.0 )
<a name="l00264"></a>00264       printf(<span class="stringliteral">&quot;Solve flops = %e\tMflops = %8.2f\n&quot;</span>, ops[SOLVE],
<a name="l00265"></a>00265          ops[SOLVE]*1e-6/utime[SOLVE]);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="keywordtype">void</span>
<a name="l00271"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ab0fb3345d479a7ac24f75f0e64bdff4b">00271</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a7d50e009f6f1f4ba8a63cdd912a0d31d">StatFree</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat)
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>(stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a9a15399d38ecaf731ec300977f268b75">panel_histo</a>);
<a name="l00274"></a>00274     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>(stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#a5eccc9eba32b749c87f7a97991cfdc18">utime</a>);
<a name="l00275"></a>00275     <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9672c5511c3efd9467e4d375a347c192">SUPERLU_FREE</a>(stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>);
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a>
<a name="l00280"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a60256c1cabadcd15f555ed6e9d7eedef">00280</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a60256c1cabadcd15f555ed6e9d7eedef">LUFactFlops</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat)
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282     <span class="keywordflow">return</span> (stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>[<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72a1b6692b56d378abb85bd49063721d034">FACT</a>]);
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aaae6020bb33e780ff6edbd4e45ce08ac">flops_t</a>
<a name="l00286"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#afdfc4cfea288d5639fb7321929550b8a">00286</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#afdfc4cfea288d5639fb7321929550b8a">LUSolveFlops</a>(<a class="code" href="../../d7/d51/structSuperLUStat__t.html">SuperLUStat_t</a> *stat)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288     <span class="keywordflow">return</span> (stat-&gt;<a class="code" href="../../d7/d51/structSuperLUStat__t.html#aec6afa389e49ac9d04dc44e24805c99d">ops</a>[<a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#af00a42ecad444bbda75cde1b64bd7e72ab9fc7975179c642bbac2b6ffd8fa3579">SOLVE</a>]);
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 <span class="comment">/* </span>
<a name="l00296"></a>00296 <span class="comment"> * Fills an integer array with a given value.</span>
<a name="l00297"></a>00297 <span class="comment"> */</span>
<a name="l00298"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ab0dfb6551008bcad5e758defdbd13006">00298</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#ae289773c377a566a2f77c88b21d7f4ae">ifill</a>(<span class="keywordtype">int</span> *a, <span class="keywordtype">int</span> alen, <span class="keywordtype">int</span> ival)
<a name="l00299"></a>00299 {
<a name="l00300"></a>00300     <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00301"></a>00301     <span class="keywordflow">for</span> (i = 0; i &lt; alen; i++) a[i] = ival;
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 <span class="comment">/* </span>
<a name="l00307"></a>00307 <span class="comment"> * Get the statistics of the supernodes </span>
<a name="l00308"></a>00308 <span class="comment"> */</span>
<a name="l00309"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">00309</a> <span class="preprocessor">#define NBUCKS 10</span>
<a name="l00310"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">00310</a> <span class="preprocessor"></span><span class="keyword">static</span>  <span class="keywordtype">int</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a>;
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#ac33e407326ae1dc222aee7ff08f322cf">00312</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a1040b7d1545dbf58b7af05d48621ed0a">super_stats</a>(<span class="keywordtype">int</span> nsuper, <span class="keywordtype">int</span> *xsup)
<a name="l00313"></a>00313 {
<a name="l00314"></a>00314     <span class="keyword">register</span> <span class="keywordtype">int</span> nsup1 = 0;
<a name="l00315"></a>00315     <span class="keywordtype">int</span>          <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, isize, whichb, bl, bh;
<a name="l00316"></a>00316     <span class="keywordtype">int</span>          bucket[<a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>];
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> = 0;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320     <span class="keywordflow">for</span> (i = 0; i &lt;= nsuper; i++) {
<a name="l00321"></a>00321     isize = xsup[i+1] - xsup[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00322"></a>00322     <span class="keywordflow">if</span> ( isize == 1 ) nsup1++;
<a name="l00323"></a>00323     <span class="keywordflow">if</span> ( <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> &lt; isize ) <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> = isize;   
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     printf(<span class="stringliteral">&quot;    Supernode statistics:\n\tno of super = %d\n&quot;</span>, nsuper+1);
<a name="l00327"></a>00327     printf(<span class="stringliteral">&quot;\tmax supernode size = %d\n&quot;</span>, <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a>);
<a name="l00328"></a>00328     printf(<span class="stringliteral">&quot;\tno of size 1 supernodes = %d\n&quot;</span>, nsup1);
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="comment">/* Histogram of the supernode sizes */</span>
<a name="l00331"></a>00331     <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#ae289773c377a566a2f77c88b21d7f4ae">ifill</a> (bucket, <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>, 0);
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     <span class="keywordflow">for</span> (i = 0; i &lt;= nsuper; i++) {
<a name="l00334"></a>00334         isize = xsup[i+1] - xsup[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];
<a name="l00335"></a>00335         whichb = (float) isize / <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> * <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>;
<a name="l00336"></a>00336         <span class="keywordflow">if</span> (whichb &gt;= <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>) whichb = <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a> - 1;
<a name="l00337"></a>00337         bucket[whichb]++;
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339     
<a name="l00340"></a>00340     printf(<span class="stringliteral">&quot;\tHistogram of supernode sizes:\n&quot;</span>);
<a name="l00341"></a>00341     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>; i++) {
<a name="l00342"></a>00342         bl = (float) i * <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> / NBUCKS;
<a name="l00343"></a>00343         bh = (float) (i+1) * <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a17dfd68739139149a72dfcbd88bcdf24">max_sup_size</a> / <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a70f31d2c4d8d0802751120e07028bd3a">NBUCKS</a>;
<a name="l00344"></a>00344         printf(<span class="stringliteral">&quot;\tsnode: %d-%d\t\t%d\n&quot;</span>, bl+1, bh, bucket[i]);
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a5789a3d7549a127e955680283ecfe44e">00350</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a5789a3d7549a127e955680283ecfe44e">SpaSize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> np, <span class="keywordtype">float</span> sum_npw)
<a name="l00351"></a>00351 {
<a name="l00352"></a>00352     <span class="keywordflow">return</span> (sum_npw*8 + np*8 + n*4)/1024.;
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a9daf07581bce8c0f5c879c5899ce419c">00355</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#a9daf07581bce8c0f5c879c5899ce419c">DenseSize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">float</span> sum_nw)
<a name="l00356"></a>00356 {
<a name="l00357"></a>00357     <span class="keywordflow">return</span> (sum_nw*8 + n*8)/1024.;;
<a name="l00358"></a>00358 }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 <span class="comment">/*</span>
<a name="l00363"></a>00363 <span class="comment"> * Check whether repfnz[] == EMPTY after reset.</span>
<a name="l00364"></a>00364 <span class="comment"> */</span>
<a name="l00365"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a9e29ce75ab694aa7fdb32b7644f9da69">00365</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#af27aecac055064fa7581c854848f7e7b">check_repfnz</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> jcol, <span class="keywordtype">int</span> *repfnz)
<a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <span class="keywordtype">int</span> jj, k;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="keywordflow">for</span> (jj = jcol; jj &lt; jcol+w; jj++) 
<a name="l00370"></a>00370     <span class="keywordflow">for</span> (k = 0; k &lt; n; k++)
<a name="l00371"></a>00371         <span class="keywordflow">if</span> ( repfnz[(jj-jcol)*n + k] != <a class="code" href="../../db/d97/OBSTACLE_8h.html#a635ddf654f4aa61672a262c09b92f644a2f0d18fc0d0fa4a6cd92dc328501874d">EMPTY</a> ) {
<a name="l00372"></a>00372         fprintf(stderr, <span class="stringliteral">&quot;col %d, repfnz_col[%d] = %d\n&quot;</span>, jj,
<a name="l00373"></a>00373             k, repfnz[(jj-jcol)*n + k]);
<a name="l00374"></a>00374         <a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#aa4b133a54309e2c6e4ba69f3ff1141c2">ABORT</a>(<span class="stringliteral">&quot;check_repfnz&quot;</span>);
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">/* Print a summary of the testing results. */</span>
<a name="l00380"></a>00380 <span class="keywordtype">void</span>
<a name="l00381"></a><a class="code" href="../../dd/d8b/intern_2opennl_2superlu_2util_8h.html#a47292875a12f5601efa82a4350656db8">00381</a> <a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#aa88c72f09a077ee18043edff386f4a2c">PrintSumm</a>(<span class="keywordtype">char</span> *type, <span class="keywordtype">int</span> nfail, <span class="keywordtype">int</span> nrun, <span class="keywordtype">int</span> nerrs)
<a name="l00382"></a>00382 {
<a name="l00383"></a>00383     <span class="keywordflow">if</span> ( nfail &gt; 0 )
<a name="l00384"></a>00384     printf(<span class="stringliteral">&quot;%3s driver: %d out of %d tests failed to pass the threshold\n&quot;</span>,
<a name="l00385"></a>00385            type, nfail, nrun);
<a name="l00386"></a>00386     <span class="keywordflow">else</span>
<a name="l00387"></a>00387     printf(<span class="stringliteral">&quot;All tests for %3s driver passed the threshold (%6d tests run)\n&quot;</span>, type, nrun);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="keywordflow">if</span> ( nerrs &gt; 0 )
<a name="l00390"></a>00390     printf(<span class="stringliteral">&quot;%6d error messages recorded\n&quot;</span>, nerrs);
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="../../d1/dc6/intern_2opennl_2superlu_2util_8c.html#aac67c35b47f2aa92a3202769d3eebdeb">00394</a> <span class="keywordtype">int</span> <a class="code" href="../../d9/d07/ssp__defs_8h.html#aac67c35b47f2aa92a3202769d3eebdeb">print_int_vec</a>(<span class="keywordtype">char</span> *what, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *vec)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l00397"></a>00397     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, what);
<a name="l00398"></a>00398     <span class="keywordflow">for</span> (i = 0; i &lt; n; ++<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) printf(<span class="stringliteral">&quot;%d\t%d\n&quot;</span>, i, vec[i]);
<a name="l00399"></a>00399     <span class="keywordflow">return</span> 0;
<a name="l00400"></a>00400 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:55:01 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
