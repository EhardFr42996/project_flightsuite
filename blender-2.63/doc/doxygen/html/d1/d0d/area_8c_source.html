<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: area.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">area.c</div>  </div>
</div>
<div class="contents">
<a href="../../d1/d0d/area_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version. </span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * The Original Code is Copyright (C) 2008 Blender Foundation.</span>
<a name="l00019"></a>00019 <span class="comment"> * All rights reserved.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * </span>
<a name="l00022"></a>00022 <span class="comment"> * Contributor(s): Blender Foundation</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00025"></a>00025 <span class="comment"> */</span>
<a name="l00026"></a>00026 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd0/MEM__guardedalloc_8h.html" title="Read Guarded memory(de)allocation.">MEM_guardedalloc.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/de4/DNA__userdef__types_8h.html">DNA_userdef_types.h</a>&quot;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/BLI__blenlib_8h.html">BLI_blenlib.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4b/BLI__math_8h.html">BLI_math.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d88/BLI__rand_8h.html" title="Random number functions.">BLI_rand.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/BLI__utildefines_8h.html">BLI_utildefines.h</a>&quot;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d61/BLF__translation_8h.html">BLF_translation.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d01/BKE__context_8h.html">BKE_context.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/BKE__global_8h.html">BKE_global.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/da3/BKE__screen_8h.html">BKE_screen.h</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7f/WM__api_8h.html">WM_api.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/ddc/WM__types_8h.html">WM_types.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d6f/wm__subwindow_8h.html">wm_subwindow.h</a>&quot;</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d12/ED__screen_8h.html">ED_screen.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d85/ED__screen__types_8h.html">ED_screen_types.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d5f/ED__space__api_8h.html">ED_space_api.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d7d/ED__types_8h.html">ED_types.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="../../db/db9/ED__fileselect_8h.html">ED_fileselect.h</a>&quot;</span> 
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d44/BIF__gl_8h.html">BIF_gl.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="../../d9/d71/BIF__glutil_8h.html">BIF_glutil.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d5d/BLF__api_8h.html">BLF_api.h</a>&quot;</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/UI__interface_8h.html">UI_interface.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d96/UI__resources_8h.html">UI_resources.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d63/UI__view2d_8h.html">UI_view2d.h</a>&quot;</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/de3/screen__intern_8h.html">screen_intern.h</a>&quot;</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="comment">/* general area and region code */</span>
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="../../d1/d0d/area_8c.html#a5ea131d19067fcd0cd5dd2a209e99cc8">00072</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a5ea131d19067fcd0cd5dd2a209e99cc8">region_draw_emboss</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d0/d28/structrcti.html">rcti</a> *scirct)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> rect;
<a name="l00075"></a>00075     
<a name="l00076"></a>00076     <span class="comment">/* translate scissor rect to region space */</span>
<a name="l00077"></a>00077     rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = scirct-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00078"></a>00078     rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = scirct-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00079"></a>00079     rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = scirct-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00080"></a>00080     rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = scirct-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00081"></a>00081     
<a name="l00082"></a>00082     <span class="comment">/* set transp line */</span>
<a name="l00083"></a>00083     glEnable( GL_BLEND );
<a name="l00084"></a>00084     glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );
<a name="l00085"></a>00085     
<a name="l00086"></a>00086     <span class="comment">/* right  */</span>
<a name="l00087"></a>00087     glColor4ub(0,0,0, 30);
<a name="l00088"></a>00088     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>);
<a name="l00089"></a>00089     
<a name="l00090"></a>00090     <span class="comment">/* bottom  */</span>
<a name="l00091"></a>00091     glColor4ub(0,0,0, 30);
<a name="l00092"></a>00092     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>);
<a name="l00093"></a>00093     
<a name="l00094"></a>00094     <span class="comment">/* top  */</span>
<a name="l00095"></a>00095     glColor4ub(255,255,255, 30);
<a name="l00096"></a>00096     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <span class="comment">/* left  */</span>
<a name="l00099"></a>00099     glColor4ub(255,255,255, 30);
<a name="l00100"></a>00100     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>);
<a name="l00101"></a>00101     
<a name="l00102"></a>00102     glDisable( GL_BLEND );
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="../../d1/d0d/area_8c.html#ae3ad3f41f93eb0c40ba3e7efe5253b34">00105</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a2c148e08841a7ffb64470f579a1b6658">ED_region_pixelspace</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107     <span class="keywordtype">int</span> width= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>-ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>+1;
<a name="l00108"></a>00108     <span class="keywordtype">int</span> height= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>-ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>+1;
<a name="l00109"></a>00109     
<a name="l00110"></a>00110     <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a61c7ead278c48a25b076ad7dfe186595">wmOrtho2</a>(-0.375f, (<span class="keywordtype">float</span>)width-0.375f, -0.375f, (<span class="keywordtype">float</span>)height-0.375f);
<a name="l00111"></a>00111     glLoadIdentity();
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">/* only exported for WM */</span>
<a name="l00115"></a><a class="code" href="../../d1/d0d/area_8c.html#a91e8d2e49af00eb4e61a24a8aee25e60">00115</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#afd9cb6fd3a47a4588d00602500cd4cfb">ED_region_do_listen</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d4/d07/structwmNotifier.html">wmNotifier</a> *note)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117     <span class="comment">/* generic notes first */</span>
<a name="l00118"></a>00118     <span class="keywordflow">switch</span>(note-&gt;<a class="code" href="../../d4/d07/structwmNotifier.html#a8d2543a915bef78c58c06b1cc765e2fd">category</a>) {
<a name="l00119"></a>00119         <span class="keywordflow">case</span> <a class="code" href="../../d4/ddc/WM__types_8h.html#a2401e8c966e41d3d8dec9d54fd68c630">NC_WM</a>:
<a name="l00120"></a>00120             <span class="keywordflow">if</span> (note-&gt;<a class="code" href="../../d4/d07/structwmNotifier.html#a0c5aedeba4ddcd19c9714f01e06a9a84">data</a>==<a class="code" href="../../d4/ddc/WM__types_8h.html#a166393c0222fcb6591ea603f36d8654c">ND_FILEREAD</a>)
<a name="l00121"></a>00121                 <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(ar);
<a name="l00122"></a>00122             <span class="keywordflow">break</span>;
<a name="l00123"></a>00123         <span class="keywordflow">case</span> <a class="code" href="../../d4/ddc/WM__types_8h.html#a0dce5c73d06bfc518c4c6b2189df325d">NC_WINDOW</a>:
<a name="l00124"></a>00124             <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(ar);
<a name="l00125"></a>00125             <span class="keywordflow">break</span>;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a> &amp;&amp; ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#af40dfa26b17422112dcf6b5a216e0326">listener</a>)
<a name="l00129"></a>00129         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#af40dfa26b17422112dcf6b5a216e0326">listener</a>(ar, note);
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="comment">/* only exported for WM */</span>
<a name="l00133"></a><a class="code" href="../../d1/d0d/area_8c.html#aac21fb3b10c3437b2d53ed58596b6991">00133</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a77e17cb49f42c8f3975f9ae89a0284b8">ED_area_do_listen</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d4/d07/structwmNotifier.html">wmNotifier</a> *note)
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135     <span class="comment">/* no generic notes? */</span>
<a name="l00136"></a>00136     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a> &amp;&amp; sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#ac5d56cacefe324cee0857b015ac5d0c6">listener</a>) {
<a name="l00137"></a>00137         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#ac5d56cacefe324cee0857b015ac5d0c6">listener</a>(sa, note);
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">/* only exported for WM */</span>
<a name="l00142"></a><a class="code" href="../../d1/d0d/area_8c.html#ada07796373546ebc15072bbc4d9262eb">00142</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a587db188a62ef706857926eca9cdaff3">ED_area_do_refresh</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa)
<a name="l00143"></a>00143 {
<a name="l00144"></a>00144     <span class="comment">/* no generic notes? */</span>
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a> &amp;&amp; sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#a608ef79a22d7f55cb4d5e7dc2dbf48a0">refresh</a>) {
<a name="l00146"></a>00146         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#a608ef79a22d7f55cb4d5e7dc2dbf48a0">refresh</a>(C, sa);
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148     sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ad5ba6eb55de1ca8200b4829a3fc1a566">do_refresh</a>= 0;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="comment">/* based on screen region draw tags, set draw tags in azones, and future region tabs etc */</span>
<a name="l00152"></a>00152 <span class="comment">/* only exported for WM */</span>
<a name="l00153"></a><a class="code" href="../../d1/d0d/area_8c.html#a2dd060e19fa9d91bf1fa1e85e40ee4ec">00153</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a721524a34389cc97d9c09323de8bf66b">ED_area_overdraw_flush</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az;
<a name="l00156"></a>00156     
<a name="l00157"></a>00157     <span class="keywordflow">for</span> (az= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; az; az= az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00158"></a>00158         <span class="keywordtype">int</span> xs, ys;
<a name="l00159"></a>00159         
<a name="l00160"></a>00160         xs= (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>)/2;
<a name="l00161"></a>00161         ys= (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>)/2;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163         <span class="comment">/* test if inside */</span>
<a name="l00164"></a>00164         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d44/BLI__rect_8h.html#a1242dd13fb888a0146765107474fffb4">BLI_in_rcti</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>, xs, ys)) {
<a name="l00165"></a>00165             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abc767c4d7fd6efb658defb1cbce7beaa">do_draw</a>= 1;
<a name="l00166"></a>00166         }
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="../../d1/d0d/area_8c.html#a4d2a567cbbc35261b8d72a8ffa118395">00170</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a4d2a567cbbc35261b8d72a8ffa118395">area_draw_azone</a>(<span class="keywordtype">short</span> x1, <span class="keywordtype">short</span> y1, <span class="keywordtype">short</span> x2, <span class="keywordtype">short</span> y2)
<a name="l00171"></a>00171 {
<a name="l00172"></a>00172     <span class="keywordtype">int</span> dx = x2 - x1;
<a name="l00173"></a>00173     <span class="keywordtype">int</span> dy = y2 - y1;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     dx= copysign(ceil(0.3f*<a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(dx)), dx);
<a name="l00176"></a>00176     dy= copysign(ceil(0.3f*<a class="code" href="../../d1/d22/stdosl_8h.html#a706cbf0492993ed1d280ccf8e9b56682">fabs</a>(dy)), dy);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     glEnable(GL_BLEND);
<a name="l00179"></a>00179     glEnable(GL_LINE_SMOOTH);
<a name="l00180"></a>00180     
<a name="l00181"></a>00181     glColor4ub(255, 255, 255, 180);
<a name="l00182"></a>00182     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2, x2, y1);
<a name="l00183"></a>00183     glColor4ub(255, 255, 255, 130);
<a name="l00184"></a>00184     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2-dy, x2-dx, y1);
<a name="l00185"></a>00185     glColor4ub(255, 255, 255, 80);
<a name="l00186"></a>00186     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2-2*dy, x2-2*dx, y1);
<a name="l00187"></a>00187     
<a name="l00188"></a>00188     glColor4ub(0, 0, 0, 210);
<a name="l00189"></a>00189     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2+1, x2+1, y1);
<a name="l00190"></a>00190     glColor4ub(0, 0, 0, 180);
<a name="l00191"></a>00191     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2-dy+1, x2-dx+1, y1);
<a name="l00192"></a>00192     glColor4ub(0, 0, 0, 150);
<a name="l00193"></a>00193     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#a7354f70d0e522da34583d29bbec4d194">fdrawline</a>(x1, y2-2*dy+1, x2-2*dx+1, y1);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     glDisable(GL_LINE_SMOOTH);
<a name="l00196"></a>00196     glDisable(GL_BLEND);
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="../../d1/d0d/area_8c.html#afefdb42577d50913d161cc67dddfe139">00199</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#afefdb42577d50913d161cc67dddfe139">region_draw_azone_icon</a>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az)
<a name="l00200"></a>00200 {
<a name="l00201"></a>00201     GLUquadricObj *qobj = <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; 
<a name="l00202"></a>00202     <span class="keywordtype">short</span> midx = az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a> + (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a> - az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>)/2;
<a name="l00203"></a>00203     <span class="keywordtype">short</span> midy = az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a> + (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a> - az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>)/2;
<a name="l00204"></a>00204         
<a name="l00205"></a>00205     qobj = gluNewQuadric();
<a name="l00206"></a>00206     
<a name="l00207"></a>00207     glPushMatrix();
<a name="l00208"></a>00208     glTranslatef(midx, midy, 0.0);
<a name="l00209"></a>00209     
<a name="l00210"></a>00210     <span class="comment">/* outlined circle */</span>
<a name="l00211"></a>00211     glEnable(GL_LINE_SMOOTH);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     glColor4f(1.f, 1.f, 1.f, 0.8f);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     gluQuadricDrawStyle(qobj, GLU_FILL); 
<a name="l00216"></a>00216     gluDisk( qobj, 0.0,  4.25f, 16, 1); 
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     glColor4f(0.2f, 0.2f, 0.2f, 0.9f);
<a name="l00219"></a>00219     
<a name="l00220"></a>00220     gluQuadricDrawStyle(qobj, GLU_SILHOUETTE); 
<a name="l00221"></a>00221     gluDisk( qobj, 0.0,  4.25f, 16, 1); 
<a name="l00222"></a>00222     
<a name="l00223"></a>00223     glDisable(GL_LINE_SMOOTH);
<a name="l00224"></a>00224     
<a name="l00225"></a>00225     glPopMatrix();
<a name="l00226"></a>00226     gluDeleteQuadric(qobj);
<a name="l00227"></a>00227     
<a name="l00228"></a>00228     <span class="comment">/* + */</span>
<a name="l00229"></a>00229     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(midx, midy-2, midx, midy+3);
<a name="l00230"></a>00230     <a class="code" href="../../d9/d71/BIF__glutil_8h.html#af04b403c3fb94451facdc3a4fca476fc">sdrawline</a>(midx-2, midy, midx+3, midy);
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a><a class="code" href="../../d1/d0d/area_8c.html#a34fd4d43497a7623011dcf3c6df60712">00233</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a34fd4d43497a7623011dcf3c6df60712">draw_azone_plus</a>(<span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> y1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y2)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235     <span class="keywordtype">float</span> width = 2.0f;
<a name="l00236"></a>00236     <span class="keywordtype">float</span> pad = 4.0f;
<a name="l00237"></a>00237     
<a name="l00238"></a>00238     glRectf((x1 + x2 - width)*0.5f, y1 + pad, (x1 + x2 + width)*0.5f, y2 - pad);
<a name="l00239"></a>00239     glRectf(x1 + pad, (y1 + y2 - width)*0.5f, (x1 + x2 - width)*0.5f, (y1 + y2 + width)*0.5f);
<a name="l00240"></a>00240     glRectf((x1 + x2 + width)*0.5f, (y1 + y2 - width)*0.5f, x2 - pad, (y1 + y2 + width)*0.5f);
<a name="l00241"></a>00241 }
<a name="l00242"></a>00242 
<a name="l00243"></a><a class="code" href="../../d1/d0d/area_8c.html#a3776cc2a501542e3b8e127bf0b6d4da3">00243</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a3776cc2a501542e3b8e127bf0b6d4da3">region_draw_azone_tab_plus</a>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az)
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245     <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>(<span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> y1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y2, <span class="keywordtype">float</span> x3, <span class="keywordtype">float</span> y3); <span class="comment">/* xxx temp */</span>
<a name="l00246"></a>00246     
<a name="l00247"></a>00247     glEnable(GL_BLEND);
<a name="l00248"></a>00248     
<a name="l00249"></a>00249     <span class="comment">/* add code to draw region hidden as &#39;too small&#39; */</span>
<a name="l00250"></a>00250     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00251"></a>00251         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00252"></a>00252             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba8caa5a82d9edf3edb0c7803ff59ccc65">UI_CNR_TOP_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649baa847b3b73afd0cc1dde8a31d8b4e3fce">UI_CNR_TOP_RIGHT</a>);
<a name="l00253"></a>00253             <span class="keywordflow">break</span>;
<a name="l00254"></a>00254         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00255"></a>00255             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba4faf5f6a673821f9b25ad6054e50a3a6">UI_CNR_BOTTOM_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba20182239f010b84a5902746abfe3bdc1">UI_CNR_BOTTOM_LEFT</a>);
<a name="l00256"></a>00256             <span class="keywordflow">break</span>;
<a name="l00257"></a>00257         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00258"></a>00258             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba8caa5a82d9edf3edb0c7803ff59ccc65">UI_CNR_TOP_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba20182239f010b84a5902746abfe3bdc1">UI_CNR_BOTTOM_LEFT</a>);
<a name="l00259"></a>00259             <span class="keywordflow">break</span>;
<a name="l00260"></a>00260         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00261"></a>00261             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649baa847b3b73afd0cc1dde8a31d8b4e3fce">UI_CNR_TOP_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba4faf5f6a673821f9b25ad6054e50a3a6">UI_CNR_BOTTOM_RIGHT</a>);
<a name="l00262"></a>00262             <span class="keywordflow">break</span>;
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     glColor4f(0.05f, 0.05f, 0.05f, 0.4f);
<a name="l00266"></a>00266     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a5dc97f8bfa5592225dc4966ae18fe85d">uiRoundBox</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     glEnable(GL_BLEND);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     glColor4f(0.8f, 0.8f, 0.8f, 0.4f);
<a name="l00271"></a>00271     <a class="code" href="../../d1/d0d/area_8c.html#a34fd4d43497a7623011dcf3c6df60712">draw_azone_plus</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     glDisable(GL_BLEND);
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="../../d1/d0d/area_8c.html#ac8512abf50d8ae33b7ff4adeee3b369a">00276</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#ac8512abf50d8ae33b7ff4adeee3b369a">region_draw_azone_tab</a>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az)
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278     <span class="keywordtype">float</span> col[3];
<a name="l00279"></a>00279     
<a name="l00280"></a>00280     glEnable(GL_BLEND);
<a name="l00281"></a>00281     <a class="code" href="../../de/d96/UI__resources_8h.html#a986d2ffa67e027bb858e453c1fd3d055">UI_GetThemeColor3fv</a>(<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a282ff0bc5b66affdd005fdf1a5b1b6d0">TH_HEADER</a>, col);
<a name="l00282"></a>00282     glColor4f(col[0], col[1], col[2], 0.5f);
<a name="l00283"></a>00283     
<a name="l00284"></a>00284     <span class="comment">/* add code to draw region hidden as &#39;too small&#39; */</span>
<a name="l00285"></a>00285     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00286"></a>00286         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00287"></a>00287             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba8caa5a82d9edf3edb0c7803ff59ccc65">UI_CNR_TOP_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649baa847b3b73afd0cc1dde8a31d8b4e3fce">UI_CNR_TOP_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#acf27afb01eaa6e7a6263ab874332e495">UI_RB_ALPHA</a>);
<a name="l00288"></a>00288             
<a name="l00289"></a>00289             <a class="code" href="../../d8/d1e/UI__interface_8h.html#abb6df941004869dc86d5a7d33c05f658">uiDrawBoxShade</a>(GL_POLYGON, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f, -0.3f, 0.05f);
<a name="l00290"></a>00290             glColor4ub(0, 0, 0, 255);
<a name="l00291"></a>00291             <a class="code" href="../../d8/d1e/UI__interface_8h.html#af3551ec134082184ab65e8ecad592d9a">uiRoundRect</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, 0.3f+(<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, 0.3f+(<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f);
<a name="l00292"></a>00292             <span class="keywordflow">break</span>;
<a name="l00293"></a>00293         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00294"></a>00294             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba4faf5f6a673821f9b25ad6054e50a3a6">UI_CNR_BOTTOM_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba20182239f010b84a5902746abfe3bdc1">UI_CNR_BOTTOM_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#acf27afb01eaa6e7a6263ab874332e495">UI_RB_ALPHA</a>);
<a name="l00295"></a>00295             
<a name="l00296"></a>00296             <a class="code" href="../../d8/d1e/UI__interface_8h.html#abb6df941004869dc86d5a7d33c05f658">uiDrawBoxShade</a>(GL_POLYGON, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f, -0.3f, 0.05f);
<a name="l00297"></a>00297             glColor4ub(0, 0, 0, 255);
<a name="l00298"></a>00298             <a class="code" href="../../d8/d1e/UI__interface_8h.html#af3551ec134082184ab65e8ecad592d9a">uiRoundRect</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, 0.3f+(<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, 0.3f+(<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f);
<a name="l00299"></a>00299             <span class="keywordflow">break</span>;
<a name="l00300"></a>00300         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00301"></a>00301             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba8caa5a82d9edf3edb0c7803ff59ccc65">UI_CNR_TOP_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba20182239f010b84a5902746abfe3bdc1">UI_CNR_BOTTOM_LEFT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#acf27afb01eaa6e7a6263ab874332e495">UI_RB_ALPHA</a>);
<a name="l00302"></a>00302             
<a name="l00303"></a>00303             <a class="code" href="../../d8/d1e/UI__interface_8h.html#abb6df941004869dc86d5a7d33c05f658">uiDrawBoxShade</a>(GL_POLYGON, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f, -0.3f, 0.05f);
<a name="l00304"></a>00304             glColor4ub(0, 0, 0, 255);
<a name="l00305"></a>00305             <a class="code" href="../../d8/d1e/UI__interface_8h.html#af3551ec134082184ab65e8ecad592d9a">uiRoundRect</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f);
<a name="l00306"></a>00306             <span class="keywordflow">break</span>;
<a name="l00307"></a>00307         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00308"></a>00308             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8fc510c8382c62a5af3a095e218d8f3d">uiSetRoundBox</a>(<a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649baa847b3b73afd0cc1dde8a31d8b4e3fce">UI_CNR_TOP_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab39a415800ebd0d977c477376649649ba4faf5f6a673821f9b25ad6054e50a3a6">UI_CNR_BOTTOM_RIGHT</a> | <a class="code" href="../../d8/d1e/UI__interface_8h.html#acf27afb01eaa6e7a6263ab874332e495">UI_RB_ALPHA</a>);
<a name="l00309"></a>00309             
<a name="l00310"></a>00310             <a class="code" href="../../d8/d1e/UI__interface_8h.html#abb6df941004869dc86d5a7d33c05f658">uiDrawBoxShade</a>(GL_POLYGON, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f, -0.3f, 0.05f);
<a name="l00311"></a>00311             glColor4ub(0, 0, 0, 255);
<a name="l00312"></a>00312             <a class="code" href="../../d8/d1e/UI__interface_8h.html#af3551ec134082184ab65e8ecad592d9a">uiRoundRect</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, 4.0f);
<a name="l00313"></a>00313             <span class="keywordflow">break</span>;
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315     
<a name="l00316"></a>00316     glDisable(GL_BLEND);
<a name="l00317"></a>00317 }
<a name="l00318"></a>00318 
<a name="l00319"></a><a class="code" href="../../d1/d0d/area_8c.html#af7a262d189f8819649ab3135632da1e6">00319</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#af7a262d189f8819649ab3135632da1e6">region_draw_azone_tria</a>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az)
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>(<span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> y1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y2, <span class="keywordtype">float</span> x3, <span class="keywordtype">float</span> y3); <span class="comment">/* xxx temp */</span>
<a name="l00322"></a>00322     
<a name="l00323"></a>00323     glEnable(GL_BLEND);
<a name="l00324"></a>00324     <span class="comment">//UI_GetThemeColor3fv(TH_HEADER, col);</span>
<a name="l00325"></a>00325     glColor4f(0.0f, 0.0f, 0.0f, 0.35f);
<a name="l00326"></a>00326     
<a name="l00327"></a>00327     <span class="comment">/* add code to draw region hidden as &#39;too small&#39; */</span>
<a name="l00328"></a>00328     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00329"></a>00329         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00330"></a>00330             <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>)/2, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00331"></a>00331             <span class="keywordflow">break</span>;
<a name="l00332"></a>00332             
<a name="l00333"></a>00333         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00334"></a>00334             <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, (<span class="keywordtype">float</span>)(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>)/2, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>);
<a name="l00335"></a>00335             <span class="keywordflow">break</span>;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00338"></a>00338             <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>)/2);
<a name="l00339"></a>00339             <span class="keywordflow">break</span>;
<a name="l00340"></a>00340             
<a name="l00341"></a>00341         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00342"></a>00342             <a class="code" href="../../d1/d2f/interface__intern_8h.html#a2dbe65ead723c54fa17780fc54807fd8">ui_draw_anti_tria</a>((<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>, (<span class="keywordtype">float</span>)az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, (<span class="keywordtype">float</span>)(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>+az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>)/2);
<a name="l00343"></a>00343             <span class="keywordflow">break</span>;
<a name="l00344"></a>00344             
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346     
<a name="l00347"></a>00347     glDisable(GL_BLEND);
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="comment">/* only exported for WM */</span>
<a name="l00351"></a><a class="code" href="../../d1/d0d/area_8c.html#a2dd003950240f05bc18b5fac884f7b15">00351</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a7b1ac2bbc701756abfd79bb59ccc698a">ED_area_overdraw</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>)
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353     <a class="code" href="../../dc/da4/structwmWindow.html">wmWindow</a> *win= <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C);
<a name="l00354"></a>00354     <a class="code" href="../../de/de7/structbScreen.html">bScreen</a> *screen= <a class="code" href="../../df/d01/BKE__context_8h.html#aa054e49f38f3c9becfebc4013ecf457f">CTX_wm_screen</a>(C);
<a name="l00355"></a>00355     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa;
<a name="l00356"></a>00356     
<a name="l00357"></a>00357     <span class="comment">/* Draw AZones, in screenspace */</span>
<a name="l00358"></a>00358     <a class="code" href="../../df/d4d/wm__subwindow_8c.html#ad5ef6e077c326a5b5e3647d24cf894c5">wmSubWindowSet</a>(win, screen-&gt;<a class="code" href="../../de/de7/structbScreen.html#ad5d8a3070981c34f7f17649a7728080d">mainwin</a>);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     glEnable( GL_BLEND );
<a name="l00361"></a>00361     glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );
<a name="l00362"></a>00362     
<a name="l00363"></a>00363     <span class="keywordflow">for</span> (sa= screen-&gt;<a class="code" href="../../de/de7/structbScreen.html#ae2f4a800c4c58fe953d91fe8136a0d0f">areabase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; sa; sa= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a884b59339f5c0d55408f8727bfc799b7">next</a>) {
<a name="l00364"></a>00364         <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az;
<a name="l00365"></a>00365         <span class="keywordflow">for</span> (az= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; az; az= az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00366"></a>00366             <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abc767c4d7fd6efb658defb1cbce7beaa">do_draw</a>) {
<a name="l00367"></a>00367                 <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a396c201c32f6002fb549726586b8b480">type</a>==<a class="code" href="../../d1/d85/ED__screen__types_8h.html#a045bd71c179c59e786eb4e3cd384e423">AZONE_AREA</a>) {
<a name="l00368"></a>00368                     <a class="code" href="../../d1/d0d/area_8c.html#a4d2a567cbbc35261b8d72a8ffa118395">area_draw_azone</a>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00369"></a>00369                 }
<a name="l00370"></a>00370                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a396c201c32f6002fb549726586b8b480">type</a>==<a class="code" href="../../d1/d85/ED__screen__types_8h.html#a7a79069a208a479cdd52f066db18a775">AZONE_REGION</a>) {
<a name="l00371"></a>00371                     
<a name="l00372"></a>00372                     <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abcf6186b7c50b07c17df695cc776cad5">ar</a>) {
<a name="l00373"></a>00373                         <span class="comment">/* only display tab or icons when the region is hidden */</span>
<a name="l00374"></a>00374                         <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abcf6186b7c50b07c17df695cc776cad5">ar</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; (<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>|<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>)) {
<a name="l00375"></a>00375                             <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==3)
<a name="l00376"></a>00376                                 <a class="code" href="../../d1/d0d/area_8c.html#afefdb42577d50913d161cc67dddfe139">region_draw_azone_icon</a>(az);
<a name="l00377"></a>00377                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==2)
<a name="l00378"></a>00378                                 <a class="code" href="../../d1/d0d/area_8c.html#af7a262d189f8819649ab3135632da1e6">region_draw_azone_tria</a>(az);
<a name="l00379"></a>00379                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==1)
<a name="l00380"></a>00380                                 <a class="code" href="../../d1/d0d/area_8c.html#ac8512abf50d8ae33b7ff4adeee3b369a">region_draw_azone_tab</a>(az);
<a name="l00381"></a>00381                             <span class="keywordflow">else</span>
<a name="l00382"></a>00382                                 <a class="code" href="../../d1/d0d/area_8c.html#a3776cc2a501542e3b8e127bf0b6d4da3">region_draw_azone_tab_plus</a>(az);
<a name="l00383"></a>00383                         }
<a name="l00384"></a>00384                     }
<a name="l00385"></a>00385                 }
<a name="l00386"></a>00386                 
<a name="l00387"></a>00387                 az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abc767c4d7fd6efb658defb1cbce7beaa">do_draw</a>= 0;
<a name="l00388"></a>00388             }
<a name="l00389"></a>00389         }
<a name="l00390"></a>00390     }   
<a name="l00391"></a>00391     glDisable( GL_BLEND );
<a name="l00392"></a>00392     
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">/* get scissor rect, checking overlapping regions */</span>
<a name="l00396"></a><a class="code" href="../../d1/d0d/area_8c.html#a77dc8adb7cc8c92d007b0b750f5fd68a">00396</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ab8d29f0c43d7e2e8e7f0b69de1d914d6">region_scissor_winrct</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d0/d28/structrcti.html">rcti</a> *winrct)
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398     *winrct= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>;
<a name="l00399"></a>00399     
<a name="l00400"></a>00400     <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#aaabf066599c68eb0ccf92bb853e24dcb">RGN_OVERLAP_LEFT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>))
<a name="l00401"></a>00401         <span class="keywordflow">return</span>;
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="keywordflow">while</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>) {
<a name="l00404"></a>00404         ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>;
<a name="l00405"></a>00405         
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d44/BLI__rect_8h.html#abefa6d62a6bf5021bb1567112c87fd09">BLI_isect_rcti</a>(winrct, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {
<a name="l00407"></a>00407             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>);
<a name="l00408"></a>00408             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a8a5e3e090a3f96966048a2082a3ad8bb">RGN_SPLIT_PREV</a>);
<a name="l00409"></a>00409             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#aaabf066599c68eb0ccf92bb853e24dcb">RGN_OVERLAP_LEFT</a>) {
<a name="l00410"></a>00410                 winrct-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> + 1;
<a name="l00411"></a>00411             }
<a name="l00412"></a>00412             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>) {
<a name="l00413"></a>00413                 winrct-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - 1;
<a name="l00414"></a>00414             }
<a name="l00415"></a>00415             <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">/* only exported for WM */</span>
<a name="l00421"></a>00421 <span class="comment">/* makes region ready for drawing, sets pixelspace */</span>
<a name="l00422"></a><a class="code" href="../../d1/d0d/area_8c.html#a4d6afef3e919879375fb46d165fe7e61">00422</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a384533457436606d8baca34dd381353f">ED_region_set</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424     <a class="code" href="../../dc/da4/structwmWindow.html">wmWindow</a> *win= <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C);
<a name="l00425"></a>00425     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l00426"></a>00426     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> winrct;
<a name="l00427"></a>00427     
<a name="l00428"></a>00428     <span class="comment">/* checks other overlapping regions */</span>
<a name="l00429"></a>00429     <a class="code" href="../../d1/d12/ED__screen_8h.html#ab8d29f0c43d7e2e8e7f0b69de1d914d6">region_scissor_winrct</a>(ar, &amp;winrct);
<a name="l00430"></a>00430     
<a name="l00431"></a>00431     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>= winrct;
<a name="l00432"></a>00432     
<a name="l00433"></a>00433     <span class="comment">/* note; this sets state, so we can use wmOrtho and friends */</span>
<a name="l00434"></a>00434     <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a88b8167bfe6185b263490b8b5b2bd1f7">wmSubWindowScissorSet</a>(win, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>);
<a name="l00435"></a>00435     
<a name="l00436"></a>00436     <a class="code" href="../../de/d96/UI__resources_8h.html#adaa58e333fb7f25108c846723ad2fa72">UI_SetTheme</a>(sa?sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>:0, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>?ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#adc963cf5301f7c166227476bd6007351">regionid</a>:0);
<a name="l00437"></a>00437     
<a name="l00438"></a>00438     <a class="code" href="../../d1/d12/ED__screen_8h.html#a2c148e08841a7ffb64470f579a1b6658">ED_region_pixelspace</a>(ar);
<a name="l00439"></a>00439 }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 <span class="comment">/* only exported for WM */</span>
<a name="l00443"></a><a class="code" href="../../d1/d0d/area_8c.html#a26701bb5c7ae87937691c72dd3a98ac5">00443</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a3755d70cbef405fe1dee83da9c8435c9">ED_region_do_draw</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00444"></a>00444 {
<a name="l00445"></a>00445     <a class="code" href="../../dc/da4/structwmWindow.html">wmWindow</a> *win= <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C);
<a name="l00446"></a>00446     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l00447"></a>00447     <a class="code" href="../../d7/da9/structARegionType.html">ARegionType</a> *at= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>;
<a name="l00448"></a>00448     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> winrct;
<a name="l00449"></a>00449     
<a name="l00450"></a>00450     <span class="comment">/* see BKE_spacedata_draw_locks() */</span>
<a name="l00451"></a>00451     <span class="keywordflow">if</span> (at-&gt;<a class="code" href="../../d7/da9/structARegionType.html#af7009b76b200f0831f8baa676fce6f17">do_lock</a>)
<a name="l00452"></a>00452         <span class="keywordflow">return</span>;
<a name="l00453"></a>00453     
<a name="l00454"></a>00454     <span class="comment">/* checks other overlapping regions */</span>
<a name="l00455"></a>00455     <a class="code" href="../../d1/d12/ED__screen_8h.html#ab8d29f0c43d7e2e8e7f0b69de1d914d6">region_scissor_winrct</a>(ar, &amp;winrct);
<a name="l00456"></a>00456     
<a name="l00457"></a>00457     <span class="comment">/* if no partial draw rect set, full rect */</span>
<a name="l00458"></a>00458     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> == ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)
<a name="l00459"></a>00459         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>= winrct;
<a name="l00460"></a>00460     <span class="keywordflow">else</span> {
<a name="l00461"></a>00461         <span class="comment">/* extra clip for safety */</span>
<a name="l00462"></a>00462         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(winrct.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>);
<a name="l00463"></a>00463         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(winrct.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>);
<a name="l00464"></a>00464         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#af5febfb026bad0c08e7a9f7ab7c2b8f0">MIN2</a>(winrct.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>);
<a name="l00465"></a>00465         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#af5febfb026bad0c08e7a9f7ab7c2b8f0">MIN2</a>(winrct.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>);
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467     
<a name="l00468"></a>00468     <span class="comment">/* note; this sets state, so we can use wmOrtho and friends */</span>
<a name="l00469"></a>00469     <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a88b8167bfe6185b263490b8b5b2bd1f7">wmSubWindowScissorSet</a>(win, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>);
<a name="l00470"></a>00470     
<a name="l00471"></a>00471     <a class="code" href="../../de/d96/UI__resources_8h.html#adaa58e333fb7f25108c846723ad2fa72">UI_SetTheme</a>(sa?sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>:0, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>?ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#adc963cf5301f7c166227476bd6007351">regionid</a>:0);
<a name="l00472"></a>00472     
<a name="l00473"></a>00473     <span class="comment">/* optional header info instead? */</span>
<a name="l00474"></a>00474     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>) {
<a name="l00475"></a>00475         <a class="code" href="../../de/d96/UI__resources_8h.html#a726a719a5a3b6b944d24fbcab8ed29c6">UI_ThemeClearColor</a>(<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a282ff0bc5b66affdd005fdf1a5b1b6d0">TH_HEADER</a>);
<a name="l00476"></a>00476         glClear(GL_COLOR_BUFFER_BIT);
<a name="l00477"></a>00477         
<a name="l00478"></a>00478         <a class="code" href="../../de/d96/UI__resources_8h.html#af31db5d1a7c8b15e6e8a008482426f3a">UI_ThemeColor</a>(<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531ade800b14585ec3bc83905fe667484c4b">TH_TEXT</a>);
<a name="l00479"></a>00479         <a class="code" href="../../df/d5d/BLF__api_8h.html#a9b623b39b9d6f9049b0777f431d8e76e">BLF_draw_default</a>(20, 8, 0.0f, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>, <a class="code" href="../../df/d5d/BLF__api_8h.html#a7bf31f56b0fb94dd7ce4c8c7178ed436">BLF_DRAW_STR_DUMMY_MAX</a>);
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (at-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a2733a2a01ced2989eda7b8bd856822ff">draw</a>) {
<a name="l00482"></a>00482         at-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a2733a2a01ced2989eda7b8bd856822ff">draw</a>(C, ar);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <span class="comment">/* XXX test: add convention to end regions always in pixel space, for drawing of borders/gestures etc */</span>
<a name="l00486"></a>00486     <a class="code" href="../../d1/d12/ED__screen_8h.html#a2c148e08841a7ffb64470f579a1b6658">ED_region_pixelspace</a>(ar);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <a class="code" href="../../d0/d5f/ED__space__api_8h.html#a41326a4e6f68c93133ddffa468c2705b">ED_region_draw_cb_draw</a>(C, ar, <a class="code" href="../../d0/d5f/ED__space__api_8h.html#aabcb5bd755a601a5c2d662858b74505b">REGION_DRAW_POST_PIXEL</a>);
<a name="l00489"></a>00489 
<a name="l00490"></a>00490     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a4c516955ae19ced48acf70245d6269a8">do_draw</a>= 0;
<a name="l00491"></a>00491     memset(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>, 0, <span class="keyword">sizeof</span>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>));
<a name="l00492"></a>00492     
<a name="l00493"></a>00493     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a7d12ce0dd2c5b0bcf57c7ac787506e06">uiFreeInactiveBlocks</a>(C, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#afbd94c7a138066b4e773e9d3401b0d87">uiblocks</a>);
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="keywordflow">if</span> (sa)
<a name="l00496"></a>00496         <a class="code" href="../../d1/d0d/area_8c.html#a5ea131d19067fcd0cd5dd2a209e99cc8">region_draw_emboss</a>(ar, &amp;winrct);
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 <span class="comment">/* **********************************</span>
<a name="l00500"></a>00500 <span class="comment"> * maybe silly, but let&#39;s try for now</span>
<a name="l00501"></a>00501 <span class="comment"> * to keep these tags protected</span>
<a name="l00502"></a>00502 <span class="comment"> * ********************************** */</span>
<a name="l00503"></a>00503 
<a name="l00504"></a><a class="code" href="../../d1/d0d/area_8c.html#a383220a8a9841d31dd2b0ed39da83b00">00504</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506     <span class="keywordflow">if</span> (ar) {
<a name="l00507"></a>00507         <span class="comment">/* zero region means full region redraw */</span>
<a name="l00508"></a>00508         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a4c516955ae19ced48acf70245d6269a8">do_draw</a>= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a205e271fe7cdd876b42cebab2838f446">RGN_DRAW</a>;
<a name="l00509"></a>00509         memset(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>, 0, <span class="keyword">sizeof</span>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>));
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="../../d1/d0d/area_8c.html#ac6e8addbb8c5322462fef139fba8034e">00513</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a3b439fcda0166f7507bbd49563172827">ED_region_tag_redraw_overlay</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00514"></a>00514 {
<a name="l00515"></a>00515     <span class="keywordflow">if</span> (ar)
<a name="l00516"></a>00516         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a436743ee98031a0330f1fb32b8e56a3e">do_draw_overlay</a>= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a205e271fe7cdd876b42cebab2838f446">RGN_DRAW</a>;
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a><a class="code" href="../../d1/d0d/area_8c.html#ad7c07fb707ec66d03cdd6fef476e9456">00519</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a6e7f29f8635d3fb2123e9141152a2b3c">ED_region_tag_redraw_partial</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d0/d28/structrcti.html">rcti</a> *rct)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521     <span class="keywordflow">if</span> (ar) {
<a name="l00522"></a>00522         <span class="keywordflow">if</span> (!ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a4c516955ae19ced48acf70245d6269a8">do_draw</a>) {
<a name="l00523"></a>00523             <span class="comment">/* no redraw set yet, set partial region */</span>
<a name="l00524"></a>00524             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a4c516955ae19ced48acf70245d6269a8">do_draw</a>= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a10040b224eaa3cfe15444fdf2c01dcb8">RGN_DRAW_PARTIAL</a>;
<a name="l00525"></a>00525             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>= *rct;
<a name="l00526"></a>00526         }
<a name="l00527"></a>00527         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> != ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>) {
<a name="l00528"></a>00528             <span class="comment">/* partial redraw already set, expand region */</span>
<a name="l00529"></a>00529             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#af5febfb026bad0c08e7a9f7ab7c2b8f0">MIN2</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rct-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>);
<a name="l00530"></a>00530             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#af5febfb026bad0c08e7a9f7ab7c2b8f0">MIN2</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, rct-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>);
<a name="l00531"></a>00531             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>, rct-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>);
<a name="l00532"></a>00532             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6b1b9df40c2ced94c635a1cbfe92fcd4">drawrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>, rct-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>);
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 }
<a name="l00536"></a>00536 
<a name="l00537"></a><a class="code" href="../../d1/d0d/area_8c.html#a0982c011d985308b08320d5f9604418b">00537</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa)
<a name="l00538"></a>00538 {
<a name="l00539"></a>00539     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l00540"></a>00540     
<a name="l00541"></a>00541     <span class="keywordflow">if</span> (sa)
<a name="l00542"></a>00542         <span class="keywordflow">for</span> (ar= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>)
<a name="l00543"></a>00543             <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(ar);
<a name="l00544"></a>00544 }
<a name="l00545"></a>00545 
<a name="l00546"></a><a class="code" href="../../d1/d0d/area_8c.html#aaa8b2e5ef8eea2743996aaeee6507843">00546</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a073feea7645bc6fffd331c7f1d2d5ae3">ED_area_tag_redraw_regiontype</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <span class="keywordtype">int</span> regiontype)
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l00549"></a>00549     
<a name="l00550"></a>00550     <span class="keywordflow">if</span> (sa) {
<a name="l00551"></a>00551         <span class="keywordflow">for</span> (ar= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>) {
<a name="l00552"></a>00552             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a> == regiontype) {
<a name="l00553"></a>00553                 <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(ar);
<a name="l00554"></a>00554             }
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00559"></a><a class="code" href="../../d1/d0d/area_8c.html#ae9072acfc70f13e6379261f68f49c691">00559</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ae9072acfc70f13e6379261f68f49c691">ED_area_tag_refresh</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa)
<a name="l00560"></a>00560 {
<a name="l00561"></a>00561     <span class="keywordflow">if</span> (sa)
<a name="l00562"></a>00562         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ad5ba6eb55de1ca8200b4829a3fc1a566">do_refresh</a>= 1;
<a name="l00563"></a>00563 }
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 <span class="comment">/* *************************************************************** */</span>
<a name="l00566"></a>00566 
<a name="l00567"></a>00567 <span class="comment">/* use NULL to disable it */</span>
<a name="l00568"></a><a class="code" href="../../d1/d0d/area_8c.html#a3899c7d0aebef9cc11992a7de3e5f397">00568</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a3899c7d0aebef9cc11992a7de3e5f397">ED_area_headerprint</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/d36/interface__layout_8c.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)
<a name="l00569"></a>00569 {
<a name="l00570"></a>00570     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l00571"></a>00571 
<a name="l00572"></a>00572     <span class="comment">/* happens when running transform operators in backround mode */</span>
<a name="l00573"></a>00573     <span class="keywordflow">if</span> (sa == <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00574"></a>00574         <span class="keywordflow">return</span>;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="keywordflow">for</span> (ar= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>) {
<a name="l00577"></a>00577         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2ab7e0b51ce129a8b256dc705a06c4c4e8">RGN_TYPE_HEADER</a>) {
<a name="l00578"></a>00578             <span class="keywordflow">if</span> (str) {
<a name="l00579"></a>00579                 <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00580"></a>00580                     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>= <a class="code" href="../../da/d2b/mallocn_8c.html#a2bfff00be1f0c49f1945b5d6f66af243">MEM_mallocN</a>(256, <span class="stringliteral">&quot;headerprint&quot;</span>);
<a name="l00581"></a>00581                 <a class="code" href="../../d3/db3/BLI__string_8h.html#a98d7c9cb4a81dbe506d1972b306300ce">BLI_strncpy</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>, str, 256);
<a name="l00582"></a>00582             }
<a name="l00583"></a>00583             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>) {
<a name="l00584"></a>00584                 <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>);
<a name="l00585"></a>00585                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f69b2410135b3a2ad6badb912132ce2">headerstr</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00586"></a>00586             }
<a name="l00587"></a>00587             <a class="code" href="../../d1/d12/ED__screen_8h.html#ac6cfac9a218d316df5b76e7fe0f89967">ED_region_tag_redraw</a>(ar);
<a name="l00588"></a>00588         }
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592 <span class="comment">/* ************************************************************ */</span>
<a name="l00593"></a>00593 
<a name="l00594"></a>00594 
<a name="l00595"></a><a class="code" href="../../d1/d0d/area_8c.html#a6ee8037799bf4a4652267026a2effbd4">00595</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a6ee8037799bf4a4652267026a2effbd4">area_azone_initialize</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa) 
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az;
<a name="l00598"></a>00598     
<a name="l00599"></a>00599     <span class="comment">/* reinitalize entirely, regions add azones too */</span>
<a name="l00600"></a>00600     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#af94280dc0a245719304fdff91327b1e0">BLI_freelistN</a>(&amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>);
<a name="l00601"></a>00601     
<a name="l00602"></a>00602     <span class="comment">/* set area action zones */</span>
<a name="l00603"></a>00603     az= (<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *)<a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a>), <span class="stringliteral">&quot;actionzone&quot;</span>);
<a name="l00604"></a>00604     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>), az);
<a name="l00605"></a>00605     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a396c201c32f6002fb549726586b8b480">type</a>= <a class="code" href="../../d1/d85/ED__screen__types_8h.html#a045bd71c179c59e786eb4e3cd384e423">AZONE_AREA</a>;
<a name="l00606"></a>00606     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - 1;
<a name="l00607"></a>00607     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - 1;
<a name="l00608"></a>00608     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + (<a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>-1);
<a name="l00609"></a>00609     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + (<a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>-1);
<a name="l00610"></a>00610     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00611"></a>00611     
<a name="l00612"></a>00612     az= (<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *)<a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a>), <span class="stringliteral">&quot;actionzone&quot;</span>);
<a name="l00613"></a>00613     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>), az);
<a name="l00614"></a>00614     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a396c201c32f6002fb549726586b8b480">type</a>= <a class="code" href="../../d1/d85/ED__screen__types_8h.html#a045bd71c179c59e786eb4e3cd384e423">AZONE_AREA</a>;
<a name="l00615"></a>00615     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> + 1;
<a name="l00616"></a>00616     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> + 1;
<a name="l00617"></a>00617     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - (<a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>-1);
<a name="l00618"></a>00618     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - (<a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>-1);
<a name="l00619"></a>00619     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00620"></a>00620 }
<a name="l00621"></a>00621 
<a name="l00622"></a><a class="code" href="../../d1/d0d/area_8c.html#aba5c1040cd2c1dd6f473d23f7ea44ba1">00622</a> <span class="preprocessor">#define AZONEPAD_EDGE   4</span>
<a name="l00623"></a><a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">00623</a> <span class="preprocessor"></span><span class="preprocessor">#define AZONEPAD_ICON   9</span>
<a name="l00624"></a><a class="code" href="../../d1/d0d/area_8c.html#a213bab3eff826282bdb20d0080d6c24a">00624</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a213bab3eff826282bdb20d0080d6c24a">region_azone_edge</a>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00627"></a>00627         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00628"></a>00628             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00629"></a>00629             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../d1/d0d/area_8c.html#aba5c1040cd2c1dd6f473d23f7ea44ba1">AZONEPAD_EDGE</a>;
<a name="l00630"></a>00630             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>;
<a name="l00631"></a>00631             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>;
<a name="l00632"></a>00632             <span class="keywordflow">break</span>;
<a name="l00633"></a>00633         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00634"></a>00634             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00635"></a>00635             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + <a class="code" href="../../d1/d0d/area_8c.html#aba5c1040cd2c1dd6f473d23f7ea44ba1">AZONEPAD_EDGE</a>;
<a name="l00636"></a>00636             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>;
<a name="l00637"></a>00637             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00638"></a>00638             <span class="keywordflow">break</span>;
<a name="l00639"></a>00639         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00640"></a>00640             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00641"></a>00641             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00642"></a>00642             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + <a class="code" href="../../d1/d0d/area_8c.html#aba5c1040cd2c1dd6f473d23f7ea44ba1">AZONEPAD_EDGE</a>;
<a name="l00643"></a>00643             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>;
<a name="l00644"></a>00644             <span class="keywordflow">break</span>;
<a name="l00645"></a>00645         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00646"></a>00646             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>;
<a name="l00647"></a>00647             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00648"></a>00648             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - <a class="code" href="../../d1/d0d/area_8c.html#aba5c1040cd2c1dd6f473d23f7ea44ba1">AZONEPAD_EDGE</a>;
<a name="l00649"></a>00649             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>;
<a name="l00650"></a>00650             <span class="keywordflow">break</span>;
<a name="l00651"></a>00651     }
<a name="l00652"></a>00652 
<a name="l00653"></a>00653     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00654"></a>00654 }
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="../../d1/d0d/area_8c.html#afbb6393fb92ecabe585c455e17d8bcbf">00656</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#afbb6393fb92ecabe585c455e17d8bcbf">region_azone_icon</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00657"></a>00657 {
<a name="l00658"></a>00658     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *azt;
<a name="l00659"></a>00659     <span class="keywordtype">int</span> tot=0;
<a name="l00660"></a>00660     
<a name="l00661"></a>00661     <span class="comment">/* count how many actionzones with along same edge are available.</span>
<a name="l00662"></a>00662 <span class="comment">     * This allows for adding more action zones in the future without</span>
<a name="l00663"></a>00663 <span class="comment">     * having to worry about correct offset */</span>
<a name="l00664"></a>00664     <span class="keywordflow">for</span> (azt= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; azt; azt= azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00665"></a>00665         <span class="keywordflow">if</span> (azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a> == az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) tot++;
<a name="l00666"></a>00666     }
<a name="l00667"></a>00667     
<a name="l00668"></a>00668     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00669"></a>00669         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00670"></a>00670             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - tot*2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00671"></a>00671             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> + <a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00672"></a>00672             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - tot*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00673"></a>00673             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> + 2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00674"></a>00674             <span class="keywordflow">break</span>;
<a name="l00675"></a>00675         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00676"></a>00676             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + <a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00677"></a>00677             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00678"></a>00678             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00679"></a>00679             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - <a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00680"></a>00680             <span class="keywordflow">break</span>;
<a name="l00681"></a>00681         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00682"></a>00682             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00683"></a>00683             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - tot*2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00684"></a>00684             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - <a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00685"></a>00685             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - tot*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00686"></a>00686             <span class="keywordflow">break</span>;
<a name="l00687"></a>00687         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00688"></a>00688             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> + <a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00689"></a>00689             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - tot*2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00690"></a>00690             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> + 2*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00691"></a>00691             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - tot*<a class="code" href="../../d1/d0d/area_8c.html#a5fe65867a18def95f9dffac5b84f953e">AZONEPAD_ICON</a>;
<a name="l00692"></a>00692             <span class="keywordflow">break</span>;
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00696"></a>00696     
<a name="l00697"></a>00697     <span class="comment">/* if more azones on 1 spot, set offset */</span>
<a name="l00698"></a>00698     <span class="keywordflow">for</span> (azt= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; azt; azt= azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00699"></a>00699         <span class="keywordflow">if</span> (az!=azt) {
<a name="l00700"></a>00700             <span class="keywordflow">if</span> ( <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ae2f08dc603ae93c402abd918ba4e23e1">ABS</a>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>-azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>) &lt; 2 &amp;&amp; <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#ae2f08dc603ae93c402abd918ba4e23e1">ABS</a>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>-azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>) &lt; 2) {
<a name="l00701"></a>00701                 <span class="keywordflow">if</span> (az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>==<a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a> || az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>==<a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>) {
<a name="l00702"></a>00702                     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>+= <a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>;
<a name="l00703"></a>00703                     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>+= <a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>;
<a name="l00704"></a>00704                 }
<a name="l00705"></a>00705                 <span class="keywordflow">else</span> {
<a name="l00706"></a>00706                     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>-= <a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>;
<a name="l00707"></a>00707                     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>-= <a class="code" href="../../d7/de3/screen__intern_8h.html#ab29158f60e9d20f2cf8ce2c1a34e2f9b">AZONESPOT</a>;
<a name="l00708"></a>00708                 }
<a name="l00709"></a>00709                 <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00710"></a>00710             }
<a name="l00711"></a>00711         }
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713 }
<a name="l00714"></a>00714 
<a name="l00715"></a><a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">00715</a> <span class="preprocessor">#define AZONEPAD_TAB_PLUSW  14</span>
<a name="l00716"></a><a class="code" href="../../d1/d0d/area_8c.html#adcb981de88df2e653dda06c0239f7ef9">00716</a> <span class="preprocessor"></span><span class="preprocessor">#define AZONEPAD_TAB_PLUSH  14</span>
<a name="l00717"></a>00717 <span class="preprocessor"></span>
<a name="l00718"></a>00718 <span class="comment">/* region already made zero sized, in shape of edge */</span>
<a name="l00719"></a><a class="code" href="../../d1/d0d/area_8c.html#a417b0161d7ed7a5335933646c02ad5a7">00719</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a417b0161d7ed7a5335933646c02ad5a7">region_azone_tab_plus</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *azt;
<a name="l00722"></a>00722     <span class="keywordtype">int</span> tot= 0, <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00723"></a>00723     
<a name="l00724"></a>00724     <span class="keywordflow">for</span> (azt= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; azt; azt= azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00725"></a>00725         <span class="keywordflow">if</span> (azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a> == az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) tot++;
<a name="l00726"></a>00726     }
<a name="l00727"></a>00727     
<a name="l00728"></a>00728     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00729"></a>00729         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00730"></a>00730             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> == sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>) <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 1; <span class="keywordflow">else</span> <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 0;
<a name="l00731"></a>00731             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 2.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00732"></a>00732             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00733"></a>00733             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00734"></a>00734             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a> + <a class="code" href="../../d1/d0d/area_8c.html#adcb981de88df2e653dda06c0239f7ef9">AZONEPAD_TAB_PLUSH</a>;
<a name="l00735"></a>00735             <span class="keywordflow">break</span>;
<a name="l00736"></a>00736         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00737"></a>00737             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 2.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00738"></a>00738             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - <a class="code" href="../../d1/d0d/area_8c.html#adcb981de88df2e653dda06c0239f7ef9">AZONEPAD_TAB_PLUSH</a>;
<a name="l00739"></a>00739             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00740"></a>00740             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00741"></a>00741             <span class="keywordflow">break</span>;
<a name="l00742"></a>00742         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00743"></a>00743             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - <a class="code" href="../../d1/d0d/area_8c.html#adcb981de88df2e653dda06c0239f7ef9">AZONEPAD_TAB_PLUSH</a>;
<a name="l00744"></a>00744             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00745"></a>00745             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l00746"></a>00746             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 1.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00747"></a>00747             <span class="keywordflow">break</span>;
<a name="l00748"></a>00748         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00749"></a>00749             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1;
<a name="l00750"></a>00750             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00751"></a>00751             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1 + <a class="code" href="../../d1/d0d/area_8c.html#adcb981de88df2e653dda06c0239f7ef9">AZONEPAD_TAB_PLUSH</a>;
<a name="l00752"></a>00752             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 1.5*<a class="code" href="../../d1/d0d/area_8c.html#ac1fc8e36acd873a28e2742c93e1be127">AZONEPAD_TAB_PLUSW</a>;
<a name="l00753"></a>00753             <span class="keywordflow">break</span>;
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755     <span class="comment">/* rect needed for mouse pointer test */</span>
<a name="l00756"></a>00756     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00757"></a>00757 }   
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 
<a name="l00760"></a><a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">00760</a> <span class="preprocessor">#define AZONEPAD_TABW   18</span>
<a name="l00761"></a><a class="code" href="../../d1/d0d/area_8c.html#a05dff359065bb209fefafc87c94fd03d">00761</a> <span class="preprocessor"></span><span class="preprocessor">#define AZONEPAD_TABH   7</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>
<a name="l00763"></a>00763 <span class="comment">/* region already made zero sized, in shape of edge */</span>
<a name="l00764"></a><a class="code" href="../../d1/d0d/area_8c.html#a0839241073eaeb38bcecdf9b8e467113">00764</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a0839241073eaeb38bcecdf9b8e467113">region_azone_tab</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00765"></a>00765 {
<a name="l00766"></a>00766     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *azt;
<a name="l00767"></a>00767     <span class="keywordtype">int</span> tot= 0, <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00768"></a>00768     
<a name="l00769"></a>00769     <span class="keywordflow">for</span> (azt= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; azt; azt= azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00770"></a>00770         <span class="keywordflow">if</span> (azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a> == az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) tot++;
<a name="l00771"></a>00771     }
<a name="l00772"></a>00772     
<a name="l00773"></a>00773     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00774"></a>00774         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00775"></a>00775             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> == sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>) <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 1; <span class="keywordflow">else</span> <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 0;
<a name="l00776"></a>00776             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00777"></a>00777             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00778"></a>00778             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - <a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00779"></a>00779             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a> + <a class="code" href="../../d1/d0d/area_8c.html#a05dff359065bb209fefafc87c94fd03d">AZONEPAD_TABH</a>;
<a name="l00780"></a>00780             <span class="keywordflow">break</span>;
<a name="l00781"></a>00781         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00782"></a>00782             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + <a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00783"></a>00783             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - <a class="code" href="../../d1/d0d/area_8c.html#a05dff359065bb209fefafc87c94fd03d">AZONEPAD_TABH</a>;
<a name="l00784"></a>00784             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 2*<a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00785"></a>00785             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00786"></a>00786             <span class="keywordflow">break</span>;
<a name="l00787"></a>00787         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00788"></a>00788             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1 - <a class="code" href="../../d1/d0d/area_8c.html#a05dff359065bb209fefafc87c94fd03d">AZONEPAD_TABH</a>;
<a name="l00789"></a>00789             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00790"></a>00790             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1;
<a name="l00791"></a>00791             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00792"></a>00792             <span class="keywordflow">break</span>;
<a name="l00793"></a>00793         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00794"></a>00794             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1;
<a name="l00795"></a>00795             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00796"></a>00796             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1 + <a class="code" href="../../d1/d0d/area_8c.html#a05dff359065bb209fefafc87c94fd03d">AZONEPAD_TABH</a>;
<a name="l00797"></a>00797             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../d1/d0d/area_8c.html#af86591332734f4755a8efae348a209e6">AZONEPAD_TABW</a>;
<a name="l00798"></a>00798             <span class="keywordflow">break</span>;
<a name="l00799"></a>00799     }
<a name="l00800"></a>00800     <span class="comment">/* rect needed for mouse pointer test */</span>
<a name="l00801"></a>00801     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00802"></a>00802 }   
<a name="l00803"></a>00803 
<a name="l00804"></a><a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">00804</a> <span class="preprocessor">#define AZONEPAD_TRIAW  16</span>
<a name="l00805"></a><a class="code" href="../../d1/d0d/area_8c.html#a4935f1d4113589ade83e6c18f4ae5e24">00805</a> <span class="preprocessor"></span><span class="preprocessor">#define AZONEPAD_TRIAH  9</span>
<a name="l00806"></a>00806 <span class="preprocessor"></span>
<a name="l00807"></a>00807 
<a name="l00808"></a>00808 <span class="comment">/* region already made zero sized, in shape of edge */</span>
<a name="l00809"></a><a class="code" href="../../d1/d0d/area_8c.html#ad75bfb0591fcdb4ec7153656eb3bf99d">00809</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#ad75bfb0591fcdb4ec7153656eb3bf99d">region_azone_tria</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l00810"></a>00810 {
<a name="l00811"></a>00811     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *azt;
<a name="l00812"></a>00812     <span class="keywordtype">int</span> tot= 0, <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00813"></a>00813     
<a name="l00814"></a>00814     <span class="keywordflow">for</span> (azt= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; azt; azt= azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7fb39ae1324b7cd179fd443809aaf904">next</a>) {
<a name="l00815"></a>00815         <span class="keywordflow">if</span> (azt-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a> == az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) tot++;
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817     
<a name="l00818"></a>00818     <span class="keywordflow">switch</span>(az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>) {
<a name="l00819"></a>00819         <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>:
<a name="l00820"></a>00820             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> == sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>) <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 1; <span class="keywordflow">else</span> <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>= 0;
<a name="l00821"></a>00821             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00822"></a>00822             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a>;
<a name="l00823"></a>00823             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - <a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00824"></a>00824             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a9a801fa87c9bf3472c399696366fe81c">add</a> + <a class="code" href="../../d1/d0d/area_8c.html#a4935f1d4113589ade83e6c18f4ae5e24">AZONEPAD_TRIAH</a>;
<a name="l00825"></a>00825             <span class="keywordflow">break</span>;
<a name="l00826"></a>00826             <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>:
<a name="l00827"></a>00827             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + <a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00828"></a>00828             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - <a class="code" href="../../d1/d0d/area_8c.html#a4935f1d4113589ade83e6c18f4ae5e24">AZONEPAD_TRIAH</a>;
<a name="l00829"></a>00829             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 2*<a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00830"></a>00830             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l00831"></a>00831             <span class="keywordflow">break</span>;
<a name="l00832"></a>00832             <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>:
<a name="l00833"></a>00833             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1 - <a class="code" href="../../d1/d0d/area_8c.html#a4935f1d4113589ade83e6c18f4ae5e24">AZONEPAD_TRIAH</a>;
<a name="l00834"></a>00834             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00835"></a>00835             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1;
<a name="l00836"></a>00836             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00837"></a>00837             <span class="keywordflow">break</span>;
<a name="l00838"></a>00838             <span class="keywordflow">case</span> <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>:
<a name="l00839"></a>00839             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1;
<a name="l00840"></a>00840             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - 2*<a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00841"></a>00841             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - 1 + <a class="code" href="../../d1/d0d/area_8c.html#a4935f1d4113589ade83e6c18f4ae5e24">AZONEPAD_TRIAH</a>;
<a name="l00842"></a>00842             az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - <a class="code" href="../../d1/d0d/area_8c.html#a6d86b60b3b478c74322b1f25d2a6538f">AZONEPAD_TRIAW</a>;
<a name="l00843"></a>00843             <span class="keywordflow">break</span>;
<a name="l00844"></a>00844     }
<a name="l00845"></a>00845     <span class="comment">/* rect needed for mouse pointer test */</span>
<a name="l00846"></a>00846     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a52af977af3f3c4b6491a0715f81c372c">rect</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a9f70cdef25bc186aeeb1767ee71efbaf">x1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#aa41e7cb4896689403b9e4d0e8310df9a">x2</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#ad5104ff0a91b2becd68e8b74d624f31e">y1</a>, az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a7f3db01fa8d77c02bbec7f2b63b8835a">y2</a>);
<a name="l00847"></a>00847 }   
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00850"></a><a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">00850</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">region_azone_initialize</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050">AZEdge</a> edge) 
<a name="l00851"></a>00851 {
<a name="l00852"></a>00852     <a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *az;
<a name="l00853"></a>00853     
<a name="l00854"></a>00854     az= (<a class="code" href="../../d8/dfd/structAZone.html">AZone</a> *)<a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d8/dfd/structAZone.html">AZone</a>), <span class="stringliteral">&quot;actionzone&quot;</span>);
<a name="l00855"></a>00855     <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a2abe64269b37637b8c7e75ac81ba9e4e">actionzones</a>), az);
<a name="l00856"></a>00856     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a396c201c32f6002fb549726586b8b480">type</a>= <a class="code" href="../../d1/d85/ED__screen__types_8h.html#a7a79069a208a479cdd52f066db18a775">AZONE_REGION</a>;
<a name="l00857"></a>00857     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#abcf6186b7c50b07c17df695cc776cad5">ar</a>= ar;
<a name="l00858"></a>00858     az-&gt;<a class="code" href="../../d8/dfd/structAZone.html#a83c515d0109cfbe4c397c49115ecdb56">edge</a>= edge;
<a name="l00859"></a>00859     
<a name="l00860"></a>00860     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; (<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>|<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>)) {
<a name="l00861"></a>00861         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==3)
<a name="l00862"></a>00862             <a class="code" href="../../d1/d0d/area_8c.html#afbb6393fb92ecabe585c455e17d8bcbf">region_azone_icon</a>(sa, az, ar);
<a name="l00863"></a>00863         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==2)
<a name="l00864"></a>00864             <a class="code" href="../../d1/d0d/area_8c.html#ad75bfb0591fcdb4ec7153656eb3bf99d">region_azone_tria</a>(sa, az, ar);
<a name="l00865"></a>00865         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.rt==1)
<a name="l00866"></a>00866             <a class="code" href="../../d1/d0d/area_8c.html#a0839241073eaeb38bcecdf9b8e467113">region_azone_tab</a>(sa, az, ar);
<a name="l00867"></a>00867         <span class="keywordflow">else</span>
<a name="l00868"></a>00868             <a class="code" href="../../d1/d0d/area_8c.html#a417b0161d7ed7a5335933646c02ad5a7">region_azone_tab_plus</a>(sa, az, ar);
<a name="l00869"></a>00869     }
<a name="l00870"></a>00870     <span class="keywordflow">else</span> {
<a name="l00871"></a>00871         <a class="code" href="../../d1/d0d/area_8c.html#a213bab3eff826282bdb20d0080d6c24a">region_azone_edge</a>(az, ar);
<a name="l00872"></a>00872     }
<a name="l00873"></a>00873     
<a name="l00874"></a>00874 }
<a name="l00875"></a>00875 
<a name="l00876"></a>00876 
<a name="l00877"></a>00877 <span class="comment">/* *************************************************************** */</span>
<a name="l00878"></a>00878 
<a name="l00879"></a><a class="code" href="../../d1/d0d/area_8c.html#a688925fdb036f1e766e743c2ab80cac3">00879</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a688925fdb036f1e766e743c2ab80cac3">region_azone_add</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <span class="keywordtype">int</span> alignment)
<a name="l00880"></a>00880 {
<a name="l00881"></a>00881      <span class="comment">/* edge code (t b l r) is along which area edge azone will be drawn */</span>
<a name="l00882"></a>00882     
<a name="l00883"></a>00883     <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a96755a55dd96367084937e6448c578c9">RGN_ALIGN_TOP</a>)
<a name="l00884"></a>00884         <a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">region_azone_initialize</a>(sa, ar, <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a841115d7bd473274829817833fdb1771">AE_BOTTOM_TO_TOPLEFT</a>);
<a name="l00885"></a>00885     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a898395503574ba73c18b3dbbd96fd107">RGN_ALIGN_BOTTOM</a>)
<a name="l00886"></a>00886         <a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">region_azone_initialize</a>(sa, ar, <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050af8729f1ae2f8b64afc9f26110f5d3820">AE_TOP_TO_BOTTOMRIGHT</a>);
<a name="l00887"></a>00887     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a26c26121325540375f6fb076bee0fb59">RGN_ALIGN_RIGHT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>))
<a name="l00888"></a>00888         <a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">region_azone_initialize</a>(sa, ar, <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a61e988fbac4e5a0b6f160b766cf89c8c">AE_LEFT_TO_TOPRIGHT</a>);
<a name="l00889"></a>00889     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af406a205a9600f7ffa7e100511c9643a">RGN_ALIGN_LEFT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#aaabf066599c68eb0ccf92bb853e24dcb">RGN_OVERLAP_LEFT</a>))
<a name="l00890"></a>00890         <a class="code" href="../../d1/d0d/area_8c.html#a44e8de5ec14f0b9a834228ef6543d204">region_azone_initialize</a>(sa, ar, <a class="code" href="../../d1/d85/ED__screen__types_8h.html#aeb426c1bfa45224413b4160410a53050a7bbe94b2d8cf2a57e13a5687b1a697bb">AE_RIGHT_TO_TOPLEFT</a>);
<a name="l00891"></a>00891 }
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">/* dir is direction to check, not the splitting edge direction! */</span>
<a name="l00894"></a><a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">00894</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(<a class="code" href="../../d0/d28/structrcti.html">rcti</a> *rect, <span class="keywordtype">char</span> dir, <span class="keywordtype">int</span> <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>)
<a name="l00895"></a>00895 {
<a name="l00896"></a>00896     <span class="keywordflow">if</span> (dir==<span class="charliteral">&#39;h&#39;</span>) {
<a name="l00897"></a>00897         <span class="keywordflow">return</span> rect-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>-rect-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>;
<a name="l00898"></a>00898     }
<a name="l00899"></a>00899     <span class="keywordflow">else</span> { <span class="comment">// &#39;v&#39;</span>
<a name="l00900"></a>00900         <span class="keywordflow">return</span> rect-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>-rect-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - <a class="code" href="../../d8/d40/btDbvt_8cpp.html#a0dbff19ad8155e43555569d371ad95a1">size</a>;
<a name="l00901"></a>00901     }
<a name="l00902"></a>00902 }
<a name="l00903"></a>00903 
<a name="l00904"></a><a class="code" href="../../d1/d0d/area_8c.html#aea6f36f73b623cb8ade49a647ea87209">00904</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#aea6f36f73b623cb8ade49a647ea87209">region_rect_recursive</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <a class="code" href="../../d0/d28/structrcti.html">rcti</a> *remainder, <span class="keywordtype">int</span> quad)
<a name="l00905"></a>00905 {
<a name="l00906"></a>00906     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> *remainder_prev= remainder;
<a name="l00907"></a>00907     <span class="keywordtype">int</span> prefsizex, prefsizey;
<a name="l00908"></a>00908     <span class="keywordtype">int</span> alignment;
<a name="l00909"></a>00909     
<a name="l00910"></a>00910     <span class="keywordflow">if</span> (ar==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00911"></a>00911         <span class="keywordflow">return</span>;
<a name="l00912"></a>00912     
<a name="l00913"></a>00913     <span class="comment">/* no returns in function, winrct gets set in the end again */</span>
<a name="l00914"></a>00914     <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>, 0, 0, 0, 0);
<a name="l00915"></a>00915     
<a name="l00916"></a>00916     <span class="comment">/* for test; allow split of previously defined region */</span>
<a name="l00917"></a>00917     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a8a5e3e090a3f96966048a2082a3ad8bb">RGN_SPLIT_PREV</a>)
<a name="l00918"></a>00918         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>)
<a name="l00919"></a>00919             remainder= &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>;
<a name="l00920"></a>00920     
<a name="l00921"></a>00921     alignment = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a> &amp; ~<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a8a5e3e090a3f96966048a2082a3ad8bb">RGN_SPLIT_PREV</a>;
<a name="l00922"></a>00922     
<a name="l00923"></a>00923     <span class="comment">/* clear state flags first */</span>
<a name="l00924"></a>00924     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp;= ~<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>;
<a name="l00925"></a>00925     <span class="comment">/* user errors */</span>
<a name="l00926"></a>00926     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; alignment!=<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4c5f51cbc9eda9eea22e41a0f8a0d801">RGN_ALIGN_QSPLIT</a>)
<a name="l00927"></a>00927         alignment= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af213fb1b1a3c91e8a2c6ae5ea9004f31">RGN_ALIGN_NONE</a>;
<a name="l00928"></a>00928     
<a name="l00929"></a>00929     <span class="comment">/* prefsize, for header we stick to exception */</span>
<a name="l00930"></a>00930     prefsizex= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8caddae8aaa04144c6ad80721ec6213b">sizex</a>?ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8caddae8aaa04144c6ad80721ec6213b">sizex</a>:ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a42adc2547994df726d3dc8bce9028601">prefsizex</a>;
<a name="l00931"></a>00931     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2ab7e0b51ce129a8b256dc705a06c4c4e8">RGN_TYPE_HEADER</a>)
<a name="l00932"></a>00932         prefsizey= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a731e71cf273e50acc629de70427ff2bd">prefsizey</a>;
<a name="l00933"></a>00933     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2a1324ee7084207af80aad66c626841e8c">RGN_TYPE_UI</a> &amp;&amp; sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a> == <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752ca5f4c324d2af06c247780942931169c7c">SPACE_FILE</a>) {
<a name="l00934"></a>00934         prefsizey= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a> * 2 + (<a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>/2);
<a name="l00935"></a>00935     }
<a name="l00936"></a>00936     <span class="keywordflow">else</span>
<a name="l00937"></a>00937         prefsizey= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a31a64e96feb835dca1c02129971b1f0e">sizey</a>?ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a31a64e96feb835dca1c02129971b1f0e">sizey</a>:ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a731e71cf273e50acc629de70427ff2bd">prefsizey</a>;
<a name="l00938"></a>00938     
<a name="l00939"></a>00939     <span class="comment">/* hidden is user flag */</span>
<a name="l00940"></a>00940     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>);
<a name="l00941"></a>00941     <span class="comment">/* XXX floating area region, not handled yet here */</span>
<a name="l00942"></a>00942     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment == <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a0279d6b74a32f9cf1a82dd80c99cfe37">RGN_ALIGN_FLOAT</a>);
<a name="l00943"></a>00943     <span class="comment">/* remainder is too small for any usage */</span>
<a name="l00944"></a>00944     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;v&#39;</span>, 1)&lt;0 || <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;h&#39;</span>, 1) &lt; 0 ) {
<a name="l00945"></a>00945         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> |= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>;
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af213fb1b1a3c91e8a2c6ae5ea9004f31">RGN_ALIGN_NONE</a>) {
<a name="l00948"></a>00948         <span class="comment">/* typically last region */</span>
<a name="l00949"></a>00949         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l00950"></a>00950         <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(remainder, 0, 0, 0, 0);
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a96755a55dd96367084937e6448c578c9">RGN_ALIGN_TOP</a> || alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a898395503574ba73c18b3dbbd96fd107">RGN_ALIGN_BOTTOM</a>) {
<a name="l00953"></a>00953         
<a name="l00954"></a>00954         <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;v&#39;</span>, prefsizey) &lt; 0 ) {
<a name="l00955"></a>00955             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> |= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>;
<a name="l00956"></a>00956         }
<a name="l00957"></a>00957         <span class="keywordflow">else</span> {
<a name="l00958"></a>00958             <span class="keywordtype">int</span> fac= <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;v&#39;</span>, prefsizey);
<a name="l00959"></a>00959 
<a name="l00960"></a>00960             <span class="keywordflow">if</span> (fac &lt; 0 )
<a name="l00961"></a>00961                 prefsizey += fac;
<a name="l00962"></a>00962             
<a name="l00963"></a>00963             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l00964"></a>00964             
<a name="l00965"></a>00965             <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a96755a55dd96367084937e6448c578c9">RGN_ALIGN_TOP</a>) {
<a name="l00966"></a>00966                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - prefsizey + 1;
<a name="l00967"></a>00967                 remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - 1;
<a name="l00968"></a>00968             }
<a name="l00969"></a>00969             <span class="keywordflow">else</span> {
<a name="l00970"></a>00970                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + prefsizey - 1;
<a name="l00971"></a>00971                 remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> + 1;
<a name="l00972"></a>00972             }
<a name="l00973"></a>00973         }
<a name="l00974"></a>00974     }
<a name="l00975"></a>00975     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0388eda1f65113c4a15720e037c11cb4">ELEM4</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af406a205a9600f7ffa7e100511c9643a">RGN_ALIGN_LEFT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a26c26121325540375f6fb076bee0fb59">RGN_ALIGN_RIGHT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#aaabf066599c68eb0ccf92bb853e24dcb">RGN_OVERLAP_LEFT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>)) {
<a name="l00976"></a>00976         
<a name="l00977"></a>00977         <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;h&#39;</span>, prefsizex) &lt; 0 ) {
<a name="l00978"></a>00978             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> |= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>;
<a name="l00979"></a>00979         }
<a name="l00980"></a>00980         <span class="keywordflow">else</span> {
<a name="l00981"></a>00981             <span class="keywordtype">int</span> fac= <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;h&#39;</span>, prefsizex);
<a name="l00982"></a>00982             
<a name="l00983"></a>00983             <span class="keywordflow">if</span> (fac &lt; 0 )
<a name="l00984"></a>00984                 prefsizex += fac;
<a name="l00985"></a>00985             
<a name="l00986"></a>00986             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l00987"></a>00987             
<a name="l00988"></a>00988             <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a26c26121325540375f6fb076bee0fb59">RGN_ALIGN_RIGHT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>)) {
<a name="l00989"></a>00989                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - prefsizex + 1;
<a name="l00990"></a>00990                 <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a26c26121325540375f6fb076bee0fb59">RGN_ALIGN_RIGHT</a>)
<a name="l00991"></a>00991                     remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> - 1;
<a name="l00992"></a>00992             }
<a name="l00993"></a>00993             <span class="keywordflow">else</span> {
<a name="l00994"></a>00994                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + prefsizex - 1;
<a name="l00995"></a>00995                 <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af406a205a9600f7ffa7e100511c9643a">RGN_ALIGN_LEFT</a>)
<a name="l00996"></a>00996                     remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> + 1;
<a name="l00997"></a>00997             }
<a name="l00998"></a>00998         }
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a00db93190822f87c5a80e6beba460c24">RGN_ALIGN_VSPLIT</a> || alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a39e13364c4e3d8ef75451c0db85b980f">RGN_ALIGN_HSPLIT</a>) {
<a name="l01001"></a>01001         <span class="comment">/* percentage subdiv*/</span>
<a name="l01002"></a>01002         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l01003"></a>01003         
<a name="l01004"></a>01004         <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a39e13364c4e3d8ef75451c0db85b980f">RGN_ALIGN_HSPLIT</a>) {
<a name="l01005"></a>01005             <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;h&#39;</span>, prefsizex) &gt; 4) {
<a name="l01006"></a>01006                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>+remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)/2;
<a name="l01007"></a>01007                 remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>+1;
<a name="l01008"></a>01008             }
<a name="l01009"></a>01009             <span class="keywordflow">else</span> {
<a name="l01010"></a>01010                 <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(remainder, 0, 0, 0, 0);
<a name="l01011"></a>01011             }
<a name="l01012"></a>01012         }
<a name="l01013"></a>01013         <span class="keywordflow">else</span> {
<a name="l01014"></a>01014             <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0d/area_8c.html#a7bd68ebd134394c59d6478329eae9ba7">rct_fits</a>(remainder, <span class="charliteral">&#39;v&#39;</span>, prefsizey) &gt; 4) {
<a name="l01015"></a>01015                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>+remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>)/2;
<a name="l01016"></a>01016                 remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>+1;
<a name="l01017"></a>01017             }
<a name="l01018"></a>01018             <span class="keywordflow">else</span> {
<a name="l01019"></a>01019                 <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(remainder, 0, 0, 0, 0);
<a name="l01020"></a>01020             }
<a name="l01021"></a>01021         }
<a name="l01022"></a>01022     }
<a name="l01023"></a>01023     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4c5f51cbc9eda9eea22e41a0f8a0d801">RGN_ALIGN_QSPLIT</a>) {
<a name="l01024"></a>01024         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l01025"></a>01025         
<a name="l01026"></a>01026         <span class="comment">/* test if there&#39;s still 4 regions left */</span>
<a name="l01027"></a>01027         <span class="keywordflow">if</span> (quad==0) {
<a name="l01028"></a>01028             <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *artest= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>;
<a name="l01029"></a>01029             <span class="keywordtype">int</span> count= 1;
<a name="l01030"></a>01030             
<a name="l01031"></a>01031             <span class="keywordflow">while</span> (artest) {
<a name="l01032"></a>01032                 artest-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a>= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4c5f51cbc9eda9eea22e41a0f8a0d801">RGN_ALIGN_QSPLIT</a>;
<a name="l01033"></a>01033                 artest= artest-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>;
<a name="l01034"></a>01034                 count++;
<a name="l01035"></a>01035             }
<a name="l01036"></a>01036             
<a name="l01037"></a>01037             <span class="keywordflow">if</span> (count!=4) {
<a name="l01038"></a>01038                 <span class="comment">/* let&#39;s stop adding regions */</span>
<a name="l01039"></a>01039                 <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(remainder, 0, 0, 0, 0);
<a name="l01040"></a>01040                 <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc8/util__md5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.debug &amp; <a class="code" href="../../d1/d8c/BKE__global_8h.html#a726ca809ffd3d67ab4b8476646f26635a1207ca157c84a6be5a8a36c691c4aa72">G_DEBUG</a>)
<a name="l01041"></a>01041                     printf(<span class="stringliteral">&quot;region quadsplit failed\n&quot;</span>);
<a name="l01042"></a>01042             }
<a name="l01043"></a>01043             <span class="keywordflow">else</span> quad= 1;
<a name="l01044"></a>01044         }
<a name="l01045"></a>01045         <span class="keywordflow">if</span> (quad) {
<a name="l01046"></a>01046             <span class="keywordflow">if</span> (quad==1) { <span class="comment">/* left bottom */</span>
<a name="l01047"></a>01047                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)/2;
<a name="l01048"></a>01048                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>)/2;
<a name="l01049"></a>01049             }
<a name="l01050"></a>01050             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (quad==2) { <span class="comment">/* left top */</span>
<a name="l01051"></a>01051                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)/2;
<a name="l01052"></a>01052                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = 1 + (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>)/2;
<a name="l01053"></a>01053             }
<a name="l01054"></a>01054             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (quad==3) { <span class="comment">/* right bottom */</span>
<a name="l01055"></a>01055                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = 1 + (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)/2;
<a name="l01056"></a>01056                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>)/2;
<a name="l01057"></a>01057             }
<a name="l01058"></a>01058             <span class="keywordflow">else</span> {  <span class="comment">/* right top */</span>
<a name="l01059"></a>01059                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = 1 + (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>)/2;
<a name="l01060"></a>01060                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = 1 + (remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + remainder-&gt;<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>)/2;
<a name="l01061"></a>01061                 <a class="code" href="../../d5/d44/BLI__rect_8h.html#a77ca41dd284a3c2859185a86c173aef2">BLI_init_rcti</a>(remainder, 0, 0, 0, 0);
<a name="l01062"></a>01062             }
<a name="l01063"></a>01063 
<a name="l01064"></a>01064             quad++;
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066     }
<a name="l01067"></a>01067     
<a name="l01068"></a>01068     <span class="comment">/* for speedup */</span>
<a name="l01069"></a>01069     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1;
<a name="l01070"></a>01070     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + 1;
<a name="l01071"></a>01071     
<a name="l01072"></a>01072     <span class="comment">/* set winrect for azones */</span>
<a name="l01073"></a>01073     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; (<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>|<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>)) {
<a name="l01074"></a>01074         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>= *remainder;
<a name="l01075"></a>01075         
<a name="l01076"></a>01076         <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a96755a55dd96367084937e6448c578c9">RGN_ALIGN_TOP</a>)
<a name="l01077"></a>01077             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>;
<a name="l01078"></a>01078         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (alignment==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a898395503574ba73c18b3dbbd96fd107">RGN_ALIGN_BOTTOM</a>)
<a name="l01079"></a>01079             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l01080"></a>01080         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a26c26121325540375f6fb076bee0fb59">RGN_ALIGN_RIGHT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a4acf61e962a2dc5073db1fa5fa911d46">RGN_OVERLAP_RIGHT</a>))
<a name="l01081"></a>01081             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>;
<a name="l01082"></a>01082         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a0b02ecc2161884c6587b77fd39150632">ELEM</a>(alignment, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#af406a205a9600f7ffa7e100511c9643a">RGN_ALIGN_LEFT</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#aaabf066599c68eb0ccf92bb853e24dcb">RGN_OVERLAP_LEFT</a>))
<a name="l01083"></a>01083             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l01084"></a>01084         <span class="keywordflow">else</span> <span class="comment">/* prevent winrct to be valid */</span>
<a name="l01085"></a>01085             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l01086"></a>01086     }
<a name="l01087"></a>01087 
<a name="l01088"></a>01088     <span class="comment">/* restore prev-split exception */</span>
<a name="l01089"></a>01089     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a8c70a85ae4e6eee036ee6f58f246876d">alignment</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a8a5e3e090a3f96966048a2082a3ad8bb">RGN_SPLIT_PREV</a>) {
<a name="l01090"></a>01090         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>) {
<a name="l01091"></a>01091             remainder= remainder_prev;
<a name="l01092"></a>01092             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1;
<a name="l01093"></a>01093             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a1e955407d2dcbf029ee1e831234749c2">prev</a>-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + 1;
<a name="l01094"></a>01094         }
<a name="l01095"></a>01095     }
<a name="l01096"></a>01096     
<a name="l01097"></a>01097     <span class="comment">/* in end, add azones, where appropriate */</span>
<a name="l01098"></a>01098     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a> == <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2ab7e0b51ce129a8b256dc705a06c4c4e8">RGN_TYPE_HEADER</a> &amp;&amp; ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a> + 6 &gt; sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9bf030bfae8e6e6ff63acd63f0d499df">winy</a>) {
<a name="l01099"></a>01099         <span class="comment">/* The logic for this is: when the header takes up the full area,</span>
<a name="l01100"></a>01100 <span class="comment">         * disallow hiding it to view the main window.</span>
<a name="l01101"></a>01101 <span class="comment">         *</span>
<a name="l01102"></a>01102 <span class="comment">         * Without this, you can drag down the file selectors header and hide it</span>
<a name="l01103"></a>01103 <span class="comment">         * by accident very easily (highly annoying!), the value 6 is arbitrary</span>
<a name="l01104"></a>01104 <span class="comment">         * but accounts for small common rounding problems when scaling the UI,</span>
<a name="l01105"></a>01105 <span class="comment">         * must be minimum &#39;4&#39; */</span>
<a name="l01106"></a>01106     }
<a name="l01107"></a>01107     <span class="keywordflow">else</span> {
<a name="l01108"></a>01108         <a class="code" href="../../d1/d0d/area_8c.html#a688925fdb036f1e766e743c2ab80cac3">region_azone_add</a>(sa, ar, alignment);
<a name="l01109"></a>01109     }
<a name="l01110"></a>01110 
<a name="l01111"></a>01111     <a class="code" href="../../d1/d0d/area_8c.html#aea6f36f73b623cb8ade49a647ea87209">region_rect_recursive</a>(sa, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>, remainder, quad);
<a name="l01112"></a>01112 }
<a name="l01113"></a>01113 
<a name="l01114"></a><a class="code" href="../../d1/d0d/area_8c.html#a741fc6c59103ecab03e08b72ac2f0d35">01114</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a741fc6c59103ecab03e08b72ac2f0d35">area_calc_totrct</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <span class="keywordtype">int</span> sizex, <span class="keywordtype">int</span> sizey)
<a name="l01115"></a>01115 {
<a name="l01116"></a>01116     <span class="keywordtype">short</span> rt= 0; <span class="comment">// CLAMPIS(G.rt, 0, 16);</span>
<a name="l01117"></a>01117 
<a name="l01118"></a>01118     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>&gt;0) sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>+1+rt;
<a name="l01119"></a>01119     <span class="keywordflow">else</span> sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>;
<a name="l01120"></a>01120     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ac44f8d5f533f74f1612ab99953596d8a">v4</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>&lt;sizex-1) sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ac44f8d5f533f74f1612ab99953596d8a">v4</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>-1-rt;
<a name="l01121"></a>01121     <span class="keywordflow">else</span> sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ac44f8d5f533f74f1612ab99953596d8a">v4</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a369c28c4e23e9098f547465d1d12f38b">x</a>;
<a name="l01122"></a>01122     
<a name="l01123"></a>01123     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>&gt;0) sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>+1+rt;
<a name="l01124"></a>01124     <span class="keywordflow">else</span> sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a7effddf3fdd03c3528a5fa1386eb50e3">v1</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>;
<a name="l01125"></a>01125     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a06f4362dc9cfb0ce0c1a67f9d5c262c1">v2</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>&lt;sizey-1) sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a06f4362dc9cfb0ce0c1a67f9d5c262c1">v2</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>-1-rt;
<a name="l01126"></a>01126     <span class="keywordflow">else</span> sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a06f4362dc9cfb0ce0c1a67f9d5c262c1">v2</a>-&gt;<a class="code" href="../../d0/db3/structScrVert.html#afaa6127eeea899ba620074a3b9cb39cc">vec</a>.<a class="code" href="../../d4/d60/structvec2s.html#a1a1b582dc847b158b77979f59849aaec">y</a>;
<a name="l01127"></a>01127     
<a name="l01128"></a>01128     <span class="comment">/* for speedup */</span>
<a name="l01129"></a>01129     sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a8875e00cdc1e130b8267c63b9cc0558e">winx</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>-sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>+1;
<a name="l01130"></a>01130     sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9bf030bfae8e6e6ff63acd63f0d499df">winy</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>-sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>+1;
<a name="l01131"></a>01131 }
<a name="l01132"></a>01132 
<a name="l01133"></a>01133 
<a name="l01134"></a>01134 <span class="comment">/* used for area initialize below */</span>
<a name="l01135"></a><a class="code" href="../../d1/d0d/area_8c.html#a6c5674b93ad252a5901be27b94298479">01135</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a6c5674b93ad252a5901be27b94298479">region_subwindow</a>(<a class="code" href="../../dc/da4/structwmWindow.html">wmWindow</a> *win, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01136"></a>01136 {
<a name="l01137"></a>01137     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; (<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>|<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab28514a6a5c38149e23f262d2545e6d0">RGN_FLAG_TOO_SMALL</a>)) {
<a name="l01138"></a>01138         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>)
<a name="l01139"></a>01139             <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a6f5db395f959a3efe9866ebb9a682fec">wm_subwindow_close</a>(win, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>);
<a name="l01140"></a>01140         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>= 0;
<a name="l01141"></a>01141     }
<a name="l01142"></a>01142     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>==0)
<a name="l01143"></a>01143         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>= <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a6c42dad8eb38c4eeb72eff1f55842d99">wm_subwindow_open</a>(win, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>);
<a name="l01144"></a>01144     <span class="keywordflow">else</span> 
<a name="l01145"></a>01145         <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a23981b5a368b8f5e209dc186ca8d4746">wm_subwindow_position</a>(win, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>);
<a name="l01146"></a>01146 }
<a name="l01147"></a>01147 
<a name="l01148"></a><a class="code" href="../../d1/d0d/area_8c.html#ae64c15349490ed812bcf3f57e815443a">01148</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#ae64c15349490ed812bcf3f57e815443a">ed_default_handlers</a>(<a class="code" href="../../d4/dc3/structwmWindowManager.html">wmWindowManager</a> *wm, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <a class="code" href="../../d6/d85/structListBase.html">ListBase</a> *handlers, <span class="keywordtype">int</span> flag)
<a name="l01149"></a>01149 {
<a name="l01150"></a>01150     <span class="comment">/* note, add-handler checks if it already exists */</span>
<a name="l01151"></a>01151     
<a name="l01152"></a>01152     <span class="comment">// XXX it would be good to have boundbox checks for some of these...</span>
<a name="l01153"></a>01153     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#afe076e6519bb89b26bd067645a45c920">ED_KEYMAP_UI</a>) {
<a name="l01154"></a>01154         <span class="comment">/* user interface widgets */</span>
<a name="l01155"></a>01155         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a9fe40aacf8e743df07b2b9a20bc72a16">UI_add_region_handlers</a>(handlers);
<a name="l01156"></a>01156     }
<a name="l01157"></a>01157     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#aac298c77f1ccfa5a91f94b397e110682">ED_KEYMAP_VIEW2D</a>) {
<a name="l01158"></a>01158         <span class="comment">/* 2d-viewport handling+manipulation */</span>
<a name="l01159"></a>01159         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;View2D&quot;</span>, 0, 0);
<a name="l01160"></a>01160         <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01161"></a>01161     }
<a name="l01162"></a>01162     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#acc9aca4ce1985e7744d694cb70d52b78">ED_KEYMAP_MARKERS</a>) {
<a name="l01163"></a>01163         <span class="comment">/* time-markers */</span>
<a name="l01164"></a>01164         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;Markers&quot;</span>, 0, 0);
<a name="l01165"></a>01165         
<a name="l01166"></a>01166         <span class="comment">/* time space only has this keymap, the others get a boundbox restricted map */</span>
<a name="l01167"></a>01167         <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>!=<a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752ca51011faadfd7d38d3d7a810c600e9458">SPACE_TIME</a>) {
<a name="l01168"></a>01168             <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l01169"></a>01169             <span class="keyword">static</span> <a class="code" href="../../d0/d28/structrcti.html">rcti</a> rect= {0, 10000, 0, 30};    <span class="comment">/* same local check for all areas */</span>
<a name="l01170"></a>01170             ar= <a class="code" href="../../d7/da3/BKE__screen_8h.html#a5094bc7dbca089e838bcd5fc9bcb52a7">BKE_area_find_region_type</a>(sa, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2a3d4303928de6d095b8db2a0637930a63">RGN_TYPE_WINDOW</a>);
<a name="l01171"></a>01171             <span class="keywordflow">if</span> (ar) {
<a name="l01172"></a>01172                 <a class="code" href="../../df/db0/wm__event__system_8c.html#a07410adb0dfab098b8ec3d8a26e4a6d6">WM_event_add_keymap_handler_bb</a>(handlers, keymap, &amp;rect, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>);
<a name="l01173"></a>01173             }
<a name="l01174"></a>01174         }
<a name="l01175"></a>01175         <span class="keywordflow">else</span>
<a name="l01176"></a>01176             <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#abb6e6e2219fde412ab2f5b822140e4a2">ED_KEYMAP_ANIMATION</a>) {
<a name="l01179"></a>01179         <span class="comment">/* frame changing and timeline operators (for time spaces) */</span>
<a name="l01180"></a>01180         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;Animation&quot;</span>, 0, 0);
<a name="l01181"></a>01181         <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#a18d81a5f638e7d5c787d340a7f415917">ED_KEYMAP_FRAMES</a>) {
<a name="l01184"></a>01184         <span class="comment">/* frame changing/jumping (for all spaces) */</span>
<a name="l01185"></a>01185         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;Frames&quot;</span>, 0, 0);
<a name="l01186"></a>01186         <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01187"></a>01187     }
<a name="l01188"></a>01188     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#ae7b0ad3a25ed9ecdc7b6047f5e9f874e">ED_KEYMAP_GPENCIL</a>) {
<a name="l01189"></a>01189         <span class="comment">/* grease pencil */</span>
<a name="l01190"></a>01190         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;Grease Pencil&quot;</span>, 0, 0);
<a name="l01191"></a>01191         <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01192"></a>01192     }
<a name="l01193"></a>01193     <span class="keywordflow">if</span> (flag &amp; <a class="code" href="../../d1/d12/ED__screen_8h.html#a5e6d02ad07a6b83a8a31bbd814ce6e96">ED_KEYMAP_HEADER</a>) {
<a name="l01194"></a>01194         <span class="comment">/* standard keymap for headers regions */</span>
<a name="l01195"></a>01195         <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;Header&quot;</span>, 0, 0);
<a name="l01196"></a>01196         <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(handlers, keymap);
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198 }
<a name="l01199"></a>01199 
<a name="l01200"></a>01200 
<a name="l01201"></a>01201 <span class="comment">/* called in screen_refresh, or screens_init, also area size changes */</span>
<a name="l01202"></a><a class="code" href="../../d1/d0d/area_8c.html#a2eb0a1ecdcac404dce2fa2793a4b3d1d">01202</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ae45f2f3bb39946df3342722735be4fb1">ED_area_initialize</a>(<a class="code" href="../../d4/dc3/structwmWindowManager.html">wmWindowManager</a> *wm, <a class="code" href="../../dc/da4/structwmWindow.html">wmWindow</a> *win, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa)
<a name="l01203"></a>01203 {
<a name="l01204"></a>01204     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l01205"></a>01205     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> rect;
<a name="l01206"></a>01206     
<a name="l01207"></a>01207     <span class="comment">/* set typedefinitions */</span>
<a name="l01208"></a>01208     sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>= <a class="code" href="../../d7/da3/BKE__screen_8h.html#aa38a17435264e8ed7fe5c0518b45e431">BKE_spacetype_from_id</a>(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>);
<a name="l01209"></a>01209     
<a name="l01210"></a>01210     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01211"></a>01211         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#adb10112c8e3abb732123a775ebbf7b93">butspacetype</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>= <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752caf4af925b582bb7d7590235f90a38c8a9">SPACE_VIEW3D</a>;
<a name="l01212"></a>01212         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>= <a class="code" href="../../d7/da3/BKE__screen_8h.html#aa38a17435264e8ed7fe5c0518b45e431">BKE_spacetype_from_id</a>(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>);
<a name="l01213"></a>01213     }
<a name="l01214"></a>01214     
<a name="l01215"></a>01215     <span class="keywordflow">for</span> (ar= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>)
<a name="l01216"></a>01216         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>= <a class="code" href="../../d7/da3/BKE__screen_8h.html#ad04613b34721ba1b703c94a635fcffcd">BKE_regiontype_from_id</a>(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a>);
<a name="l01217"></a>01217     
<a name="l01218"></a>01218     <span class="comment">/* area sizes */</span>
<a name="l01219"></a>01219     <a class="code" href="../../d1/d0d/area_8c.html#a741fc6c59103ecab03e08b72ac2f0d35">area_calc_totrct</a>(sa, win-&gt;<a class="code" href="../../dc/da4/structwmWindow.html#af8071bd36051fb5f5e0acd68e22523d0">sizex</a>, win-&gt;<a class="code" href="../../dc/da4/structwmWindow.html#a2284e3d27468a900b10ca04a97ef6975">sizey</a>);
<a name="l01220"></a>01220     
<a name="l01221"></a>01221     <span class="comment">/* clear all azones, add the area triange widgets */</span>
<a name="l01222"></a>01222     <a class="code" href="../../d1/d0d/area_8c.html#a6ee8037799bf4a4652267026a2effbd4">area_azone_initialize</a>(sa);
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <span class="comment">/* region rect sizes */</span>
<a name="l01225"></a>01225     rect= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab57b1af3f75bfc9e306271da17d157ff">totrct</a>;
<a name="l01226"></a>01226     <a class="code" href="../../d1/d0d/area_8c.html#aea6f36f73b623cb8ade49a647ea87209">region_rect_recursive</a>(sa, sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>, &amp;rect, 0);
<a name="l01227"></a>01227     
<a name="l01228"></a>01228     <span class="comment">/* default area handlers */</span>
<a name="l01229"></a>01229     <a class="code" href="../../d1/d0d/area_8c.html#ae64c15349490ed812bcf3f57e815443a">ed_default_handlers</a>(wm, sa, &amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a01c01609c538278ac956593f749365e3">handlers</a>, sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#a94e74e3a2a9637c25a9cfa29a2d76730">keymapflag</a>);
<a name="l01230"></a>01230     <span class="comment">/* checks spacedata, adds own handlers */</span>
<a name="l01231"></a>01231     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#abdfcfd243ed3663447182e07f9ba8d76">init</a>)
<a name="l01232"></a>01232         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#abdfcfd243ed3663447182e07f9ba8d76">init</a>(wm, sa);
<a name="l01233"></a>01233     
<a name="l01234"></a>01234     <span class="comment">/* region windows, default and own handlers */</span>
<a name="l01235"></a>01235     <span class="keywordflow">for</span> (ar= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>) {
<a name="l01236"></a>01236         <a class="code" href="../../d1/d0d/area_8c.html#a6c5674b93ad252a5901be27b94298479">region_subwindow</a>(win, ar);
<a name="l01237"></a>01237         
<a name="l01238"></a>01238         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a99bf72285d06e49b7fad6c270799b275">swinid</a>) {
<a name="l01239"></a>01239             <span class="comment">/* default region handlers */</span>
<a name="l01240"></a>01240             <a class="code" href="../../d1/d0d/area_8c.html#ae64c15349490ed812bcf3f57e815443a">ed_default_handlers</a>(wm, sa, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a84683336306edb035eeaa8d2f6fa7033">handlers</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a83727d6e4d5eb74d2f61031449675894">keymapflag</a>);
<a name="l01241"></a>01241             <span class="comment">/* own handlers */</span>
<a name="l01242"></a>01242             <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a016e36f773c731c6cad78ad47cd69497">init</a>)
<a name="l01243"></a>01243                 ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a016e36f773c731c6cad78ad47cd69497">init</a>(wm, ar);
<a name="l01244"></a>01244         }
<a name="l01245"></a>01245         <span class="keywordflow">else</span> {
<a name="l01246"></a>01246             <span class="comment">/* prevent uiblocks to run */</span>
<a name="l01247"></a>01247             <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3111de0bcf6a2a301ac52bee57c33d81">uiFreeBlocks</a>(<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#afbd94c7a138066b4e773e9d3401b0d87">uiblocks</a>);  
<a name="l01248"></a>01248         }
<a name="l01249"></a>01249         
<a name="l01250"></a>01250         <span class="comment">/* rechecks 2d matrix for header on dpi changing, do not do for other regions, it resets view &amp;&amp; blocks view2d operator polls (ton) */</span>
<a name="l01251"></a>01251         <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a>==<a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2ab7e0b51ce129a8b256dc705a06c4c4e8">RGN_TYPE_HEADER</a>)
<a name="l01252"></a>01252             ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a0c6ad4ab28f9e6cc5b9fd9e3aafafbac">flag</a> &amp;= ~<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a39f3bc5c996c526f80c092ba7628b129">V2D_IS_INITIALISED</a>;
<a name="l01253"></a>01253     }
<a name="l01254"></a>01254 }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">/* externally called for floating regions like menus */</span>
<a name="l01257"></a><a class="code" href="../../d1/d0d/area_8c.html#ae282c1e6f2527356cdd8fb2566039934">01257</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a627bcbaab2e94b70b1241eaff2e17124">ED_region_init</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01258"></a>01258 {
<a name="l01259"></a>01259 <span class="comment">//  ARegionType *at= ar-&gt;type;</span>
<a name="l01260"></a>01260     
<a name="l01261"></a>01261     <span class="comment">/* refresh can be called before window opened */</span>
<a name="l01262"></a>01262     <a class="code" href="../../d1/d0d/area_8c.html#a6c5674b93ad252a5901be27b94298479">region_subwindow</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C), ar);
<a name="l01263"></a>01263     
<a name="l01264"></a>01264     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + 1;
<a name="l01265"></a>01265     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + 1;
<a name="l01266"></a>01266     
<a name="l01267"></a>01267     <span class="comment">/* UI convention */</span>
<a name="l01268"></a>01268     <a class="code" href="../../df/d4d/wm__subwindow_8c.html#a61c7ead278c48a25b076ad7dfe186595">wmOrtho2</a>(-0.01f, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>-0.01f, -0.01f, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>-0.01f);
<a name="l01269"></a>01269     glLoadIdentity();
<a name="l01270"></a>01270 }
<a name="l01271"></a>01271 
<a name="l01272"></a><a class="code" href="../../d1/d0d/area_8c.html#a93ec05ba7805671508f0f048342ff994">01272</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a51b56d6a91ecd2fd3aac98659c8db1b6">ED_region_toggle_hidden</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01273"></a>01273 {
<a name="l01274"></a>01274     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l01275"></a>01275 
<a name="l01276"></a>01276     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> ^= <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>;
<a name="l01277"></a>01277 
<a name="l01278"></a>01278     <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a6f2584ecbfa3cdef91e6e2f740975ceb">flag</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a45948a913af510c6e98f8d448ac360eb">RGN_FLAG_HIDDEN</a>)
<a name="l01279"></a>01279         <a class="code" href="../../df/db0/wm__event__system_8c.html#afd7ef52cacacb354c1ad99d47b57855b">WM_event_remove_handlers</a>(C, &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a84683336306edb035eeaa8d2f6fa7033">handlers</a>);
<a name="l01280"></a>01280 
<a name="l01281"></a>01281     <a class="code" href="../../d1/d12/ED__screen_8h.html#ae45f2f3bb39946df3342722735be4fb1">ED_area_initialize</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C), <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C), sa);
<a name="l01282"></a>01282     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(sa);
<a name="l01283"></a>01283 }
<a name="l01284"></a>01284 
<a name="l01285"></a>01285 <span class="comment">/* sa2 to sa1, we swap spaces for fullscreen to keep all allocated data */</span>
<a name="l01286"></a>01286 <span class="comment">/* area vertices were set */</span>
<a name="l01287"></a><a class="code" href="../../d7/de3/screen__intern_8h.html#a36df79b09edb01547719640dd5796dcb">01287</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a36df79b09edb01547719640dd5796dcb">area_copy_data</a>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa1, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa2, <span class="keywordtype">int</span> swap_space)
<a name="l01288"></a>01288 {
<a name="l01289"></a>01289     <a class="code" href="../../dd/d66/structSpaceType.html">SpaceType</a> *st;
<a name="l01290"></a>01290     <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar;
<a name="l01291"></a>01291     <span class="keywordtype">int</span> spacetype= sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>;
<a name="l01292"></a>01292     
<a name="l01293"></a>01293     sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab35681127748c4f7d1fd6f351f69b413">headertype</a>= sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#ab35681127748c4f7d1fd6f351f69b413">headertype</a>;
<a name="l01294"></a>01294     sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>= sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>;
<a name="l01295"></a>01295     sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#adb10112c8e3abb732123a775ebbf7b93">butspacetype</a>= sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#adb10112c8e3abb732123a775ebbf7b93">butspacetype</a>;
<a name="l01296"></a>01296     
<a name="l01297"></a>01297     <span class="keywordflow">if</span> (swap_space == 1) {
<a name="l01298"></a>01298         <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a5fe0952e66cbb7dbad512a6fcc91b1b3">SWAP</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a>, sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>);
<a name="l01299"></a>01299         <span class="comment">/* exception: ensure preview is reset */</span>
<a name="l01300"></a>01300 <span class="comment">//      if (sa1-&gt;spacetype==SPACE_VIEW3D)</span>
<a name="l01301"></a>01301 <span class="comment">// XXX          BIF_view3d_previewrender_free(sa1-&gt;spacedata.first);</span>
<a name="l01302"></a>01302     }
<a name="l01303"></a>01303     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (swap_space == 2) {
<a name="l01304"></a>01304         <a class="code" href="../../d7/da3/BKE__screen_8h.html#a47b0388d6f57553238af70dd4477c199">BKE_spacedata_copylist</a>(&amp;sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, &amp;sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>);
<a name="l01305"></a>01305     }
<a name="l01306"></a>01306     <span class="keywordflow">else</span> {
<a name="l01307"></a>01307         <a class="code" href="../../d7/da3/BKE__screen_8h.html#a51af5de02fb94fb5e523f63e42c27efb">BKE_spacedata_freelist</a>(&amp;sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>);
<a name="l01308"></a>01308         <a class="code" href="../../d7/da3/BKE__screen_8h.html#a47b0388d6f57553238af70dd4477c199">BKE_spacedata_copylist</a>(&amp;sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, &amp;sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>);
<a name="l01309"></a>01309     }
<a name="l01310"></a>01310     
<a name="l01311"></a>01311     <span class="comment">/* Note; SPACE_EMPTY is possible on new screens */</span>
<a name="l01312"></a>01312     
<a name="l01313"></a>01313     <span class="comment">/* regions */</span>
<a name="l01314"></a>01314     <span class="keywordflow">if</span> (swap_space == 1) {
<a name="l01315"></a>01315         <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a5fe0952e66cbb7dbad512a6fcc91b1b3">SWAP</a>(<a class="code" href="../../d6/d85/structListBase.html">ListBase</a>, sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>, sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>);
<a name="l01316"></a>01316     }
<a name="l01317"></a>01317     <span class="keywordflow">else</span> {
<a name="l01318"></a>01318         <span class="keywordflow">if</span> (swap_space&lt;2) {
<a name="l01319"></a>01319             st= <a class="code" href="../../d7/da3/BKE__screen_8h.html#aa38a17435264e8ed7fe5c0518b45e431">BKE_spacetype_from_id</a>(spacetype);
<a name="l01320"></a>01320             <span class="keywordflow">for</span> (ar= sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>)
<a name="l01321"></a>01321                 <a class="code" href="../../d7/da3/BKE__screen_8h.html#acb926d438975e5a30f778c32ce39dbfe">BKE_area_region_free</a>(st, ar);
<a name="l01322"></a>01322             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#af94280dc0a245719304fdff91327b1e0">BLI_freelistN</a>(&amp;sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>);
<a name="l01323"></a>01323         }
<a name="l01324"></a>01324         
<a name="l01325"></a>01325         st= <a class="code" href="../../d7/da3/BKE__screen_8h.html#aa38a17435264e8ed7fe5c0518b45e431">BKE_spacetype_from_id</a>(sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>);
<a name="l01326"></a>01326         <span class="keywordflow">for</span> (ar= sa2-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ar; ar= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a7193c0e912cca4010db0f244f2dec0d0">next</a>) {
<a name="l01327"></a>01327             <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *newar= <a class="code" href="../../d7/da3/BKE__screen_8h.html#a206953b5a19edf9d09defaf51c2f19b0">BKE_area_region_copy</a>(st, ar);
<a name="l01328"></a>01328             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a28b9955d900264adc216d246f4057f05">BLI_addtail</a>(&amp;sa1-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>, newar);
<a name="l01329"></a>01329         }
<a name="l01330"></a>01330     }
<a name="l01331"></a>01331 }
<a name="l01332"></a>01332 
<a name="l01333"></a>01333 <span class="comment">/* *********** Space switching code *********** */</span>
<a name="l01334"></a>01334 
<a name="l01335"></a><a class="code" href="../../d1/d0d/area_8c.html#a719c6649f1fa896e377ce83a539fdea1">01335</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ae180c63de8b366a7816ed54a131e2d53">ED_area_swapspace</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa1, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa2)
<a name="l01336"></a>01336 {
<a name="l01337"></a>01337     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *tmp= <a class="code" href="../../da/d2b/mallocn_8c.html#ab1235f6c94203e95da6076dbeb355894">MEM_callocN</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a>), <span class="stringliteral">&quot;addscrarea&quot;</span>);
<a name="l01338"></a>01338 
<a name="l01339"></a>01339     <a class="code" href="../../d1/d12/ED__screen_8h.html#acf1337067240bb750c7328678a0d896d">ED_area_exit</a>(C, sa1);
<a name="l01340"></a>01340     <a class="code" href="../../d1/d12/ED__screen_8h.html#acf1337067240bb750c7328678a0d896d">ED_area_exit</a>(C, sa2);
<a name="l01341"></a>01341 
<a name="l01342"></a>01342     <a class="code" href="../../d1/d0d/area_8c.html#a36df79b09edb01547719640dd5796dcb">area_copy_data</a>(tmp, sa1, 2);
<a name="l01343"></a>01343     <a class="code" href="../../d1/d0d/area_8c.html#a36df79b09edb01547719640dd5796dcb">area_copy_data</a>(sa1, sa2, 0);
<a name="l01344"></a>01344     <a class="code" href="../../d1/d0d/area_8c.html#a36df79b09edb01547719640dd5796dcb">area_copy_data</a>(sa2, tmp, 0);
<a name="l01345"></a>01345     <a class="code" href="../../d1/d12/ED__screen_8h.html#ae45f2f3bb39946df3342722735be4fb1">ED_area_initialize</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C), <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C), sa1);
<a name="l01346"></a>01346     <a class="code" href="../../d1/d12/ED__screen_8h.html#ae45f2f3bb39946df3342722735be4fb1">ED_area_initialize</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C), <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C), sa2);
<a name="l01347"></a>01347 
<a name="l01348"></a>01348     <a class="code" href="../../d7/da3/BKE__screen_8h.html#a03d5b9c3df2fc2f8cd8f23a7ec5fd289">BKE_screen_area_free</a>(tmp);
<a name="l01349"></a>01349     <a class="code" href="../../da/d2b/mallocn_8c.html#aebca1f40b6b3b5815677a99dc56670d9">MEM_freeN</a>(tmp);
<a name="l01350"></a>01350 
<a name="l01351"></a>01351     <span class="comment">/* tell WM to refresh, cursor types etc */</span>
<a name="l01352"></a>01352     <a class="code" href="../../df/db0/wm__event__system_8c.html#a1d397b4836b1aa453112a4cc59550686">WM_event_add_mousemove</a>(C);
<a name="l01353"></a>01353     
<a name="l01354"></a>01354     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(sa1);
<a name="l01355"></a>01355     <a class="code" href="../../d1/d12/ED__screen_8h.html#ae9072acfc70f13e6379261f68f49c691">ED_area_tag_refresh</a>(sa1);
<a name="l01356"></a>01356     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(sa2);
<a name="l01357"></a>01357     <a class="code" href="../../d1/d12/ED__screen_8h.html#ae9072acfc70f13e6379261f68f49c691">ED_area_tag_refresh</a>(sa2);
<a name="l01358"></a>01358 }
<a name="l01359"></a>01359 
<a name="l01360"></a><a class="code" href="../../d1/d0d/area_8c.html#a3340fb4005318dd1d6233729c040a10b">01360</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a1768c9e14c6c8f09f1b8175ca1d7f3cf">ED_area_newspace</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa, <span class="keywordtype">int</span> type)
<a name="l01361"></a>01361 {
<a name="l01362"></a>01362     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a> != type) {
<a name="l01363"></a>01363         <a class="code" href="../../dd/d66/structSpaceType.html">SpaceType</a> *st;
<a name="l01364"></a>01364         <a class="code" href="../../d4/d63/structSpaceLink.html">SpaceLink</a> *slold;
<a name="l01365"></a>01365         <a class="code" href="../../d4/d63/structSpaceLink.html">SpaceLink</a> *sl;
<a name="l01366"></a>01366 
<a name="l01367"></a>01367         <a class="code" href="../../d1/d12/ED__screen_8h.html#acf1337067240bb750c7328678a0d896d">ED_area_exit</a>(C, sa);
<a name="l01368"></a>01368 
<a name="l01369"></a>01369         st= <a class="code" href="../../d7/da3/BKE__screen_8h.html#aa38a17435264e8ed7fe5c0518b45e431">BKE_spacetype_from_id</a>(type);
<a name="l01370"></a>01370         slold= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a124203529b9ea4c84ca8f8ae4efff3e3">spacetype</a>= type;
<a name="l01373"></a>01373         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#adb10112c8e3abb732123a775ebbf7b93">butspacetype</a>= type;
<a name="l01374"></a>01374         sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a41fdde87680287b354eca377ae99ed1e">type</a>= st;
<a name="l01375"></a>01375         
<a name="l01376"></a>01376         <span class="comment">/* check previously stored space */</span>
<a name="l01377"></a>01377         <span class="keywordflow">for</span> (sl= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; sl; sl= sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>)
<a name="l01378"></a>01378             <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a842775af6c8ee1e2b4fd1fa4ab77a633">spacetype</a>==type)
<a name="l01379"></a>01379                 <span class="keywordflow">break</span>;
<a name="l01380"></a>01380         
<a name="l01381"></a>01381         <span class="comment">/* old spacedata... happened during work on 2.50, remove */</span>
<a name="l01382"></a>01382         <span class="keywordflow">if</span> (sl &amp;&amp; sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>==<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01383"></a>01383             st-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#a385600342d1d047d4eadd30788daae58">free</a>(sl);
<a name="l01384"></a>01384             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a2bb7ce226f8b42d21eb35100f0bb4580">BLI_freelinkN</a>(&amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, sl);
<a name="l01385"></a>01385             <span class="keywordflow">if</span> (slold == sl) {
<a name="l01386"></a>01386                 slold= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01387"></a>01387             }
<a name="l01388"></a>01388             sl= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01389"></a>01389         }
<a name="l01390"></a>01390         
<a name="l01391"></a>01391         <span class="keywordflow">if</span> (sl) {
<a name="l01392"></a>01392             
<a name="l01393"></a>01393             <span class="comment">/* swap regions */</span>
<a name="l01394"></a>01394             slold-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>;
<a name="l01395"></a>01395             sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>= sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>;
<a name="l01396"></a>01396             sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>= sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#a46f89850aad8cd09b34b5bdc3aa8f91a">last</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01397"></a>01397             
<a name="l01398"></a>01398             <span class="comment">/* put in front of list */</span>
<a name="l01399"></a>01399             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#a1ff36f7c9cfb643553d599b91f08abea">BLI_remlink</a>(&amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, sl);
<a name="l01400"></a>01400             <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#ab5b5ec121d2522c0e8e74e01d6517feb">BLI_addhead</a>(&amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, sl);
<a name="l01401"></a>01401         } 
<a name="l01402"></a>01402         <span class="keywordflow">else</span> {
<a name="l01403"></a>01403             <span class="comment">/* new space */</span>
<a name="l01404"></a>01404             <span class="keywordflow">if</span> (st) {
<a name="l01405"></a>01405                 sl= st-&gt;<a class="code" href="../../dd/d66/structSpaceType.html#aaa1fdc111c713e152ca17d11eb2b9d0d">new</a>(C);
<a name="l01406"></a>01406                 <a class="code" href="../../d1/d3e/BLI__listbase_8h.html#ab5b5ec121d2522c0e8e74e01d6517feb">BLI_addhead</a>(&amp;sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>, sl);
<a name="l01407"></a>01407                 
<a name="l01408"></a>01408                 <span class="comment">/* swap regions */</span>
<a name="l01409"></a>01409                 <span class="keywordflow">if</span> (slold)
<a name="l01410"></a>01410                     slold-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>= sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>;
<a name="l01411"></a>01411                 sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a9f3cbd74b3cf2a0660a2db120e956cbf">regionbase</a>= sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>;
<a name="l01412"></a>01412                 sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>= sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#aa233652ac9d46454aee8327666ecf8d0">regionbase</a>.<a class="code" href="../../d6/d85/structListBase.html#a46f89850aad8cd09b34b5bdc3aa8f91a">last</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01413"></a>01413             }
<a name="l01414"></a>01414         }
<a name="l01415"></a>01415         
<a name="l01416"></a>01416         <a class="code" href="../../d1/d12/ED__screen_8h.html#ae45f2f3bb39946df3342722735be4fb1">ED_area_initialize</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a5dcb9150a17a8907a3da33993063637e">CTX_wm_manager</a>(C), <a class="code" href="../../df/d01/BKE__context_8h.html#af86d2cf919d95eaefc99c2c3e553057e">CTX_wm_window</a>(C), sa);
<a name="l01417"></a>01417         
<a name="l01418"></a>01418         <span class="comment">/* tell WM to refresh, cursor types etc */</span>
<a name="l01419"></a>01419         <a class="code" href="../../df/db0/wm__event__system_8c.html#a1d397b4836b1aa453112a4cc59550686">WM_event_add_mousemove</a>(C);
<a name="l01420"></a>01420                 
<a name="l01421"></a>01421         <span class="comment">/*send space change notifier*/</span>
<a name="l01422"></a>01422         <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1c5e90be4e64f2ca18dbb03050dbd459">ND_SPACE_CHANGED</a>, sa);
<a name="l01423"></a>01423         
<a name="l01424"></a>01424         <a class="code" href="../../d1/d12/ED__screen_8h.html#ae9072acfc70f13e6379261f68f49c691">ED_area_tag_refresh</a>(sa);
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426     
<a name="l01427"></a>01427     <span class="comment">/* also redraw when re-used */</span>
<a name="l01428"></a>01428     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(sa);
<a name="l01429"></a>01429 }
<a name="l01430"></a>01430 
<a name="l01431"></a><a class="code" href="../../d1/d0d/area_8c.html#a617d94f6123f70d2b0063b11f6eba769">01431</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#ad402cde74964d06df69a976c69bafb9a">ED_area_prevspace</a>(<a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa)
<a name="l01432"></a>01432 {
<a name="l01433"></a>01433     <a class="code" href="../../d4/d63/structSpaceLink.html">SpaceLink</a> *sl = (sa) ? sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a3e912d89fe2993ce473b0718900723d4">spacedata</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a> : <a class="code" href="../../df/d01/BKE__context_8h.html#ac2755ddf45c6787c6429d5af9b04d809">CTX_wm_space_data</a>(C);
<a name="l01434"></a>01434 
<a name="l01435"></a>01435     <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>) {
<a name="l01436"></a>01436         <span class="comment">/* workaround for case of double prevspace, render window</span>
<a name="l01437"></a>01437 <span class="comment">         * with a file browser on top of it */</span>
<a name="l01438"></a>01438         <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a842775af6c8ee1e2b4fd1fa4ab77a633">spacetype</a> == <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752ca5f4c324d2af06c247780942931169c7c">SPACE_FILE</a> &amp;&amp; sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>)
<a name="l01439"></a>01439             <a class="code" href="../../d1/d12/ED__screen_8h.html#a1768c9e14c6c8f09f1b8175ca1d7f3cf">ED_area_newspace</a>(C, sa, sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a842775af6c8ee1e2b4fd1fa4ab77a633">spacetype</a>);
<a name="l01440"></a>01440         <span class="keywordflow">else</span>
<a name="l01441"></a>01441             <a class="code" href="../../d1/d12/ED__screen_8h.html#a1768c9e14c6c8f09f1b8175ca1d7f3cf">ED_area_newspace</a>(C, sa, sl-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a02205c8e58d3bffda62cb69123b36629">next</a>-&gt;<a class="code" href="../../d4/d63/structSpaceLink.html#a842775af6c8ee1e2b4fd1fa4ab77a633">spacetype</a>);
<a name="l01442"></a>01442     }
<a name="l01443"></a>01443     <span class="keywordflow">else</span> {
<a name="l01444"></a>01444         <a class="code" href="../../d1/d12/ED__screen_8h.html#a1768c9e14c6c8f09f1b8175ca1d7f3cf">ED_area_newspace</a>(C, sa, <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752cafbebfeeb0fd0f7c61564dec31fe64450">SPACE_INFO</a>);
<a name="l01445"></a>01445     }
<a name="l01446"></a>01446     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(sa);
<a name="l01447"></a>01447 
<a name="l01448"></a>01448     <span class="comment">/*send space change notifier*/</span>
<a name="l01449"></a>01449     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1c5e90be4e64f2ca18dbb03050dbd459">ND_SPACE_CHANGED</a>, sa);
<a name="l01450"></a>01450 }
<a name="l01451"></a>01451 
<a name="l01452"></a><a class="code" href="../../d1/d0d/area_8c.html#a6647aaeaa1ae33d4d5efaea6a454d2e7">01452</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d0d/area_8c.html#a6647aaeaa1ae33d4d5efaea6a454d2e7">editortype_pup</a>(<span class="keywordtype">void</span>)
<a name="l01453"></a>01453 {
<a name="l01454"></a>01454     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d95/makesdna_8c.html#a7c818545257582cb367e58b3a75f15a6">types</a>= <a class="code" href="../../d6/d61/BLF__translation_8h.html#abdf0847bd8caa2c2247f5d9bc5e12982">N_</a>(
<a name="l01455"></a>01455            <span class="stringliteral">&quot;Editor type:%t&quot;</span>
<a name="l01456"></a>01456            <span class="stringliteral">&quot;|3D View %x1&quot;</span>
<a name="l01457"></a>01457 
<a name="l01458"></a>01458            <span class="stringliteral">&quot;|%l&quot;</span>
<a name="l01459"></a>01459            
<a name="l01460"></a>01460            <span class="stringliteral">&quot;|Timeline %x15&quot;</span>
<a name="l01461"></a>01461            <span class="stringliteral">&quot;|Graph Editor %x2&quot;</span>
<a name="l01462"></a>01462            <span class="stringliteral">&quot;|DopeSheet %x12&quot;</span>
<a name="l01463"></a>01463            <span class="stringliteral">&quot;|NLA Editor %x13&quot;</span>
<a name="l01464"></a>01464            
<a name="l01465"></a>01465            <span class="stringliteral">&quot;|%l&quot;</span>
<a name="l01466"></a>01466            
<a name="l01467"></a>01467            <span class="stringliteral">&quot;|UV/Image Editor %x6&quot;</span>
<a name="l01468"></a>01468            
<a name="l01469"></a>01469            <span class="stringliteral">&quot;|Video Sequence Editor %x8&quot;</span>
<a name="l01470"></a>01470            <span class="stringliteral">&quot;|Movie Clip Editor %x20&quot;</span>
<a name="l01471"></a>01471            <span class="stringliteral">&quot;|Text Editor %x9&quot;</span> 
<a name="l01472"></a>01472            <span class="stringliteral">&quot;|Node Editor %x16&quot;</span>
<a name="l01473"></a>01473            <span class="stringliteral">&quot;|Logic Editor %x17&quot;</span>
<a name="l01474"></a>01474            
<a name="l01475"></a>01475            <span class="stringliteral">&quot;|%l&quot;</span>
<a name="l01476"></a>01476            
<a name="l01477"></a>01477            <span class="stringliteral">&quot;|Properties %x4&quot;</span>
<a name="l01478"></a>01478            <span class="stringliteral">&quot;|Outliner %x3&quot;</span>
<a name="l01479"></a>01479            <span class="stringliteral">&quot;|User Preferences %x19&quot;</span>
<a name="l01480"></a>01480            <span class="stringliteral">&quot;|Info%x7&quot;</span>
<a name="l01481"></a>01481 
<a name="l01482"></a>01482            <span class="stringliteral">&quot;|%l&quot;</span>
<a name="l01483"></a>01483 
<a name="l01484"></a>01484            <span class="stringliteral">&quot;|File Browser %x5&quot;</span>
<a name="l01485"></a>01485            
<a name="l01486"></a>01486            <span class="stringliteral">&quot;|%l&quot;</span>
<a name="l01487"></a>01487            
<a name="l01488"></a>01488            <span class="stringliteral">&quot;|Python Console %x18&quot;</span>
<a name="l01489"></a>01489            );
<a name="l01490"></a>01490 
<a name="l01491"></a>01491     <span class="keywordflow">return</span> <a class="code" href="../../d6/d61/BLF__translation_8h.html#abb0b47333c78518638888749beab5f55">IFACE_</a>(types);
<a name="l01492"></a>01492 }
<a name="l01493"></a>01493 
<a name="l01494"></a><a class="code" href="../../d1/d0d/area_8c.html#a8d669cfa962c570700367d830cfe04b1">01494</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d0d/area_8c.html#a8d669cfa962c570700367d830cfe04b1">spacefunc</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *<a class="code" href="../../d7/d0d/node__texture__proc_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>, <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg1), <span class="keywordtype">void</span> *<a class="code" href="../../da/d7d/BLI__utildefines_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(arg2))
<a name="l01495"></a>01495 {
<a name="l01496"></a>01496     <a class="code" href="../../d1/d12/ED__screen_8h.html#a1768c9e14c6c8f09f1b8175ca1d7f3cf">ED_area_newspace</a>(C, <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C), <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C)-&gt;butspacetype);
<a name="l01497"></a>01497     <a class="code" href="../../d1/d12/ED__screen_8h.html#a0982c011d985308b08320d5f9604418b">ED_area_tag_redraw</a>(<a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C));
<a name="l01498"></a>01498 
<a name="l01499"></a>01499     <span class="comment">/*send space change notifier*/</span>
<a name="l01500"></a>01500     <a class="code" href="../../df/db0/wm__event__system_8c.html#a6a6bfb771c3639a4f1038d56a3fa0217">WM_event_add_notifier</a>(C, <a class="code" href="../../d4/ddc/WM__types_8h.html#af1c384817f70d0a752fc68681535fcc9">NC_SPACE</a>|<a class="code" href="../../d4/ddc/WM__types_8h.html#a1c5e90be4e64f2ca18dbb03050dbd459">ND_SPACE_CHANGED</a>, <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C));
<a name="l01501"></a>01501 }
<a name="l01502"></a>01502 
<a name="l01503"></a>01503 <span class="comment">/* returns offset for next button in header */</span>
<a name="l01504"></a><a class="code" href="../../d1/d0d/area_8c.html#ad1be9ecff33328c1564648bf2d0cbe20">01504</a> <span class="keywordtype">int</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#afcb2cb6d479cafc06ae7fe5d58da03cb">ED_area_header_switchbutton</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block, <span class="keywordtype">int</span> yco)
<a name="l01505"></a>01505 {
<a name="l01506"></a>01506     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l01507"></a>01507     <a class="code" href="../../d5/dd7/structuiBut.html">uiBut</a> *but;
<a name="l01508"></a>01508     <span class="keywordtype">int</span> xco= 8;
<a name="l01509"></a>01509     
<a name="l01510"></a>01510     but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#adfb8083ade103c89e0dfcd025c4c5177">uiDefIconTextButC</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a5975b2d368ff03c7359503587664fba5">ICONTEXTROW</a>, 0, ICON_VIEW3D, 
<a name="l01511"></a>01511                            <a class="code" href="../../d1/d0d/area_8c.html#a6647aaeaa1ae33d4d5efaea6a454d2e7">editortype_pup</a>(), xco, yco, <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>+10, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>, 
<a name="l01512"></a>01512                            &amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#adb10112c8e3abb732123a775ebbf7b93">butspacetype</a>), 1.0, <a class="code" href="../../d8/d5d/DNA__space__types_8h.html#a5efefa44b296976f2147b8acbed1752ca76904fe4802b7da70f821119f1a56a5c">SPACEICONMAX</a>, 0, 0, 
<a name="l01513"></a>01513                            <a class="code" href="../../d6/d61/BLF__translation_8h.html#a7163975dd2031d6463da225baaf59bfb">TIP_</a>(<span class="stringliteral">&quot;Displays current editor type. Click for menu of available types&quot;</span>));
<a name="l01514"></a>01514     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a3577b54257b3f858be44d8808e6c5cc6">uiButSetFunc</a>(but, <a class="code" href="../../d1/d0d/area_8c.html#a8d669cfa962c570700367d830cfe04b1">spacefunc</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01515"></a>01515     <a class="code" href="../../d8/d1e/UI__interface_8h.html#af846c8db759750a7d781abcc3933d390">uiButClearFlag</a>(but, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a43152cd15e4d019a8ee2aeeeeafb0c98">UI_BUT_UNDO</a>); <span class="comment">/* skip undo on screen buttons */</span>
<a name="l01516"></a>01516     
<a name="l01517"></a>01517     <span class="keywordflow">return</span> xco + <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a> + 14;
<a name="l01518"></a>01518 }
<a name="l01519"></a>01519 
<a name="l01520"></a><a class="code" href="../../d1/d0d/area_8c.html#a540ce2732a85e0eaa895201a9330e75a">01520</a> <span class="keywordtype">int</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a4980aaeed6aa9ad4731dee12540405f0">ED_area_header_standardbuttons</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block, <span class="keywordtype">int</span> yco)
<a name="l01521"></a>01521 {
<a name="l01522"></a>01522     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l01523"></a>01523     <span class="keywordtype">int</span> xco= 8;
<a name="l01524"></a>01524     <a class="code" href="../../d5/dd7/structuiBut.html">uiBut</a> *but;
<a name="l01525"></a>01525     
<a name="l01526"></a>01526     <span class="keywordflow">if</span> (!sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a62b30afc9f5a2f501be12a0917cebe35">full</a>)
<a name="l01527"></a>01527         xco= <a class="code" href="../../d1/d12/ED__screen_8h.html#afcb2cb6d479cafc06ae7fe5d58da03cb">ED_area_header_switchbutton</a>(C, block, yco);
<a name="l01528"></a>01528 
<a name="l01529"></a>01529     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a273f9460f5ebaa8e186d34a949d1f862">uiBlockSetEmboss</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a54c054495b4966d6e51e0c5ccb5d72f4">UI_EMBOSSN</a>);
<a name="l01530"></a>01530 
<a name="l01531"></a>01531     <span class="keywordflow">if</span> (sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a95330fccbc8eb82dc12aefadd1afd8db">flag</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ad36c38722e503a05a8e6d7dac539b5cd">HEADER_NO_PULLDOWN</a>) {
<a name="l01532"></a>01532         but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1adf98eef22ce78e17a672122c54ac6f">uiDefIconButBitS</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#a2532bfdf10e1ca1685038b02ce0f3386">TOG</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ad36c38722e503a05a8e6d7dac539b5cd">HEADER_NO_PULLDOWN</a>, 0,
<a name="l01533"></a>01533                          ICON_DISCLOSURE_TRI_RIGHT,
<a name="l01534"></a>01534                          xco,yco,<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>,<a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>-2,
<a name="l01535"></a>01535                          &amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a95330fccbc8eb82dc12aefadd1afd8db">flag</a>), 0, 0, 0, 0, 
<a name="l01536"></a>01536                          <span class="stringliteral">&quot;Show pulldown menus&quot;</span>);
<a name="l01537"></a>01537     }
<a name="l01538"></a>01538     <span class="keywordflow">else</span> {
<a name="l01539"></a>01539         but = <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1adf98eef22ce78e17a672122c54ac6f">uiDefIconButBitS</a>(block, <a class="code" href="../../d9/dc4/plugin_8h.html#a2532bfdf10e1ca1685038b02ce0f3386">TOG</a>, <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ad36c38722e503a05a8e6d7dac539b5cd">HEADER_NO_PULLDOWN</a>, 0,
<a name="l01540"></a>01540                          ICON_DISCLOSURE_TRI_DOWN,
<a name="l01541"></a>01541                          xco,yco,<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>,<a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>-2,
<a name="l01542"></a>01542                          &amp;(sa-&gt;<a class="code" href="../../d4/d95/structScrArea.html#a95330fccbc8eb82dc12aefadd1afd8db">flag</a>), 0, 0, 0, 0, 
<a name="l01543"></a>01543                          <span class="stringliteral">&quot;Hide pulldown menus&quot;</span>);
<a name="l01544"></a>01544     }
<a name="l01545"></a>01545 
<a name="l01546"></a>01546     <a class="code" href="../../d8/d1e/UI__interface_8h.html#af846c8db759750a7d781abcc3933d390">uiButClearFlag</a>(but, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a43152cd15e4d019a8ee2aeeeeafb0c98">UI_BUT_UNDO</a>); <span class="comment">/* skip undo on screen buttons */</span>
<a name="l01547"></a>01547 
<a name="l01548"></a>01548     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a273f9460f5ebaa8e186d34a949d1f862">uiBlockSetEmboss</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a505992b59501cd825ea7f6d7ad3358a6">UI_EMBOSS</a>);
<a name="l01549"></a>01549     
<a name="l01550"></a>01550     <span class="keywordflow">return</span> xco + <a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>;
<a name="l01551"></a>01551 }
<a name="l01552"></a>01552 
<a name="l01553"></a>01553 <span class="comment">/************************ standard UI regions ************************/</span>
<a name="l01554"></a>01554 
<a name="l01555"></a><a class="code" href="../../d1/d0d/area_8c.html#aeb977e4871cb291b9aa89fafa023731c">01555</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#accfd2d3211f647ea5fb3d31b3ea34d07">ED_region_panels</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <span class="keywordtype">int</span> vertical, <span class="keyword">const</span> <span class="keywordtype">char</span> *context, <span class="keywordtype">int</span> contextnr)
<a name="l01556"></a>01556 {
<a name="l01557"></a>01557     <a class="code" href="../../d4/d95/structScrArea.html">ScrArea</a> *sa= <a class="code" href="../../df/d01/BKE__context_8h.html#a0aa169ee48010fe8d739201a37e7b66f">CTX_wm_area</a>(C);
<a name="l01558"></a>01558     <a class="code" href="../../d3/d28/structuiStyle.html">uiStyle</a> *style= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a16828a47eb4af34d08dce0ead86693b3">UI_GetStyle</a>();
<a name="l01559"></a>01559     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l01560"></a>01560     <a class="code" href="../../d6/d4e/structPanelType.html">PanelType</a> *pt;
<a name="l01561"></a>01561     <a class="code" href="../../d7/d84/structPanel.html">Panel</a> *panel;
<a name="l01562"></a>01562     <a class="code" href="../../d7/de3/structView2D.html">View2D</a> *v2d= &amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>;
<a name="l01563"></a>01563     <a class="code" href="../../d6/dfa/structView2DScrollers.html">View2DScrollers</a> *scrollers;
<a name="l01564"></a>01564     <span class="keywordtype">int</span> x, y, xco, yco, w, em, triangle, open, newcontext= 0;
<a name="l01565"></a>01565 
<a name="l01566"></a>01566     <span class="keywordflow">if</span> (contextnr &gt;= 0)
<a name="l01567"></a>01567         newcontext= <a class="code" href="../../d5/d63/UI__view2d_8h.html#aa9439a4dba6ca0512fd0f2f4e56f5885">UI_view2d_tab_set</a>(v2d, contextnr);
<a name="l01568"></a>01568 
<a name="l01569"></a>01569     <span class="keywordflow">if</span> (vertical) {
<a name="l01570"></a>01570         w= v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a3e5cff50450e7702e8a33b40dd056cbb">cur</a>.<a class="code" href="../../da/d10/structrctf.html#a76a664abf5a6971d8cc82d85c31a1178">xmax</a> - v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a3e5cff50450e7702e8a33b40dd056cbb">cur</a>.<a class="code" href="../../da/d10/structrctf.html#a9d7813796d160db4cdb7b9c749a8901d">xmin</a>;
<a name="l01571"></a>01571         em= (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a42adc2547994df726d3dc8bce9028601">prefsizex</a>)? <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>/2: <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>;
<a name="l01572"></a>01572     }
<a name="l01573"></a>01573     <span class="keywordflow">else</span> {
<a name="l01574"></a>01574         w= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a29a4430794d5405828b06a5dd0b6e9ed">UI_PANEL_WIDTH</a>;
<a name="l01575"></a>01575         em= (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a42adc2547994df726d3dc8bce9028601">prefsizex</a>)? <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>/2: <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>;
<a name="l01576"></a>01576     }
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     <span class="comment">/* create panels */</span>
<a name="l01579"></a>01579     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8ce165a9872dec4698a3864f5bbbf1e3">uiBeginPanels</a>(C, ar);
<a name="l01580"></a>01580 
<a name="l01581"></a>01581     <span class="comment">/* set view2d view matrix for scrolling (without scrollers) */</span>
<a name="l01582"></a>01582     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a10df649f115243423dbd5d9777d182f7">UI_view2d_view_ortho</a>(v2d);
<a name="l01583"></a>01583 
<a name="l01584"></a>01584     <span class="keywordflow">for</span> (pt= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#ac88a6a174e9688ed4b1714bac4b6cd81">paneltypes</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; pt; pt= pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a513aaa1d1480ed5b7e917e4ea7df3d20">next</a>) {
<a name="l01585"></a>01585         <span class="comment">/* verify context */</span>
<a name="l01586"></a>01586         <span class="keywordflow">if</span> (context)
<a name="l01587"></a>01587             <span class="keywordflow">if</span> (pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a7238751bcef2e6c3193cb74d85e45c39">context</a>[0] &amp;&amp; strcmp(context, pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a7238751bcef2e6c3193cb74d85e45c39">context</a>) != 0)
<a name="l01588"></a>01588                 <span class="keywordflow">continue</span>;
<a name="l01589"></a>01589 
<a name="l01590"></a>01590         <span class="comment">/* draw panel */</span>
<a name="l01591"></a>01591         <span class="keywordflow">if</span> (pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a> &amp;&amp; (!pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a> || pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4443faceb3deeac899cd9853ab0eef99">poll</a>(C, pt))) {
<a name="l01592"></a>01592             block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8bb41a5814e5120ba3c694cb35667128">uiBeginBlock</a>(C, ar, pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a4635539e37b89b38c4f84ec0f45fab23">idname</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a505992b59501cd825ea7f6d7ad3358a6">UI_EMBOSS</a>);
<a name="l01593"></a>01593             panel= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa42a46ac27459165eed0d3ef04343d47">uiBeginPanel</a>(sa, ar, block, pt, &amp;open);
<a name="l01594"></a>01594 
<a name="l01595"></a>01595             <span class="comment">/* bad fixed values */</span>
<a name="l01596"></a>01596             triangle= (int)(<a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a> * 1.1f);
<a name="l01597"></a>01597 
<a name="l01598"></a>01598             <span class="keywordflow">if</span> (pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a5c56e7489836f78935dc6ec128ff8dad">draw_header</a> &amp;&amp; !(pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a5ba9e2b7b449e551bddb4b5c2573235d">flag</a> &amp; <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#ab06ead5447ac3d08dc5affdfe608fd54">PNL_NO_HEADER</a>) &amp;&amp; (open || vertical)) {
<a name="l01599"></a>01599                 <span class="comment">/* for enabled buttons */</span>
<a name="l01600"></a>01600                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1bb4b00a42cf4a43ed16c8b81ecc5916">uiBlockLayout</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1220385007dc9cda157373ab1db1c8c8">UI_LAYOUT_HORIZONTAL</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a7ce5de8d73f7a6857cdba4dac9f440be">UI_LAYOUT_HEADER</a>,
<a name="l01601"></a>01601                     triangle, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>+style-&gt;<a class="code" href="../../d3/d28/structuiStyle.html#a867a41292bad926045ae4c88e0e129d2">panelspace</a>+2, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>, 1, style);
<a name="l01602"></a>01602 
<a name="l01603"></a>01603                 pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a5c56e7489836f78935dc6ec128ff8dad">draw_header</a>(C, panel);
<a name="l01604"></a>01604 
<a name="l01605"></a>01605                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#af5a459ec6f6c7ec026184b9f063f4bd3">uiBlockLayoutResolve</a>(block, &amp;xco, &amp;yco);
<a name="l01606"></a>01606                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a285d5586e99106a84c628185de11fce3">labelofs</a>= xco - triangle;
<a name="l01607"></a>01607                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01608"></a>01608             }
<a name="l01609"></a>01609             <span class="keywordflow">else</span> {
<a name="l01610"></a>01610                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a285d5586e99106a84c628185de11fce3">labelofs</a>= 0;
<a name="l01611"></a>01611             }
<a name="l01612"></a>01612 
<a name="l01613"></a>01613             <span class="keywordflow">if</span> (open) {
<a name="l01614"></a>01614                 <span class="keywordtype">short</span> panelContext;
<a name="l01615"></a>01615                 
<a name="l01616"></a>01616                 <span class="comment">/* panel context can either be toolbar region or normal panels region */</span>
<a name="l01617"></a>01617                 <span class="keywordflow">if</span> (ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ad430a35493ef271e772179ccb7abb767">regiontype</a> == <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2ad274603e567ada5179c2a7a3d5fb99f4">RGN_TYPE_TOOLS</a>)
<a name="l01618"></a>01618                     panelContext= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aab397739d3c9c1a819a0a06d6d69c8a0">UI_LAYOUT_TOOLBAR</a>;
<a name="l01619"></a>01619                 <span class="keywordflow">else</span>
<a name="l01620"></a>01620                     panelContext= <a class="code" href="../../d8/d1e/UI__interface_8h.html#ab4e9f04bf2cbd97598f540aa2aac805f">UI_LAYOUT_PANEL</a>;
<a name="l01621"></a>01621                 
<a name="l01622"></a>01622                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1bb4b00a42cf4a43ed16c8b81ecc5916">uiBlockLayout</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a429a9756ef7e1d855f402d4812d9f734">UI_LAYOUT_VERTICAL</a>, panelContext,
<a name="l01623"></a>01623                     style-&gt;<a class="code" href="../../d3/d28/structuiStyle.html#a867a41292bad926045ae4c88e0e129d2">panelspace</a>, 0, w-2*style-&gt;<a class="code" href="../../d3/d28/structuiStyle.html#a867a41292bad926045ae4c88e0e129d2">panelspace</a>, em, style);
<a name="l01624"></a>01624 
<a name="l01625"></a>01625                 pt-&gt;<a class="code" href="../../d6/d4e/structPanelType.html#a09248b8b737271f840667f698fea0fab">draw</a>(C, panel);
<a name="l01626"></a>01626 
<a name="l01627"></a>01627                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#af5a459ec6f6c7ec026184b9f063f4bd3">uiBlockLayoutResolve</a>(block, &amp;xco, &amp;yco);
<a name="l01628"></a>01628                 panel-&gt;<a class="code" href="../../d7/d84/structPanel.html#a4412b9fd46d6b1618671644b2ddfc06a">layout</a>= <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01629"></a>01629 
<a name="l01630"></a>01630                 yco -= 2*style-&gt;<a class="code" href="../../d3/d28/structuiStyle.html#a867a41292bad926045ae4c88e0e129d2">panelspace</a>;
<a name="l01631"></a>01631                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a97fa32d93270a331877c28e99f3d17a6">uiEndPanel</a>(block, w, -yco);
<a name="l01632"></a>01632             }
<a name="l01633"></a>01633             <span class="keywordflow">else</span> {
<a name="l01634"></a>01634                 yco= 0;
<a name="l01635"></a>01635                 <a class="code" href="../../d8/d1e/UI__interface_8h.html#a97fa32d93270a331877c28e99f3d17a6">uiEndPanel</a>(block, w, 0);
<a name="l01636"></a>01636             }
<a name="l01637"></a>01637 
<a name="l01638"></a>01638             <a class="code" href="../../d8/d1e/UI__interface_8h.html#ac166273cd2c217e8b1da1bdac55a8ef8">uiEndBlock</a>(C, block);
<a name="l01639"></a>01639         }
<a name="l01640"></a>01640     }
<a name="l01641"></a>01641 
<a name="l01642"></a>01642     <span class="comment">/* align panels and return size */</span>
<a name="l01643"></a>01643     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4cbfa28bc0c8d1b6208bc9928f2fe7a8">uiEndPanels</a>(C, ar, &amp;x, &amp;y);
<a name="l01644"></a>01644 
<a name="l01645"></a>01645     <span class="comment">/* clear */</span>
<a name="l01646"></a>01646     <a class="code" href="../../de/d96/UI__resources_8h.html#a726a719a5a3b6b944d24fbcab8ed29c6">UI_ThemeClearColor</a>((ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#adc963cf5301f7c166227476bd6007351">regionid</a> == <a class="code" href="../../d4/da4/DNA__screen__types_8h.html#a425be5f49e9c31d8d13d53190a3e7bc2a9c229d954ba6692b9ea76f4a444a6ad5">RGN_TYPE_PREVIEW</a>)?<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a83ecb8dfad99680c9063b8ed0addf9cd">TH_PREVIEW_BACK</a>:<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a2f524dc89597307994ab7d91402f79cf">TH_BACK</a>);
<a name="l01647"></a>01647     glClear(GL_COLOR_BUFFER_BIT);
<a name="l01648"></a>01648     
<a name="l01649"></a>01649     <span class="comment">/* before setting the view */</span>
<a name="l01650"></a>01650     <span class="keywordflow">if</span> (vertical) {
<a name="l01651"></a>01651         <span class="comment">/* only allow scrolling in vertical direction */</span>
<a name="l01652"></a>01652         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a8212f2963082b37388fce9225ea5d041">keepofs</a> |= <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a22443b88c8a284c1787a0b1240dfe459">V2D_LOCKOFS_X</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#afeb15edb0e15ff137058eff0e649d12f">V2D_KEEPOFS_Y</a>;
<a name="l01653"></a>01653         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a8212f2963082b37388fce9225ea5d041">keepofs</a> &amp;= ~(<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a7908acd6aefdcbd62fb675c848be69bd">V2D_LOCKOFS_Y</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a6c89462bb28d7566a5d9488ccbaf5c8e">V2D_KEEPOFS_X</a>);
<a name="l01654"></a>01654         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> |= <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a638a7692b2855648cbcb103f24c37438">V2D_SCROLL_HORIZONTAL_HIDE</a>;
<a name="l01655"></a>01655         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> &amp;= ~<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a0792ec92f99fe3abf23f0cc8787cbef6">V2D_SCROLL_VERTICAL_HIDE</a>;
<a name="l01656"></a>01656         
<a name="l01657"></a>01657         <span class="comment">// don&#39;t jump back when panels close or hide</span>
<a name="l01658"></a>01658         <span class="keywordflow">if</span> (!newcontext)
<a name="l01659"></a>01659             y= <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(-y, -v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a3e5cff50450e7702e8a33b40dd056cbb">cur</a>.<a class="code" href="../../da/d10/structrctf.html#aeea1ce7886a81f1099e897d587012013">ymin</a>);
<a name="l01660"></a>01660         <span class="keywordflow">else</span>
<a name="l01661"></a>01661             y= -y;
<a name="l01662"></a>01662     }
<a name="l01663"></a>01663     <span class="keywordflow">else</span> {
<a name="l01664"></a>01664         <span class="comment">/* for now, allow scrolling in both directions (since layouts are optimized for vertical,</span>
<a name="l01665"></a>01665 <span class="comment">         * they often don&#39;t fit in horizontal layout)</span>
<a name="l01666"></a>01666 <span class="comment">         */</span>
<a name="l01667"></a>01667         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a8212f2963082b37388fce9225ea5d041">keepofs</a> &amp;= ~(<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a22443b88c8a284c1787a0b1240dfe459">V2D_LOCKOFS_X</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a7908acd6aefdcbd62fb675c848be69bd">V2D_LOCKOFS_Y</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a6c89462bb28d7566a5d9488ccbaf5c8e">V2D_KEEPOFS_X</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#afeb15edb0e15ff137058eff0e649d12f">V2D_KEEPOFS_Y</a>);
<a name="l01668"></a>01668         <span class="comment">//v2d-&gt;keepofs |= V2D_LOCKOFS_Y|V2D_KEEPOFS_X;</span>
<a name="l01669"></a>01669         <span class="comment">//v2d-&gt;keepofs &amp;= ~(V2D_LOCKOFS_X|V2D_KEEPOFS_Y);</span>
<a name="l01670"></a>01670         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> |= <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a0792ec92f99fe3abf23f0cc8787cbef6">V2D_SCROLL_VERTICAL_HIDE</a>;
<a name="l01671"></a>01671         v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> &amp;= ~<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a638a7692b2855648cbcb103f24c37438">V2D_SCROLL_HORIZONTAL_HIDE</a>;
<a name="l01672"></a>01672         
<a name="l01673"></a>01673         <span class="comment">// don&#39;t jump back when panels close or hide</span>
<a name="l01674"></a>01674         <span class="keywordflow">if</span> (!newcontext)
<a name="l01675"></a>01675             x= <a class="code" href="../../d0/dbd/bmfont_8c.html#a57562d98bd289bc7ea77ba251915d8fb">MAX2</a>(x, v2d-&gt;<a class="code" href="../../d7/de3/structView2D.html#a3e5cff50450e7702e8a33b40dd056cbb">cur</a>.<a class="code" href="../../da/d10/structrctf.html#a76a664abf5a6971d8cc82d85c31a1178">xmax</a>);
<a name="l01676"></a>01676         y= -y;
<a name="l01677"></a>01677     }
<a name="l01678"></a>01678 
<a name="l01679"></a>01679     <span class="comment">// +V2D_SCROLL_HEIGHT is workaround to set the actual height</span>
<a name="l01680"></a>01680     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a51e24abcadd7da64156203eb919aeaee">UI_view2d_totRect_set</a>(v2d, x+<a class="code" href="../../d5/d63/UI__view2d_8h.html#a60f26dbc029ccff6287b02051f41e9b9">V2D_SCROLL_WIDTH</a>, y+<a class="code" href="../../d5/d63/UI__view2d_8h.html#a069e052def33db00e951eec0987d4d6e">V2D_SCROLL_HEIGHT</a>);
<a name="l01681"></a>01681 
<a name="l01682"></a>01682     <span class="comment">/* set the view */</span>
<a name="l01683"></a>01683     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a10df649f115243423dbd5d9777d182f7">UI_view2d_view_ortho</a>(v2d);
<a name="l01684"></a>01684 
<a name="l01685"></a>01685     <span class="comment">/* draw panels */</span>
<a name="l01686"></a>01686     <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8d6e48677df41054aa68abdbd3596799">uiDrawPanels</a>(C, ar);
<a name="l01687"></a>01687 
<a name="l01688"></a>01688     <span class="comment">/* restore view matrix */</span>
<a name="l01689"></a>01689     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a665a1f0de807248abff87b62a4d2ac8b">UI_view2d_view_restore</a>(C);
<a name="l01690"></a>01690     
<a name="l01691"></a>01691     <span class="comment">/* scrollers */</span>
<a name="l01692"></a>01692     scrollers= <a class="code" href="../../d5/d63/UI__view2d_8h.html#ac59b39b29261b0af35bff6a60231319a">UI_view2d_scrollers_calc</a>(C, v2d, <a class="code" href="../../d5/d63/UI__view2d_8h.html#ab5ba307cf79a2ef296222e3681de4b05">V2D_ARG_DUMMY</a>, <a class="code" href="../../d5/d63/UI__view2d_8h.html#ab5ba307cf79a2ef296222e3681de4b05">V2D_ARG_DUMMY</a>, <a class="code" href="../../d5/d63/UI__view2d_8h.html#ab5ba307cf79a2ef296222e3681de4b05">V2D_ARG_DUMMY</a>, <a class="code" href="../../d5/d63/UI__view2d_8h.html#ab5ba307cf79a2ef296222e3681de4b05">V2D_ARG_DUMMY</a>);
<a name="l01693"></a>01693     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a8e930eb3c26f1c4389bb0a147e47781b">UI_view2d_scrollers_draw</a>(C, v2d, scrollers);
<a name="l01694"></a>01694     <a class="code" href="../../d5/d63/UI__view2d_8h.html#ac30f32ea757898d20f76ae42e6cbdb2b">UI_view2d_scrollers_free</a>(scrollers);
<a name="l01695"></a>01695 }
<a name="l01696"></a>01696 
<a name="l01697"></a><a class="code" href="../../d1/d0d/area_8c.html#a1c07294d0a0da29918fda86b4367680f">01697</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a130fc89f09440c7ad4c7462f26e64afb">ED_region_panels_init</a>(<a class="code" href="../../d4/dc3/structwmWindowManager.html">wmWindowManager</a> *wm, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01698"></a>01698 {
<a name="l01699"></a>01699     <a class="code" href="../../d3/d90/structwmKeyMap.html">wmKeyMap</a> *keymap;
<a name="l01700"></a>01700     
<a name="l01701"></a>01701     <span class="comment">// XXX quick hacks for files saved with 2.5 already (i.e. the builtin defaults file)</span>
<a name="l01702"></a>01702         <span class="comment">// scrollbars for button regions</span>
<a name="l01703"></a>01703     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> |= (<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#ace4b9f8761f06a8b3bd70a71bc80e34e">V2D_SCROLL_RIGHT</a>|<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#ae283bf8af6563e4eb94871f580626c29">V2D_SCROLL_BOTTOM</a>); 
<a name="l01704"></a>01704     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> |= <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a638a7692b2855648cbcb103f24c37438">V2D_SCROLL_HORIZONTAL_HIDE</a>;
<a name="l01705"></a>01705     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#ab5e36562f4760c86bb131de724c33bf2">scroll</a> &amp;= ~<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a0792ec92f99fe3abf23f0cc8787cbef6">V2D_SCROLL_VERTICAL_HIDE</a>;
<a name="l01706"></a>01706     ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a7120051e48d53727c374ffbe433f9802">keepzoom</a> |= <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a12307a21b2037e2c990c4076cfcde78b">V2D_KEEPZOOM</a>;
<a name="l01707"></a>01707 
<a name="l01708"></a>01708         <span class="comment">// correctly initialized User-Prefs?</span>
<a name="l01709"></a>01709     <span class="keywordflow">if</span> (!(ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a50d8ffdaa4d99eb1c33ba22e22970996">align</a> &amp; <a class="code" href="../../df/d05/DNA__view2d__types_8h.html#ad925b1ac58342a23b616de1720e59d64">V2D_ALIGN_NO_POS_Y</a>))
<a name="l01710"></a>01710         ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a0c6ad4ab28f9e6cc5b9fd9e3aafafbac">flag</a> &amp;= ~<a class="code" href="../../df/d05/DNA__view2d__types_8h.html#a39f3bc5c996c526f80c092ba7628b129">V2D_IS_INITIALISED</a>;
<a name="l01711"></a>01711     
<a name="l01712"></a>01712     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a290dc649f0878a73635adb59a4a06a88">UI_view2d_region_reinit</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>, <a class="code" href="../../d5/d63/UI__view2d_8h.html#a950bf8e3371138ceb9649d45e9a96340af162a8406ee4dfe6b8fb6fdf5d4cb427">V2D_COMMONVIEW_PANELS_UI</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>);
<a name="l01713"></a>01713 
<a name="l01714"></a>01714     keymap = <a class="code" href="../../d7/d78/wm__keymap_8c.html#a92bcf8f3f041915f81ad660495dc30cd">WM_keymap_find</a>(wm-&gt;<a class="code" href="../../d4/dc3/structwmWindowManager.html#a17c7e8a6747f168e3b9266314ba2534e">defaultconf</a>, <span class="stringliteral">&quot;View2D Buttons List&quot;</span>, 0, 0);
<a name="l01715"></a>01715     <a class="code" href="../../df/db0/wm__event__system_8c.html#a966bbb5f2ccdc15546e0725efa379595">WM_event_add_keymap_handler</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a84683336306edb035eeaa8d2f6fa7033">handlers</a>, keymap);
<a name="l01716"></a>01716 }
<a name="l01717"></a>01717 
<a name="l01718"></a><a class="code" href="../../d1/d0d/area_8c.html#a42bb93520319ee94c17ec70e695c4d79">01718</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a71e8540b0713b316404a3e1a21690cb9">ED_region_header</a>(<span class="keyword">const</span> <a class="code" href="../../d5/df1/structbContext.html">bContext</a> *C, <a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01719"></a>01719 {
<a name="l01720"></a>01720     <a class="code" href="../../d3/d28/structuiStyle.html">uiStyle</a> *style= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a16828a47eb4af34d08dce0ead86693b3">UI_GetStyle</a>();
<a name="l01721"></a>01721     <a class="code" href="../../df/d5b/structuiBlock.html">uiBlock</a> *block;
<a name="l01722"></a>01722     <a class="code" href="../../d4/d94/structuiLayout.html">uiLayout</a> *layout;
<a name="l01723"></a>01723     <a class="code" href="../../de/d1c/structHeaderType.html">HeaderType</a> *ht;
<a name="l01724"></a>01724     <a class="code" href="../../dc/d47/structHeader.html">Header</a> header = {<a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>};
<a name="l01725"></a>01725     <span class="keywordtype">int</span> maxco, xco, yco;
<a name="l01726"></a>01726     <span class="keywordtype">int</span> headery= <a class="code" href="../../d1/d12/ED__screen_8h.html#a691baf7c6b3655f45442d77ad5b283c2">ED_area_headersize</a>();
<a name="l01727"></a>01727 
<a name="l01728"></a>01728     <span class="comment">/* clear */</span> 
<a name="l01729"></a>01729     <a class="code" href="../../de/d96/UI__resources_8h.html#a726a719a5a3b6b944d24fbcab8ed29c6">UI_ThemeClearColor</a>((<a class="code" href="../../d1/d12/ED__screen_8h.html#afec0307292579b199d6ee6f4ffb95cfc">ED_screen_area_active</a>(C))?<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a282ff0bc5b66affdd005fdf1a5b1b6d0">TH_HEADER</a>:<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531a94b2456a53c74c761ccb55a46d67aa7f">TH_HEADERDESEL</a>);
<a name="l01730"></a>01730     glClear(GL_COLOR_BUFFER_BIT);
<a name="l01731"></a>01731     
<a name="l01732"></a>01732     <span class="comment">/* set view2d view matrix for scrolling (without scrollers) */</span>
<a name="l01733"></a>01733     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a10df649f115243423dbd5d9777d182f7">UI_view2d_view_ortho</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>);
<a name="l01734"></a>01734 
<a name="l01735"></a>01735     xco= maxco= 8;
<a name="l01736"></a>01736     yco= headery-4;
<a name="l01737"></a>01737 
<a name="l01738"></a>01738     <span class="comment">/* draw all headers types */</span>
<a name="l01739"></a>01739     <span class="keywordflow">for</span> (ht= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ae957cd551d82034b24008cfb99bbc4c7">type</a>-&gt;<a class="code" href="../../d7/da9/structARegionType.html#a9bfa839bc1ecb05e40ceb513b84e6c73">headertypes</a>.<a class="code" href="../../d6/d85/structListBase.html#ae4bd6a74f7798ff2cc2a83d3cfce60cf">first</a>; ht; ht= ht-&gt;<a class="code" href="../../de/d1c/structHeaderType.html#a639b5ce37571531ed6026d5a1b780b67">next</a>) {
<a name="l01740"></a>01740         block= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a8bb41a5814e5120ba3c694cb35667128">uiBeginBlock</a>(C, ar, ht-&gt;<a class="code" href="../../de/d1c/structHeaderType.html#abb8b5108c0ca0d70689cc322aec8a7fe">idname</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a505992b59501cd825ea7f6d7ad3358a6">UI_EMBOSS</a>);
<a name="l01741"></a>01741         layout= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1bb4b00a42cf4a43ed16c8b81ecc5916">uiBlockLayout</a>(block, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a1220385007dc9cda157373ab1db1c8c8">UI_LAYOUT_HORIZONTAL</a>, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a7ce5de8d73f7a6857cdba4dac9f440be">UI_LAYOUT_HEADER</a>, xco, yco, <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>, 1, style);
<a name="l01742"></a>01742 
<a name="l01743"></a>01743         <span class="keywordflow">if</span> (ht-&gt;<a class="code" href="../../de/d1c/structHeaderType.html#ace920426a8c8a4ac4d1a8a1af7a3ebab">draw</a>) {
<a name="l01744"></a>01744             header.<a class="code" href="../../dc/d47/structHeader.html#a206c8563ee3dd6d259a25610fca06cf1">type</a>= ht;
<a name="l01745"></a>01745             header.<a class="code" href="../../dc/d47/structHeader.html#ae3726d448ac78fb2dbb91cf8928ba315">layout</a>= layout;
<a name="l01746"></a>01746             ht-&gt;<a class="code" href="../../de/d1c/structHeaderType.html#ace920426a8c8a4ac4d1a8a1af7a3ebab">draw</a>(C, &amp;header);
<a name="l01747"></a>01747             
<a name="l01748"></a>01748             <span class="comment">/* for view2d */</span>
<a name="l01749"></a>01749             xco= <a class="code" href="../../d8/d1e/UI__interface_8h.html#aa6198e7355c354fe28b233c97c323aa2">uiLayoutGetWidth</a>(layout);
<a name="l01750"></a>01750             <span class="keywordflow">if</span> (xco &gt; maxco)
<a name="l01751"></a>01751                 maxco= xco;
<a name="l01752"></a>01752         }
<a name="l01753"></a>01753 
<a name="l01754"></a>01754         <a class="code" href="../../d8/d1e/UI__interface_8h.html#af5a459ec6f6c7ec026184b9f063f4bd3">uiBlockLayoutResolve</a>(block, &amp;xco, &amp;yco);
<a name="l01755"></a>01755         
<a name="l01756"></a>01756         <span class="comment">/* for view2d */</span>
<a name="l01757"></a>01757         <span class="keywordflow">if</span> (xco &gt; maxco)
<a name="l01758"></a>01758             maxco= xco;
<a name="l01759"></a>01759         
<a name="l01760"></a>01760         <a class="code" href="../../d8/d1e/UI__interface_8h.html#ac166273cd2c217e8b1da1bdac55a8ef8">uiEndBlock</a>(C, block);
<a name="l01761"></a>01761         <a class="code" href="../../d8/d1e/UI__interface_8h.html#a4979d0ae4319574956c3ef2f2c3afa06">uiDrawBlock</a>(C, block);
<a name="l01762"></a>01762     }
<a name="l01763"></a>01763 
<a name="l01764"></a>01764     <span class="comment">/* always as last  */</span>
<a name="l01765"></a>01765     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a51e24abcadd7da64156203eb919aeaee">UI_view2d_totRect_set</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>, maxco+<a class="code" href="../../d8/d1e/UI__interface_8h.html#ad9963844aa21423f54e23c6746f5bd07">UI_UNIT_X</a>+80, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a08871e1668409d82d50b637bab889f74">tot</a>.<a class="code" href="../../da/d10/structrctf.html#ab8c08095a5b34878ced13a9b3026b74f">ymax</a>-ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>.<a class="code" href="../../d7/de3/structView2D.html#a08871e1668409d82d50b637bab889f74">tot</a>.<a class="code" href="../../da/d10/structrctf.html#aeea1ce7886a81f1099e897d587012013">ymin</a>);
<a name="l01766"></a>01766 
<a name="l01767"></a>01767     <span class="comment">/* restore view matrix? */</span>
<a name="l01768"></a>01768     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a665a1f0de807248abff87b62a4d2ac8b">UI_view2d_view_restore</a>(C);
<a name="l01769"></a>01769 }
<a name="l01770"></a>01770 
<a name="l01771"></a><a class="code" href="../../d1/d0d/area_8c.html#acd9937936104771bb1f6a14a3f6a5ec8">01771</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a8ab6b6008731b26e0da833825bb23ed3">ED_region_header_init</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar)
<a name="l01772"></a>01772 {
<a name="l01773"></a>01773     <a class="code" href="../../d5/d63/UI__view2d_8h.html#a290dc649f0878a73635adb59a4a06a88">UI_view2d_region_reinit</a>(&amp;ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a3abcb927aedd966f98e3417897e2c243">v2d</a>, <a class="code" href="../../d5/d63/UI__view2d_8h.html#a950bf8e3371138ceb9649d45e9a96340a3426591d0918a82ea679b8c518183aed">V2D_COMMONVIEW_HEADER</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a32e37003215c0dc7f77e12e4fc9db3f4">winx</a>, ar-&gt;<a class="code" href="../../da/d23/structARegion.html#a908d20a23657ef143d2de1496be69f42">winy</a>);
<a name="l01774"></a>01774 }
<a name="l01775"></a>01775 
<a name="l01776"></a>01776 <span class="comment">/* UI_UNIT_Y is defined as U variable now, depending dpi */</span>
<a name="l01777"></a><a class="code" href="../../d1/d0d/area_8c.html#a691baf7c6b3655f45442d77ad5b283c2">01777</a> <span class="keywordtype">int</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#a691baf7c6b3655f45442d77ad5b283c2">ED_area_headersize</a>(<span class="keywordtype">void</span>)
<a name="l01778"></a>01778 {
<a name="l01779"></a>01779     <span class="keywordflow">return</span> <a class="code" href="../../d8/d1e/UI__interface_8h.html#a07a4d52f535e8a85b1550584847132d8">UI_UNIT_Y</a>+6;
<a name="l01780"></a>01780 }
<a name="l01781"></a>01781 
<a name="l01782"></a><a class="code" href="../../d1/d0d/area_8c.html#a9506d9dee545967b044cad2310a81ee8">01782</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d12/ED__screen_8h.html#af13129f0751550ca4cedc989379d2af7">ED_region_info_draw</a>(<a class="code" href="../../da/d23/structARegion.html">ARegion</a> *ar, <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keywordtype">int</span> block, <span class="keywordtype">float</span> alpha)
<a name="l01783"></a>01783 {
<a name="l01784"></a>01784     <span class="keyword">const</span> <span class="keywordtype">int</span> header_height = 18;
<a name="l01785"></a>01785     <a class="code" href="../../d3/d28/structuiStyle.html">uiStyle</a> *style= <a class="code" href="../../d8/d1e/UI__interface_8h.html#a16828a47eb4af34d08dce0ead86693b3">UI_GetStyle</a>();
<a name="l01786"></a>01786     <span class="keywordtype">int</span> fontid= style-&gt;<a class="code" href="../../d3/d28/structuiStyle.html#ac9c53013a87786238c8f707bc39d81a6">widget</a>.<a class="code" href="../../df/d6e/structuiFontStyle.html#a9a1dd426613c712d2306f01553539ce7">uifont_id</a>;
<a name="l01787"></a>01787     <a class="code" href="../../d0/d28/structrcti.html">rcti</a> rect;
<a name="l01788"></a>01788 
<a name="l01789"></a>01789     <a class="code" href="../../df/d5d/BLF__api_8h.html#abf538c5e51c162f24cc3488b788db181">BLF_size</a>(fontid, 11.0f, 72);
<a name="l01790"></a>01790 
<a name="l01791"></a>01791     <span class="comment">/* background box */</span>
<a name="l01792"></a>01792     rect= ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>;
<a name="l01793"></a>01793     rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> = 0;
<a name="l01794"></a>01794     rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> - header_height;
<a name="l01795"></a>01795 
<a name="l01796"></a>01796     <span class="keywordflow">if</span> (block) {
<a name="l01797"></a>01797         rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>;
<a name="l01798"></a>01798     }
<a name="l01799"></a>01799     <span class="keywordflow">else</span> {
<a name="l01800"></a>01800         rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a> = rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a> + <a class="code" href="../../df/d5d/BLF__api_8h.html#a3b01ca673c67a730433f5156daf6ca29">BLF_width</a>(fontid, text) + 24;
<a name="l01801"></a>01801     }
<a name="l01802"></a>01802 
<a name="l01803"></a>01803     rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> = ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a> - ar-&gt;<a class="code" href="../../da/d23/structARegion.html#ac2944792e9f57effa923f02b3a40ac62">winrct</a>.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>;
<a name="l01804"></a>01804 
<a name="l01805"></a>01805     glEnable(GL_BLEND);
<a name="l01806"></a>01806     glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
<a name="l01807"></a>01807     glColor4f(0.0f, 0.0f, 0.0f, alpha);
<a name="l01808"></a>01808     glRecti(rect.<a class="code" href="../../d0/d28/structrcti.html#acdf13419de6bc3f4944a981589bc3a03">xmin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a>, rect.<a class="code" href="../../d0/d28/structrcti.html#aed85b3972f94e2946a2bfcb60e036986">xmax</a>+1, rect.<a class="code" href="../../d0/d28/structrcti.html#a5e0cd2b56e95eba87777402106f57a9a">ymax</a>+1);
<a name="l01809"></a>01809     glDisable(GL_BLEND);
<a name="l01810"></a>01810 
<a name="l01811"></a>01811     <span class="comment">/* text */</span>
<a name="l01812"></a>01812     <a class="code" href="../../de/d96/UI__resources_8h.html#af31db5d1a7c8b15e6e8a008482426f3a">UI_ThemeColor</a>(<a class="code" href="../../de/d96/UI__resources_8h.html#ae33c78feb670de33d2abf21ec0624531aff83a64859a3ca49a01a88357acaf007">TH_TEXT_HI</a>);
<a name="l01813"></a>01813     <a class="code" href="../../df/d5d/BLF__api_8h.html#af214132278e6274d6dfe0587adaa4c9f">BLF_position</a>(fontid, 12, rect.<a class="code" href="../../d0/d28/structrcti.html#a1d1838135b30932a8ce557885d924518">ymin</a> + 5, 0.0f);
<a name="l01814"></a>01814     <a class="code" href="../../df/d5d/BLF__api_8h.html#ad12ce3a9967879a5ceea5d1346052de4">BLF_draw</a>(fontid, text, <a class="code" href="../../df/d5d/BLF__api_8h.html#a7bf31f56b0fb94dd7ce4c8c7178ed436">BLF_DRAW_STR_DUMMY_MAX</a>);
<a name="l01815"></a>01815 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:53:56 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
