<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: noise.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">noise.c</div>  </div>
</div>
<div class="contents">
<a href="../../dd/d05/noise_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00007"></a>00007 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00008"></a>00008 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00009"></a>00009 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00018"></a>00018 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * The Original Code is Copyright (C) 2001-2002 by NaN Holding BV.</span>
<a name="l00021"></a>00021 <span class="comment"> * All rights reserved.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * The Original Code is: all of this file.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * Contributor(s): none yet.</span>
<a name="l00026"></a>00026 <span class="comment"> *</span>
<a name="l00027"></a>00027 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00028"></a>00028 <span class="comment"> *</span>
<a name="l00029"></a>00029 <span class="comment"> */</span>
<a name="l00030"></a>00030 
<a name="l00036"></a>00036 <span class="preprocessor">#ifdef _WIN32    </span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#pragma warning (disable : 4244) // &quot;conversion from double to float&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#pragma warning (disable : 4305) // &quot;truncation from const double to float&quot; </span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d65/BLI__noise_8h.html">BLI_noise.h</a>&quot;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">/* local */</span>
<a name="l00046"></a>00046 <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(<span class="keywordtype">float</span> vec[3]);
<a name="l00047"></a>00047 <span class="comment">//static float turbulence_perlin(float *point, float lofreq, float hifreq);</span>
<a name="l00048"></a>00048 <span class="comment">//static float turbulencep(float noisesize, float x, float y, float z, int nr);</span>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="../../dd/d05/noise_8c.html#a41f7a3d5b15121615d031b2a8d761907">00050</a> <span class="preprocessor">#define HASHVEC(x,y,z) hashvectf+3*hash[ (hash[ (hash[(z) &amp; 255]+(y)) &amp; 255]+(x)) &amp; 255]</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="comment">/* needed for voronoi */</span>
<a name="l00053"></a><a class="code" href="../../dd/d05/noise_8c.html#afe22ababba5f7609a27cfd3116f3a3f7">00053</a> <span class="preprocessor">#define HASHPNT(x,y,z) hashpntf+3*hash[ (hash[ (hash[(z) &amp; 255]+(y)) &amp; 255]+(x)) &amp; 255]</span>
<a name="l00054"></a><a class="code" href="../../dd/d05/noise_8c.html#a8c43b31e7ec476b357e7a24d6cdc7030">00054</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a8c43b31e7ec476b357e7a24d6cdc7030">hashpntf</a>[768] = {0.536902, 0.020915, 0.501445, 0.216316, 0.517036, 0.822466, 0.965315,
<a name="l00055"></a>00055 0.377313, 0.678764, 0.744545, 0.097731, 0.396357, 0.247202, 0.520897,
<a name="l00056"></a>00056 0.613396, 0.542124, 0.146813, 0.255489, 0.810868, 0.638641, 0.980742,
<a name="l00057"></a>00057 0.292316, 0.357948, 0.114382, 0.861377, 0.629634, 0.722530, 0.714103,
<a name="l00058"></a>00058 0.048549, 0.075668, 0.564920, 0.162026, 0.054466, 0.411738, 0.156897,
<a name="l00059"></a>00059 0.887657, 0.599368, 0.074249, 0.170277, 0.225799, 0.393154, 0.301348,
<a name="l00060"></a>00060 0.057434, 0.293849, 0.442745, 0.150002, 0.398732, 0.184582, 0.915200,
<a name="l00061"></a>00061 0.630984, 0.974040, 0.117228, 0.795520, 0.763238, 0.158982, 0.616211,
<a name="l00062"></a>00062 0.250825, 0.906539, 0.316874, 0.676205, 0.234720, 0.667673, 0.792225,
<a name="l00063"></a>00063 0.273671, 0.119363, 0.199131, 0.856716, 0.828554, 0.900718, 0.705960,
<a name="l00064"></a>00064 0.635923, 0.989433, 0.027261, 0.283507, 0.113426, 0.388115, 0.900176,
<a name="l00065"></a>00065 0.637741, 0.438802, 0.715490, 0.043692, 0.202640, 0.378325, 0.450325,
<a name="l00066"></a>00066 0.471832, 0.147803, 0.906899, 0.524178, 0.784981, 0.051483, 0.893369,
<a name="l00067"></a>00067 0.596895, 0.275635, 0.391483, 0.844673, 0.103061, 0.257322, 0.708390,
<a name="l00068"></a>00068 0.504091, 0.199517, 0.660339, 0.376071, 0.038880, 0.531293, 0.216116,
<a name="l00069"></a>00069 0.138672, 0.907737, 0.807994, 0.659582, 0.915264, 0.449075, 0.627128,
<a name="l00070"></a>00070 0.480173, 0.380942, 0.018843, 0.211808, 0.569701, 0.082294, 0.689488, 
<a name="l00071"></a>00071 0.573060, 0.593859, 0.216080, 0.373159, 0.108117, 0.595539, 0.021768, 
<a name="l00072"></a>00072 0.380297, 0.948125, 0.377833, 0.319699, 0.315249, 0.972805, 0.792270, 
<a name="l00073"></a>00073 0.445396, 0.845323, 0.372186, 0.096147, 0.689405, 0.423958, 0.055675, 
<a name="l00074"></a>00074 0.117940, 0.328456, 0.605808, 0.631768, 0.372170, 0.213723, 0.032700, 
<a name="l00075"></a>00075 0.447257, 0.440661, 0.728488, 0.299853, 0.148599, 0.649212, 0.498381,
<a name="l00076"></a>00076 0.049921, 0.496112, 0.607142, 0.562595, 0.990246, 0.739659, 0.108633, 
<a name="l00077"></a>00077 0.978156, 0.209814, 0.258436, 0.876021, 0.309260, 0.600673, 0.713597, 
<a name="l00078"></a>00078 0.576967, 0.641402, 0.853930, 0.029173, 0.418111, 0.581593, 0.008394, 
<a name="l00079"></a>00079 0.589904, 0.661574, 0.979326, 0.275724, 0.111109, 0.440472, 0.120839, 
<a name="l00080"></a>00080 0.521602, 0.648308, 0.284575, 0.204501, 0.153286, 0.822444, 0.300786, 
<a name="l00081"></a>00081 0.303906, 0.364717, 0.209038, 0.916831, 0.900245, 0.600685, 0.890002, 
<a name="l00082"></a>00082 0.581660, 0.431154, 0.705569, 0.551250, 0.417075, 0.403749, 0.696652, 
<a name="l00083"></a>00083 0.292652, 0.911372, 0.690922, 0.323718, 0.036773, 0.258976, 0.274265, 
<a name="l00084"></a>00084 0.225076, 0.628965, 0.351644, 0.065158, 0.080340, 0.467271, 0.130643,
<a name="l00085"></a>00085 0.385914, 0.919315, 0.253821, 0.966163, 0.017439, 0.392610, 0.478792, 
<a name="l00086"></a>00086 0.978185, 0.072691, 0.982009, 0.097987, 0.731533, 0.401233, 0.107570, 
<a name="l00087"></a>00087 0.349587, 0.479122, 0.700598, 0.481751, 0.788429, 0.706864, 0.120086, 
<a name="l00088"></a>00088 0.562691, 0.981797, 0.001223, 0.192120, 0.451543, 0.173092, 0.108960,
<a name="l00089"></a>00089 0.549594, 0.587892, 0.657534, 0.396365, 0.125153, 0.666420, 0.385823, 
<a name="l00090"></a>00090 0.890916, 0.436729, 0.128114, 0.369598, 0.759096, 0.044677, 0.904752, 
<a name="l00091"></a>00091 0.088052, 0.621148, 0.005047, 0.452331, 0.162032, 0.494238, 0.523349, 
<a name="l00092"></a>00092 0.741829, 0.698450, 0.452316, 0.563487, 0.819776, 0.492160, 0.004210, 
<a name="l00093"></a>00093 0.647158, 0.551475, 0.362995, 0.177937, 0.814722, 0.727729, 0.867126, 
<a name="l00094"></a>00094 0.997157, 0.108149, 0.085726, 0.796024, 0.665075, 0.362462, 0.323124,
<a name="l00095"></a>00095 0.043718, 0.042357, 0.315030, 0.328954, 0.870845, 0.683186, 0.467922, 
<a name="l00096"></a>00096 0.514894, 0.809971, 0.631979, 0.176571, 0.366320, 0.850621, 0.505555, 
<a name="l00097"></a>00097 0.749551, 0.750830, 0.401714, 0.481216, 0.438393, 0.508832, 0.867971, 
<a name="l00098"></a>00098 0.654581, 0.058204, 0.566454, 0.084124, 0.548539, 0.902690, 0.779571, 
<a name="l00099"></a>00099 0.562058, 0.048082, 0.863109, 0.079290, 0.713559, 0.783496, 0.265266, 
<a name="l00100"></a>00100 0.672089, 0.786939, 0.143048, 0.086196, 0.876129, 0.408708, 0.229312, 
<a name="l00101"></a>00101 0.629995, 0.206665, 0.207308, 0.710079, 0.341704, 0.264921, 0.028748, 
<a name="l00102"></a>00102 0.629222, 0.470173, 0.726228, 0.125243, 0.328249, 0.794187, 0.741340, 
<a name="l00103"></a>00103 0.489895, 0.189396, 0.724654, 0.092841, 0.039809, 0.860126, 0.247701, 
<a name="l00104"></a>00104 0.655331, 0.964121, 0.672536, 0.044522, 0.690567, 0.837238, 0.631520, 
<a name="l00105"></a>00105 0.953734, 0.352484, 0.289026, 0.034152, 0.852575, 0.098454, 0.795529, 
<a name="l00106"></a>00106 0.452181, 0.826159, 0.186993, 0.820725, 0.440328, 0.922137, 0.704592,
<a name="l00107"></a>00107 0.915437, 0.738183, 0.733461, 0.193798, 0.929213, 0.161390, 0.318547,
<a name="l00108"></a>00108 0.888751, 0.430968, 0.740837, 0.193544, 0.872253, 0.563074, 0.274598, 
<a name="l00109"></a>00109 0.347805, 0.666176, 0.449831, 0.800991, 0.588727, 0.052296, 0.714761, 
<a name="l00110"></a>00110 0.420620, 0.570325, 0.057550, 0.210888, 0.407312, 0.662848, 0.924382, 
<a name="l00111"></a>00111 0.895958, 0.775198, 0.688605, 0.025721, 0.301913, 0.791408, 0.500602, 
<a name="l00112"></a>00112 0.831984, 0.828509, 0.642093, 0.494174, 0.525880, 0.446365, 0.440063, 
<a name="l00113"></a>00113 0.763114, 0.630358, 0.223943, 0.333806, 0.906033, 0.498306, 0.241278,
<a name="l00114"></a>00114 0.427640, 0.772683, 0.198082, 0.225379, 0.503894, 0.436599, 0.016503, 
<a name="l00115"></a>00115 0.803725, 0.189878, 0.291095, 0.499114, 0.151573, 0.079031, 0.904618, 
<a name="l00116"></a>00116 0.708535, 0.273900, 0.067419, 0.317124, 0.936499, 0.716511, 0.543845, 
<a name="l00117"></a>00117 0.939909, 0.826574, 0.715090, 0.154864, 0.750150, 0.845808, 0.648108, 
<a name="l00118"></a>00118 0.556564, 0.644757, 0.140873, 0.799167, 0.632989, 0.444245, 0.471978, 
<a name="l00119"></a>00119 0.435910, 0.359793, 0.216241, 0.007633, 0.337236, 0.857863, 0.380247, 
<a name="l00120"></a>00120 0.092517, 0.799973, 0.919000, 0.296798, 0.096989, 0.854831, 0.165369, 
<a name="l00121"></a>00121 0.568475, 0.216855, 0.020457, 0.835511, 0.538039, 0.999742, 0.620226, 
<a name="l00122"></a>00122 0.244053, 0.060399, 0.323007, 0.294874, 0.988899, 0.384919, 0.735655, 
<a name="l00123"></a>00123 0.773428, 0.549776, 0.292882, 0.660611, 0.593507, 0.621118, 0.175269, 
<a name="l00124"></a>00124 0.682119, 0.794493, 0.868197, 0.632150, 0.807823, 0.509656, 0.482035, 
<a name="l00125"></a>00125 0.001780, 0.259126, 0.358002, 0.280263, 0.192985, 0.290367, 0.208111, 
<a name="l00126"></a>00126 0.917633, 0.114422, 0.925491, 0.981110, 0.255570, 0.974862, 0.016629,
<a name="l00127"></a>00127 0.552599, 0.575741, 0.612978, 0.615965, 0.803615, 0.772334, 0.089745, 
<a name="l00128"></a>00128 0.838812, 0.634542, 0.113709, 0.755832, 0.577589, 0.667489, 0.529834,
<a name="l00129"></a>00129 0.325660, 0.817597, 0.316557, 0.335093, 0.737363, 0.260951, 0.737073, 
<a name="l00130"></a>00130 0.049540, 0.735541, 0.988891, 0.299116, 0.147695, 0.417271, 0.940811, 
<a name="l00131"></a>00131 0.524160, 0.857968, 0.176403, 0.244835, 0.485759, 0.033353, 0.280319, 
<a name="l00132"></a>00132 0.750688, 0.755809, 0.924208, 0.095956, 0.962504, 0.275584, 0.173715,
<a name="l00133"></a>00133 0.942716, 0.706721, 0.078464, 0.576716, 0.804667, 0.559249, 0.900611, 
<a name="l00134"></a>00134 0.646904, 0.432111, 0.927885, 0.383277, 0.269973, 0.114244, 0.574867, 
<a name="l00135"></a>00135 0.150703, 0.241855, 0.272871, 0.199950, 0.079719, 0.868566, 0.962833, 
<a name="l00136"></a>00136 0.789122, 0.320025, 0.905554, 0.234876, 0.991356, 0.061913, 0.732911, 
<a name="l00137"></a>00137 0.785960, 0.874074, 0.069035, 0.658632, 0.309901, 0.023676, 0.791603, 
<a name="l00138"></a>00138 0.764661, 0.661278, 0.319583, 0.829650, 0.117091, 0.903124, 0.982098, 
<a name="l00139"></a>00139 0.161631, 0.193576, 0.670428, 0.857390, 0.003760, 0.572578, 0.222162, 
<a name="l00140"></a>00140 0.114551, 0.420118, 0.530404, 0.470682, 0.525527, 0.764281, 0.040596, 
<a name="l00141"></a>00141 0.443275, 0.501124, 0.816161, 0.417467, 0.332172, 0.447565, 0.614591, 
<a name="l00142"></a>00142 0.559246, 0.805295, 0.226342, 0.155065, 0.714630, 0.160925, 0.760001, 
<a name="l00143"></a>00143 0.453456, 0.093869, 0.406092, 0.264801, 0.720370, 0.743388, 0.373269, 
<a name="l00144"></a>00144 0.403098, 0.911923, 0.897249, 0.147038, 0.753037, 0.516093, 0.739257, 
<a name="l00145"></a>00145 0.175018, 0.045768, 0.735857, 0.801330, 0.927708, 0.240977, 0.591870,
<a name="l00146"></a>00146 0.921831, 0.540733, 0.149100, 0.423152, 0.806876, 0.397081, 0.061100, 
<a name="l00147"></a>00147 0.811630, 0.044899, 0.460915, 0.961202, 0.822098, 0.971524, 0.867608, 
<a name="l00148"></a>00148 0.773604, 0.226616, 0.686286, 0.926972, 0.411613, 0.267873, 0.081937, 
<a name="l00149"></a>00149 0.226124, 0.295664, 0.374594, 0.533240, 0.237876, 0.669629, 0.599083, 
<a name="l00150"></a>00150 0.513081, 0.878719, 0.201577, 0.721296, 0.495038, 0.079760, 0.965959,
<a name="l00151"></a>00151 0.233090, 0.052496, 0.714748, 0.887844, 0.308724, 0.972885, 0.723337,
<a name="l00152"></a>00152 0.453089, 0.914474, 0.704063, 0.823198, 0.834769, 0.906561, 0.919600,
<a name="l00153"></a>00153 0.100601, 0.307564, 0.901977, 0.468879, 0.265376, 0.885188, 0.683875,
<a name="l00154"></a>00154 0.868623, 0.081032, 0.466835, 0.199087, 0.663437, 0.812241, 0.311337,
<a name="l00155"></a>00155 0.821361, 0.356628, 0.898054, 0.160781, 0.222539, 0.714889, 0.490287,
<a name="l00156"></a>00156 0.984915, 0.951755, 0.964097, 0.641795, 0.815472, 0.852732, 0.862074,
<a name="l00157"></a>00157 0.051108, 0.440139, 0.323207, 0.517171, 0.562984, 0.115295, 0.743103,
<a name="l00158"></a>00158 0.977914, 0.337596, 0.440694, 0.535879, 0.959427, 0.351427, 0.704361,
<a name="l00159"></a>00159 0.010826, 0.131162, 0.577080, 0.349572, 0.774892, 0.425796, 0.072697,
<a name="l00160"></a>00160 0.500001, 0.267322, 0.909654, 0.206176, 0.223987, 0.937698, 0.323423,
<a name="l00161"></a>00161 0.117501, 0.490308, 0.474372, 0.689943, 0.168671, 0.719417, 0.188928,
<a name="l00162"></a>00162 0.330464, 0.265273, 0.446271, 0.171933, 0.176133, 0.474616, 0.140182,
<a name="l00163"></a>00163 0.114246, 0.905043, 0.713870, 0.555261, 0.951333};
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="../../d6/df4/rand_8c.html#a5639d13f070833f8602817d123ac0439">00165</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[512]= {
<a name="l00166"></a>00166 0xA2,0xA0,0x19,0x3B,0xF8,0xEB,0xAA,0xEE,0xF3,0x1C,0x67,0x28,0x1D,0xED,0x0,0xDE,0x95,0x2E,0xDC,0x3F,0x3A,0x82,0x35,0x4D,0x6C,0xBA,0x36,0xD0,0xF6,0xC,0x79,0x32,0xD1,0x59,0xF4,0x8,0x8B,0x63,0x89,0x2F,0xB8,0xB4,0x97,0x83,0xF2,0x8F,0x18,0xC7,0x51,0x14,0x65,0x87,0x48,0x20,0x42,0xA8,0x80,0xB5,0x40,0x13,0xB2,0x22,0x7E,0x57,
<a name="l00167"></a>00167 0xBC,0x7F,0x6B,0x9D,0x86,0x4C,0xC8,0xDB,0x7C,0xD5,0x25,0x4E,0x5A,0x55,0x74,0x50,0xCD,0xB3,0x7A,0xBB,0xC3,0xCB,0xB6,0xE2,0xE4,0xEC,0xFD,0x98,0xB,0x96,0xD3,0x9E,0x5C,0xA1,0x64,0xF1,0x81,0x61,0xE1,0xC4,0x24,0x72,0x49,0x8C,0x90,0x4B,0x84,0x34,0x38,0xAB,0x78,0xCA,0x1F,0x1,0xD7,0x93,0x11,0xC1,0x58,0xA9,0x31,0xF9,0x44,0x6D,
<a name="l00168"></a>00168 0xBF,0x33,0x9C,0x5F,0x9,0x94,0xA3,0x85,0x6,0xC6,0x9A,0x1E,0x7B,0x46,0x15,0x30,0x27,0x2B,0x1B,0x71,0x3C,0x5B,0xD6,0x6F,0x62,0xAC,0x4F,0xC2,0xC0,0xE,0xB1,0x23,0xA7,0xDF,0x47,0xB0,0x77,0x69,0x5,0xE9,0xE6,0xE7,0x76,0x73,0xF,0xFE,0x6E,0x9B,0x56,0xEF,0x12,0xA5,0x37,0xFC,0xAE,0xD9,0x3,0x8E,0xDD,0x10,0xB9,0xCE,0xC9,0x8D,
<a name="l00169"></a>00169 0xDA,0x2A,0xBD,0x68,0x17,0x9F,0xBE,0xD4,0xA,0xCC,0xD2,0xE8,0x43,0x3D,0x70,0xB7,0x2,0x7D,0x99,0xD8,0xD,0x60,0x8A,0x4,0x2C,0x3E,0x92,0xE5,0xAF,0x53,0x7,0xE0,0x29,0xA6,0xC5,0xE3,0xF5,0xF7,0x4A,0x41,0x26,0x6A,0x16,0x5E,0x52,0x2D,0x21,0xAD,0xF0,0x91,0xFF,0xEA,0x54,0xFA,0x66,0x1A,0x45,0x39,0xCF,0x75,0xA4,0x88,0xFB,0x5D,
<a name="l00170"></a>00170 0xA2,0xA0,0x19,0x3B,0xF8,0xEB,0xAA,0xEE,0xF3,0x1C,0x67,0x28,0x1D,0xED,0x0,0xDE,0x95,0x2E,0xDC,0x3F,0x3A,0x82,0x35,0x4D,0x6C,0xBA,0x36,0xD0,0xF6,0xC,0x79,0x32,0xD1,0x59,0xF4,0x8,0x8B,0x63,0x89,0x2F,0xB8,0xB4,0x97,0x83,0xF2,0x8F,0x18,0xC7,0x51,0x14,0x65,0x87,0x48,0x20,0x42,0xA8,0x80,0xB5,0x40,0x13,0xB2,0x22,0x7E,0x57,
<a name="l00171"></a>00171 0xBC,0x7F,0x6B,0x9D,0x86,0x4C,0xC8,0xDB,0x7C,0xD5,0x25,0x4E,0x5A,0x55,0x74,0x50,0xCD,0xB3,0x7A,0xBB,0xC3,0xCB,0xB6,0xE2,0xE4,0xEC,0xFD,0x98,0xB,0x96,0xD3,0x9E,0x5C,0xA1,0x64,0xF1,0x81,0x61,0xE1,0xC4,0x24,0x72,0x49,0x8C,0x90,0x4B,0x84,0x34,0x38,0xAB,0x78,0xCA,0x1F,0x1,0xD7,0x93,0x11,0xC1,0x58,0xA9,0x31,0xF9,0x44,0x6D,
<a name="l00172"></a>00172 0xBF,0x33,0x9C,0x5F,0x9,0x94,0xA3,0x85,0x6,0xC6,0x9A,0x1E,0x7B,0x46,0x15,0x30,0x27,0x2B,0x1B,0x71,0x3C,0x5B,0xD6,0x6F,0x62,0xAC,0x4F,0xC2,0xC0,0xE,0xB1,0x23,0xA7,0xDF,0x47,0xB0,0x77,0x69,0x5,0xE9,0xE6,0xE7,0x76,0x73,0xF,0xFE,0x6E,0x9B,0x56,0xEF,0x12,0xA5,0x37,0xFC,0xAE,0xD9,0x3,0x8E,0xDD,0x10,0xB9,0xCE,0xC9,0x8D,
<a name="l00173"></a>00173 0xDA,0x2A,0xBD,0x68,0x17,0x9F,0xBE,0xD4,0xA,0xCC,0xD2,0xE8,0x43,0x3D,0x70,0xB7,0x2,0x7D,0x99,0xD8,0xD,0x60,0x8A,0x4,0x2C,0x3E,0x92,0xE5,0xAF,0x53,0x7,0xE0,0x29,0xA6,0xC5,0xE3,0xF5,0xF7,0x4A,0x41,0x26,0x6A,0x16,0x5E,0x52,0x2D,0x21,0xAD,0xF0,0x91,0xFF,0xEA,0x54,0xFA,0x66,0x1A,0x45,0x39,0xCF,0x75,0xA4,0x88,0xFB,0x5D,
<a name="l00174"></a>00174 };
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 
<a name="l00177"></a><a class="code" href="../../d9/dc7/pixelshading_8c.html#ac5bb509d02f4aca06205102c26f5bd03">00177</a> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>[768]= {
<a name="l00178"></a>00178 0.33783,0.715698,-0.611206,-0.944031,-0.326599,-0.045624,-0.101074,-0.416443,-0.903503,0.799286,0.49411,-0.341949,-0.854645,0.518036,0.033936,0.42514,-0.437866,-0.792114,-0.358948,0.597046,0.717377,-0.985413,0.144714,0.089294,-0.601776,-0.33728,-0.723907,-0.449921,0.594513,0.666382,0.208313,-0.10791,
<a name="l00179"></a>00179 0.972076,0.575317,0.060425,0.815643,0.293365,-0.875702,-0.383453,0.293762,0.465759,0.834686,-0.846008,-0.233398,-0.47934,-0.115814,0.143036,-0.98291,0.204681,-0.949036,-0.239532,0.946716,-0.263947,0.184326,-0.235596,0.573822,0.784332,0.203705,-0.372253,-0.905487,0.756989,-0.651031,0.055298,0.497803,
<a name="l00180"></a>00180 0.814697,-0.297363,-0.16214,0.063995,-0.98468,-0.329254,0.834381,0.441925,0.703827,-0.527039,-0.476227,0.956421,0.266113,0.119781,0.480133,0.482849,0.7323,-0.18631,0.961212,-0.203125,-0.748474,-0.656921,-0.090393,-0.085052,-0.165253,0.982544,-0.76947,0.628174,-0.115234,0.383148,0.537659,0.751068,
<a name="l00181"></a>00181 0.616486,-0.668488,-0.415924,-0.259979,-0.630005,0.73175,0.570953,-0.087952,0.816223,-0.458008,0.023254,0.888611,-0.196167,0.976563,-0.088287,-0.263885,-0.69812,-0.665527,0.437134,-0.892273,-0.112793,-0.621674,-0.230438,0.748566,0.232422,0.900574,-0.367249,0.22229,-0.796143,0.562744,-0.665497,-0.73764,
<a name="l00182"></a>00182 0.11377,0.670135,0.704803,0.232605,0.895599,0.429749,-0.114655,-0.11557,-0.474243,0.872742,0.621826,0.604004,-0.498444,-0.832214,0.012756,0.55426,-0.702484,0.705994,-0.089661,-0.692017,0.649292,0.315399,-0.175995,-0.977997,0.111877,0.096954,-0.04953,0.994019,0.635284,-0.606689,-0.477783,-0.261261,
<a name="l00183"></a>00183 -0.607422,-0.750153,0.983276,0.165436,0.075958,-0.29837,0.404083,-0.864655,-0.638672,0.507721,0.578156,0.388214,0.412079,0.824249,0.556183,-0.208832,0.804352,0.778442,0.562012,0.27951,-0.616577,0.781921,-0.091522,0.196289,0.051056,0.979187,-0.121216,0.207153,-0.970734,-0.173401,-0.384735,0.906555,
<a name="l00184"></a>00184 0.161499,-0.723236,-0.671387,0.178497,-0.006226,-0.983887,-0.126038,0.15799,0.97934,0.830475,-0.024811,0.556458,-0.510132,-0.76944,0.384247,0.81424,0.200104,-0.544891,-0.112549,-0.393311,-0.912445,0.56189,0.152222,-0.813049,0.198914,-0.254517,-0.946381,-0.41217,0.690979,-0.593811,-0.407257,0.324524,
<a name="l00185"></a>00185 0.853668,-0.690186,0.366119,-0.624115,-0.428345,0.844147,-0.322296,-0.21228,-0.297546,-0.930756,-0.273071,0.516113,0.811798,0.928314,0.371643,0.007233,0.785828,-0.479218,-0.390778,-0.704895,0.058929,0.706818,0.173248,0.203583,0.963562,0.422211,-0.904297,-0.062469,-0.363312,-0.182465,0.913605,0.254028,
<a name="l00186"></a>00186 -0.552307,-0.793945,-0.28891,-0.765747,-0.574554,0.058319,0.291382,0.954803,0.946136,-0.303925,0.111267,-0.078156,0.443695,-0.892731,0.182098,0.89389,0.409515,-0.680298,-0.213318,0.701141,0.062469,0.848389,-0.525635,-0.72879,-0.641846,0.238342,-0.88089,0.427673,0.202637,-0.532501,-0.21405,0.818878,
<a name="l00187"></a>00187 0.948975,-0.305084,0.07962,0.925446,0.374664,0.055817,0.820923,0.565491,0.079102,0.25882,0.099792,-0.960724,-0.294617,0.910522,0.289978,0.137115,0.320038,-0.937408,-0.908386,0.345276,-0.235718,-0.936218,0.138763,0.322754,0.366577,0.925934,-0.090637,0.309296,-0.686829,-0.657684,0.66983,0.024445,
<a name="l00188"></a>00188 0.742065,-0.917999,-0.059113,-0.392059,0.365509,0.462158,-0.807922,0.083374,0.996399,-0.014801,0.593842,0.253143,-0.763672,0.974976,-0.165466,0.148285,0.918976,0.137299,0.369537,0.294952,0.694977,0.655731,0.943085,0.152618,-0.295319,0.58783,-0.598236,0.544495,0.203796,0.678223,0.705994,-0.478821,
<a name="l00189"></a>00189 -0.661011,0.577667,0.719055,-0.1698,-0.673828,-0.132172,-0.965332,0.225006,-0.981873,-0.14502,0.121979,0.763458,0.579742,0.284546,-0.893188,0.079681,0.442474,-0.795776,-0.523804,0.303802,0.734955,0.67804,-0.007446,0.15506,0.986267,-0.056183,0.258026,0.571503,-0.778931,-0.681549,-0.702087,-0.206116,
<a name="l00190"></a>00190 -0.96286,-0.177185,0.203613,-0.470978,-0.515106,0.716095,-0.740326,0.57135,0.354095,-0.56012,-0.824982,-0.074982,-0.507874,0.753204,0.417969,-0.503113,0.038147,0.863342,0.594025,0.673553,-0.439758,-0.119873,-0.005524,-0.992737,0.098267,-0.213776,0.971893,-0.615631,0.643951,0.454163,0.896851,-0.441071,
<a name="l00191"></a>00191 0.032166,-0.555023,0.750763,-0.358093,0.398773,0.304688,0.864929,-0.722961,0.303589,0.620544,-0.63559,-0.621948,-0.457306,-0.293243,0.072327,0.953278,-0.491638,0.661041,-0.566772,-0.304199,-0.572083,-0.761688,0.908081,-0.398956,0.127014,-0.523621,-0.549683,-0.650848,-0.932922,-0.19986,0.299408,0.099426,
<a name="l00192"></a>00192 0.140869,0.984985,-0.020325,-0.999756,-0.002319,0.952667,0.280853,-0.11615,-0.971893,0.082581,0.220337,0.65921,0.705292,-0.260651,0.733063,-0.175537,0.657043,-0.555206,0.429504,-0.712189,0.400421,-0.89859,0.179352,0.750885,-0.19696,0.630341,0.785675,-0.569336,0.241821,-0.058899,-0.464111,0.883789,
<a name="l00193"></a>00193 0.129608,-0.94519,0.299622,-0.357819,0.907654,0.219238,-0.842133,-0.439117,-0.312927,-0.313477,0.84433,0.434479,-0.241211,0.053253,0.968994,0.063873,0.823273,0.563965,0.476288,0.862152,-0.172516,0.620941,-0.298126,0.724915,0.25238,-0.749359,-0.612122,-0.577545,0.386566,0.718994,-0.406342,-0.737976,
<a name="l00194"></a>00194 0.538696,0.04718,0.556305,0.82959,-0.802856,0.587463,0.101166,-0.707733,-0.705963,0.026428,0.374908,0.68457,0.625092,0.472137,0.208405,-0.856506,-0.703064,-0.581085,-0.409821,-0.417206,-0.736328,0.532623,-0.447876,-0.20285,-0.870728,0.086945,-0.990417,0.107086,0.183685,0.018341,-0.982788,0.560638,
<a name="l00195"></a>00195 -0.428864,0.708282,0.296722,-0.952576,-0.0672,0.135773,0.990265,0.030243,-0.068787,0.654724,0.752686,0.762604,-0.551758,0.337585,-0.819611,-0.407684,0.402466,-0.727844,-0.55072,-0.408539,-0.855774,-0.480011,0.19281,0.693176,-0.079285,0.716339,0.226013,0.650116,-0.725433,0.246704,0.953369,-0.173553,
<a name="l00196"></a>00196 -0.970398,-0.239227,-0.03244,0.136383,-0.394318,0.908752,0.813232,0.558167,0.164368,0.40451,0.549042,-0.731323,-0.380249,-0.566711,0.730865,0.022156,0.932739,0.359741,0.00824,0.996552,-0.082306,0.956635,-0.065338,-0.283722,-0.743561,0.008209,0.668579,-0.859589,-0.509674,0.035767,-0.852234,0.363678,
<a name="l00197"></a>00197 -0.375977,-0.201965,-0.970795,-0.12915,0.313477,0.947327,0.06546,-0.254028,-0.528259,0.81015,0.628052,0.601105,0.49411,-0.494385,0.868378,0.037933,0.275635,-0.086426,0.957336,-0.197937,0.468903,-0.860748,0.895599,0.399384,0.195801,0.560791,0.825012,-0.069214,0.304199,-0.849487,0.43103,0.096375,
<a name="l00198"></a>00198 0.93576,0.339111,-0.051422,0.408966,-0.911072,0.330444,0.942841,-0.042389,-0.452362,-0.786407,0.420563,0.134308,-0.933472,-0.332489,0.80191,-0.566711,-0.188934,-0.987946,-0.105988,0.112518,-0.24408,0.892242,-0.379791,-0.920502,0.229095,-0.316376,0.7789,0.325958,0.535706,-0.912872,0.185211,-0.36377,
<a name="l00199"></a>00199 -0.184784,0.565369,-0.803833,-0.018463,0.119537,0.992615,-0.259247,-0.935608,0.239532,-0.82373,-0.449127,-0.345947,-0.433105,0.659515,0.614349,-0.822754,0.378845,-0.423676,0.687195,-0.674835,-0.26889,-0.246582,-0.800842,0.545715,-0.729187,-0.207794,0.651978,0.653534,-0.610443,-0.447388,0.492584,-0.023346,
<a name="l00200"></a>00200 0.869934,0.609039,0.009094,-0.79306,0.962494,-0.271088,-0.00885,0.2659,-0.004913,0.963959,0.651245,0.553619,-0.518951,0.280548,-0.84314,0.458618,-0.175293,-0.983215,0.049805,0.035339,-0.979919,0.196045,-0.982941,0.164307,-0.082245,0.233734,-0.97226,-0.005005,-0.747253,-0.611328,0.260437,0.645599,
<a name="l00201"></a>00201 0.592773,0.481384,0.117706,-0.949524,-0.29068,-0.535004,-0.791901,-0.294312,-0.627167,-0.214447,0.748718,-0.047974,-0.813477,-0.57959,-0.175537,0.477264,-0.860992,0.738556,-0.414246,-0.53183,0.562561,-0.704071,0.433289,-0.754944,0.64801,-0.100586,0.114716,0.044525,-0.992371,0.966003,0.244873,-0.082764,
<a name="l00202"></a>00202 };
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <span class="comment">/**************************/</span>
<a name="l00205"></a>00205 <span class="comment">/*  IMPROVED PERLIN NOISE */</span>
<a name="l00206"></a>00206 <span class="comment">/**************************/</span>
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">00208</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(<span class="keywordtype">float</span> t, <span class="keywordtype">float</span> a, <span class="keywordtype">float</span> b)
<a name="l00209"></a>00209 {
<a name="l00210"></a>00210     <span class="keywordflow">return</span> (a+t*(b-a));
<a name="l00211"></a>00211 }
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="../../dd/d05/noise_8c.html#a8ce75b63a9c42556b919fc4b03eab263">00213</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a8ce75b63a9c42556b919fc4b03eab263">npfade</a>(<span class="keywordtype">float</span> t)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215     <span class="keywordflow">return</span> (t*t*t*(t*(t*6.0f-15.0f)+10.0f));
<a name="l00216"></a>00216 }
<a name="l00217"></a>00217 
<a name="l00218"></a><a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">00218</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00219"></a>00219 {
<a name="l00220"></a>00220     <span class="keywordtype">int</span> h = hash &amp; 15;                     <span class="comment">// CONVERT LO 4 BITS OF HASH CODE</span>
<a name="l00221"></a>00221     <span class="keywordtype">float</span> u = h&lt;8 ? x : y,                 <span class="comment">// INTO 12 GRADIENT DIRECTIONS.</span>
<a name="l00222"></a>00222                 v = h&lt;4 ? y : h==12||h==14 ? x : z;
<a name="l00223"></a>00223     <span class="keywordflow">return</span> ((h&amp;1) == 0 ? u : -u) + ((h&amp;2) == 0 ? v : -v);
<a name="l00224"></a>00224 }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="comment">/* instead of adding another permutation array, just use hash table defined above */</span>
<a name="l00227"></a><a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">00227</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229     <span class="keywordtype">int</span> <a class="code" href="../../de/da0/strsv_8c.html#af5d6242ff783dd9efca51eeec1c234f7">A</a>, AA, AB, <a class="code" href="../../d2/d6c/mball_8c.html#a111da81ae5883147168bbb8366377b10">B</a>, BA, <a class="code" href="../../d7/d1f/structBB.html">BB</a>;
<a name="l00230"></a>00230     <span class="keywordtype">float</span> u=floor(x), v=floor(y), w=floor(z);
<a name="l00231"></a>00231     <span class="keywordtype">int</span> <a class="code" href="../../de/da0/strsv_8c.html#a5ae25df4ee72f83efb4a3683c970678f">X</a>=((int)u) &amp; 255, Y=((int)v) &amp; 255, Z=((int)w) &amp; 255;   <span class="comment">// FIND UNIT CUBE THAT CONTAINS POINT</span>
<a name="l00232"></a>00232     x -= u;             <span class="comment">// FIND RELATIVE X,Y,Z</span>
<a name="l00233"></a>00233     y -= v;             <span class="comment">// OF POINT IN CUBE.</span>
<a name="l00234"></a>00234     z -= w;
<a name="l00235"></a>00235     u = <a class="code" href="../../dd/d05/noise_8c.html#a8ce75b63a9c42556b919fc4b03eab263">npfade</a>(x);      <span class="comment">// COMPUTE FADE CURVES</span>
<a name="l00236"></a>00236     v = <a class="code" href="../../dd/d05/noise_8c.html#a8ce75b63a9c42556b919fc4b03eab263">npfade</a>(y);      <span class="comment">// FOR EACH OF X,Y,Z.</span>
<a name="l00237"></a>00237     w = <a class="code" href="../../dd/d05/noise_8c.html#a8ce75b63a9c42556b919fc4b03eab263">npfade</a>(z);
<a name="l00238"></a>00238     A = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[X  ]+Y;  AA = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[A]+Z;  AB = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[A+1]+Z;      <span class="comment">// HASH COORDINATES OF</span>
<a name="l00239"></a>00239     B = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[X+1]+Y;  BA = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[<a class="code" href="../../d2/d6c/mball_8c.html#a111da81ae5883147168bbb8366377b10">B</a>]+Z;  BB = <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[B+1]+Z;      <span class="comment">// THE 8 CUBE CORNERS,</span>
<a name="l00240"></a>00240     <span class="keywordflow">return</span> <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(w, <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(v, <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(u, <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[AA  ], x  , y  , z   ),  <span class="comment">// AND ADD</span>
<a name="l00241"></a>00241                                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[BA  ], x-1, y  , z   )), <span class="comment">// BLENDED</span>
<a name="l00242"></a>00242                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(u, <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[AB  ], x  , y-1, z   ),  <span class="comment">// RESULTS</span>
<a name="l00243"></a>00243                                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[BB  ], x-1, y-1, z   ))),<span class="comment">// FROM  8</span>
<a name="l00244"></a>00244                                 <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(v, <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(u, <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[AA+1], x  , y  , z-1 ),  <span class="comment">// CORNERS</span>
<a name="l00245"></a>00245                                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[BA+1], x-1, y  , z-1 )), <span class="comment">// OF CUBE</span>
<a name="l00246"></a>00246                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(u, <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[AB+1], x  , y-1, z-1 ),
<a name="l00247"></a>00247                                                                 <a class="code" href="../../dd/d05/noise_8c.html#a9eedd8c9dd6e9a3c932082c94f4f3f46">grad</a>(<a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[BB+1], x-1, y-1, z-1 ))));
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/* for use with BLI_gNoise()/BLI_gTurbulence(), returns unsigned improved perlin noise */</span>
<a name="l00251"></a><a class="code" href="../../dd/d05/noise_8c.html#a2f8d66df0bc17756b66e8ab3791768ee">00251</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a2f8d66df0bc17756b66e8ab3791768ee">newPerlinU</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253     <span class="keywordflow">return</span> (0.5f+0.5f*<a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>(x, y, z));
<a name="l00254"></a>00254 }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="comment">/**************************/</span>
<a name="l00258"></a>00258 <span class="comment">/* END OF IMPROVED PERLIN */</span>
<a name="l00259"></a>00259 <span class="comment">/**************************/</span>
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 <span class="comment">/* Was BLI_hnoise(), removed noisesize, so other functions can call it without scaling. */</span>
<a name="l00262"></a><a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">00262</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">orgBlenderNoise</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264     <span class="keyword">register</span> <span class="keywordtype">float</span> cn1, cn2, cn3, cn4, cn5, cn6, <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, *h;
<a name="l00265"></a>00265     <span class="keywordtype">float</span> fx, fy, fz, ox, oy, oz, jx, jy, jz;
<a name="l00266"></a>00266     <span class="keywordtype">float</span> n= 0.5;
<a name="l00267"></a>00267     <span class="keywordtype">int</span> ix, iy, iz, b00, b01, b10, b11, b20, b21;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     fx= floor(x);
<a name="l00270"></a>00270     fy= floor(y);
<a name="l00271"></a>00271     fz= floor(z);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     ox= x- fx;
<a name="l00274"></a>00274     oy= y- fy;
<a name="l00275"></a>00275     oz= z- fz;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277     ix= (int)fx;
<a name="l00278"></a>00278     iy= (int)fy;
<a name="l00279"></a>00279     iz= (int)fz;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     jx= ox-1;
<a name="l00282"></a>00282     jy= oy-1;
<a name="l00283"></a>00283     jz= oz-1;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     cn1=ox*ox; cn2=oy*oy; cn3=oz*oz;
<a name="l00286"></a>00286     cn4=jx*jx; cn5=jy*jy; cn6=jz*jz;
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     cn1= 1.0f-3.0f*cn1+2.0f*cn1*ox;
<a name="l00289"></a>00289     cn2= 1.0f-3.0f*cn2+2.0f*cn2*oy;
<a name="l00290"></a>00290     cn3= 1.0f-3.0f*cn3+2.0f*cn3*oz;
<a name="l00291"></a>00291     cn4= 1.0f-3.0f*cn4-2.0f*cn4*jx;
<a name="l00292"></a>00292     cn5= 1.0f-3.0f*cn5-2.0f*cn5*jy;
<a name="l00293"></a>00293     cn6= 1.0f-3.0f*cn6-2.0f*cn6*jz;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     b00= <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[ <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[ix &amp; 255]+(iy &amp; 255)];
<a name="l00296"></a>00296     b10= <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[ <a class="code" href="../../dd/d05/noise_8c.html#a3525fa37a20c01dcef02177785596cd9">hash</a>[(ix+1) &amp; 255]+(iy &amp; 255)];
<a name="l00297"></a>00297     b01= hash[ hash[ix &amp; 255]+((iy+1) &amp; 255)];
<a name="l00298"></a>00298     b11= hash[ hash[(ix+1) &amp; 255]+((iy+1) &amp; 255)];
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     b20=iz &amp; 255; b21= (iz+1) &amp; 255;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302         <span class="comment">/* 0 */</span>
<a name="l00303"></a>00303     i= (cn1*cn2*cn3);
<a name="l00304"></a>00304         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b20+b00];
<a name="l00305"></a>00305         n+= i*(h[0]*ox+h[1]*oy+h[2]*oz);
<a name="l00306"></a>00306         <span class="comment">/* 1 */</span>
<a name="l00307"></a>00307     i= (cn1*cn2*cn6);
<a name="l00308"></a>00308         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b21+b00];
<a name="l00309"></a>00309         n+= i*(h[0]*ox+h[1]*oy+h[2]*jz);
<a name="l00310"></a>00310         <span class="comment">/* 2 */</span>
<a name="l00311"></a>00311     i= (cn1*cn5*cn3);
<a name="l00312"></a>00312         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b20+b01];
<a name="l00313"></a>00313         n+= i*(h[0]*ox+h[1]*jy+h[2]*oz);
<a name="l00314"></a>00314         <span class="comment">/* 3 */</span>
<a name="l00315"></a>00315     i= (cn1*cn5*cn6);
<a name="l00316"></a>00316         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b21+b01];
<a name="l00317"></a>00317         n+= i*(h[0]*ox+h[1]*jy+h[2]*jz);
<a name="l00318"></a>00318         <span class="comment">/* 4 */</span>
<a name="l00319"></a>00319     i= cn4*cn2*cn3;
<a name="l00320"></a>00320         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b20+b10];
<a name="l00321"></a>00321         n+= i*(h[0]*jx+h[1]*oy+h[2]*oz);
<a name="l00322"></a>00322         <span class="comment">/* 5 */</span>
<a name="l00323"></a>00323     i= cn4*cn2*cn6;
<a name="l00324"></a>00324         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b21+b10];
<a name="l00325"></a>00325         n+= i*(h[0]*jx+h[1]*oy+h[2]*jz);
<a name="l00326"></a>00326         <span class="comment">/* 6 */</span>
<a name="l00327"></a>00327     i= cn4*cn5*cn3;
<a name="l00328"></a>00328         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b20+b11];
<a name="l00329"></a>00329         n+=  i*(h[0]*jx+h[1]*jy+h[2]*oz);
<a name="l00330"></a>00330         <span class="comment">/* 7 */</span>
<a name="l00331"></a>00331     i= (cn4*cn5*cn6);
<a name="l00332"></a>00332         h=<a class="code" href="../../dd/d05/noise_8c.html#a5d12acc6336a883bfc361172c3f5752c">hashvectf</a>+ 3*hash[b21+b11];
<a name="l00333"></a>00333         n+= i*(h[0]*jx+h[1]*jy+h[2]*jz);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     <span class="keywordflow">if</span> (n&lt;0.0f) n=0.0f; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n&gt;1.0f) n=1.0f;
<a name="l00336"></a>00336     <span class="keywordflow">return</span> n;
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/* as orgBlenderNoise(), returning signed noise */</span>
<a name="l00340"></a><a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">00340</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00341"></a>00341 {
<a name="l00342"></a>00342     <span class="keywordflow">return</span> (2.0f*<a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">orgBlenderNoise</a>(x, y, z)-1.0f);
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment">/* separated from orgBlenderNoise above, with scaling */</span>
<a name="l00346"></a><a class="code" href="../../dd/d05/noise_8c.html#aa355e2a2ce32a48ca3793e37cd2922a0">00346</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#aa355e2a2ce32a48ca3793e37cd2922a0">BLI_hnoise</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="keywordflow">if</span> (noisesize==0.0f) <span class="keywordflow">return</span> 0.0f;
<a name="l00349"></a>00349     x= (1.0f+x)/noisesize;
<a name="l00350"></a>00350     y= (1.0f+y)/noisesize;
<a name="l00351"></a>00351     z= (1.0f+z)/noisesize;
<a name="l00352"></a>00352     <span class="keywordflow">return</span> <a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">orgBlenderNoise</a>(x, y, z);
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="comment">/* original turbulence functions */</span>
<a name="l00357"></a><a class="code" href="../../dd/d05/noise_8c.html#a76981b7f143d0b07ed83aeae3d1e945e">00357</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a76981b7f143d0b07ed83aeae3d1e945e">BLI_turbulence</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">int</span> nr)
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <span class="keywordtype">float</span> s, d= 0.5, <a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>=1.0;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     s= <a class="code" href="../../d1/d65/BLI__noise_8h.html#aa355e2a2ce32a48ca3793e37cd2922a0">BLI_hnoise</a>(noisesize, x, y, z);
<a name="l00362"></a>00362     
<a name="l00363"></a>00363     <span class="keywordflow">while</span> (nr&gt;0) {
<a name="l00364"></a>00364     
<a name="l00365"></a>00365         s+= d*<a class="code" href="../../d1/d65/BLI__noise_8h.html#aa355e2a2ce32a48ca3793e37cd2922a0">BLI_hnoise</a>(noisesize*d, x, y, z);
<a name="l00366"></a>00366         <a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>+= d;
<a name="l00367"></a>00367         d*= 0.5f;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369         nr--;
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371     <span class="keywordflow">return</span> s/<a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>;
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00374"></a><a class="code" href="../../dd/d05/noise_8c.html#ad09f54b3a47ef1bfced957197692c5bf">00374</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#ad09f54b3a47ef1bfced957197692c5bf">BLI_turbulence1</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">int</span> nr)
<a name="l00375"></a>00375 {
<a name="l00376"></a>00376     <span class="keywordtype">float</span> s, d= 0.5, <a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>=1.0;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     s= <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>( (-1.0f+2.0f*<a class="code" href="../../d1/d65/BLI__noise_8h.html#aa355e2a2ce32a48ca3793e37cd2922a0">BLI_hnoise</a>(noisesize, x, y, z)));
<a name="l00379"></a>00379     
<a name="l00380"></a>00380     <span class="keywordflow">while</span> (nr&gt;0) {
<a name="l00381"></a>00381     
<a name="l00382"></a>00382         s+= <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(d* (-1.0f+2.0f*<a class="code" href="../../d1/d65/BLI__noise_8h.html#aa355e2a2ce32a48ca3793e37cd2922a0">BLI_hnoise</a>(noisesize*d, x, y, z)));
<a name="l00383"></a>00383         <a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>+= d;
<a name="l00384"></a>00384         d*= 0.5f;
<a name="l00385"></a>00385         
<a name="l00386"></a>00386         nr--;
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388     <span class="keywordflow">return</span> s/<a class="code" href="../../d7/d35/meshtools_8c.html#aaa0035357cda6d6d6d0e6831ce7c869a">div</a>;
<a name="l00389"></a>00389 }
<a name="l00390"></a>00390 
<a name="l00391"></a>00391 <span class="comment">/* ********************* FROM PERLIN HIMSELF: ******************** */</span>
<a name="l00392"></a>00392 
<a name="l00393"></a><a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">00393</a> <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[512+2]= {
<a name="l00394"></a>00394 0xA2,0xA0,0x19,0x3B,0xF8,0xEB,0xAA,0xEE,0xF3,0x1C,0x67,0x28,0x1D,0xED,0x0,0xDE,0x95,0x2E,0xDC,0x3F,0x3A,0x82,0x35,0x4D,0x6C,0xBA,0x36,0xD0,0xF6,0xC,0x79,0x32,0xD1,0x59,0xF4,0x8,0x8B,0x63,0x89,0x2F,0xB8,0xB4,0x97,0x83,0xF2,0x8F,0x18,0xC7,0x51,0x14,0x65,0x87,0x48,0x20,0x42,0xA8,0x80,0xB5,0x40,0x13,0xB2,0x22,0x7E,0x57,
<a name="l00395"></a>00395 0xBC,0x7F,0x6B,0x9D,0x86,0x4C,0xC8,0xDB,0x7C,0xD5,0x25,0x4E,0x5A,0x55,0x74,0x50,0xCD,0xB3,0x7A,0xBB,0xC3,0xCB,0xB6,0xE2,0xE4,0xEC,0xFD,0x98,0xB,0x96,0xD3,0x9E,0x5C,0xA1,0x64,0xF1,0x81,0x61,0xE1,0xC4,0x24,0x72,0x49,0x8C,0x90,0x4B,0x84,0x34,0x38,0xAB,0x78,0xCA,0x1F,0x1,0xD7,0x93,0x11,0xC1,0x58,0xA9,0x31,0xF9,0x44,0x6D,
<a name="l00396"></a>00396 0xBF,0x33,0x9C,0x5F,0x9,0x94,0xA3,0x85,0x6,0xC6,0x9A,0x1E,0x7B,0x46,0x15,0x30,0x27,0x2B,0x1B,0x71,0x3C,0x5B,0xD6,0x6F,0x62,0xAC,0x4F,0xC2,0xC0,0xE,0xB1,0x23,0xA7,0xDF,0x47,0xB0,0x77,0x69,0x5,0xE9,0xE6,0xE7,0x76,0x73,0xF,0xFE,0x6E,0x9B,0x56,0xEF,0x12,0xA5,0x37,0xFC,0xAE,0xD9,0x3,0x8E,0xDD,0x10,0xB9,0xCE,0xC9,0x8D,
<a name="l00397"></a>00397 0xDA,0x2A,0xBD,0x68,0x17,0x9F,0xBE,0xD4,0xA,0xCC,0xD2,0xE8,0x43,0x3D,0x70,0xB7,0x2,0x7D,0x99,0xD8,0xD,0x60,0x8A,0x4,0x2C,0x3E,0x92,0xE5,0xAF,0x53,0x7,0xE0,0x29,0xA6,0xC5,0xE3,0xF5,0xF7,0x4A,0x41,0x26,0x6A,0x16,0x5E,0x52,0x2D,0x21,0xAD,0xF0,0x91,0xFF,0xEA,0x54,0xFA,0x66,0x1A,0x45,0x39,0xCF,0x75,0xA4,0x88,0xFB,0x5D,
<a name="l00398"></a>00398 0xA2,0xA0,0x19,0x3B,0xF8,0xEB,0xAA,0xEE,0xF3,0x1C,0x67,0x28,0x1D,0xED,0x0,0xDE,0x95,0x2E,0xDC,0x3F,0x3A,0x82,0x35,0x4D,0x6C,0xBA,0x36,0xD0,0xF6,0xC,0x79,0x32,0xD1,0x59,0xF4,0x8,0x8B,0x63,0x89,0x2F,0xB8,0xB4,0x97,0x83,0xF2,0x8F,0x18,0xC7,0x51,0x14,0x65,0x87,0x48,0x20,0x42,0xA8,0x80,0xB5,0x40,0x13,0xB2,0x22,0x7E,0x57,
<a name="l00399"></a>00399 0xBC,0x7F,0x6B,0x9D,0x86,0x4C,0xC8,0xDB,0x7C,0xD5,0x25,0x4E,0x5A,0x55,0x74,0x50,0xCD,0xB3,0x7A,0xBB,0xC3,0xCB,0xB6,0xE2,0xE4,0xEC,0xFD,0x98,0xB,0x96,0xD3,0x9E,0x5C,0xA1,0x64,0xF1,0x81,0x61,0xE1,0xC4,0x24,0x72,0x49,0x8C,0x90,0x4B,0x84,0x34,0x38,0xAB,0x78,0xCA,0x1F,0x1,0xD7,0x93,0x11,0xC1,0x58,0xA9,0x31,0xF9,0x44,0x6D,
<a name="l00400"></a>00400 0xBF,0x33,0x9C,0x5F,0x9,0x94,0xA3,0x85,0x6,0xC6,0x9A,0x1E,0x7B,0x46,0x15,0x30,0x27,0x2B,0x1B,0x71,0x3C,0x5B,0xD6,0x6F,0x62,0xAC,0x4F,0xC2,0xC0,0xE,0xB1,0x23,0xA7,0xDF,0x47,0xB0,0x77,0x69,0x5,0xE9,0xE6,0xE7,0x76,0x73,0xF,0xFE,0x6E,0x9B,0x56,0xEF,0x12,0xA5,0x37,0xFC,0xAE,0xD9,0x3,0x8E,0xDD,0x10,0xB9,0xCE,0xC9,0x8D,
<a name="l00401"></a>00401 0xDA,0x2A,0xBD,0x68,0x17,0x9F,0xBE,0xD4,0xA,0xCC,0xD2,0xE8,0x43,0x3D,0x70,0xB7,0x2,0x7D,0x99,0xD8,0xD,0x60,0x8A,0x4,0x2C,0x3E,0x92,0xE5,0xAF,0x53,0x7,0xE0,0x29,0xA6,0xC5,0xE3,0xF5,0xF7,0x4A,0x41,0x26,0x6A,0x16,0x5E,0x52,0x2D,0x21,0xAD,0xF0,0x91,0xFF,0xEA,0x54,0xFA,0x66,0x1A,0x45,0x39,0xCF,0x75,0xA4,0x88,0xFB,0x5D,
<a name="l00402"></a>00402 0xA2,0xA0};
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">00405</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[512+2][3]= {
<a name="l00406"></a>00406     {0.33783, 0.715698, -0.611206},
<a name="l00407"></a>00407     {-0.944031, -0.326599, -0.045624},
<a name="l00408"></a>00408     {-0.101074, -0.416443, -0.903503},
<a name="l00409"></a>00409     {0.799286, 0.49411, -0.341949},
<a name="l00410"></a>00410     {-0.854645, 0.518036, 0.033936},
<a name="l00411"></a>00411     {0.42514, -0.437866, -0.792114},
<a name="l00412"></a>00412     {-0.358948, 0.597046, 0.717377},
<a name="l00413"></a>00413     {-0.985413, 0.144714, 0.089294},
<a name="l00414"></a>00414     {-0.601776, -0.33728, -0.723907},
<a name="l00415"></a>00415     {-0.449921, 0.594513, 0.666382},
<a name="l00416"></a>00416     {0.208313, -0.10791, 0.972076},
<a name="l00417"></a>00417     {0.575317, 0.060425, 0.815643},
<a name="l00418"></a>00418     {0.293365, -0.875702, -0.383453},
<a name="l00419"></a>00419     {0.293762, 0.465759, 0.834686},
<a name="l00420"></a>00420     {-0.846008, -0.233398, -0.47934},
<a name="l00421"></a>00421     {-0.115814, 0.143036, -0.98291},
<a name="l00422"></a>00422     {0.204681, -0.949036, -0.239532},
<a name="l00423"></a>00423     {0.946716, -0.263947, 0.184326},
<a name="l00424"></a>00424     {-0.235596, 0.573822, 0.784332},
<a name="l00425"></a>00425     {0.203705, -0.372253, -0.905487},
<a name="l00426"></a>00426     {0.756989, -0.651031, 0.055298},
<a name="l00427"></a>00427     {0.497803, 0.814697, -0.297363},
<a name="l00428"></a>00428     {-0.16214, 0.063995, -0.98468},
<a name="l00429"></a>00429     {-0.329254, 0.834381, 0.441925},
<a name="l00430"></a>00430     {0.703827, -0.527039, -0.476227},
<a name="l00431"></a>00431     {0.956421, 0.266113, 0.119781},
<a name="l00432"></a>00432     {0.480133, 0.482849, 0.7323},
<a name="l00433"></a>00433     {-0.18631, 0.961212, -0.203125},
<a name="l00434"></a>00434     {-0.748474, -0.656921, -0.090393},
<a name="l00435"></a>00435     {-0.085052, -0.165253, 0.982544},
<a name="l00436"></a>00436     {-0.76947, 0.628174, -0.115234},
<a name="l00437"></a>00437     {0.383148, 0.537659, 0.751068},
<a name="l00438"></a>00438     {0.616486, -0.668488, -0.415924},
<a name="l00439"></a>00439     {-0.259979, -0.630005, 0.73175},
<a name="l00440"></a>00440     {0.570953, -0.087952, 0.816223},
<a name="l00441"></a>00441     {-0.458008, 0.023254, 0.888611},
<a name="l00442"></a>00442     {-0.196167, 0.976563, -0.088287},
<a name="l00443"></a>00443     {-0.263885, -0.69812, -0.665527},
<a name="l00444"></a>00444     {0.437134, -0.892273, -0.112793},
<a name="l00445"></a>00445     {-0.621674, -0.230438, 0.748566},
<a name="l00446"></a>00446     {0.232422, 0.900574, -0.367249},
<a name="l00447"></a>00447     {0.22229, -0.796143, 0.562744},
<a name="l00448"></a>00448     {-0.665497, -0.73764, 0.11377},
<a name="l00449"></a>00449     {0.670135, 0.704803, 0.232605},
<a name="l00450"></a>00450     {0.895599, 0.429749, -0.114655},
<a name="l00451"></a>00451     {-0.11557, -0.474243, 0.872742},
<a name="l00452"></a>00452     {0.621826, 0.604004, -0.498444},
<a name="l00453"></a>00453     {-0.832214, 0.012756, 0.55426},
<a name="l00454"></a>00454     {-0.702484, 0.705994, -0.089661},
<a name="l00455"></a>00455     {-0.692017, 0.649292, 0.315399},
<a name="l00456"></a>00456     {-0.175995, -0.977997, 0.111877},
<a name="l00457"></a>00457     {0.096954, -0.04953, 0.994019},
<a name="l00458"></a>00458     {0.635284, -0.606689, -0.477783},
<a name="l00459"></a>00459     {-0.261261, -0.607422, -0.750153},
<a name="l00460"></a>00460     {0.983276, 0.165436, 0.075958},
<a name="l00461"></a>00461     {-0.29837, 0.404083, -0.864655},
<a name="l00462"></a>00462     {-0.638672, 0.507721, 0.578156},
<a name="l00463"></a>00463     {0.388214, 0.412079, 0.824249},
<a name="l00464"></a>00464     {0.556183, -0.208832, 0.804352},
<a name="l00465"></a>00465     {0.778442, 0.562012, 0.27951},
<a name="l00466"></a>00466     {-0.616577, 0.781921, -0.091522},
<a name="l00467"></a>00467     {0.196289, 0.051056, 0.979187},
<a name="l00468"></a>00468     {-0.121216, 0.207153, -0.970734},
<a name="l00469"></a>00469     {-0.173401, -0.384735, 0.906555},
<a name="l00470"></a>00470     {0.161499, -0.723236, -0.671387},
<a name="l00471"></a>00471     {0.178497, -0.006226, -0.983887},
<a name="l00472"></a>00472     {-0.126038, 0.15799, 0.97934},
<a name="l00473"></a>00473     {0.830475, -0.024811, 0.556458},
<a name="l00474"></a>00474     {-0.510132, -0.76944, 0.384247},
<a name="l00475"></a>00475     {0.81424, 0.200104, -0.544891},
<a name="l00476"></a>00476     {-0.112549, -0.393311, -0.912445},
<a name="l00477"></a>00477     {0.56189, 0.152222, -0.813049},
<a name="l00478"></a>00478     {0.198914, -0.254517, -0.946381},
<a name="l00479"></a>00479     {-0.41217, 0.690979, -0.593811},
<a name="l00480"></a>00480     {-0.407257, 0.324524, 0.853668},
<a name="l00481"></a>00481     {-0.690186, 0.366119, -0.624115},
<a name="l00482"></a>00482     {-0.428345, 0.844147, -0.322296},
<a name="l00483"></a>00483     {-0.21228, -0.297546, -0.930756},
<a name="l00484"></a>00484     {-0.273071, 0.516113, 0.811798},
<a name="l00485"></a>00485     {0.928314, 0.371643, 0.007233},
<a name="l00486"></a>00486     {0.785828, -0.479218, -0.390778},
<a name="l00487"></a>00487     {-0.704895, 0.058929, 0.706818},
<a name="l00488"></a>00488     {0.173248, 0.203583, 0.963562},
<a name="l00489"></a>00489     {0.422211, -0.904297, -0.062469},
<a name="l00490"></a>00490     {-0.363312, -0.182465, 0.913605},
<a name="l00491"></a>00491     {0.254028, -0.552307, -0.793945},
<a name="l00492"></a>00492     {-0.28891, -0.765747, -0.574554},
<a name="l00493"></a>00493     {0.058319, 0.291382, 0.954803},
<a name="l00494"></a>00494     {0.946136, -0.303925, 0.111267},
<a name="l00495"></a>00495     {-0.078156, 0.443695, -0.892731},
<a name="l00496"></a>00496     {0.182098, 0.89389, 0.409515},
<a name="l00497"></a>00497     {-0.680298, -0.213318, 0.701141},
<a name="l00498"></a>00498     {0.062469, 0.848389, -0.525635},
<a name="l00499"></a>00499     {-0.72879, -0.641846, 0.238342},
<a name="l00500"></a>00500     {-0.88089, 0.427673, 0.202637},
<a name="l00501"></a>00501     {-0.532501, -0.21405, 0.818878},
<a name="l00502"></a>00502     {0.948975, -0.305084, 0.07962},
<a name="l00503"></a>00503     {0.925446, 0.374664, 0.055817},
<a name="l00504"></a>00504     {0.820923, 0.565491, 0.079102},
<a name="l00505"></a>00505     {0.25882, 0.099792, -0.960724},
<a name="l00506"></a>00506     {-0.294617, 0.910522, 0.289978},
<a name="l00507"></a>00507     {0.137115, 0.320038, -0.937408},
<a name="l00508"></a>00508     {-0.908386, 0.345276, -0.235718},
<a name="l00509"></a>00509     {-0.936218, 0.138763, 0.322754},
<a name="l00510"></a>00510     {0.366577, 0.925934, -0.090637},
<a name="l00511"></a>00511     {0.309296, -0.686829, -0.657684},
<a name="l00512"></a>00512     {0.66983, 0.024445, 0.742065},
<a name="l00513"></a>00513     {-0.917999, -0.059113, -0.392059},
<a name="l00514"></a>00514     {0.365509, 0.462158, -0.807922},
<a name="l00515"></a>00515     {0.083374, 0.996399, -0.014801},
<a name="l00516"></a>00516     {0.593842, 0.253143, -0.763672},
<a name="l00517"></a>00517     {0.974976, -0.165466, 0.148285},
<a name="l00518"></a>00518     {0.918976, 0.137299, 0.369537},
<a name="l00519"></a>00519     {0.294952, 0.694977, 0.655731},
<a name="l00520"></a>00520     {0.943085, 0.152618, -0.295319},
<a name="l00521"></a>00521     {0.58783, -0.598236, 0.544495},
<a name="l00522"></a>00522     {0.203796, 0.678223, 0.705994},
<a name="l00523"></a>00523     {-0.478821, -0.661011, 0.577667},
<a name="l00524"></a>00524     {0.719055, -0.1698, -0.673828},
<a name="l00525"></a>00525     {-0.132172, -0.965332, 0.225006},
<a name="l00526"></a>00526     {-0.981873, -0.14502, 0.121979},
<a name="l00527"></a>00527     {0.763458, 0.579742, 0.284546},
<a name="l00528"></a>00528     {-0.893188, 0.079681, 0.442474},
<a name="l00529"></a>00529     {-0.795776, -0.523804, 0.303802},
<a name="l00530"></a>00530     {0.734955, 0.67804, -0.007446},
<a name="l00531"></a>00531     {0.15506, 0.986267, -0.056183},
<a name="l00532"></a>00532     {0.258026, 0.571503, -0.778931},
<a name="l00533"></a>00533     {-0.681549, -0.702087, -0.206116},
<a name="l00534"></a>00534     {-0.96286, -0.177185, 0.203613},
<a name="l00535"></a>00535     {-0.470978, -0.515106, 0.716095},
<a name="l00536"></a>00536     {-0.740326, 0.57135, 0.354095},
<a name="l00537"></a>00537     {-0.56012, -0.824982, -0.074982},
<a name="l00538"></a>00538     {-0.507874, 0.753204, 0.417969},
<a name="l00539"></a>00539     {-0.503113, 0.038147, 0.863342},
<a name="l00540"></a>00540     {0.594025, 0.673553, -0.439758},
<a name="l00541"></a>00541     {-0.119873, -0.005524, -0.992737},
<a name="l00542"></a>00542     {0.098267, -0.213776, 0.971893},
<a name="l00543"></a>00543     {-0.615631, 0.643951, 0.454163},
<a name="l00544"></a>00544     {0.896851, -0.441071, 0.032166},
<a name="l00545"></a>00545     {-0.555023, 0.750763, -0.358093},
<a name="l00546"></a>00546     {0.398773, 0.304688, 0.864929},
<a name="l00547"></a>00547     {-0.722961, 0.303589, 0.620544},
<a name="l00548"></a>00548     {-0.63559, -0.621948, -0.457306},
<a name="l00549"></a>00549     {-0.293243, 0.072327, 0.953278},
<a name="l00550"></a>00550     {-0.491638, 0.661041, -0.566772},
<a name="l00551"></a>00551     {-0.304199, -0.572083, -0.761688},
<a name="l00552"></a>00552     {0.908081, -0.398956, 0.127014},
<a name="l00553"></a>00553     {-0.523621, -0.549683, -0.650848},
<a name="l00554"></a>00554     {-0.932922, -0.19986, 0.299408},
<a name="l00555"></a>00555     {0.099426, 0.140869, 0.984985},
<a name="l00556"></a>00556     {-0.020325, -0.999756, -0.002319},
<a name="l00557"></a>00557     {0.952667, 0.280853, -0.11615},
<a name="l00558"></a>00558     {-0.971893, 0.082581, 0.220337},
<a name="l00559"></a>00559     {0.65921, 0.705292, -0.260651},
<a name="l00560"></a>00560     {0.733063, -0.175537, 0.657043},
<a name="l00561"></a>00561     {-0.555206, 0.429504, -0.712189},
<a name="l00562"></a>00562     {0.400421, -0.89859, 0.179352},
<a name="l00563"></a>00563     {0.750885, -0.19696, 0.630341},
<a name="l00564"></a>00564     {0.785675, -0.569336, 0.241821},
<a name="l00565"></a>00565     {-0.058899, -0.464111, 0.883789},
<a name="l00566"></a>00566     {0.129608, -0.94519, 0.299622},
<a name="l00567"></a>00567     {-0.357819, 0.907654, 0.219238},
<a name="l00568"></a>00568     {-0.842133, -0.439117, -0.312927},
<a name="l00569"></a>00569     {-0.313477, 0.84433, 0.434479},
<a name="l00570"></a>00570     {-0.241211, 0.053253, 0.968994},
<a name="l00571"></a>00571     {0.063873, 0.823273, 0.563965},
<a name="l00572"></a>00572     {0.476288, 0.862152, -0.172516},
<a name="l00573"></a>00573     {0.620941, -0.298126, 0.724915},
<a name="l00574"></a>00574     {0.25238, -0.749359, -0.612122},
<a name="l00575"></a>00575     {-0.577545, 0.386566, 0.718994},
<a name="l00576"></a>00576     {-0.406342, -0.737976, 0.538696},
<a name="l00577"></a>00577     {0.04718, 0.556305, 0.82959},
<a name="l00578"></a>00578     {-0.802856, 0.587463, 0.101166},
<a name="l00579"></a>00579     {-0.707733, -0.705963, 0.026428},
<a name="l00580"></a>00580     {0.374908, 0.68457, 0.625092},
<a name="l00581"></a>00581     {0.472137, 0.208405, -0.856506},
<a name="l00582"></a>00582     {-0.703064, -0.581085, -0.409821},
<a name="l00583"></a>00583     {-0.417206, -0.736328, 0.532623},
<a name="l00584"></a>00584     {-0.447876, -0.20285, -0.870728},
<a name="l00585"></a>00585     {0.086945, -0.990417, 0.107086},
<a name="l00586"></a>00586     {0.183685, 0.018341, -0.982788},
<a name="l00587"></a>00587     {0.560638, -0.428864, 0.708282},
<a name="l00588"></a>00588     {0.296722, -0.952576, -0.0672},
<a name="l00589"></a>00589     {0.135773, 0.990265, 0.030243},
<a name="l00590"></a>00590     {-0.068787, 0.654724, 0.752686},
<a name="l00591"></a>00591     {0.762604, -0.551758, 0.337585},
<a name="l00592"></a>00592     {-0.819611, -0.407684, 0.402466},
<a name="l00593"></a>00593     {-0.727844, -0.55072, -0.408539},
<a name="l00594"></a>00594     {-0.855774, -0.480011, 0.19281},
<a name="l00595"></a>00595     {0.693176, -0.079285, 0.716339},
<a name="l00596"></a>00596     {0.226013, 0.650116, -0.725433},
<a name="l00597"></a>00597     {0.246704, 0.953369, -0.173553},
<a name="l00598"></a>00598     {-0.970398, -0.239227, -0.03244},
<a name="l00599"></a>00599     {0.136383, -0.394318, 0.908752},
<a name="l00600"></a>00600     {0.813232, 0.558167, 0.164368},
<a name="l00601"></a>00601     {0.40451, 0.549042, -0.731323},
<a name="l00602"></a>00602     {-0.380249, -0.566711, 0.730865},
<a name="l00603"></a>00603     {0.022156, 0.932739, 0.359741},
<a name="l00604"></a>00604     {0.00824, 0.996552, -0.082306},
<a name="l00605"></a>00605     {0.956635, -0.065338, -0.283722},
<a name="l00606"></a>00606     {-0.743561, 0.008209, 0.668579},
<a name="l00607"></a>00607     {-0.859589, -0.509674, 0.035767},
<a name="l00608"></a>00608     {-0.852234, 0.363678, -0.375977},
<a name="l00609"></a>00609     {-0.201965, -0.970795, -0.12915},
<a name="l00610"></a>00610     {0.313477, 0.947327, 0.06546},
<a name="l00611"></a>00611     {-0.254028, -0.528259, 0.81015},
<a name="l00612"></a>00612     {0.628052, 0.601105, 0.49411},
<a name="l00613"></a>00613     {-0.494385, 0.868378, 0.037933},
<a name="l00614"></a>00614     {0.275635, -0.086426, 0.957336},
<a name="l00615"></a>00615     {-0.197937, 0.468903, -0.860748},
<a name="l00616"></a>00616     {0.895599, 0.399384, 0.195801},
<a name="l00617"></a>00617     {0.560791, 0.825012, -0.069214},
<a name="l00618"></a>00618     {0.304199, -0.849487, 0.43103},
<a name="l00619"></a>00619     {0.096375, 0.93576, 0.339111},
<a name="l00620"></a>00620     {-0.051422, 0.408966, -0.911072},
<a name="l00621"></a>00621     {0.330444, 0.942841, -0.042389},
<a name="l00622"></a>00622     {-0.452362, -0.786407, 0.420563},
<a name="l00623"></a>00623     {0.134308, -0.933472, -0.332489},
<a name="l00624"></a>00624     {0.80191, -0.566711, -0.188934},
<a name="l00625"></a>00625     {-0.987946, -0.105988, 0.112518},
<a name="l00626"></a>00626     {-0.24408, 0.892242, -0.379791},
<a name="l00627"></a>00627     {-0.920502, 0.229095, -0.316376},
<a name="l00628"></a>00628     {0.7789, 0.325958, 0.535706},
<a name="l00629"></a>00629     {-0.912872, 0.185211, -0.36377},
<a name="l00630"></a>00630     {-0.184784, 0.565369, -0.803833},
<a name="l00631"></a>00631     {-0.018463, 0.119537, 0.992615},
<a name="l00632"></a>00632     {-0.259247, -0.935608, 0.239532},
<a name="l00633"></a>00633     {-0.82373, -0.449127, -0.345947},
<a name="l00634"></a>00634     {-0.433105, 0.659515, 0.614349},
<a name="l00635"></a>00635     {-0.822754, 0.378845, -0.423676},
<a name="l00636"></a>00636     {0.687195, -0.674835, -0.26889},
<a name="l00637"></a>00637     {-0.246582, -0.800842, 0.545715},
<a name="l00638"></a>00638     {-0.729187, -0.207794, 0.651978},
<a name="l00639"></a>00639     {0.653534, -0.610443, -0.447388},
<a name="l00640"></a>00640     {0.492584, -0.023346, 0.869934},
<a name="l00641"></a>00641     {0.609039, 0.009094, -0.79306},
<a name="l00642"></a>00642     {0.962494, -0.271088, -0.00885},
<a name="l00643"></a>00643     {0.2659, -0.004913, 0.963959},
<a name="l00644"></a>00644     {0.651245, 0.553619, -0.518951},
<a name="l00645"></a>00645     {0.280548, -0.84314, 0.458618},
<a name="l00646"></a>00646     {-0.175293, -0.983215, 0.049805},
<a name="l00647"></a>00647     {0.035339, -0.979919, 0.196045},
<a name="l00648"></a>00648     {-0.982941, 0.164307, -0.082245},
<a name="l00649"></a>00649     {0.233734, -0.97226, -0.005005},
<a name="l00650"></a>00650     {-0.747253, -0.611328, 0.260437},
<a name="l00651"></a>00651     {0.645599, 0.592773, 0.481384},
<a name="l00652"></a>00652     {0.117706, -0.949524, -0.29068},
<a name="l00653"></a>00653     {-0.535004, -0.791901, -0.294312},
<a name="l00654"></a>00654     {-0.627167, -0.214447, 0.748718},
<a name="l00655"></a>00655     {-0.047974, -0.813477, -0.57959},
<a name="l00656"></a>00656     {-0.175537, 0.477264, -0.860992},
<a name="l00657"></a>00657     {0.738556, -0.414246, -0.53183},
<a name="l00658"></a>00658     {0.562561, -0.704071, 0.433289},
<a name="l00659"></a>00659     {-0.754944, 0.64801, -0.100586},
<a name="l00660"></a>00660     {0.114716, 0.044525, -0.992371},
<a name="l00661"></a>00661     {0.966003, 0.244873, -0.082764},
<a name="l00662"></a>00662     {0.33783, 0.715698, -0.611206},
<a name="l00663"></a>00663     {-0.944031, -0.326599, -0.045624},
<a name="l00664"></a>00664     {-0.101074, -0.416443, -0.903503},
<a name="l00665"></a>00665     {0.799286, 0.49411, -0.341949},
<a name="l00666"></a>00666     {-0.854645, 0.518036, 0.033936},
<a name="l00667"></a>00667     {0.42514, -0.437866, -0.792114},
<a name="l00668"></a>00668     {-0.358948, 0.597046, 0.717377},
<a name="l00669"></a>00669     {-0.985413, 0.144714, 0.089294},
<a name="l00670"></a>00670     {-0.601776, -0.33728, -0.723907},
<a name="l00671"></a>00671     {-0.449921, 0.594513, 0.666382},
<a name="l00672"></a>00672     {0.208313, -0.10791, 0.972076},
<a name="l00673"></a>00673     {0.575317, 0.060425, 0.815643},
<a name="l00674"></a>00674     {0.293365, -0.875702, -0.383453},
<a name="l00675"></a>00675     {0.293762, 0.465759, 0.834686},
<a name="l00676"></a>00676     {-0.846008, -0.233398, -0.47934},
<a name="l00677"></a>00677     {-0.115814, 0.143036, -0.98291},
<a name="l00678"></a>00678     {0.204681, -0.949036, -0.239532},
<a name="l00679"></a>00679     {0.946716, -0.263947, 0.184326},
<a name="l00680"></a>00680     {-0.235596, 0.573822, 0.784332},
<a name="l00681"></a>00681     {0.203705, -0.372253, -0.905487},
<a name="l00682"></a>00682     {0.756989, -0.651031, 0.055298},
<a name="l00683"></a>00683     {0.497803, 0.814697, -0.297363},
<a name="l00684"></a>00684     {-0.16214, 0.063995, -0.98468},
<a name="l00685"></a>00685     {-0.329254, 0.834381, 0.441925},
<a name="l00686"></a>00686     {0.703827, -0.527039, -0.476227},
<a name="l00687"></a>00687     {0.956421, 0.266113, 0.119781},
<a name="l00688"></a>00688     {0.480133, 0.482849, 0.7323},
<a name="l00689"></a>00689     {-0.18631, 0.961212, -0.203125},
<a name="l00690"></a>00690     {-0.748474, -0.656921, -0.090393},
<a name="l00691"></a>00691     {-0.085052, -0.165253, 0.982544},
<a name="l00692"></a>00692     {-0.76947, 0.628174, -0.115234},
<a name="l00693"></a>00693     {0.383148, 0.537659, 0.751068},
<a name="l00694"></a>00694     {0.616486, -0.668488, -0.415924},
<a name="l00695"></a>00695     {-0.259979, -0.630005, 0.73175},
<a name="l00696"></a>00696     {0.570953, -0.087952, 0.816223},
<a name="l00697"></a>00697     {-0.458008, 0.023254, 0.888611},
<a name="l00698"></a>00698     {-0.196167, 0.976563, -0.088287},
<a name="l00699"></a>00699     {-0.263885, -0.69812, -0.665527},
<a name="l00700"></a>00700     {0.437134, -0.892273, -0.112793},
<a name="l00701"></a>00701     {-0.621674, -0.230438, 0.748566},
<a name="l00702"></a>00702     {0.232422, 0.900574, -0.367249},
<a name="l00703"></a>00703     {0.22229, -0.796143, 0.562744},
<a name="l00704"></a>00704     {-0.665497, -0.73764, 0.11377},
<a name="l00705"></a>00705     {0.670135, 0.704803, 0.232605},
<a name="l00706"></a>00706     {0.895599, 0.429749, -0.114655},
<a name="l00707"></a>00707     {-0.11557, -0.474243, 0.872742},
<a name="l00708"></a>00708     {0.621826, 0.604004, -0.498444},
<a name="l00709"></a>00709     {-0.832214, 0.012756, 0.55426},
<a name="l00710"></a>00710     {-0.702484, 0.705994, -0.089661},
<a name="l00711"></a>00711     {-0.692017, 0.649292, 0.315399},
<a name="l00712"></a>00712     {-0.175995, -0.977997, 0.111877},
<a name="l00713"></a>00713     {0.096954, -0.04953, 0.994019},
<a name="l00714"></a>00714     {0.635284, -0.606689, -0.477783},
<a name="l00715"></a>00715     {-0.261261, -0.607422, -0.750153},
<a name="l00716"></a>00716     {0.983276, 0.165436, 0.075958},
<a name="l00717"></a>00717     {-0.29837, 0.404083, -0.864655},
<a name="l00718"></a>00718     {-0.638672, 0.507721, 0.578156},
<a name="l00719"></a>00719     {0.388214, 0.412079, 0.824249},
<a name="l00720"></a>00720     {0.556183, -0.208832, 0.804352},
<a name="l00721"></a>00721     {0.778442, 0.562012, 0.27951},
<a name="l00722"></a>00722     {-0.616577, 0.781921, -0.091522},
<a name="l00723"></a>00723     {0.196289, 0.051056, 0.979187},
<a name="l00724"></a>00724     {-0.121216, 0.207153, -0.970734},
<a name="l00725"></a>00725     {-0.173401, -0.384735, 0.906555},
<a name="l00726"></a>00726     {0.161499, -0.723236, -0.671387},
<a name="l00727"></a>00727     {0.178497, -0.006226, -0.983887},
<a name="l00728"></a>00728     {-0.126038, 0.15799, 0.97934},
<a name="l00729"></a>00729     {0.830475, -0.024811, 0.556458},
<a name="l00730"></a>00730     {-0.510132, -0.76944, 0.384247},
<a name="l00731"></a>00731     {0.81424, 0.200104, -0.544891},
<a name="l00732"></a>00732     {-0.112549, -0.393311, -0.912445},
<a name="l00733"></a>00733     {0.56189, 0.152222, -0.813049},
<a name="l00734"></a>00734     {0.198914, -0.254517, -0.946381},
<a name="l00735"></a>00735     {-0.41217, 0.690979, -0.593811},
<a name="l00736"></a>00736     {-0.407257, 0.324524, 0.853668},
<a name="l00737"></a>00737     {-0.690186, 0.366119, -0.624115},
<a name="l00738"></a>00738     {-0.428345, 0.844147, -0.322296},
<a name="l00739"></a>00739     {-0.21228, -0.297546, -0.930756},
<a name="l00740"></a>00740     {-0.273071, 0.516113, 0.811798},
<a name="l00741"></a>00741     {0.928314, 0.371643, 0.007233},
<a name="l00742"></a>00742     {0.785828, -0.479218, -0.390778},
<a name="l00743"></a>00743     {-0.704895, 0.058929, 0.706818},
<a name="l00744"></a>00744     {0.173248, 0.203583, 0.963562},
<a name="l00745"></a>00745     {0.422211, -0.904297, -0.062469},
<a name="l00746"></a>00746     {-0.363312, -0.182465, 0.913605},
<a name="l00747"></a>00747     {0.254028, -0.552307, -0.793945},
<a name="l00748"></a>00748     {-0.28891, -0.765747, -0.574554},
<a name="l00749"></a>00749     {0.058319, 0.291382, 0.954803},
<a name="l00750"></a>00750     {0.946136, -0.303925, 0.111267},
<a name="l00751"></a>00751     {-0.078156, 0.443695, -0.892731},
<a name="l00752"></a>00752     {0.182098, 0.89389, 0.409515},
<a name="l00753"></a>00753     {-0.680298, -0.213318, 0.701141},
<a name="l00754"></a>00754     {0.062469, 0.848389, -0.525635},
<a name="l00755"></a>00755     {-0.72879, -0.641846, 0.238342},
<a name="l00756"></a>00756     {-0.88089, 0.427673, 0.202637},
<a name="l00757"></a>00757     {-0.532501, -0.21405, 0.818878},
<a name="l00758"></a>00758     {0.948975, -0.305084, 0.07962},
<a name="l00759"></a>00759     {0.925446, 0.374664, 0.055817},
<a name="l00760"></a>00760     {0.820923, 0.565491, 0.079102},
<a name="l00761"></a>00761     {0.25882, 0.099792, -0.960724},
<a name="l00762"></a>00762     {-0.294617, 0.910522, 0.289978},
<a name="l00763"></a>00763     {0.137115, 0.320038, -0.937408},
<a name="l00764"></a>00764     {-0.908386, 0.345276, -0.235718},
<a name="l00765"></a>00765     {-0.936218, 0.138763, 0.322754},
<a name="l00766"></a>00766     {0.366577, 0.925934, -0.090637},
<a name="l00767"></a>00767     {0.309296, -0.686829, -0.657684},
<a name="l00768"></a>00768     {0.66983, 0.024445, 0.742065},
<a name="l00769"></a>00769     {-0.917999, -0.059113, -0.392059},
<a name="l00770"></a>00770     {0.365509, 0.462158, -0.807922},
<a name="l00771"></a>00771     {0.083374, 0.996399, -0.014801},
<a name="l00772"></a>00772     {0.593842, 0.253143, -0.763672},
<a name="l00773"></a>00773     {0.974976, -0.165466, 0.148285},
<a name="l00774"></a>00774     {0.918976, 0.137299, 0.369537},
<a name="l00775"></a>00775     {0.294952, 0.694977, 0.655731},
<a name="l00776"></a>00776     {0.943085, 0.152618, -0.295319},
<a name="l00777"></a>00777     {0.58783, -0.598236, 0.544495},
<a name="l00778"></a>00778     {0.203796, 0.678223, 0.705994},
<a name="l00779"></a>00779     {-0.478821, -0.661011, 0.577667},
<a name="l00780"></a>00780     {0.719055, -0.1698, -0.673828},
<a name="l00781"></a>00781     {-0.132172, -0.965332, 0.225006},
<a name="l00782"></a>00782     {-0.981873, -0.14502, 0.121979},
<a name="l00783"></a>00783     {0.763458, 0.579742, 0.284546},
<a name="l00784"></a>00784     {-0.893188, 0.079681, 0.442474},
<a name="l00785"></a>00785     {-0.795776, -0.523804, 0.303802},
<a name="l00786"></a>00786     {0.734955, 0.67804, -0.007446},
<a name="l00787"></a>00787     {0.15506, 0.986267, -0.056183},
<a name="l00788"></a>00788     {0.258026, 0.571503, -0.778931},
<a name="l00789"></a>00789     {-0.681549, -0.702087, -0.206116},
<a name="l00790"></a>00790     {-0.96286, -0.177185, 0.203613},
<a name="l00791"></a>00791     {-0.470978, -0.515106, 0.716095},
<a name="l00792"></a>00792     {-0.740326, 0.57135, 0.354095},
<a name="l00793"></a>00793     {-0.56012, -0.824982, -0.074982},
<a name="l00794"></a>00794     {-0.507874, 0.753204, 0.417969},
<a name="l00795"></a>00795     {-0.503113, 0.038147, 0.863342},
<a name="l00796"></a>00796     {0.594025, 0.673553, -0.439758},
<a name="l00797"></a>00797     {-0.119873, -0.005524, -0.992737},
<a name="l00798"></a>00798     {0.098267, -0.213776, 0.971893},
<a name="l00799"></a>00799     {-0.615631, 0.643951, 0.454163},
<a name="l00800"></a>00800     {0.896851, -0.441071, 0.032166},
<a name="l00801"></a>00801     {-0.555023, 0.750763, -0.358093},
<a name="l00802"></a>00802     {0.398773, 0.304688, 0.864929},
<a name="l00803"></a>00803     {-0.722961, 0.303589, 0.620544},
<a name="l00804"></a>00804     {-0.63559, -0.621948, -0.457306},
<a name="l00805"></a>00805     {-0.293243, 0.072327, 0.953278},
<a name="l00806"></a>00806     {-0.491638, 0.661041, -0.566772},
<a name="l00807"></a>00807     {-0.304199, -0.572083, -0.761688},
<a name="l00808"></a>00808     {0.908081, -0.398956, 0.127014},
<a name="l00809"></a>00809     {-0.523621, -0.549683, -0.650848},
<a name="l00810"></a>00810     {-0.932922, -0.19986, 0.299408},
<a name="l00811"></a>00811     {0.099426, 0.140869, 0.984985},
<a name="l00812"></a>00812     {-0.020325, -0.999756, -0.002319},
<a name="l00813"></a>00813     {0.952667, 0.280853, -0.11615},
<a name="l00814"></a>00814     {-0.971893, 0.082581, 0.220337},
<a name="l00815"></a>00815     {0.65921, 0.705292, -0.260651},
<a name="l00816"></a>00816     {0.733063, -0.175537, 0.657043},
<a name="l00817"></a>00817     {-0.555206, 0.429504, -0.712189},
<a name="l00818"></a>00818     {0.400421, -0.89859, 0.179352},
<a name="l00819"></a>00819     {0.750885, -0.19696, 0.630341},
<a name="l00820"></a>00820     {0.785675, -0.569336, 0.241821},
<a name="l00821"></a>00821     {-0.058899, -0.464111, 0.883789},
<a name="l00822"></a>00822     {0.129608, -0.94519, 0.299622},
<a name="l00823"></a>00823     {-0.357819, 0.907654, 0.219238},
<a name="l00824"></a>00824     {-0.842133, -0.439117, -0.312927},
<a name="l00825"></a>00825     {-0.313477, 0.84433, 0.434479},
<a name="l00826"></a>00826     {-0.241211, 0.053253, 0.968994},
<a name="l00827"></a>00827     {0.063873, 0.823273, 0.563965},
<a name="l00828"></a>00828     {0.476288, 0.862152, -0.172516},
<a name="l00829"></a>00829     {0.620941, -0.298126, 0.724915},
<a name="l00830"></a>00830     {0.25238, -0.749359, -0.612122},
<a name="l00831"></a>00831     {-0.577545, 0.386566, 0.718994},
<a name="l00832"></a>00832     {-0.406342, -0.737976, 0.538696},
<a name="l00833"></a>00833     {0.04718, 0.556305, 0.82959},
<a name="l00834"></a>00834     {-0.802856, 0.587463, 0.101166},
<a name="l00835"></a>00835     {-0.707733, -0.705963, 0.026428},
<a name="l00836"></a>00836     {0.374908, 0.68457, 0.625092},
<a name="l00837"></a>00837     {0.472137, 0.208405, -0.856506},
<a name="l00838"></a>00838     {-0.703064, -0.581085, -0.409821},
<a name="l00839"></a>00839     {-0.417206, -0.736328, 0.532623},
<a name="l00840"></a>00840     {-0.447876, -0.20285, -0.870728},
<a name="l00841"></a>00841     {0.086945, -0.990417, 0.107086},
<a name="l00842"></a>00842     {0.183685, 0.018341, -0.982788},
<a name="l00843"></a>00843     {0.560638, -0.428864, 0.708282},
<a name="l00844"></a>00844     {0.296722, -0.952576, -0.0672},
<a name="l00845"></a>00845     {0.135773, 0.990265, 0.030243},
<a name="l00846"></a>00846     {-0.068787, 0.654724, 0.752686},
<a name="l00847"></a>00847     {0.762604, -0.551758, 0.337585},
<a name="l00848"></a>00848     {-0.819611, -0.407684, 0.402466},
<a name="l00849"></a>00849     {-0.727844, -0.55072, -0.408539},
<a name="l00850"></a>00850     {-0.855774, -0.480011, 0.19281},
<a name="l00851"></a>00851     {0.693176, -0.079285, 0.716339},
<a name="l00852"></a>00852     {0.226013, 0.650116, -0.725433},
<a name="l00853"></a>00853     {0.246704, 0.953369, -0.173553},
<a name="l00854"></a>00854     {-0.970398, -0.239227, -0.03244},
<a name="l00855"></a>00855     {0.136383, -0.394318, 0.908752},
<a name="l00856"></a>00856     {0.813232, 0.558167, 0.164368},
<a name="l00857"></a>00857     {0.40451, 0.549042, -0.731323},
<a name="l00858"></a>00858     {-0.380249, -0.566711, 0.730865},
<a name="l00859"></a>00859     {0.022156, 0.932739, 0.359741},
<a name="l00860"></a>00860     {0.00824, 0.996552, -0.082306},
<a name="l00861"></a>00861     {0.956635, -0.065338, -0.283722},
<a name="l00862"></a>00862     {-0.743561, 0.008209, 0.668579},
<a name="l00863"></a>00863     {-0.859589, -0.509674, 0.035767},
<a name="l00864"></a>00864     {-0.852234, 0.363678, -0.375977},
<a name="l00865"></a>00865     {-0.201965, -0.970795, -0.12915},
<a name="l00866"></a>00866     {0.313477, 0.947327, 0.06546},
<a name="l00867"></a>00867     {-0.254028, -0.528259, 0.81015},
<a name="l00868"></a>00868     {0.628052, 0.601105, 0.49411},
<a name="l00869"></a>00869     {-0.494385, 0.868378, 0.037933},
<a name="l00870"></a>00870     {0.275635, -0.086426, 0.957336},
<a name="l00871"></a>00871     {-0.197937, 0.468903, -0.860748},
<a name="l00872"></a>00872     {0.895599, 0.399384, 0.195801},
<a name="l00873"></a>00873     {0.560791, 0.825012, -0.069214},
<a name="l00874"></a>00874     {0.304199, -0.849487, 0.43103},
<a name="l00875"></a>00875     {0.096375, 0.93576, 0.339111},
<a name="l00876"></a>00876     {-0.051422, 0.408966, -0.911072},
<a name="l00877"></a>00877     {0.330444, 0.942841, -0.042389},
<a name="l00878"></a>00878     {-0.452362, -0.786407, 0.420563},
<a name="l00879"></a>00879     {0.134308, -0.933472, -0.332489},
<a name="l00880"></a>00880     {0.80191, -0.566711, -0.188934},
<a name="l00881"></a>00881     {-0.987946, -0.105988, 0.112518},
<a name="l00882"></a>00882     {-0.24408, 0.892242, -0.379791},
<a name="l00883"></a>00883     {-0.920502, 0.229095, -0.316376},
<a name="l00884"></a>00884     {0.7789, 0.325958, 0.535706},
<a name="l00885"></a>00885     {-0.912872, 0.185211, -0.36377},
<a name="l00886"></a>00886     {-0.184784, 0.565369, -0.803833},
<a name="l00887"></a>00887     {-0.018463, 0.119537, 0.992615},
<a name="l00888"></a>00888     {-0.259247, -0.935608, 0.239532},
<a name="l00889"></a>00889     {-0.82373, -0.449127, -0.345947},
<a name="l00890"></a>00890     {-0.433105, 0.659515, 0.614349},
<a name="l00891"></a>00891     {-0.822754, 0.378845, -0.423676},
<a name="l00892"></a>00892     {0.687195, -0.674835, -0.26889},
<a name="l00893"></a>00893     {-0.246582, -0.800842, 0.545715},
<a name="l00894"></a>00894     {-0.729187, -0.207794, 0.651978},
<a name="l00895"></a>00895     {0.653534, -0.610443, -0.447388},
<a name="l00896"></a>00896     {0.492584, -0.023346, 0.869934},
<a name="l00897"></a>00897     {0.609039, 0.009094, -0.79306},
<a name="l00898"></a>00898     {0.962494, -0.271088, -0.00885},
<a name="l00899"></a>00899     {0.2659, -0.004913, 0.963959},
<a name="l00900"></a>00900     {0.651245, 0.553619, -0.518951},
<a name="l00901"></a>00901     {0.280548, -0.84314, 0.458618},
<a name="l00902"></a>00902     {-0.175293, -0.983215, 0.049805},
<a name="l00903"></a>00903     {0.035339, -0.979919, 0.196045},
<a name="l00904"></a>00904     {-0.982941, 0.164307, -0.082245},
<a name="l00905"></a>00905     {0.233734, -0.97226, -0.005005},
<a name="l00906"></a>00906     {-0.747253, -0.611328, 0.260437},
<a name="l00907"></a>00907     {0.645599, 0.592773, 0.481384},
<a name="l00908"></a>00908     {0.117706, -0.949524, -0.29068},
<a name="l00909"></a>00909     {-0.535004, -0.791901, -0.294312},
<a name="l00910"></a>00910     {-0.627167, -0.214447, 0.748718},
<a name="l00911"></a>00911     {-0.047974, -0.813477, -0.57959},
<a name="l00912"></a>00912     {-0.175537, 0.477264, -0.860992},
<a name="l00913"></a>00913     {0.738556, -0.414246, -0.53183},
<a name="l00914"></a>00914     {0.562561, -0.704071, 0.433289},
<a name="l00915"></a>00915     {-0.754944, 0.64801, -0.100586},
<a name="l00916"></a>00916     {0.114716, 0.044525, -0.992371},
<a name="l00917"></a>00917     {0.966003, 0.244873, -0.082764},
<a name="l00918"></a>00918     {0.33783, 0.715698, -0.611206},
<a name="l00919"></a>00919     {-0.944031, -0.326599, -0.045624},
<a name="l00920"></a>00920 };
<a name="l00921"></a>00921 
<a name="l00922"></a><a class="code" href="../../dd/d05/noise_8c.html#ad04db9baff794c5bb7bbc139384d569e">00922</a> <span class="preprocessor">#define SETUP(val, b0, b1, r0, r1)                                            \</span>
<a name="l00923"></a>00923 <span class="preprocessor">    {                                                                         \</span>
<a name="l00924"></a>00924 <span class="preprocessor">        t = val + 10000.0f;                                                   \</span>
<a name="l00925"></a>00925 <span class="preprocessor">        b0 = ((int)t) &amp; 255;                                                  \</span>
<a name="l00926"></a>00926 <span class="preprocessor">        b1 = (b0 + 1) &amp; 255;                                                  \</span>
<a name="l00927"></a>00927 <span class="preprocessor">        r0 = t - floorf(t);                                                   \</span>
<a name="l00928"></a>00928 <span class="preprocessor">        r1 = r0 - 1.0f;                                                       \</span>
<a name="l00929"></a>00929 <span class="preprocessor">    }</span>
<a name="l00930"></a>00930 <span class="preprocessor"></span>
<a name="l00931"></a>00931 
<a name="l00932"></a><a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">00932</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(<span class="keywordtype">float</span> vec[3])
<a name="l00933"></a>00933 {
<a name="l00934"></a>00934     <span class="keywordtype">int</span> bx0, bx1, by0, by1, bz0, bz1, b00, b10, b01, b11;
<a name="l00935"></a>00935     <span class="keywordtype">float</span> rx0, rx1, ry0, ry1, rz0, rz1, *q, sx, sy, sz, a, b, c, d, t, u, v;
<a name="l00936"></a>00936     <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;
<a name="l00937"></a>00937 
<a name="l00938"></a>00938 
<a name="l00939"></a>00939     <a class="code" href="../../dd/d05/noise_8c.html#ad04db9baff794c5bb7bbc139384d569e">SETUP</a>(vec[0],  bx0, bx1,  rx0, rx1);
<a name="l00940"></a>00940     <a class="code" href="../../dd/d05/noise_8c.html#ad04db9baff794c5bb7bbc139384d569e">SETUP</a>(vec[1],  by0, by1,  ry0, ry1);
<a name="l00941"></a>00941     <a class="code" href="../../dd/d05/noise_8c.html#ad04db9baff794c5bb7bbc139384d569e">SETUP</a>(vec[2],  bz0, bz1,  rz0, rz1);
<a name="l00942"></a>00942 
<a name="l00943"></a>00943     i = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ bx0 ];
<a name="l00944"></a>00944     j = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ bx1 ];
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     b00 = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ i + by0 ];
<a name="l00947"></a>00947     b10 = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ j + by0 ];
<a name="l00948"></a>00948     b01 = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ i + by1 ];
<a name="l00949"></a>00949     b11 = <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[ j + by1 ];
<a name="l00950"></a>00950 
<a name="l00951"></a>00951 <span class="preprocessor">#define VALUE_AT(rx,ry,rz) (rx * q[0] + ry * q[1] + rz * q[2])</span>
<a name="l00952"></a>00952 <span class="preprocessor"></span><span class="preprocessor">#define SURVE(t) (t * t * (3.0f - 2.0f * t))</span>
<a name="l00953"></a>00953 <span class="preprocessor"></span>
<a name="l00954"></a>00954 <span class="comment">/* lerp moved to improved perlin above */</span>
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     sx = <a class="code" href="../../dd/d05/noise_8c.html#adbb0a4509a4d943abcf2229fdd7fe225">SURVE</a>(rx0);
<a name="l00957"></a>00957     sy = <a class="code" href="../../dd/d05/noise_8c.html#adbb0a4509a4d943abcf2229fdd7fe225">SURVE</a>(ry0);
<a name="l00958"></a>00958     sz = <a class="code" href="../../dd/d05/noise_8c.html#adbb0a4509a4d943abcf2229fdd7fe225">SURVE</a>(rz0);
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b00 + bz0 ];
<a name="l00962"></a>00962     u = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx0,ry0,rz0);
<a name="l00963"></a>00963     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b10 + bz0 ];
<a name="l00964"></a>00964     v = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx1,ry0,rz0);
<a name="l00965"></a>00965     a = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sx, u, v);
<a name="l00966"></a>00966 
<a name="l00967"></a>00967     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b01 + bz0 ];
<a name="l00968"></a>00968     u = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx0,ry1,rz0);
<a name="l00969"></a>00969     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b11 + bz0 ];
<a name="l00970"></a>00970     v = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx1,ry1,rz0);
<a name="l00971"></a>00971     b = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sx, u, v);
<a name="l00972"></a>00972 
<a name="l00973"></a>00973     c = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sy, a, b);          <span class="comment">/* interpolate in y at lo x */</span>
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b00 + bz1 ];
<a name="l00976"></a>00976     u = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx0,ry0,rz1);
<a name="l00977"></a>00977     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b10 + bz1 ];
<a name="l00978"></a>00978     v = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx1,ry0,rz1);
<a name="l00979"></a>00979     a = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sx, u, v);
<a name="l00980"></a>00980 
<a name="l00981"></a>00981     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b01 + bz1 ];
<a name="l00982"></a>00982     u = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx0,ry1,rz1);
<a name="l00983"></a>00983     q = <a class="code" href="../../dd/d05/noise_8c.html#aff056b2f79b1fecd20667df6d20f81d6">g</a>[ b11 + bz1 ];
<a name="l00984"></a>00984     v = <a class="code" href="../../dd/d05/noise_8c.html#a09aeb6d092ee7a74400888f30d5dd9fe">VALUE_AT</a>(rx1,ry1,rz1);
<a name="l00985"></a>00985     b = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sx, u, v);
<a name="l00986"></a>00986 
<a name="l00987"></a>00987     d = <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sy, a, b);          <span class="comment">/* interpolate in y at hi x */</span>
<a name="l00988"></a>00988 
<a name="l00989"></a>00989     <span class="keywordflow">return</span> 1.5f * <a class="code" href="../../dd/d05/noise_8c.html#a9e745f07b0955e11db38c424a9e6e805">lerp</a>(sz, c, d); <span class="comment">/* interpolate in z */</span>
<a name="l00990"></a>00990 
<a name="l00991"></a>00991 <span class="preprocessor">#undef VALUE_AT</span>
<a name="l00992"></a>00992 <span class="preprocessor"></span><span class="preprocessor">#undef SURVE</span>
<a name="l00993"></a>00993 <span class="preprocessor"></span>}
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 <span class="preprocessor">#if 0</span>
<a name="l00996"></a>00996 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">float</span> turbulence_perlin(<span class="keywordtype">float</span> *<a class="code" href="../../d8/dae/structpoint.html">point</a>, <span class="keywordtype">float</span> lofreq, <span class="keywordtype">float</span> hifreq)
<a name="l00997"></a>00997 {
<a name="l00998"></a>00998     <span class="keywordtype">float</span> freq, t, <a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>[3];
<a name="l00999"></a>00999 
<a name="l01000"></a>01000     p[0] = point[0] + 123.456;
<a name="l01001"></a>01001     p[1] = point[1];
<a name="l01002"></a>01002     p[2] = point[2];
<a name="l01003"></a>01003 
<a name="l01004"></a>01004     t = 0;
<a name="l01005"></a>01005     <span class="keywordflow">for</span> (freq = lofreq ; freq &lt; hifreq ; freq *= 2.0) {
<a name="l01006"></a>01006         t += <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(<a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(p)) / freq;
<a name="l01007"></a>01007         p[0] *= 2.0f;
<a name="l01008"></a>01008         p[1] *= 2.0f;
<a name="l01009"></a>01009         p[2] *= 2.0f;
<a name="l01010"></a>01010     }
<a name="l01011"></a>01011     <span class="keywordflow">return</span> t - 0.3; <span class="comment">/* readjust to make mean value = 0.0 */</span>
<a name="l01012"></a>01012 }
<a name="l01013"></a>01013 <span class="preprocessor">#endif</span>
<a name="l01014"></a>01014 <span class="preprocessor"></span>
<a name="l01015"></a>01015 <span class="comment">/* for use with BLI_gNoise/gTurbulence, returns signed noise */</span>
<a name="l01016"></a><a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">01016</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01017"></a>01017 {
<a name="l01018"></a>01018     <span class="keywordtype">float</span> v[3];
<a name="l01019"></a>01019 
<a name="l01020"></a>01020     v[0] = x;
<a name="l01021"></a>01021     v[1] = y;
<a name="l01022"></a>01022     v[2] = z;
<a name="l01023"></a>01023     <span class="keywordflow">return</span> <a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(v);
<a name="l01024"></a>01024 }
<a name="l01025"></a>01025 
<a name="l01026"></a>01026 <span class="comment">/* for use with BLI_gNoise/gTurbulence, returns unsigned noise */</span>
<a name="l01027"></a><a class="code" href="../../dd/d05/noise_8c.html#a5472cfc50920c92c368150147f51ed04">01027</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a5472cfc50920c92c368150147f51ed04">orgPerlinNoiseU</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01028"></a>01028 {
<a name="l01029"></a>01029     <span class="keywordtype">float</span> v[3];
<a name="l01030"></a>01030 
<a name="l01031"></a>01031     v[0] = x;
<a name="l01032"></a>01032     v[1] = y;
<a name="l01033"></a>01033     v[2] = z;
<a name="l01034"></a>01034     <span class="keywordflow">return</span> (0.5f+0.5f*<a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(v));
<a name="l01035"></a>01035 }
<a name="l01036"></a>01036 
<a name="l01037"></a>01037 <span class="comment">/* *************** CALL AS: *************** */</span>
<a name="l01038"></a>01038 
<a name="l01039"></a><a class="code" href="../../dd/d05/noise_8c.html#a3bc16f1db5c0c35899783c9b67818c80">01039</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a3bc16f1db5c0c35899783c9b67818c80">BLI_hnoisep</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01040"></a>01040 {
<a name="l01041"></a>01041     <span class="keywordtype">float</span> vec[3];
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     vec[0]= x/noisesize;
<a name="l01044"></a>01044     vec[1]= y/noisesize;
<a name="l01045"></a>01045     vec[2]= z/noisesize;
<a name="l01046"></a>01046 
<a name="l01047"></a>01047     <span class="keywordflow">return</span> <a class="code" href="../../dd/d05/noise_8c.html#a7f42831eca6305d25bf56d5a500e1d38">noise3_perlin</a>(vec);
<a name="l01048"></a>01048 }
<a name="l01049"></a>01049 
<a name="l01050"></a>01050 <span class="preprocessor">#if 0</span>
<a name="l01051"></a>01051 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">float</span> turbulencep(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">int</span> nr)
<a name="l01052"></a>01052 {
<a name="l01053"></a>01053     <span class="keywordtype">float</span> vec[3];
<a name="l01054"></a>01054 
<a name="l01055"></a>01055     vec[0]= x/noisesize;
<a name="l01056"></a>01056     vec[1]= y/noisesize;
<a name="l01057"></a>01057     vec[2]= z/noisesize;
<a name="l01058"></a>01058     nr++;
<a name="l01059"></a>01059     <span class="keywordflow">return</span> turbulence_perlin(vec, 1.0, (<span class="keywordtype">float</span>)(1&lt;&lt;nr));
<a name="l01060"></a>01060 }
<a name="l01061"></a>01061 <span class="preprocessor">#endif</span>
<a name="l01062"></a>01062 <span class="preprocessor"></span>
<a name="l01063"></a>01063 <span class="comment">/******************/</span>
<a name="l01064"></a>01064 <span class="comment">/* VORONOI/WORLEY */</span>
<a name="l01065"></a>01065 <span class="comment">/******************/</span>
<a name="l01066"></a>01066 
<a name="l01067"></a>01067 <span class="comment">/* distance metrics for voronoi, e parameter only used in Minkovsky */</span>
<a name="l01068"></a>01068 <span class="comment">/* Camberra omitted, didn&#39;t seem useful */</span>
<a name="l01069"></a>01069 
<a name="l01070"></a>01070 <span class="comment">/* distance squared */</span>
<a name="l01071"></a><a class="code" href="../../dd/d05/noise_8c.html#a8dde92944924c431d9c50e4c776585c6">01071</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a8dde92944924c431d9c50e4c776585c6">dist_Squared</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e) { (void)e; <span class="keywordflow">return</span> (x*x + y*y + z*z); }
<a name="l01072"></a>01072 <span class="comment">/* real distance */</span>
<a name="l01073"></a><a class="code" href="../../dd/d05/noise_8c.html#a1fa83dd9b4fa531f7c097c909baf36f6">01073</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a1fa83dd9b4fa531f7c097c909baf36f6">dist_Real</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e) { (void)e; <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(x*x + y*y + z*z); }
<a name="l01074"></a>01074 <span class="comment">/* manhattan/taxicab/cityblock distance */</span>
<a name="l01075"></a><a class="code" href="../../dd/d05/noise_8c.html#abbb852d94aa64f058653ca0d20d7617a">01075</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#abbb852d94aa64f058653ca0d20d7617a">dist_Manhattan</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e) { (void)e; <span class="keywordflow">return</span> (<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(x) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(y) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(z)); }
<a name="l01076"></a>01076 <span class="comment">/* Chebychev */</span>
<a name="l01077"></a><a class="code" href="../../dd/d05/noise_8c.html#adbdd8d2af0f428fb1f1da377d83ad90a">01077</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#adbdd8d2af0f428fb1f1da377d83ad90a">dist_Chebychev</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e)
<a name="l01078"></a>01078 {
<a name="l01079"></a>01079     <span class="keywordtype">float</span> t;
<a name="l01080"></a>01080     (void)e;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082     x = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(x);
<a name="l01083"></a>01083     y = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(y);
<a name="l01084"></a>01084     z = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(z);
<a name="l01085"></a>01085     t = (x&gt;y)?x:y;
<a name="l01086"></a>01086     <span class="keywordflow">return</span> ((z&gt;t)?z:t);
<a name="l01087"></a>01087 }
<a name="l01088"></a>01088 
<a name="l01089"></a>01089 <span class="comment">/* minkovsky preset exponent 0.5 */</span>
<a name="l01090"></a><a class="code" href="../../dd/d05/noise_8c.html#a9ce42dca754bb279d0e5a1ae6ad52737">01090</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a9ce42dca754bb279d0e5a1ae6ad52737">dist_MinkovskyH</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e)
<a name="l01091"></a>01091 {
<a name="l01092"></a>01092     <span class="keywordtype">float</span> d = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(x)) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(y)) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(z));
<a name="l01093"></a>01093     (void)e;
<a name="l01094"></a>01094     <span class="keywordflow">return</span> (d*d);
<a name="l01095"></a>01095 }
<a name="l01096"></a>01096 
<a name="l01097"></a>01097 <span class="comment">/* minkovsky preset exponent 4 */</span>
<a name="l01098"></a><a class="code" href="../../dd/d05/noise_8c.html#a13b6b80f9a2e3d0841b434e568477dbc">01098</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a13b6b80f9a2e3d0841b434e568477dbc">dist_Minkovsky4</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e)
<a name="l01099"></a>01099 {
<a name="l01100"></a>01100     (void)e;
<a name="l01101"></a>01101     x *= x;
<a name="l01102"></a>01102     y *= y;
<a name="l01103"></a>01103     z *= z;
<a name="l01104"></a>01104     <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#a33f9e82220f9ff9453a6557bd04bd8c5">sqrtf</a>(x*x + y*y + z*z));
<a name="l01105"></a>01105 }
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 <span class="comment">/* Minkovsky, general case, slow, maybe too slow to be useful */</span>
<a name="l01108"></a><a class="code" href="../../dd/d05/noise_8c.html#a2b708f3c31038d2024b871ea247d2ccd">01108</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a2b708f3c31038d2024b871ea247d2ccd">dist_Minkovsky</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> e)
<a name="l01109"></a>01109 {
<a name="l01110"></a>01110     <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(x), e) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(y), e) + <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(<a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(z), e), 1.0f/e);
<a name="l01111"></a>01111 }
<a name="l01112"></a>01112 
<a name="l01113"></a>01113 
<a name="l01114"></a>01114 <span class="comment">/* Not &#39;pure&#39; Worley, but the results are virtually the same.</span>
<a name="l01115"></a>01115 <span class="comment"> * Returns distances in da and point coords in pa */</span>
<a name="l01116"></a><a class="code" href="../../dd/d05/noise_8c.html#ae788ebeeeb53f295276feb95d1e3ee4d">01116</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span>* da, <span class="keywordtype">float</span>* pa, <span class="keywordtype">float</span> me, <span class="keywordtype">int</span> dtype)
<a name="l01117"></a>01117 {
<a name="l01118"></a>01118     <span class="keywordtype">int</span> xx, yy, zz, xi, yi, zi;
<a name="l01119"></a>01119     <span class="keywordtype">float</span> xd, yd, zd, d, *<a class="code" href="../../dd/d05/noise_8c.html#aa5b68af6f39f968261f8942af260e938">p</a>;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121     float (*distfunc)(float, float, float, float);
<a name="l01122"></a>01122     <span class="keywordflow">switch</span> (dtype) {
<a name="l01123"></a>01123         <span class="keywordflow">case</span> 1:
<a name="l01124"></a>01124             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#a8dde92944924c431d9c50e4c776585c6">dist_Squared</a>;
<a name="l01125"></a>01125             <span class="keywordflow">break</span>;
<a name="l01126"></a>01126         <span class="keywordflow">case</span> 2:
<a name="l01127"></a>01127             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#abbb852d94aa64f058653ca0d20d7617a">dist_Manhattan</a>;
<a name="l01128"></a>01128             <span class="keywordflow">break</span>;
<a name="l01129"></a>01129         <span class="keywordflow">case</span> 3:
<a name="l01130"></a>01130             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#adbdd8d2af0f428fb1f1da377d83ad90a">dist_Chebychev</a>;
<a name="l01131"></a>01131             <span class="keywordflow">break</span>;
<a name="l01132"></a>01132         <span class="keywordflow">case</span> 4:
<a name="l01133"></a>01133             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#a9ce42dca754bb279d0e5a1ae6ad52737">dist_MinkovskyH</a>;
<a name="l01134"></a>01134             <span class="keywordflow">break</span>;
<a name="l01135"></a>01135         <span class="keywordflow">case</span> 5:
<a name="l01136"></a>01136             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#a13b6b80f9a2e3d0841b434e568477dbc">dist_Minkovsky4</a>;
<a name="l01137"></a>01137             <span class="keywordflow">break</span>;
<a name="l01138"></a>01138         <span class="keywordflow">case</span> 6:
<a name="l01139"></a>01139             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#a2b708f3c31038d2024b871ea247d2ccd">dist_Minkovsky</a>;
<a name="l01140"></a>01140             <span class="keywordflow">break</span>;
<a name="l01141"></a>01141         <span class="keywordflow">case</span> 0:
<a name="l01142"></a>01142         <span class="keywordflow">default</span>:
<a name="l01143"></a>01143             distfunc = <a class="code" href="../../dd/d05/noise_8c.html#a1fa83dd9b4fa531f7c097c909baf36f6">dist_Real</a>;
<a name="l01144"></a>01144     }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146     xi = (int)(floor(x));
<a name="l01147"></a>01147     yi = (int)(floor(y));
<a name="l01148"></a>01148     zi = (int)(floor(z));
<a name="l01149"></a>01149     da[0] = da[1] = da[2] = da[3] = 1e10f;
<a name="l01150"></a>01150     <span class="keywordflow">for</span> (xx=xi-1;xx&lt;=xi+1;xx++) {
<a name="l01151"></a>01151         <span class="keywordflow">for</span> (yy=yi-1;yy&lt;=yi+1;yy++) {
<a name="l01152"></a>01152             <span class="keywordflow">for</span> (zz=zi-1;zz&lt;=zi+1;zz++) {
<a name="l01153"></a>01153                 p = <a class="code" href="../../dd/d05/noise_8c.html#afe22ababba5f7609a27cfd3116f3a3f7">HASHPNT</a>(xx, yy, zz);
<a name="l01154"></a>01154                 xd = x - (p[0] + xx);
<a name="l01155"></a>01155                 yd = y - (p[1] + yy);
<a name="l01156"></a>01156                 zd = z - (p[2] + zz);
<a name="l01157"></a>01157                 d = distfunc(xd, yd, zd, me);
<a name="l01158"></a>01158                 <span class="keywordflow">if</span> (d&lt;da[0]) {
<a name="l01159"></a>01159                     da[3]=da[2];  da[2]=da[1];  da[1]=da[0];  da[0]=d;
<a name="l01160"></a>01160                     pa[9]=pa[6];  pa[10]=pa[7];  pa[11]=pa[8];
<a name="l01161"></a>01161                     pa[6]=pa[3];  pa[7]=pa[4];  pa[8]=pa[5];
<a name="l01162"></a>01162                     pa[3]=pa[0];  pa[4]=pa[1];  pa[5]=pa[2];
<a name="l01163"></a>01163                     pa[0]=p[0]+xx;  pa[1]=p[1]+yy;  pa[2]=p[2]+zz;
<a name="l01164"></a>01164                 }
<a name="l01165"></a>01165                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d&lt;da[1]) {
<a name="l01166"></a>01166                     da[3]=da[2];  da[2]=da[1];  da[1]=d;
<a name="l01167"></a>01167                     pa[9]=pa[6];  pa[10]=pa[7];  pa[11]=pa[8];
<a name="l01168"></a>01168                     pa[6]=pa[3];  pa[7]=pa[4];  pa[8]=pa[5];
<a name="l01169"></a>01169                     pa[3]=p[0]+xx;  pa[4]=p[1]+yy;  pa[5]=p[2]+zz;
<a name="l01170"></a>01170                 }
<a name="l01171"></a>01171                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d&lt;da[2]) {
<a name="l01172"></a>01172                     da[3]=da[2];  da[2]=d;
<a name="l01173"></a>01173                     pa[9]=pa[6];  pa[10]=pa[7];  pa[11]=pa[8];
<a name="l01174"></a>01174                     pa[6]=p[0]+xx;  pa[7]=p[1]+yy;  pa[8]=p[2]+zz;
<a name="l01175"></a>01175                 }
<a name="l01176"></a>01176                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d&lt;da[3]) {
<a name="l01177"></a>01177                     da[3]=d;
<a name="l01178"></a>01178                     pa[9]=p[0]+xx;  pa[10]=p[1]+yy;  pa[11]=p[2]+zz;
<a name="l01179"></a>01179                 }
<a name="l01180"></a>01180             }
<a name="l01181"></a>01181         }
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183 }
<a name="l01184"></a>01184 
<a name="l01185"></a>01185 <span class="comment">/* returns different feature points for use in BLI_gNoise() */</span>
<a name="l01186"></a><a class="code" href="../../dd/d05/noise_8c.html#a84a244f139ed87e19d6c93abd926a90d">01186</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a84a244f139ed87e19d6c93abd926a90d">voronoi_F1</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01187"></a>01187 {
<a name="l01188"></a>01188     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01189"></a>01189     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01190"></a>01190     <span class="keywordflow">return</span> da[0];
<a name="l01191"></a>01191 }
<a name="l01192"></a>01192 
<a name="l01193"></a><a class="code" href="../../dd/d05/noise_8c.html#a9e5b38ec8870739de0c81a2d1123fd5b">01193</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a9e5b38ec8870739de0c81a2d1123fd5b">voronoi_F2</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01194"></a>01194 {
<a name="l01195"></a>01195     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01196"></a>01196     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01197"></a>01197     <span class="keywordflow">return</span> da[1];
<a name="l01198"></a>01198 }
<a name="l01199"></a>01199 
<a name="l01200"></a><a class="code" href="../../dd/d05/noise_8c.html#afa6c2c7c67f196d09ea687950c004693">01200</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#afa6c2c7c67f196d09ea687950c004693">voronoi_F3</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01201"></a>01201 {
<a name="l01202"></a>01202     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01203"></a>01203     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01204"></a>01204     <span class="keywordflow">return</span> da[2];
<a name="l01205"></a>01205 }
<a name="l01206"></a>01206 
<a name="l01207"></a><a class="code" href="../../dd/d05/noise_8c.html#a00610ac13ba42f6dc208fc89b009cba3">01207</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a00610ac13ba42f6dc208fc89b009cba3">voronoi_F4</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01208"></a>01208 {
<a name="l01209"></a>01209     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01210"></a>01210     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01211"></a>01211     <span class="keywordflow">return</span> da[3];
<a name="l01212"></a>01212 }
<a name="l01213"></a>01213 
<a name="l01214"></a><a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">01214</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">voronoi_F1F2</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01215"></a>01215 {
<a name="l01216"></a>01216     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01217"></a>01217     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01218"></a>01218     <span class="keywordflow">return</span> (da[1]-da[0]);
<a name="l01219"></a>01219 }
<a name="l01220"></a>01220 
<a name="l01221"></a>01221 <span class="comment">/* Crackle type pattern, just a scale/clamp of F2-F1 */</span>
<a name="l01222"></a><a class="code" href="../../dd/d05/noise_8c.html#a6ac4c3abb59ff73ccdbb14b5dbd5b0f1">01222</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a6ac4c3abb59ff73ccdbb14b5dbd5b0f1">voronoi_Cr</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01223"></a>01223 {
<a name="l01224"></a>01224     <span class="keywordtype">float</span> t = 10*<a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">voronoi_F1F2</a>(x, y, z);
<a name="l01225"></a>01225     <span class="keywordflow">if</span> (t&gt;1.f) <span class="keywordflow">return</span> 1.f;
<a name="l01226"></a>01226     <span class="keywordflow">return</span> t;
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 
<a name="l01230"></a>01230 <span class="comment">/* Signed version of all 6 of the above, just 2x-1, not really correct though (range is potentially (0, sqrt(6)).</span>
<a name="l01231"></a>01231 <span class="comment"> * Used in the musgrave functions */</span>
<a name="l01232"></a><a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">01232</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01233"></a>01233 {
<a name="l01234"></a>01234     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01235"></a>01235     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01236"></a>01236     <span class="keywordflow">return</span> (2.0f*da[0]-1.0f);
<a name="l01237"></a>01237 }
<a name="l01238"></a>01238 
<a name="l01239"></a><a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">01239</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01240"></a>01240 {
<a name="l01241"></a>01241     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01242"></a>01242     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01243"></a>01243     <span class="keywordflow">return</span> (2.0f*da[1]-1.0f);
<a name="l01244"></a>01244 }
<a name="l01245"></a>01245 
<a name="l01246"></a><a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">01246</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01247"></a>01247 {
<a name="l01248"></a>01248     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01249"></a>01249     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01250"></a>01250     <span class="keywordflow">return</span> (2.0f*da[2]-1.0f);
<a name="l01251"></a>01251 }
<a name="l01252"></a>01252 
<a name="l01253"></a><a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">01253</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01254"></a>01254 {
<a name="l01255"></a>01255     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01256"></a>01256     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01257"></a>01257     <span class="keywordflow">return</span> (2.0f*da[3]-1.0f);
<a name="l01258"></a>01258 }
<a name="l01259"></a>01259 
<a name="l01260"></a><a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">01260</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01261"></a>01261 {
<a name="l01262"></a>01262     <span class="keywordtype">float</span> da[4], pa[12];
<a name="l01263"></a>01263     <a class="code" href="../../d1/d65/BLI__noise_8h.html#ae788ebeeeb53f295276feb95d1e3ee4d">voronoi</a>(x, y, z, da, pa, 1, 0);
<a name="l01264"></a>01264     <span class="keywordflow">return</span> (2.0f*(da[1]-da[0])-1.0f);
<a name="l01265"></a>01265 }
<a name="l01266"></a>01266 
<a name="l01267"></a>01267 <span class="comment">/* Crackle type pattern, just a scale/clamp of F2-F1 */</span>
<a name="l01268"></a><a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">01268</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01269"></a>01269 {
<a name="l01270"></a>01270     <span class="keywordtype">float</span> t = 10*<a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">voronoi_F1F2</a>(x, y, z);
<a name="l01271"></a>01271     <span class="keywordflow">if</span> (t&gt;1.f) <span class="keywordflow">return</span> 1.f;
<a name="l01272"></a>01272     <span class="keywordflow">return</span> (2.0f*t-1.0f);
<a name="l01273"></a>01273 }
<a name="l01274"></a>01274 
<a name="l01275"></a>01275 
<a name="l01276"></a>01276 <span class="comment">/***************/</span>
<a name="l01277"></a>01277 <span class="comment">/* voronoi end */</span>
<a name="l01278"></a>01278 <span class="comment">/***************/</span>
<a name="l01279"></a>01279 
<a name="l01280"></a>01280 <span class="comment">/*************/</span>
<a name="l01281"></a>01281 <span class="comment">/* CELLNOISE */</span>
<a name="l01282"></a>01282 <span class="comment">/*************/</span>
<a name="l01283"></a>01283 
<a name="l01284"></a>01284 <span class="comment">/* returns unsigned cellnoise */</span>
<a name="l01285"></a><a class="code" href="../../dd/d05/noise_8c.html#abe0277f8210dd29148583c3368ed9aab">01285</a> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../dd/d05/noise_8c.html#abe0277f8210dd29148583c3368ed9aab">cellNoiseU</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01286"></a>01286 {
<a name="l01287"></a>01287     <span class="keywordtype">int</span> xi = (int)(floor(x));
<a name="l01288"></a>01288     <span class="keywordtype">int</span> yi = (int)(floor(y));
<a name="l01289"></a>01289     <span class="keywordtype">int</span> zi = (int)(floor(z));
<a name="l01290"></a>01290     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = xi + yi*1301 + zi*314159;
<a name="l01291"></a>01291     n ^= (n&lt;&lt;13);
<a name="l01292"></a>01292     <span class="keywordflow">return</span> ((<span class="keywordtype">float</span>)(n*(n*n*15731 + 789221) + 1376312589) / 4294967296.0f);
<a name="l01293"></a>01293 }
<a name="l01294"></a>01294 
<a name="l01295"></a>01295 <span class="comment">/* idem, signed */</span>
<a name="l01296"></a><a class="code" href="../../dd/d05/noise_8c.html#a9157b965aaff51f8a985d044d962522a">01296</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z)
<a name="l01297"></a>01297 {
<a name="l01298"></a>01298     <span class="keywordflow">return</span> (2.0f*<a class="code" href="../../dd/d05/noise_8c.html#abe0277f8210dd29148583c3368ed9aab">cellNoiseU</a>(x, y, z)-1.0f);
<a name="l01299"></a>01299 }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301 <span class="comment">/* returns a vector/point/color in ca, using point hasharray directly */</span>
<a name="l01302"></a><a class="code" href="../../dd/d05/noise_8c.html#a5566ceeb69371a67ca4bbc9c24a8a7f0">01302</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a5566ceeb69371a67ca4bbc9c24a8a7f0">cellNoiseV</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> *ca)
<a name="l01303"></a>01303 {
<a name="l01304"></a>01304     <span class="keywordtype">int</span> xi = (int)(floor(x));
<a name="l01305"></a>01305     <span class="keywordtype">int</span> yi = (int)(floor(y));
<a name="l01306"></a>01306     <span class="keywordtype">int</span> zi = (int)(floor(z));
<a name="l01307"></a>01307     <span class="keywordtype">float</span> *p = <a class="code" href="../../dd/d05/noise_8c.html#afe22ababba5f7609a27cfd3116f3a3f7">HASHPNT</a>(xi, yi, zi);
<a name="l01308"></a>01308     ca[0] = p[0];
<a name="l01309"></a>01309     ca[1] = p[1];
<a name="l01310"></a>01310     ca[2] = p[2];
<a name="l01311"></a>01311 }
<a name="l01312"></a>01312 
<a name="l01313"></a>01313 
<a name="l01314"></a>01314 <span class="comment">/*****************/</span>
<a name="l01315"></a>01315 <span class="comment">/* end cellnoise */</span>
<a name="l01316"></a>01316 <span class="comment">/*****************/</span>
<a name="l01317"></a>01317 
<a name="l01318"></a>01318 <span class="comment">/* newnoise: generic noise function for use with different noisebases */</span>
<a name="l01319"></a><a class="code" href="../../dd/d05/noise_8c.html#a1c119d9034dda320335cc260f49d8f43">01319</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a1c119d9034dda320335cc260f49d8f43">BLI_gNoise</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">int</span> hard, <span class="keywordtype">int</span> noisebasis)
<a name="l01320"></a>01320 {
<a name="l01321"></a>01321     float (*noisefunc)(float, float, float);
<a name="l01322"></a>01322 
<a name="l01323"></a>01323     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01324"></a>01324         <span class="keywordflow">case</span> 1:
<a name="l01325"></a>01325             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a5472cfc50920c92c368150147f51ed04">orgPerlinNoiseU</a>;
<a name="l01326"></a>01326             <span class="keywordflow">break</span>;
<a name="l01327"></a>01327         <span class="keywordflow">case</span> 2:
<a name="l01328"></a>01328             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a2f8d66df0bc17756b66e8ab3791768ee">newPerlinU</a>;
<a name="l01329"></a>01329             <span class="keywordflow">break</span>;
<a name="l01330"></a>01330         <span class="keywordflow">case</span> 3:
<a name="l01331"></a>01331             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a84a244f139ed87e19d6c93abd926a90d">voronoi_F1</a>;
<a name="l01332"></a>01332             <span class="keywordflow">break</span>;
<a name="l01333"></a>01333         <span class="keywordflow">case</span> 4:
<a name="l01334"></a>01334             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a9e5b38ec8870739de0c81a2d1123fd5b">voronoi_F2</a>;
<a name="l01335"></a>01335             <span class="keywordflow">break</span>;
<a name="l01336"></a>01336         <span class="keywordflow">case</span> 5:
<a name="l01337"></a>01337             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#afa6c2c7c67f196d09ea687950c004693">voronoi_F3</a>;
<a name="l01338"></a>01338             <span class="keywordflow">break</span>;
<a name="l01339"></a>01339         <span class="keywordflow">case</span> 6:
<a name="l01340"></a>01340             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a00610ac13ba42f6dc208fc89b009cba3">voronoi_F4</a>;
<a name="l01341"></a>01341             <span class="keywordflow">break</span>;
<a name="l01342"></a>01342         <span class="keywordflow">case</span> 7:
<a name="l01343"></a>01343             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">voronoi_F1F2</a>;
<a name="l01344"></a>01344             <span class="keywordflow">break</span>;
<a name="l01345"></a>01345         <span class="keywordflow">case</span> 8:
<a name="l01346"></a>01346             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a6ac4c3abb59ff73ccdbb14b5dbd5b0f1">voronoi_Cr</a>;
<a name="l01347"></a>01347             <span class="keywordflow">break</span>;
<a name="l01348"></a>01348         <span class="keywordflow">case</span> 14:
<a name="l01349"></a>01349             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#abe0277f8210dd29148583c3368ed9aab">cellNoiseU</a>;
<a name="l01350"></a>01350             <span class="keywordflow">break</span>;
<a name="l01351"></a>01351         <span class="keywordflow">case</span> 0:
<a name="l01352"></a>01352         <span class="keywordflow">default</span>: {
<a name="l01353"></a>01353             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">orgBlenderNoise</a>;
<a name="l01354"></a>01354             <span class="comment">/* add one to make return value same as BLI_hnoise */</span>
<a name="l01355"></a>01355             x += 1;
<a name="l01356"></a>01356             y += 1;
<a name="l01357"></a>01357             z += 1;
<a name="l01358"></a>01358         }
<a name="l01359"></a>01359     }
<a name="l01360"></a>01360 
<a name="l01361"></a>01361     <span class="keywordflow">if</span> (noisesize!=0.0f) {
<a name="l01362"></a>01362         noisesize = 1.0f/noisesize;
<a name="l01363"></a>01363         x *= noisesize;
<a name="l01364"></a>01364         y *= noisesize;
<a name="l01365"></a>01365         z *= noisesize;
<a name="l01366"></a>01366     }
<a name="l01367"></a>01367     
<a name="l01368"></a>01368     <span class="keywordflow">if</span> (hard) <span class="keywordflow">return</span> <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(2.0f*noisefunc(x, y, z)-1.0f);
<a name="l01369"></a>01369     <span class="keywordflow">return</span> noisefunc(x, y, z);
<a name="l01370"></a>01370 }
<a name="l01371"></a>01371 
<a name="l01372"></a>01372 <span class="comment">/* newnoise: generic turbulence function for use with different noisebasis */</span>
<a name="l01373"></a><a class="code" href="../../dd/d05/noise_8c.html#acb26a2b54ce9797d6038163af64e362d">01373</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#acb26a2b54ce9797d6038163af64e362d">BLI_gTurbulence</a>(<span class="keywordtype">float</span> noisesize, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">int</span> oct, <span class="keywordtype">int</span> hard, <span class="keywordtype">int</span> noisebasis)
<a name="l01374"></a>01374 {
<a name="l01375"></a>01375     float (*noisefunc)(float, float, float);
<a name="l01376"></a>01376     <span class="keywordtype">float</span> <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a746bfa686f2dce5b1cff46bba26ac803">sum</a>, t, amp=1, fscale=1;
<a name="l01377"></a>01377     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01378"></a>01378     
<a name="l01379"></a>01379     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01380"></a>01380         <span class="keywordflow">case</span> 1:
<a name="l01381"></a>01381             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a5472cfc50920c92c368150147f51ed04">orgPerlinNoiseU</a>;
<a name="l01382"></a>01382             <span class="keywordflow">break</span>;
<a name="l01383"></a>01383         <span class="keywordflow">case</span> 2:
<a name="l01384"></a>01384             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a2f8d66df0bc17756b66e8ab3791768ee">newPerlinU</a>;
<a name="l01385"></a>01385             <span class="keywordflow">break</span>;
<a name="l01386"></a>01386         <span class="keywordflow">case</span> 3:
<a name="l01387"></a>01387             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a84a244f139ed87e19d6c93abd926a90d">voronoi_F1</a>;
<a name="l01388"></a>01388             <span class="keywordflow">break</span>;
<a name="l01389"></a>01389         <span class="keywordflow">case</span> 4:
<a name="l01390"></a>01390             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a9e5b38ec8870739de0c81a2d1123fd5b">voronoi_F2</a>;
<a name="l01391"></a>01391             <span class="keywordflow">break</span>;
<a name="l01392"></a>01392         <span class="keywordflow">case</span> 5:
<a name="l01393"></a>01393             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#afa6c2c7c67f196d09ea687950c004693">voronoi_F3</a>;
<a name="l01394"></a>01394             <span class="keywordflow">break</span>;
<a name="l01395"></a>01395         <span class="keywordflow">case</span> 6:
<a name="l01396"></a>01396             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a00610ac13ba42f6dc208fc89b009cba3">voronoi_F4</a>;
<a name="l01397"></a>01397             <span class="keywordflow">break</span>;
<a name="l01398"></a>01398         <span class="keywordflow">case</span> 7:
<a name="l01399"></a>01399             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a5b7b415c3dd019e98b963831d7426d6a">voronoi_F1F2</a>;
<a name="l01400"></a>01400             <span class="keywordflow">break</span>;
<a name="l01401"></a>01401         <span class="keywordflow">case</span> 8:
<a name="l01402"></a>01402             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a6ac4c3abb59ff73ccdbb14b5dbd5b0f1">voronoi_Cr</a>;
<a name="l01403"></a>01403             <span class="keywordflow">break</span>;
<a name="l01404"></a>01404         <span class="keywordflow">case</span> 14:
<a name="l01405"></a>01405             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#abe0277f8210dd29148583c3368ed9aab">cellNoiseU</a>;
<a name="l01406"></a>01406             <span class="keywordflow">break</span>;
<a name="l01407"></a>01407         <span class="keywordflow">case</span> 0:
<a name="l01408"></a>01408         <span class="keywordflow">default</span>:
<a name="l01409"></a>01409             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a52a63137ecff9211d01bf362c82a7576">orgBlenderNoise</a>;
<a name="l01410"></a>01410             x += 1;
<a name="l01411"></a>01411             y += 1;
<a name="l01412"></a>01412             z += 1;
<a name="l01413"></a>01413     }
<a name="l01414"></a>01414 
<a name="l01415"></a>01415     <span class="keywordflow">if</span> (noisesize!=0.0f) {
<a name="l01416"></a>01416         noisesize = 1.0f/noisesize;
<a name="l01417"></a>01417         x *= noisesize;
<a name="l01418"></a>01418         y *= noisesize;
<a name="l01419"></a>01419         z *= noisesize;
<a name="l01420"></a>01420     }
<a name="l01421"></a>01421 
<a name="l01422"></a>01422     sum = 0;
<a name="l01423"></a>01423     <span class="keywordflow">for</span> (i=0;i&lt;=oct;i++, amp*=0.5f, fscale*=2.0f) {
<a name="l01424"></a>01424         t = noisefunc(fscale*x, fscale*y, fscale*z);
<a name="l01425"></a>01425         <span class="keywordflow">if</span> (hard) t = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(2.0f*t-1.0f);
<a name="l01426"></a>01426         sum += t * amp;
<a name="l01427"></a>01427     }
<a name="l01428"></a>01428     
<a name="l01429"></a>01429     sum *= ((float)(1&lt;&lt;oct)/(float)((1&lt;&lt;(oct+1))-1));
<a name="l01430"></a>01430 
<a name="l01431"></a>01431     <span class="keywordflow">return</span> <a class="code" href="../../de/da0/btSoftBodyHelpers_8cpp.html#a746bfa686f2dce5b1cff46bba26ac803">sum</a>;
<a name="l01432"></a>01432 
<a name="l01433"></a>01433 }
<a name="l01434"></a>01434 
<a name="l01435"></a>01435 
<a name="l01436"></a>01436 <span class="comment">/*</span>
<a name="l01437"></a>01437 <span class="comment"> * The following code is based on Ken Musgrave&#39;s explanations and sample</span>
<a name="l01438"></a>01438 <span class="comment"> * source code in the book &quot;Texturing and Modelling: A procedural approach&quot;</span>
<a name="l01439"></a>01439 <span class="comment"> */</span>
<a name="l01440"></a>01440 
<a name="l01441"></a>01441 <span class="comment">/*</span>
<a name="l01442"></a>01442 <span class="comment"> * Procedural fBm evaluated at &quot;point&quot;; returns value stored in &quot;value&quot;.</span>
<a name="l01443"></a>01443 <span class="comment"> *</span>
<a name="l01444"></a>01444 <span class="comment"> * Parameters:</span>
<a name="l01445"></a>01445 <span class="comment"> *    ``H&#39;&#39;  is the fractal increment parameter</span>
<a name="l01446"></a>01446 <span class="comment"> *    ``lacunarity&#39;&#39;  is the gap between successive frequencies</span>
<a name="l01447"></a>01447 <span class="comment"> *    ``octaves&#39;&#39;  is the number of frequencies in the fBm</span>
<a name="l01448"></a>01448 <span class="comment"> */</span>
<a name="l01449"></a><a class="code" href="../../dd/d05/noise_8c.html#a185f1d01adec0613ae578226d22b3de1">01449</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a185f1d01adec0613ae578226d22b3de1">mg_fBm</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> H, <span class="keywordtype">float</span> lacunarity, <span class="keywordtype">float</span> octaves, <span class="keywordtype">int</span> noisebasis)
<a name="l01450"></a>01450 {
<a name="l01451"></a>01451     <span class="keywordtype">float</span>   rmd, value=0.0, pwr=1.0, pwHL=<a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(lacunarity, -H);
<a name="l01452"></a>01452     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01453"></a>01453 
<a name="l01454"></a>01454     float (*noisefunc)(float, float, float);
<a name="l01455"></a>01455     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01456"></a>01456         <span class="keywordflow">case</span> 1:
<a name="l01457"></a>01457             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01458"></a>01458             <span class="keywordflow">break</span>;
<a name="l01459"></a>01459         <span class="keywordflow">case</span> 2:
<a name="l01460"></a>01460             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01461"></a>01461             <span class="keywordflow">break</span>;
<a name="l01462"></a>01462         <span class="keywordflow">case</span> 3:
<a name="l01463"></a>01463             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01464"></a>01464             <span class="keywordflow">break</span>;
<a name="l01465"></a>01465         <span class="keywordflow">case</span> 4:
<a name="l01466"></a>01466             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01467"></a>01467             <span class="keywordflow">break</span>;
<a name="l01468"></a>01468         <span class="keywordflow">case</span> 5:
<a name="l01469"></a>01469             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01470"></a>01470             <span class="keywordflow">break</span>;
<a name="l01471"></a>01471         <span class="keywordflow">case</span> 6:
<a name="l01472"></a>01472             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01473"></a>01473             <span class="keywordflow">break</span>;
<a name="l01474"></a>01474         <span class="keywordflow">case</span> 7:
<a name="l01475"></a>01475             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01476"></a>01476             <span class="keywordflow">break</span>;
<a name="l01477"></a>01477         <span class="keywordflow">case</span> 8:
<a name="l01478"></a>01478             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01479"></a>01479             <span class="keywordflow">break</span>;
<a name="l01480"></a>01480         <span class="keywordflow">case</span> 14:
<a name="l01481"></a>01481             noisefunc = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01482"></a>01482             <span class="keywordflow">break</span>;
<a name="l01483"></a>01483         <span class="keywordflow">case</span> 0:
<a name="l01484"></a>01484         <span class="keywordflow">default</span>: {
<a name="l01485"></a>01485             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01486"></a>01486         }
<a name="l01487"></a>01487     }
<a name="l01488"></a>01488     
<a name="l01489"></a>01489     <span class="keywordflow">for</span> (i=0; i&lt;(int)octaves; i++) {
<a name="l01490"></a>01490         value += noisefunc(x, y, z) * pwr;
<a name="l01491"></a>01491         pwr *= pwHL;
<a name="l01492"></a>01492         x *= lacunarity;
<a name="l01493"></a>01493         y *= lacunarity;
<a name="l01494"></a>01494         z *= lacunarity;
<a name="l01495"></a>01495     }
<a name="l01496"></a>01496 
<a name="l01497"></a>01497     rmd = octaves - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#addfa7d645df6e3c96924f253d8fb9b48">floorf</a>(octaves);
<a name="l01498"></a>01498     <span class="keywordflow">if</span> (rmd!=0.f) value += rmd * noisefunc(x, y, z) * pwr;
<a name="l01499"></a>01499 
<a name="l01500"></a>01500     <span class="keywordflow">return</span> value;
<a name="l01501"></a>01501 
<a name="l01502"></a>01502 } <span class="comment">/* fBm() */</span>
<a name="l01503"></a>01503 
<a name="l01504"></a>01504 
<a name="l01505"></a>01505 <span class="comment">/*</span>
<a name="l01506"></a>01506 <span class="comment"> * Procedural multifractal evaluated at &quot;point&quot;;</span>
<a name="l01507"></a>01507 <span class="comment"> * returns value stored in &quot;value&quot;.</span>
<a name="l01508"></a>01508 <span class="comment"> *</span>
<a name="l01509"></a>01509 <span class="comment"> * Parameters:</span>
<a name="l01510"></a>01510 <span class="comment"> *    ``H&#39;&#39;  determines the highest fractal dimension</span>
<a name="l01511"></a>01511 <span class="comment"> *    ``lacunarity&#39;&#39;  is gap between successive frequencies</span>
<a name="l01512"></a>01512 <span class="comment"> *    ``octaves&#39;&#39;  is the number of frequencies in the fBm</span>
<a name="l01513"></a>01513 <span class="comment"> *    ``offset&#39;&#39;  is the zero offset, which determines multifractality (NOT USED??)</span>
<a name="l01514"></a>01514 <span class="comment"> */</span>
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 <span class="comment">/* this one is in fact rather confusing,</span>
<a name="l01517"></a>01517 <span class="comment"> * there seem to be errors in the original source code (in all three versions of proc.text&amp;mod),</span>
<a name="l01518"></a>01518 <span class="comment"> * I modified it to something that made sense to me, so it might be wrong... */</span>
<a name="l01519"></a><a class="code" href="../../dd/d05/noise_8c.html#a2a833cb1025b3f10df79c79c8b3112bf">01519</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a2a833cb1025b3f10df79c79c8b3112bf">mg_MultiFractal</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> H, <span class="keywordtype">float</span> lacunarity, <span class="keywordtype">float</span> octaves, <span class="keywordtype">int</span> noisebasis)
<a name="l01520"></a>01520 {
<a name="l01521"></a>01521     <span class="keywordtype">float</span>   rmd, value=1.0, pwr=1.0, pwHL=<a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(lacunarity, -H);
<a name="l01522"></a>01522     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01523"></a>01523 
<a name="l01524"></a>01524     float (*noisefunc)(float, float, float);
<a name="l01525"></a>01525     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01526"></a>01526         <span class="keywordflow">case</span> 1:
<a name="l01527"></a>01527             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01528"></a>01528             <span class="keywordflow">break</span>;
<a name="l01529"></a>01529         <span class="keywordflow">case</span> 2:
<a name="l01530"></a>01530             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01531"></a>01531             <span class="keywordflow">break</span>;
<a name="l01532"></a>01532         <span class="keywordflow">case</span> 3:
<a name="l01533"></a>01533             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01534"></a>01534             <span class="keywordflow">break</span>;
<a name="l01535"></a>01535         <span class="keywordflow">case</span> 4:
<a name="l01536"></a>01536             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01537"></a>01537             <span class="keywordflow">break</span>;
<a name="l01538"></a>01538         <span class="keywordflow">case</span> 5:
<a name="l01539"></a>01539             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01540"></a>01540             <span class="keywordflow">break</span>;
<a name="l01541"></a>01541         <span class="keywordflow">case</span> 6:
<a name="l01542"></a>01542             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01543"></a>01543             <span class="keywordflow">break</span>;
<a name="l01544"></a>01544         <span class="keywordflow">case</span> 7:
<a name="l01545"></a>01545             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01546"></a>01546             <span class="keywordflow">break</span>;
<a name="l01547"></a>01547         <span class="keywordflow">case</span> 8:
<a name="l01548"></a>01548             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01549"></a>01549             <span class="keywordflow">break</span>;
<a name="l01550"></a>01550         <span class="keywordflow">case</span> 14:
<a name="l01551"></a>01551             noisefunc = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01552"></a>01552             <span class="keywordflow">break</span>;
<a name="l01553"></a>01553         <span class="keywordflow">case</span> 0:
<a name="l01554"></a>01554         <span class="keywordflow">default</span>: {
<a name="l01555"></a>01555             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01556"></a>01556         }
<a name="l01557"></a>01557     }
<a name="l01558"></a>01558 
<a name="l01559"></a>01559     <span class="keywordflow">for</span> (i=0; i&lt;(int)octaves; i++) {
<a name="l01560"></a>01560         value *= (pwr * noisefunc(x, y, z) + 1.0f);
<a name="l01561"></a>01561         pwr *= pwHL;
<a name="l01562"></a>01562         x *= lacunarity;
<a name="l01563"></a>01563         y *= lacunarity;
<a name="l01564"></a>01564         z *= lacunarity;
<a name="l01565"></a>01565     }
<a name="l01566"></a>01566     rmd = octaves - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#addfa7d645df6e3c96924f253d8fb9b48">floorf</a>(octaves);
<a name="l01567"></a>01567     <span class="keywordflow">if</span> (rmd!=0.0f) value *= (rmd * noisefunc(x, y, z) * pwr + 1.0f);
<a name="l01568"></a>01568 
<a name="l01569"></a>01569     <span class="keywordflow">return</span> value;
<a name="l01570"></a>01570 
<a name="l01571"></a>01571 } <span class="comment">/* multifractal() */</span>
<a name="l01572"></a>01572 
<a name="l01573"></a>01573 <span class="comment">/*</span>
<a name="l01574"></a>01574 <span class="comment"> * Heterogeneous procedural terrain function: stats by altitude method.</span>
<a name="l01575"></a>01575 <span class="comment"> * Evaluated at &quot;point&quot;; returns value stored in &quot;value&quot;.</span>
<a name="l01576"></a>01576 <span class="comment"> *</span>
<a name="l01577"></a>01577 <span class="comment"> * Parameters:</span>
<a name="l01578"></a>01578 <span class="comment"> *       ``H&#39;&#39;  determines the fractal dimension of the roughest areas</span>
<a name="l01579"></a>01579 <span class="comment"> *       ``lacunarity&#39;&#39;  is the gap between successive frequencies</span>
<a name="l01580"></a>01580 <span class="comment"> *       ``octaves&#39;&#39;  is the number of frequencies in the fBm</span>
<a name="l01581"></a>01581 <span class="comment"> *       ``offset&#39;&#39;  raises the terrain from `sea level&#39;</span>
<a name="l01582"></a>01582 <span class="comment"> */</span>
<a name="l01583"></a><a class="code" href="../../dd/d05/noise_8c.html#a3bafb31902093f5627af98a31d426527">01583</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a3bafb31902093f5627af98a31d426527">mg_HeteroTerrain</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> H, <span class="keywordtype">float</span> lacunarity, <span class="keywordtype">float</span> octaves, <span class="keywordtype">float</span> offset, <span class="keywordtype">int</span> noisebasis)
<a name="l01584"></a>01584 {
<a name="l01585"></a>01585     <span class="keywordtype">float</span>   value, increment, rmd;
<a name="l01586"></a>01586     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01587"></a>01587     <span class="keywordtype">float</span> pwHL = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(lacunarity, -H);
<a name="l01588"></a>01588     <span class="keywordtype">float</span> pwr = pwHL;   <span class="comment">/* starts with i=1 instead of 0 */</span>
<a name="l01589"></a>01589 
<a name="l01590"></a>01590     float (*noisefunc)(float, float, float);
<a name="l01591"></a>01591     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01592"></a>01592         <span class="keywordflow">case</span> 1:
<a name="l01593"></a>01593             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01594"></a>01594             <span class="keywordflow">break</span>;
<a name="l01595"></a>01595         <span class="keywordflow">case</span> 2:
<a name="l01596"></a>01596             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01597"></a>01597             <span class="keywordflow">break</span>;
<a name="l01598"></a>01598         <span class="keywordflow">case</span> 3:
<a name="l01599"></a>01599             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01600"></a>01600             <span class="keywordflow">break</span>;
<a name="l01601"></a>01601         <span class="keywordflow">case</span> 4:
<a name="l01602"></a>01602             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01603"></a>01603             <span class="keywordflow">break</span>;
<a name="l01604"></a>01604         <span class="keywordflow">case</span> 5:
<a name="l01605"></a>01605             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01606"></a>01606             <span class="keywordflow">break</span>;
<a name="l01607"></a>01607         <span class="keywordflow">case</span> 6:
<a name="l01608"></a>01608             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01609"></a>01609             <span class="keywordflow">break</span>;
<a name="l01610"></a>01610         <span class="keywordflow">case</span> 7:
<a name="l01611"></a>01611             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01612"></a>01612             <span class="keywordflow">break</span>;
<a name="l01613"></a>01613         <span class="keywordflow">case</span> 8:
<a name="l01614"></a>01614             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01615"></a>01615             <span class="keywordflow">break</span>;
<a name="l01616"></a>01616         <span class="keywordflow">case</span> 14:
<a name="l01617"></a>01617             noisefunc = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01618"></a>01618             <span class="keywordflow">break</span>;
<a name="l01619"></a>01619         <span class="keywordflow">case</span> 0:
<a name="l01620"></a>01620         <span class="keywordflow">default</span>: {
<a name="l01621"></a>01621             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01622"></a>01622         }
<a name="l01623"></a>01623     }
<a name="l01624"></a>01624 
<a name="l01625"></a>01625     <span class="comment">/* first unscaled octave of function; later octaves are scaled */</span>
<a name="l01626"></a>01626     value = offset + noisefunc(x, y, z);
<a name="l01627"></a>01627     x *= lacunarity;
<a name="l01628"></a>01628     y *= lacunarity;
<a name="l01629"></a>01629     z *= lacunarity;
<a name="l01630"></a>01630 
<a name="l01631"></a>01631     <span class="keywordflow">for</span> (i=1; i&lt;(int)octaves; i++) {
<a name="l01632"></a>01632         increment = (noisefunc(x, y, z) + offset) * pwr * value;
<a name="l01633"></a>01633         value += increment;
<a name="l01634"></a>01634         pwr *= pwHL;
<a name="l01635"></a>01635         x *= lacunarity;
<a name="l01636"></a>01636         y *= lacunarity;
<a name="l01637"></a>01637         z *= lacunarity;
<a name="l01638"></a>01638     }
<a name="l01639"></a>01639 
<a name="l01640"></a>01640     rmd = octaves - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#addfa7d645df6e3c96924f253d8fb9b48">floorf</a>(octaves);
<a name="l01641"></a>01641     <span class="keywordflow">if</span> (rmd!=0.0f) {
<a name="l01642"></a>01642         increment = (noisefunc(x, y, z) + offset) * pwr * value;
<a name="l01643"></a>01643         value += rmd * increment;
<a name="l01644"></a>01644     }
<a name="l01645"></a>01645     <span class="keywordflow">return</span> value;
<a name="l01646"></a>01646 }
<a name="l01647"></a>01647 
<a name="l01648"></a>01648 
<a name="l01649"></a>01649 <span class="comment">/* Hybrid additive/multiplicative multifractal terrain model.</span>
<a name="l01650"></a>01650 <span class="comment"> *</span>
<a name="l01651"></a>01651 <span class="comment"> * Some good parameter values to start with:</span>
<a name="l01652"></a>01652 <span class="comment"> *</span>
<a name="l01653"></a>01653 <span class="comment"> *      H:           0.25</span>
<a name="l01654"></a>01654 <span class="comment"> *      offset:      0.7</span>
<a name="l01655"></a>01655 <span class="comment"> */</span>
<a name="l01656"></a><a class="code" href="../../dd/d05/noise_8c.html#abff6e1eb368a0ba2033c99c04587ea76">01656</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#abff6e1eb368a0ba2033c99c04587ea76">mg_HybridMultiFractal</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> H, <span class="keywordtype">float</span> lacunarity, <span class="keywordtype">float</span> octaves, <span class="keywordtype">float</span> offset, <span class="keywordtype">float</span> gain, <span class="keywordtype">int</span> noisebasis)
<a name="l01657"></a>01657 {
<a name="l01658"></a>01658     <span class="keywordtype">float</span> result, signal, weight, rmd;
<a name="l01659"></a>01659     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01660"></a>01660     <span class="keywordtype">float</span> pwHL = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(lacunarity, -H);
<a name="l01661"></a>01661     <span class="keywordtype">float</span> pwr = pwHL;   <span class="comment">/* starts with i=1 instead of 0 */</span>
<a name="l01662"></a>01662     float (*noisefunc)(float, float, float);
<a name="l01663"></a>01663 
<a name="l01664"></a>01664     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01665"></a>01665         <span class="keywordflow">case</span> 1:
<a name="l01666"></a>01666             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01667"></a>01667             <span class="keywordflow">break</span>;
<a name="l01668"></a>01668         <span class="keywordflow">case</span> 2:
<a name="l01669"></a>01669             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01670"></a>01670             <span class="keywordflow">break</span>;
<a name="l01671"></a>01671         <span class="keywordflow">case</span> 3:
<a name="l01672"></a>01672             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01673"></a>01673             <span class="keywordflow">break</span>;
<a name="l01674"></a>01674         <span class="keywordflow">case</span> 4:
<a name="l01675"></a>01675             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01676"></a>01676             <span class="keywordflow">break</span>;
<a name="l01677"></a>01677         <span class="keywordflow">case</span> 5:
<a name="l01678"></a>01678             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01679"></a>01679             <span class="keywordflow">break</span>;
<a name="l01680"></a>01680         <span class="keywordflow">case</span> 6:
<a name="l01681"></a>01681             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01682"></a>01682             <span class="keywordflow">break</span>;
<a name="l01683"></a>01683         <span class="keywordflow">case</span> 7:
<a name="l01684"></a>01684             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01685"></a>01685             <span class="keywordflow">break</span>;
<a name="l01686"></a>01686         <span class="keywordflow">case</span> 8:
<a name="l01687"></a>01687             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01688"></a>01688             <span class="keywordflow">break</span>;
<a name="l01689"></a>01689         <span class="keywordflow">case</span> 14:
<a name="l01690"></a>01690             noisefunc = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01691"></a>01691             <span class="keywordflow">break</span>;
<a name="l01692"></a>01692         <span class="keywordflow">case</span> 0:
<a name="l01693"></a>01693         <span class="keywordflow">default</span>: {
<a name="l01694"></a>01694             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01695"></a>01695         }
<a name="l01696"></a>01696     }
<a name="l01697"></a>01697 
<a name="l01698"></a>01698     result = noisefunc(x, y, z) + offset;
<a name="l01699"></a>01699     weight = gain * result;
<a name="l01700"></a>01700     x *= lacunarity;
<a name="l01701"></a>01701     y *= lacunarity;
<a name="l01702"></a>01702     z *= lacunarity;
<a name="l01703"></a>01703 
<a name="l01704"></a>01704     <span class="keywordflow">for</span> (i=1; (weight&gt;0.001f) &amp;&amp; (i&lt;(<span class="keywordtype">int</span>)octaves); i++) {
<a name="l01705"></a>01705         <span class="keywordflow">if</span> (weight&gt;1.0f)  weight=1.0f;
<a name="l01706"></a>01706         signal = (noisefunc(x, y, z) + offset) * pwr;
<a name="l01707"></a>01707         pwr *= pwHL;
<a name="l01708"></a>01708         result += weight * signal;
<a name="l01709"></a>01709         weight *= gain * signal;
<a name="l01710"></a>01710         x *= lacunarity;
<a name="l01711"></a>01711         y *= lacunarity;
<a name="l01712"></a>01712         z *= lacunarity;
<a name="l01713"></a>01713     }
<a name="l01714"></a>01714 
<a name="l01715"></a>01715     rmd = octaves - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#addfa7d645df6e3c96924f253d8fb9b48">floorf</a>(octaves);
<a name="l01716"></a>01716     <span class="keywordflow">if</span> (rmd!=0.f) result += rmd * ((noisefunc(x, y, z) + offset) * pwr);
<a name="l01717"></a>01717 
<a name="l01718"></a>01718     <span class="keywordflow">return</span> result;
<a name="l01719"></a>01719 
<a name="l01720"></a>01720 } <span class="comment">/* HybridMultifractal() */</span>
<a name="l01721"></a>01721 
<a name="l01722"></a>01722 
<a name="l01723"></a>01723 <span class="comment">/* Ridged multifractal terrain model.</span>
<a name="l01724"></a>01724 <span class="comment"> *</span>
<a name="l01725"></a>01725 <span class="comment"> * Some good parameter values to start with:</span>
<a name="l01726"></a>01726 <span class="comment"> *</span>
<a name="l01727"></a>01727 <span class="comment"> *      H:           1.0</span>
<a name="l01728"></a>01728 <span class="comment"> *      offset:      1.0</span>
<a name="l01729"></a>01729 <span class="comment"> *      gain:        2.0</span>
<a name="l01730"></a>01730 <span class="comment"> */</span>
<a name="l01731"></a><a class="code" href="../../dd/d05/noise_8c.html#ad085274f4b7c6dc7e91ff9503ca0f3c0">01731</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#ad085274f4b7c6dc7e91ff9503ca0f3c0">mg_RidgedMultiFractal</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> H, <span class="keywordtype">float</span> lacunarity, <span class="keywordtype">float</span> octaves, <span class="keywordtype">float</span> offset, <span class="keywordtype">float</span> gain, <span class="keywordtype">int</span> noisebasis)
<a name="l01732"></a>01732 {
<a name="l01733"></a>01733     <span class="keywordtype">float</span> result, signal, weight;
<a name="l01734"></a>01734     <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;
<a name="l01735"></a>01735     <span class="keywordtype">float</span> pwHL = <a class="code" href="../../dd/d06/BLI__math__base_8h.html#acc9eed6743d69a0f62071dc0c7dd6ae8">powf</a>(lacunarity, -H);
<a name="l01736"></a>01736     <span class="keywordtype">float</span> pwr = pwHL;   <span class="comment">/* starts with i=1 instead of 0 */</span>
<a name="l01737"></a>01737     
<a name="l01738"></a>01738     float (*noisefunc)(float, float, float);
<a name="l01739"></a>01739     <span class="keywordflow">switch</span> (noisebasis) {
<a name="l01740"></a>01740         <span class="keywordflow">case</span> 1:
<a name="l01741"></a>01741             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01742"></a>01742             <span class="keywordflow">break</span>;
<a name="l01743"></a>01743         <span class="keywordflow">case</span> 2:
<a name="l01744"></a>01744             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01745"></a>01745             <span class="keywordflow">break</span>;
<a name="l01746"></a>01746         <span class="keywordflow">case</span> 3:
<a name="l01747"></a>01747             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01748"></a>01748             <span class="keywordflow">break</span>;
<a name="l01749"></a>01749         <span class="keywordflow">case</span> 4:
<a name="l01750"></a>01750             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01751"></a>01751             <span class="keywordflow">break</span>;
<a name="l01752"></a>01752         <span class="keywordflow">case</span> 5:
<a name="l01753"></a>01753             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01754"></a>01754             <span class="keywordflow">break</span>;
<a name="l01755"></a>01755         <span class="keywordflow">case</span> 6:
<a name="l01756"></a>01756             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01757"></a>01757             <span class="keywordflow">break</span>;
<a name="l01758"></a>01758         <span class="keywordflow">case</span> 7:
<a name="l01759"></a>01759             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01760"></a>01760             <span class="keywordflow">break</span>;
<a name="l01761"></a>01761         <span class="keywordflow">case</span> 8:
<a name="l01762"></a>01762             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01763"></a>01763             <span class="keywordflow">break</span>;
<a name="l01764"></a>01764         <span class="keywordflow">case</span> 14:
<a name="l01765"></a>01765             noisefunc = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01766"></a>01766             <span class="keywordflow">break</span>;
<a name="l01767"></a>01767         <span class="keywordflow">case</span> 0:
<a name="l01768"></a>01768         <span class="keywordflow">default</span>: {
<a name="l01769"></a>01769             noisefunc = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01770"></a>01770         }
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772 
<a name="l01773"></a>01773     signal = offset - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(noisefunc(x, y, z));
<a name="l01774"></a>01774     signal *= signal;
<a name="l01775"></a>01775     result = signal;
<a name="l01776"></a>01776 
<a name="l01777"></a>01777 
<a name="l01778"></a>01778     <span class="keywordflow">for</span> ( i=1; i&lt;(int)octaves; i++ ) {
<a name="l01779"></a>01779         x *= lacunarity;
<a name="l01780"></a>01780         y *= lacunarity;
<a name="l01781"></a>01781         z *= lacunarity;
<a name="l01782"></a>01782         weight = signal * gain;
<a name="l01783"></a>01783         <span class="keywordflow">if</span> (weight&gt;1.0f) weight=1.0f; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (weight&lt;0.0f) weight=0.0f;
<a name="l01784"></a>01784         signal = offset - <a class="code" href="../../dd/d06/BLI__math__base_8h.html#aa825035ff543e2be9c11ad8acf18d480">fabsf</a>(noisefunc(x, y, z));
<a name="l01785"></a>01785         signal *= signal;
<a name="l01786"></a>01786         signal *= weight;
<a name="l01787"></a>01787         result += signal * pwr;
<a name="l01788"></a>01788         pwr *= pwHL;
<a name="l01789"></a>01789     }
<a name="l01790"></a>01790 
<a name="l01791"></a>01791     <span class="keywordflow">return</span> result;
<a name="l01792"></a>01792 } <span class="comment">/* RidgedMultifractal() */</span>
<a name="l01793"></a>01793 
<a name="l01794"></a>01794 <span class="comment">/* &quot;Variable Lacunarity Noise&quot;</span>
<a name="l01795"></a>01795 <span class="comment"> * A distorted variety of Perlin noise.</span>
<a name="l01796"></a>01796 <span class="comment"> */</span>
<a name="l01797"></a><a class="code" href="../../dd/d05/noise_8c.html#a9055c2267469b09600c88481925b5459">01797</a> <span class="keywordtype">float</span> <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9055c2267469b09600c88481925b5459">mg_VLNoise</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> distortion, <span class="keywordtype">int</span> nbas1, <span class="keywordtype">int</span> nbas2)
<a name="l01798"></a>01798 {
<a name="l01799"></a>01799     <span class="keywordtype">float</span> rv[3];
<a name="l01800"></a>01800     float (*noisefunc1)(float, float, float);
<a name="l01801"></a>01801     float (*noisefunc2)(float, float, float);
<a name="l01802"></a>01802 
<a name="l01803"></a>01803     <span class="keywordflow">switch</span> (nbas1) {
<a name="l01804"></a>01804         <span class="keywordflow">case</span> 1:
<a name="l01805"></a>01805             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01806"></a>01806             <span class="keywordflow">break</span>;
<a name="l01807"></a>01807         <span class="keywordflow">case</span> 2:
<a name="l01808"></a>01808             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01809"></a>01809             <span class="keywordflow">break</span>;
<a name="l01810"></a>01810         <span class="keywordflow">case</span> 3:
<a name="l01811"></a>01811             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01812"></a>01812             <span class="keywordflow">break</span>;
<a name="l01813"></a>01813         <span class="keywordflow">case</span> 4:
<a name="l01814"></a>01814             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01815"></a>01815             <span class="keywordflow">break</span>;
<a name="l01816"></a>01816         <span class="keywordflow">case</span> 5:
<a name="l01817"></a>01817             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01818"></a>01818             <span class="keywordflow">break</span>;
<a name="l01819"></a>01819         <span class="keywordflow">case</span> 6:
<a name="l01820"></a>01820             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01821"></a>01821             <span class="keywordflow">break</span>;
<a name="l01822"></a>01822         <span class="keywordflow">case</span> 7:
<a name="l01823"></a>01823             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01824"></a>01824             <span class="keywordflow">break</span>;
<a name="l01825"></a>01825         <span class="keywordflow">case</span> 8:
<a name="l01826"></a>01826             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01827"></a>01827             <span class="keywordflow">break</span>;
<a name="l01828"></a>01828         <span class="keywordflow">case</span> 14:
<a name="l01829"></a>01829             noisefunc1 = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01830"></a>01830             <span class="keywordflow">break</span>;
<a name="l01831"></a>01831         <span class="keywordflow">case</span> 0:
<a name="l01832"></a>01832         <span class="keywordflow">default</span>: {
<a name="l01833"></a>01833             noisefunc1 = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01834"></a>01834         }
<a name="l01835"></a>01835     }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837     <span class="keywordflow">switch</span> (nbas2) {
<a name="l01838"></a>01838         <span class="keywordflow">case</span> 1:
<a name="l01839"></a>01839             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a28467e4fe1b1904a7872b845c86f47b7">orgPerlinNoise</a>;
<a name="l01840"></a>01840             <span class="keywordflow">break</span>;
<a name="l01841"></a>01841         <span class="keywordflow">case</span> 2:
<a name="l01842"></a>01842             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a40ae84d06d6aa1b51a094a8f1b82f2d3">newPerlin</a>;
<a name="l01843"></a>01843             <span class="keywordflow">break</span>;
<a name="l01844"></a>01844         <span class="keywordflow">case</span> 3:
<a name="l01845"></a>01845             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a69b5941598cbc973b75e9523306960a6">voronoi_F1S</a>;
<a name="l01846"></a>01846             <span class="keywordflow">break</span>;
<a name="l01847"></a>01847         <span class="keywordflow">case</span> 4:
<a name="l01848"></a>01848             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a8f3fec27d3429f4acc4efa776f333591">voronoi_F2S</a>;
<a name="l01849"></a>01849             <span class="keywordflow">break</span>;
<a name="l01850"></a>01850         <span class="keywordflow">case</span> 5:
<a name="l01851"></a>01851             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#aaed3258b9e72d2785e7e55c33c2636e6">voronoi_F3S</a>;
<a name="l01852"></a>01852             <span class="keywordflow">break</span>;
<a name="l01853"></a>01853         <span class="keywordflow">case</span> 6:
<a name="l01854"></a>01854             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a8603762de150adf60f714188ea23b465">voronoi_F4S</a>;
<a name="l01855"></a>01855             <span class="keywordflow">break</span>;
<a name="l01856"></a>01856         <span class="keywordflow">case</span> 7:
<a name="l01857"></a>01857             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a423624c759ea7820df4b0ee53e35a361">voronoi_F1F2S</a>;
<a name="l01858"></a>01858             <span class="keywordflow">break</span>;
<a name="l01859"></a>01859         <span class="keywordflow">case</span> 8:
<a name="l01860"></a>01860             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a4670d736e599652bed7df54e4a973aa3">voronoi_CrS</a>;
<a name="l01861"></a>01861             <span class="keywordflow">break</span>;
<a name="l01862"></a>01862         <span class="keywordflow">case</span> 14:
<a name="l01863"></a>01863             noisefunc2 = <a class="code" href="../../d1/d65/BLI__noise_8h.html#a9157b965aaff51f8a985d044d962522a">cellNoise</a>;
<a name="l01864"></a>01864             <span class="keywordflow">break</span>;
<a name="l01865"></a>01865         <span class="keywordflow">case</span> 0:
<a name="l01866"></a>01866         <span class="keywordflow">default</span>: {
<a name="l01867"></a>01867             noisefunc2 = <a class="code" href="../../dd/d05/noise_8c.html#a292948d5f06e2db353a93ded8cc0b4da">orgBlenderNoiseS</a>;
<a name="l01868"></a>01868         }
<a name="l01869"></a>01869     }
<a name="l01870"></a>01870 
<a name="l01871"></a>01871     <span class="comment">/* get a random vector and scale the randomization */</span>
<a name="l01872"></a>01872     rv[0] = noisefunc1(x+13.5f, y+13.5f, z+13.5f) * distortion;
<a name="l01873"></a>01873     rv[1] = noisefunc1(x, y, z) * distortion;
<a name="l01874"></a>01874     rv[2] = noisefunc1(x-13.5f, y-13.5f, z-13.5f) * distortion;
<a name="l01875"></a>01875     <span class="keywordflow">return</span> noisefunc2(x+rv[0], y+rv[1], z+rv[2]);   <span class="comment">/* distorted-domain noise */</span>
<a name="l01876"></a>01876 }
<a name="l01877"></a>01877 
<a name="l01878"></a>01878 <span class="comment">/****************/</span>
<a name="l01879"></a>01879 <span class="comment">/* musgrave end */</span>
<a name="l01880"></a>01880 <span class="comment">/****************/</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:36 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
