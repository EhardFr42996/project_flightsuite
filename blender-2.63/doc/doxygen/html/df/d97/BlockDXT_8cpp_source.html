<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Blender: BlockDXT.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blender.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blender&#160;<span id="projectnumber">V2.6x</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">BlockDXT.cpp</div>  </div>
</div>
<div class="contents">
<a href="../../df/d97/BlockDXT_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * ***** BEGIN GPL LICENSE BLOCK *****</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software Foundation,</span>
<a name="l00016"></a>00016 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * Contributors: Amorilia (amorilia@users.sourceforge.net)</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * ***** END GPL LICENSE BLOCK *****</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00028"></a>00028 <span class="comment">/*</span>
<a name="l00029"></a>00029 <span class="comment"> * This file is based on a similar file from the NVIDIA texture tools</span>
<a name="l00030"></a>00030 <span class="comment"> * (http://nvidia-texture-tools.googlecode.com/)</span>
<a name="l00031"></a>00031 <span class="comment"> *</span>
<a name="l00032"></a>00032 <span class="comment"> * Original license from NVIDIA follows.</span>
<a name="l00033"></a>00033 <span class="comment"> */</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">// Copyright NVIDIA Corporation 2007 -- Ignacio Castano &lt;icastano@nvidia.com&gt;</span>
<a name="l00036"></a>00036 <span class="comment">// </span>
<a name="l00037"></a>00037 <span class="comment">// Permission is hereby granted, free of charge, to any person</span>
<a name="l00038"></a>00038 <span class="comment">// obtaining a copy of this software and associated documentation</span>
<a name="l00039"></a>00039 <span class="comment">// files (the &quot;Software&quot;), to deal in the Software without</span>
<a name="l00040"></a>00040 <span class="comment">// restriction, including without limitation the rights to use,</span>
<a name="l00041"></a>00041 <span class="comment">// copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<a name="l00042"></a>00042 <span class="comment">// copies of the Software, and to permit persons to whom the</span>
<a name="l00043"></a>00043 <span class="comment">// Software is furnished to do so, subject to the following</span>
<a name="l00044"></a>00044 <span class="comment">// conditions:</span>
<a name="l00045"></a>00045 <span class="comment">// </span>
<a name="l00046"></a>00046 <span class="comment">// The above copyright notice and this permission notice shall be</span>
<a name="l00047"></a>00047 <span class="comment">// included in all copies or substantial portions of the Software.</span>
<a name="l00048"></a>00048 <span class="comment">// </span>
<a name="l00049"></a>00049 <span class="comment">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<a name="l00050"></a>00050 <span class="comment">// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</span>
<a name="l00051"></a>00051 <span class="comment">// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<a name="l00052"></a>00052 <span class="comment">// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</span>
<a name="l00053"></a>00053 <span class="comment">// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</span>
<a name="l00054"></a>00054 <span class="comment">// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span>
<a name="l00055"></a>00055 <span class="comment">// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span>
<a name="l00056"></a>00056 <span class="comment">// OTHER DEALINGS IN THE SOFTWARE.</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;Common.h&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;<a class="code" href="../../de/dd1/Stream_8h.html">Stream.h</a>&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;<a class="code" href="../../d3/d7a/ColorBlock_8h.html">ColorBlock.h</a>&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &lt;<a class="code" href="../../d3/df8/BlockDXT_8h.html">BlockDXT.h</a>&gt;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00064"></a>00064 <span class="comment">    BlockDXT1</span>
<a name="l00065"></a>00065 <span class="comment">----------------------------------------------------------------------------*/</span>
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#acad2dc3537ab627cff24e910883f432e">00067</a> <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../d7/d66/structBlockDXT1.html#acad2dc3537ab627cff24e910883f432e">BlockDXT1::evaluatePalette</a>(<a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4])<span class="keyword"> const</span>
<a name="l00068"></a>00068 <span class="keyword"></span>{
<a name="l00069"></a>00069     <span class="comment">// Does bit expansion before interpolation.</span>
<a name="l00070"></a>00070     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00071"></a>00071     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00072"></a>00072     color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00073"></a>00073     color_array[0].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00074"></a>00074     
<a name="l00075"></a>00075     <span class="comment">// @@ Same as above, but faster?</span>
<a name="l00076"></a>00076 <span class="comment">//  Color32 c;</span>
<a name="l00077"></a>00077 <span class="comment">//  c.u = ((col0.u &lt;&lt; 3) &amp; 0xf8) | ((col0.u &lt;&lt; 5) &amp; 0xfc00) | ((col0.u &lt;&lt; 8) &amp; 0xf80000);</span>
<a name="l00078"></a>00078 <span class="comment">//  c.u |= (c.u &gt;&gt; 5) &amp; 0x070007;</span>
<a name="l00079"></a>00079 <span class="comment">//  c.u |= (c.u &gt;&gt; 6) &amp; 0x000300;</span>
<a name="l00080"></a>00080 <span class="comment">//  color_array[0].u = c.u;</span>
<a name="l00081"></a>00081     
<a name="l00082"></a>00082     color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00083"></a>00083     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00084"></a>00084     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00085"></a>00085     color_array[1].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00086"></a>00086     
<a name="l00087"></a>00087     <span class="comment">// @@ Same as above, but faster?</span>
<a name="l00088"></a>00088 <span class="comment">//  c.u = ((col1.u &lt;&lt; 3) &amp; 0xf8) | ((col1.u &lt;&lt; 5) &amp; 0xfc00) | ((col1.u &lt;&lt; 8) &amp; 0xf80000);</span>
<a name="l00089"></a>00089 <span class="comment">//  c.u |= (c.u &gt;&gt; 5) &amp; 0x070007;</span>
<a name="l00090"></a>00090 <span class="comment">//  c.u |= (c.u &gt;&gt; 6) &amp; 0x000300;</span>
<a name="l00091"></a>00091 <span class="comment">//  color_array[1].u = c.u;</span>
<a name="l00092"></a>00092     
<a name="l00093"></a>00093     <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a> &gt; <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a> ) {
<a name="l00094"></a>00094         <span class="comment">// Four-color block: derive the other two colors.</span>
<a name="l00095"></a>00095         color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 3;
<a name="l00096"></a>00096         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00097"></a>00097         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00098"></a>00098         color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00099"></a>00099         
<a name="l00100"></a>00100         color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 3;
<a name="l00101"></a>00101         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00102"></a>00102         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00103"></a>00103         color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00104"></a>00104         
<a name="l00105"></a>00105         <span class="keywordflow">return</span> 4;
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107     <span class="keywordflow">else</span> {
<a name="l00108"></a>00108         <span class="comment">// Three-color block: derive the other color.</span>
<a name="l00109"></a>00109         color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 2;
<a name="l00110"></a>00110         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 2;
<a name="l00111"></a>00111         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 2;
<a name="l00112"></a>00112         color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00113"></a>00113         
<a name="l00114"></a>00114         <span class="comment">// Set all components to 0 to match DXT specs.</span>
<a name="l00115"></a>00115         color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00; <span class="comment">// color_array[2].r;</span>
<a name="l00116"></a>00116         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = 0x00; <span class="comment">// color_array[2].g;</span>
<a name="l00117"></a>00117         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = 0x00; <span class="comment">// color_array[2].b;</span>
<a name="l00118"></a>00118         color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0x00;
<a name="l00119"></a>00119         
<a name="l00120"></a>00120         <span class="keywordflow">return</span> 3;
<a name="l00121"></a>00121     }
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#ac9372eedae2548ce15c1ee4bd3cd4ebc">00125</a> <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../d7/d66/structBlockDXT1.html#ac9372eedae2548ce15c1ee4bd3cd4ebc">BlockDXT1::evaluatePaletteNV5x</a>(<a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4])<span class="keyword"> const</span>
<a name="l00126"></a>00126 <span class="keyword"></span>{
<a name="l00127"></a>00127     <span class="comment">// Does bit expansion before interpolation.</span>
<a name="l00128"></a>00128     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (3 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> * 22) / 8;
<a name="l00129"></a>00129     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00130"></a>00130     color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (3 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> * 22) / 8;
<a name="l00131"></a>00131     color_array[0].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (3 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> * 22) / 8;
<a name="l00134"></a>00134     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00135"></a>00135     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (3 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> * 22) / 8;
<a name="l00136"></a>00136     color_array[1].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00137"></a>00137     
<a name="l00138"></a>00138     <span class="keywordtype">int</span> gdiff = color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> - color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a> &gt; <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a> ) {
<a name="l00141"></a>00141         <span class="comment">// Four-color block: derive the other two colors.</span>
<a name="l00142"></a>00142         color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = ((2 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a>) * 22) / 8;
<a name="l00143"></a>00143         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (256 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + gdiff / 4 + 128 + gdiff * 80) / 256;
<a name="l00144"></a>00144         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = ((2 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a>) * 22) / 8;
<a name="l00145"></a>00145         color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00146"></a>00146         
<a name="l00147"></a>00147         color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = ((2 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a>) * 22) / 8;
<a name="l00148"></a>00148         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (256 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> - gdiff / 4 + 128 - gdiff * 80) / 256;
<a name="l00149"></a>00149         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = ((2 * <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a>) * 22) / 8;
<a name="l00150"></a>00150         color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="keywordflow">return</span> 4;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154     <span class="keywordflow">else</span> {
<a name="l00155"></a>00155         <span class="comment">// Three-color block: derive the other color.</span>
<a name="l00156"></a>00156         color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = ((<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a>) * 33) / 8;
<a name="l00157"></a>00157         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (256 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + gdiff / 4 + 128 + gdiff * 128) / 256;
<a name="l00158"></a>00158         color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = ((<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> + <a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a>) * 33) / 8;
<a name="l00159"></a>00159         color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00160"></a>00160         
<a name="l00161"></a>00161         <span class="comment">// Set all components to 0 to match DXT specs.</span>
<a name="l00162"></a>00162         color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00; <span class="comment">// color_array[2].r;</span>
<a name="l00163"></a>00163         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = 0x00; <span class="comment">// color_array[2].g;</span>
<a name="l00164"></a>00164         color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = 0x00; <span class="comment">// color_array[2].b;</span>
<a name="l00165"></a>00165         color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0x00;
<a name="l00166"></a>00166         
<a name="l00167"></a>00167         <span class="keywordflow">return</span> 3;
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">// Evaluate palette assuming 3 color block.</span>
<a name="l00172"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#afae03d790590d9ed9f7261c502898137">00172</a> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#afae03d790590d9ed9f7261c502898137">BlockDXT1::evaluatePalette3</a>(<a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4])<span class="keyword"> const</span>
<a name="l00173"></a>00173 <span class="keyword"></span>{
<a name="l00174"></a>00174     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00175"></a>00175     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00176"></a>00176     color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00177"></a>00177     color_array[0].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00178"></a>00178     
<a name="l00179"></a>00179     color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00180"></a>00180     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00181"></a>00181     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00182"></a>00182     color_array[1].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00183"></a>00183     
<a name="l00184"></a>00184     <span class="comment">// Three-color block: derive the other color.</span>
<a name="l00185"></a>00185     color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 2;
<a name="l00186"></a>00186     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 2;
<a name="l00187"></a>00187     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 2;
<a name="l00188"></a>00188     color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00189"></a>00189         
<a name="l00190"></a>00190     <span class="comment">// Set all components to 0 to match DXT specs.</span>
<a name="l00191"></a>00191     color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00; <span class="comment">// color_array[2].r;</span>
<a name="l00192"></a>00192     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = 0x00; <span class="comment">// color_array[2].g;</span>
<a name="l00193"></a>00193     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = 0x00; <span class="comment">// color_array[2].b;</span>
<a name="l00194"></a>00194     color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0x00;
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">// Evaluate palette assuming 4 color block.</span>
<a name="l00198"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a7d90f0c614f77eb9015b70cf2627fd6e">00198</a> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a7d90f0c614f77eb9015b70cf2627fd6e">BlockDXT1::evaluatePalette4</a>(<a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4])<span class="keyword"> const</span>
<a name="l00199"></a>00199 <span class="keyword"></span>{
<a name="l00200"></a>00200     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00201"></a>00201     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00202"></a>00202     color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00203"></a>00203     color_array[0].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00204"></a>00204     
<a name="l00205"></a>00205     color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#afbac49fb52b38bdf3881feb1c459da1d">r</a> &gt;&gt; 2);
<a name="l00206"></a>00206     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &lt;&lt; 2) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a36126002ae62a93e505237b7274bfdd2">g</a> &gt;&gt; 4);
<a name="l00207"></a>00207     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &lt;&lt; 3) | (<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a38b3c532f367762bd64fd52bb7a066c8">b</a> &gt;&gt; 2);
<a name="l00208"></a>00208     color_array[1].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00209"></a>00209     
<a name="l00210"></a>00210     <span class="comment">// Four-color block: derive the other two colors.</span>
<a name="l00211"></a>00211     color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 3;
<a name="l00212"></a>00212     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00213"></a>00213     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00214"></a>00214     color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00215"></a>00215         
<a name="l00216"></a>00216     color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a>) / 3;
<a name="l00217"></a>00217     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00218"></a>00218     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00219"></a>00219     color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a5bc0accbfdba3cd1638ab45fbdb2928a">00223</a> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a5bc0accbfdba3cd1638ab45fbdb2928a">BlockDXT1::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00224"></a>00224 <span class="keyword"></span>{
<a name="l00225"></a>00225     <span class="comment">// Decode color block.</span>
<a name="l00226"></a>00226     <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4];
<a name="l00227"></a>00227     <a class="code" href="../../d7/d66/structBlockDXT1.html#acad2dc3537ab627cff24e910883f432e">evaluatePalette</a>(color_array);
<a name="l00228"></a>00228     
<a name="l00229"></a>00229     <span class="comment">// Write color block.</span>
<a name="l00230"></a>00230     <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> j = 0; j &lt; 4; j++ ) {
<a name="l00231"></a>00231         <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++ ) {
<a name="l00232"></a>00232             <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> idx = (<a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[j] &gt;&gt; (2 * <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp; 3;
<a name="l00233"></a>00233             block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j) = color_array[idx];
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235     }   
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a71454b8703e4b002260bbb3952e19fb2">00238</a> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a71454b8703e4b002260bbb3952e19fb2">BlockDXT1::decodeBlockNV5x</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00239"></a>00239 <span class="keyword"></span>{
<a name="l00240"></a>00240     <span class="comment">// Decode color block.</span>
<a name="l00241"></a>00241     <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4];
<a name="l00242"></a>00242     <a class="code" href="../../d7/d66/structBlockDXT1.html#ac9372eedae2548ce15c1ee4bd3cd4ebc">evaluatePaletteNV5x</a>(color_array);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <span class="comment">// Write color block.</span>
<a name="l00245"></a>00245     <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> j = 0; j &lt; 4; j++ ) {
<a name="l00246"></a>00246         <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++ ) {
<a name="l00247"></a>00247             <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> idx = (<a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[j] &gt;&gt; (2 * <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp; 3;
<a name="l00248"></a>00248             block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j) = color_array[idx];
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00253"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a69353722d27fc921fbe1a5f2af63ea6b">00253</a> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a69353722d27fc921fbe1a5f2af63ea6b">BlockDXT1::setIndices</a>(<span class="keywordtype">int</span> * idx)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255     <a class="code" href="../../d7/d66/structBlockDXT1.html#a918133801d1df721c0f42ac40063732d">indices</a> = 0;
<a name="l00256"></a>00256     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00257"></a>00257         <a class="code" href="../../d7/d66/structBlockDXT1.html#a918133801d1df721c0f42ac40063732d">indices</a> |= (idx[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 3) &lt;&lt; (2 * <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 
<a name="l00263"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a276f8967c862e29af6aecaf7ec6716db">00263</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a276f8967c862e29af6aecaf7ec6716db" title="Flip DXT1 block vertically.">BlockDXT1::flip4</a>()
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[0], <a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[3]);
<a name="l00266"></a>00266     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[1], <a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[2]);
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00270"></a><a class="code" href="../../d7/d66/structBlockDXT1.html#a6ed139bc62293669b91f22ffc0ba3e04">00270</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/d66/structBlockDXT1.html#a6ed139bc62293669b91f22ffc0ba3e04" title="Flip half DXT1 block vertically.">BlockDXT1::flip2</a>()
<a name="l00271"></a>00271 {
<a name="l00272"></a>00272     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[0], <a class="code" href="../../d7/d66/structBlockDXT1.html#ade1c6e0e23991e65cf24b8d54af51ca7">row</a>[1]);
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00277"></a>00277 <span class="comment">    BlockDXT3</span>
<a name="l00278"></a>00278 <span class="comment">----------------------------------------------------------------------------*/</span>
<a name="l00279"></a>00279 
<a name="l00280"></a><a class="code" href="../../d6/d3d/structBlockDXT3.html#a2ef4e71511b1e9cf639c62496998bc7c">00280</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d3d/structBlockDXT3.html#a2ef4e71511b1e9cf639c62496998bc7c">BlockDXT3::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00281"></a>00281 <span class="keyword"></span>{
<a name="l00282"></a>00282     <span class="comment">// Decode color.</span>
<a name="l00283"></a>00283     <a class="code" href="../../d6/d3d/structBlockDXT3.html#abf73308a132921831ed5785381e22139">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a5bc0accbfdba3cd1638ab45fbdb2928a">decodeBlock</a>(block);
<a name="l00284"></a>00284     
<a name="l00285"></a>00285     <span class="comment">// Decode alpha.</span>
<a name="l00286"></a>00286     <a class="code" href="../../d6/d3d/structBlockDXT3.html#ae23230ce64de829b4807bed1eaee333e">alpha</a>.<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aeac161de398ced13c61fae7eb6de489f">decodeBlock</a>(block);
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a><a class="code" href="../../d6/d3d/structBlockDXT3.html#ada8af5a64fe44d492e049512a38fd878">00289</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d3d/structBlockDXT3.html#ada8af5a64fe44d492e049512a38fd878">BlockDXT3::decodeBlockNV5x</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00290"></a>00290 <span class="keyword"></span>{
<a name="l00291"></a>00291     <a class="code" href="../../d6/d3d/structBlockDXT3.html#abf73308a132921831ed5785381e22139">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a71454b8703e4b002260bbb3952e19fb2">decodeBlockNV5x</a>(block);
<a name="l00292"></a>00292     <a class="code" href="../../d6/d3d/structBlockDXT3.html#ae23230ce64de829b4807bed1eaee333e">alpha</a>.<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aeac161de398ced13c61fae7eb6de489f">decodeBlock</a>(block);
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aeac161de398ced13c61fae7eb6de489f">00295</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aeac161de398ced13c61fae7eb6de489f">AlphaBlockDXT3::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00296"></a>00296 <span class="keyword"></span>{
<a name="l00297"></a>00297     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x0).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a5b26992b6b0beba459e0b927258b31bb">alpha0</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a5b26992b6b0beba459e0b927258b31bb">alpha0</a>;
<a name="l00298"></a>00298     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x1).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a8c9189ac927dc30c447a757b87bd5410">alpha1</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a8c9189ac927dc30c447a757b87bd5410">alpha1</a>;
<a name="l00299"></a>00299     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x2).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aa284d8664927d8659d2de9561aee62c0">alpha2</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aa284d8664927d8659d2de9561aee62c0">alpha2</a>;
<a name="l00300"></a>00300     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x3).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ad3fafdf528945fddcb7d59a8d7efe234">alpha3</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ad3fafdf528945fddcb7d59a8d7efe234">alpha3</a>;
<a name="l00301"></a>00301     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x4).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ae9f8918beb54e451bdf1da3cb31c8b4d">alpha4</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ae9f8918beb54e451bdf1da3cb31c8b4d">alpha4</a>;
<a name="l00302"></a>00302     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x5).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a9c2747b4bb92d8f022e4c5a9961c408f">alpha5</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a9c2747b4bb92d8f022e4c5a9961c408f">alpha5</a>;
<a name="l00303"></a>00303     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x6).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a90d0fe9cb744d690abea5aaada18523c">alpha6</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a90d0fe9cb744d690abea5aaada18523c">alpha6</a>;
<a name="l00304"></a>00304     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x7).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ac992f002aa9552b35bf43af10c721f57">alpha7</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ac992f002aa9552b35bf43af10c721f57">alpha7</a>;
<a name="l00305"></a>00305     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x8).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a26779425f4c66596fe831e8068894886">alpha8</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a26779425f4c66596fe831e8068894886">alpha8</a>;
<a name="l00306"></a>00306     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0x9).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#acffb878d3a6c680a372aa107c73942a0">alpha9</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#acffb878d3a6c680a372aa107c73942a0">alpha9</a>;
<a name="l00307"></a>00307     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xA).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ad99fdc97c3066aa14a38b53787338e4d">alphaA</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ad99fdc97c3066aa14a38b53787338e4d">alphaA</a>;
<a name="l00308"></a>00308     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xB).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#af998feaef1d9ba1716f6bd3ed8e949f8">alphaB</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#af998feaef1d9ba1716f6bd3ed8e949f8">alphaB</a>;
<a name="l00309"></a>00309     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xC).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aab3bbb93d8e9175ceed6eeb7c813a2d3">alphaC</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aab3bbb93d8e9175ceed6eeb7c813a2d3">alphaC</a>;
<a name="l00310"></a>00310     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xD).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a6fde895703fdac5e01c5cec819a5a28f">alphaD</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a6fde895703fdac5e01c5cec819a5a28f">alphaD</a>;
<a name="l00311"></a>00311     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xE).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a0ba38fcd89841e5f1f0277a2b5897715">alphaE</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a0ba38fcd89841e5f1f0277a2b5897715">alphaE</a>;
<a name="l00312"></a>00312     block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(0xF).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = (<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ac75390e470086b8a8e6c1caa20ab9dbb">alphaF</a> &lt;&lt; 4) | <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ac75390e470086b8a8e6c1caa20ab9dbb">alphaF</a>;
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00316"></a><a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ab2c8e31b1ca545a3857dc898e5b34b8c">00316</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ab2c8e31b1ca545a3857dc898e5b34b8c" title="Flip DXT3 alpha block vertically.">AlphaBlockDXT3::flip4</a>()
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[0], <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[3]);
<a name="l00319"></a>00319     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[1], <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[2]);
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00323"></a><a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aaa6065264169e8edda3d685860864675">00323</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aaa6065264169e8edda3d685860864675" title="Flip half DXT3 alpha block vertically.">AlphaBlockDXT3::flip2</a>()
<a name="l00324"></a>00324 {
<a name="l00325"></a>00325     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[0], <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[1]);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00329"></a><a class="code" href="../../d6/d3d/structBlockDXT3.html#a301ab86dc0c1d3d078ed12eca21099a1">00329</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d3d/structBlockDXT3.html#a301ab86dc0c1d3d078ed12eca21099a1" title="Flip DXT3 block vertically.">BlockDXT3::flip4</a>()
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331     <a class="code" href="../../d6/d3d/structBlockDXT3.html#ae23230ce64de829b4807bed1eaee333e">alpha</a>.<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#ab2c8e31b1ca545a3857dc898e5b34b8c" title="Flip DXT3 alpha block vertically.">flip4</a>();
<a name="l00332"></a>00332     <a class="code" href="../../d6/d3d/structBlockDXT3.html#abf73308a132921831ed5785381e22139">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a276f8967c862e29af6aecaf7ec6716db" title="Flip DXT1 block vertically.">flip4</a>();
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00336"></a><a class="code" href="../../d6/d3d/structBlockDXT3.html#addaae3b8e9f7226f1c1d0c45d9b41833">00336</a> <span class="keywordtype">void</span> <a class="code" href="../../d6/d3d/structBlockDXT3.html#addaae3b8e9f7226f1c1d0c45d9b41833" title="Flip half DXT3 block vertically.">BlockDXT3::flip2</a>()
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338     <a class="code" href="../../d6/d3d/structBlockDXT3.html#ae23230ce64de829b4807bed1eaee333e">alpha</a>.<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#aaa6065264169e8edda3d685860864675" title="Flip half DXT3 alpha block vertically.">flip2</a>();
<a name="l00339"></a>00339     <a class="code" href="../../d6/d3d/structBlockDXT3.html#abf73308a132921831ed5785381e22139">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a6ed139bc62293669b91f22ffc0ba3e04" title="Flip half DXT1 block vertically.">flip2</a>();
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 
<a name="l00343"></a>00343 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00344"></a>00344 <span class="comment">    BlockDXT5</span>
<a name="l00345"></a>00345 <span class="comment">----------------------------------------------------------------------------*/</span>
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">00347</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">AlphaBlockDXT5::evaluatePalette</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha[8])<span class="keyword"> const</span>
<a name="l00348"></a>00348 <span class="keyword"></span>{
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a19c5ec2dcf24c6f566180c41c8be108f">alpha0</a>() &gt; <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#afb734c6f0d5d929bd5d4f1a69ab95e2b">alpha1</a>()) {
<a name="l00350"></a>00350         <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#af3f073d1c6768948ebaa6e87c998e19b">evaluatePalette8</a>(alpha);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352     <span class="keywordflow">else</span> {
<a name="l00353"></a>00353         <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a6fc36f84d64242a8e9e6439b4e9185e6">evaluatePalette6</a>(alpha);
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#af3f073d1c6768948ebaa6e87c998e19b">00357</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#af3f073d1c6768948ebaa6e87c998e19b">AlphaBlockDXT5::evaluatePalette8</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha[8])<span class="keyword"> const</span>
<a name="l00358"></a>00358 <span class="keyword"></span>{
<a name="l00359"></a>00359     <span class="comment">// 8-alpha block:  derive the other six alphas.</span>
<a name="l00360"></a>00360     <span class="comment">// Bit code 000 = alpha0, 001 = alpha1, others are interpolated.</span>
<a name="l00361"></a>00361     alpha[0] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a19c5ec2dcf24c6f566180c41c8be108f">alpha0</a>();
<a name="l00362"></a>00362     alpha[1] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#afb734c6f0d5d929bd5d4f1a69ab95e2b">alpha1</a>();
<a name="l00363"></a>00363     alpha[2] = (6 * alpha[0] + 1 * alpha[1]) / 7;   <span class="comment">// bit code 010</span>
<a name="l00364"></a>00364     alpha[3] = (5 * alpha[0] + 2 * alpha[1]) / 7;   <span class="comment">// bit code 011</span>
<a name="l00365"></a>00365     alpha[4] = (4 * alpha[0] + 3 * alpha[1]) / 7;   <span class="comment">// bit code 100</span>
<a name="l00366"></a>00366     alpha[5] = (3 * alpha[0] + 4 * alpha[1]) / 7;   <span class="comment">// bit code 101</span>
<a name="l00367"></a>00367     alpha[6] = (2 * alpha[0] + 5 * alpha[1]) / 7;   <span class="comment">// bit code 110</span>
<a name="l00368"></a>00368     alpha[7] = (1 * alpha[0] + 6 * alpha[1]) / 7;   <span class="comment">// bit code 111</span>
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a6fc36f84d64242a8e9e6439b4e9185e6">00371</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a6fc36f84d64242a8e9e6439b4e9185e6">AlphaBlockDXT5::evaluatePalette6</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha[8])<span class="keyword"> const</span>
<a name="l00372"></a>00372 <span class="keyword"></span>{
<a name="l00373"></a>00373     <span class="comment">// 6-alpha block.</span>
<a name="l00374"></a>00374     <span class="comment">// Bit code 000 = alpha0, 001 = alpha1, others are interpolated.</span>
<a name="l00375"></a>00375     alpha[0] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a19c5ec2dcf24c6f566180c41c8be108f">alpha0</a>();
<a name="l00376"></a>00376     alpha[1] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#afb734c6f0d5d929bd5d4f1a69ab95e2b">alpha1</a>();
<a name="l00377"></a>00377     alpha[2] = (4 * alpha[0] + 1 * alpha[1]) / 5;   <span class="comment">// Bit code 010</span>
<a name="l00378"></a>00378     alpha[3] = (3 * alpha[0] + 2 * alpha[1]) / 5;   <span class="comment">// Bit code 011</span>
<a name="l00379"></a>00379     alpha[4] = (2 * alpha[0] + 3 * alpha[1]) / 5;   <span class="comment">// Bit code 100</span>
<a name="l00380"></a>00380     alpha[5] = (1 * alpha[0] + 4 * alpha[1]) / 5;   <span class="comment">// Bit code 101</span>
<a name="l00381"></a>00381     alpha[6] = 0x00;                            <span class="comment">// Bit code 110</span>
<a name="l00382"></a>00382     alpha[7] = 0xFF;                            <span class="comment">// Bit code 111</span>
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">00385</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">AlphaBlockDXT5::indices</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> index_array[16])<span class="keyword"> const</span>
<a name="l00386"></a>00386 <span class="keyword"></span>{
<a name="l00387"></a>00387     index_array[0x0] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2750cd5a73bb1b8ba40f2e1fb0a4ab21">bits0</a>();
<a name="l00388"></a>00388     index_array[0x1] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a658cd378634c17d1deff32ff6e71763f">bits1</a>();
<a name="l00389"></a>00389     index_array[0x2] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2cf1b52701869956ca373488fff7f95b">bits2</a>();
<a name="l00390"></a>00390     index_array[0x3] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a64bda078febdddc4c785a0173f2ad331">bits3</a>();
<a name="l00391"></a>00391     index_array[0x4] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#afa970fa0a55b6dd25f22dab26a26c674">bits4</a>();
<a name="l00392"></a>00392     index_array[0x5] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#adc600c4420ece4e7ffbccb22fef0eb49">bits5</a>();
<a name="l00393"></a>00393     index_array[0x6] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a8bf8c8d728806a6f206246e93cd890f6">bits6</a>();
<a name="l00394"></a>00394     index_array[0x7] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#abae60530325cb1499c5f25f559b13e79">bits7</a>();
<a name="l00395"></a>00395     index_array[0x8] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7a0ab3b3a496e353f8175fe3540701ce">bits8</a>();
<a name="l00396"></a>00396     index_array[0x9] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a57f617069846324364b69889c0432735">bits9</a>();
<a name="l00397"></a>00397     index_array[0xA] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a27081734403a72cb15f12b4d9f9a76e1">bitsA</a>();
<a name="l00398"></a>00398     index_array[0xB] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a84e3927be2792266b86cfbb16a69ff26">bitsB</a>();
<a name="l00399"></a>00399     index_array[0xC] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4189bf7722bb177a0aa503a1fa48f48c">bitsC</a>();
<a name="l00400"></a>00400     index_array[0xD] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#acafea591e9ea0a8fb9a64545f7161806">bitsD</a>();
<a name="l00401"></a>00401     index_array[0xE] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7f09c706acd4e8a271027b4d22c42ffd">bitsE</a>();
<a name="l00402"></a>00402     index_array[0xF] = <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#aec61c86fd69e9cbff2fe1b9818264de0">bitsF</a>();
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#ad3d68d75eff68cefb2a1f6144eb19af0">00405</a> <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#ad3d68d75eff68cefb2a1f6144eb19af0">AlphaBlockDXT5::index</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> index)<span class="keyword"> const</span>
<a name="l00406"></a>00406 <span class="keyword"></span>{
<a name="l00407"></a>00407     <span class="keywordtype">int</span> offset = (3 * index + 16);
<a name="l00408"></a>00408     <span class="keywordflow">return</span> <a class="code" href="../../df/dac/source_2blender_2blenpluginapi_2util_8h.html#ad46b2ebcd4c426b06cda147ddc1001e7">uint</a>((this-&gt;<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a09db61144b0e85dddc8aafea430a50fa">u</a> &gt;&gt; offset) &amp; 0x7);
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a140d62126fc613253985df3998ca7caa">00411</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a140d62126fc613253985df3998ca7caa">AlphaBlockDXT5::setIndex</a>(<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> index, <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> value)
<a name="l00412"></a>00412 {
<a name="l00413"></a>00413     <span class="keywordtype">int</span> offset = (3 * index + 16);
<a name="l00414"></a>00414     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> mask = <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>(0x7) &lt;&lt; offset;
<a name="l00415"></a>00415     this-&gt;<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a09db61144b0e85dddc8aafea430a50fa">u</a> = (this-&gt;<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a09db61144b0e85dddc8aafea430a50fa">u</a> &amp; ~mask) | (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>(value) &lt;&lt; offset);
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a23ba824cd2bfbdfa760f7d9fea5d0f05">00418</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a23ba824cd2bfbdfa760f7d9fea5d0f05">AlphaBlockDXT5::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00419"></a>00419 <span class="keyword"></span>{
<a name="l00420"></a>00420     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha_array[8];
<a name="l00421"></a>00421     <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">evaluatePalette</a>(alpha_array);
<a name="l00422"></a>00422     
<a name="l00423"></a>00423     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> index_array[16];
<a name="l00424"></a>00424     <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">indices</a>(index_array);
<a name="l00425"></a>00425     
<a name="l00426"></a>00426     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00427"></a>00427         block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = alpha_array[index_array[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]];
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429 }
<a name="l00430"></a>00430 
<a name="l00431"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">00431</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">AlphaBlockDXT5::flip4</a>()
<a name="l00432"></a>00432 {
<a name="l00433"></a>00433     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> * b = (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> *)<span class="keyword">this</span>;
<a name="l00434"></a>00434     
<a name="l00435"></a>00435     <span class="comment">// @@ The masks might have to be byte swapped.</span>
<a name="l00436"></a>00436     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> tmp = (*b &amp; (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)(0x000000000000FFFFLL));
<a name="l00437"></a>00437     tmp |= (*b &amp; (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)(0x000000000FFF0000LL)) &lt;&lt; 36;
<a name="l00438"></a>00438     tmp |= (*b &amp; (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)(0x000000FFF0000000LL)) &lt;&lt; 12;
<a name="l00439"></a>00439     tmp |= (*b &amp; (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)(0x000FFF0000000000LL)) &gt;&gt; 12;
<a name="l00440"></a>00440     tmp |= (*b &amp; (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)(0xFFF0000000000000LL)) &gt;&gt; 36;
<a name="l00441"></a>00441     
<a name="l00442"></a>00442     *b = tmp;
<a name="l00443"></a>00443 }
<a name="l00444"></a>00444 
<a name="l00445"></a><a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">00445</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">AlphaBlockDXT5::flip2</a>()
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> * b = (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *)<span class="keyword">this</span>;
<a name="l00448"></a>00448     
<a name="l00449"></a>00449     <span class="comment">// @@ The masks might have to be byte swapped.</span>
<a name="l00450"></a>00450     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> tmp = (*b &amp; 0xFF000000);
<a name="l00451"></a>00451     tmp |=  (*b &amp; 0x00000FFF) &lt;&lt; 12;
<a name="l00452"></a>00452     tmp |= (*b &amp; 0x00FFF000) &gt;&gt; 12;
<a name="l00453"></a>00453     
<a name="l00454"></a>00454     *b = tmp;
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 
<a name="l00457"></a><a class="code" href="../../db/dc7/structBlockDXT5.html#a00890d5144dee8de130038aab4525c1f">00457</a> <span class="keywordtype">void</span> <a class="code" href="../../db/dc7/structBlockDXT5.html#a00890d5144dee8de130038aab4525c1f">BlockDXT5::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00458"></a>00458 <span class="keyword"></span>{
<a name="l00459"></a>00459     <span class="comment">// Decode color.</span>
<a name="l00460"></a>00460     <a class="code" href="../../db/dc7/structBlockDXT5.html#a0ecc02652b7444d429259a02b1223124">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a5bc0accbfdba3cd1638ab45fbdb2928a">decodeBlock</a>(block);
<a name="l00461"></a>00461     
<a name="l00462"></a>00462     <span class="comment">// Decode alpha.</span>
<a name="l00463"></a>00463     <a class="code" href="../../db/dc7/structBlockDXT5.html#ae77dcdd093e65b23372fcdb73b3d7c2e">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a23ba824cd2bfbdfa760f7d9fea5d0f05">decodeBlock</a>(block);
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="../../db/dc7/structBlockDXT5.html#a3d4b9606ca2a5ceeb10a48311f41f2cf">00466</a> <span class="keywordtype">void</span> <a class="code" href="../../db/dc7/structBlockDXT5.html#a3d4b9606ca2a5ceeb10a48311f41f2cf">BlockDXT5::decodeBlockNV5x</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00467"></a>00467 <span class="keyword"></span>{
<a name="l00468"></a>00468     <span class="comment">// Decode color.</span>
<a name="l00469"></a>00469     <a class="code" href="../../db/dc7/structBlockDXT5.html#a0ecc02652b7444d429259a02b1223124">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a71454b8703e4b002260bbb3952e19fb2">decodeBlockNV5x</a>(block);
<a name="l00470"></a>00470     
<a name="l00471"></a>00471     <span class="comment">// Decode alpha.</span>
<a name="l00472"></a>00472     <a class="code" href="../../db/dc7/structBlockDXT5.html#ae77dcdd093e65b23372fcdb73b3d7c2e">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a23ba824cd2bfbdfa760f7d9fea5d0f05">decodeBlock</a>(block);
<a name="l00473"></a>00473 }
<a name="l00474"></a>00474 
<a name="l00476"></a><a class="code" href="../../db/dc7/structBlockDXT5.html#a93f4e4cb02de7de8b2965f4e490de0c6">00476</a> <span class="keywordtype">void</span> <a class="code" href="../../db/dc7/structBlockDXT5.html#a93f4e4cb02de7de8b2965f4e490de0c6" title="Flip DXT5 block vertically.">BlockDXT5::flip4</a>()
<a name="l00477"></a>00477 {
<a name="l00478"></a>00478     <a class="code" href="../../db/dc7/structBlockDXT5.html#ae77dcdd093e65b23372fcdb73b3d7c2e">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">flip4</a>();
<a name="l00479"></a>00479     <a class="code" href="../../db/dc7/structBlockDXT5.html#a0ecc02652b7444d429259a02b1223124">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a276f8967c862e29af6aecaf7ec6716db" title="Flip DXT1 block vertically.">flip4</a>();
<a name="l00480"></a>00480 }
<a name="l00481"></a>00481 
<a name="l00483"></a><a class="code" href="../../db/dc7/structBlockDXT5.html#aa0ba2ce0e78d6f509148398bd91f4442">00483</a> <span class="keywordtype">void</span> <a class="code" href="../../db/dc7/structBlockDXT5.html#aa0ba2ce0e78d6f509148398bd91f4442" title="Flip half DXT5 block vertically.">BlockDXT5::flip2</a>()
<a name="l00484"></a>00484 {
<a name="l00485"></a>00485     <a class="code" href="../../db/dc7/structBlockDXT5.html#ae77dcdd093e65b23372fcdb73b3d7c2e">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">flip2</a>();
<a name="l00486"></a>00486     <a class="code" href="../../db/dc7/structBlockDXT5.html#a0ecc02652b7444d429259a02b1223124">color</a>.<a class="code" href="../../d7/d66/structBlockDXT1.html#a6ed139bc62293669b91f22ffc0ba3e04" title="Flip half DXT1 block vertically.">flip2</a>();
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 
<a name="l00491"></a><a class="code" href="../../d2/de0/structBlockATI1.html#ad0f729e87e028f5d48ee47798dc2fd1f">00491</a> <span class="keywordtype">void</span> <a class="code" href="../../d2/de0/structBlockATI1.html#ad0f729e87e028f5d48ee47798dc2fd1f" title="Decode ATI1 block.">BlockATI1::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00492"></a>00492 <span class="keyword"></span>{
<a name="l00493"></a>00493     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha_array[8];
<a name="l00494"></a>00494     <a class="code" href="../../d2/de0/structBlockATI1.html#a8129a4de2c124e019a93e6f79c91fea8">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">evaluatePalette</a>(alpha_array);
<a name="l00495"></a>00495     
<a name="l00496"></a>00496     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> index_array[16];
<a name="l00497"></a>00497     <a class="code" href="../../d2/de0/structBlockATI1.html#a8129a4de2c124e019a93e6f79c91fea8">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">indices</a>(index_array);
<a name="l00498"></a>00498     
<a name="l00499"></a>00499     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00500"></a>00500         <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> &amp; c = block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00501"></a>00501         c.<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = c.<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = c.<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = alpha_array[index_array[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]];
<a name="l00502"></a>00502         c.<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 255;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 }
<a name="l00505"></a>00505 
<a name="l00507"></a><a class="code" href="../../d2/de0/structBlockATI1.html#ac2caf84a8ee036c746815e2967631bb5">00507</a> <span class="keywordtype">void</span> <a class="code" href="../../d2/de0/structBlockATI1.html#ac2caf84a8ee036c746815e2967631bb5" title="Flip ATI1 block vertically.">BlockATI1::flip4</a>()
<a name="l00508"></a>00508 {
<a name="l00509"></a>00509     <a class="code" href="../../d2/de0/structBlockATI1.html#a8129a4de2c124e019a93e6f79c91fea8">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">flip4</a>();
<a name="l00510"></a>00510 }
<a name="l00511"></a>00511 
<a name="l00513"></a><a class="code" href="../../d2/de0/structBlockATI1.html#a4e25f8859be4b53b3c04f976a7ec6894">00513</a> <span class="keywordtype">void</span> <a class="code" href="../../d2/de0/structBlockATI1.html#a4e25f8859be4b53b3c04f976a7ec6894" title="Flip half ATI1 block vertically.">BlockATI1::flip2</a>()
<a name="l00514"></a>00514 {
<a name="l00515"></a>00515     <a class="code" href="../../d2/de0/structBlockATI1.html#a8129a4de2c124e019a93e6f79c91fea8">alpha</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">flip2</a>();
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 
<a name="l00520"></a><a class="code" href="../../d4/d6a/structBlockATI2.html#aecea5e944c56b59dff9413c6a9f099a9">00520</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d6a/structBlockATI2.html#aecea5e944c56b59dff9413c6a9f099a9" title="Decode ATI2 block.">BlockATI2::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00521"></a>00521 <span class="keyword"></span>{
<a name="l00522"></a>00522     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> alpha_array[8];
<a name="l00523"></a>00523     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> index_array[16];
<a name="l00524"></a>00524     
<a name="l00525"></a>00525     <a class="code" href="../../d4/d6a/structBlockATI2.html#a7463fa95658b3f167bfb8511d0b19453">x</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">evaluatePalette</a>(alpha_array);
<a name="l00526"></a>00526     <a class="code" href="../../d4/d6a/structBlockATI2.html#a7463fa95658b3f167bfb8511d0b19453">x</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">indices</a>(index_array);
<a name="l00527"></a>00527     
<a name="l00528"></a>00528     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00529"></a>00529         <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> &amp; c = block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00530"></a>00530         c.<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = alpha_array[index_array[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]];
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     <a class="code" href="../../d4/d6a/structBlockATI2.html#a4ce126f7c693a8e3ce9a130c111f5903">y</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a2725a062ffa5e7655ecace1a54101181">evaluatePalette</a>(alpha_array);
<a name="l00534"></a>00534     <a class="code" href="../../d4/d6a/structBlockATI2.html#a4ce126f7c693a8e3ce9a130c111f5903">y</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a7ea0d7ab171e9791031ca2d92c4bd166">indices</a>(index_array);
<a name="l00535"></a>00535     
<a name="l00536"></a>00536     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00537"></a>00537         <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> &amp; c = block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00538"></a>00538         c.<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = alpha_array[index_array[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]];
<a name="l00539"></a>00539         c.<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = 0;
<a name="l00540"></a>00540         c.<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 255;
<a name="l00541"></a>00541     }
<a name="l00542"></a>00542 }
<a name="l00543"></a>00543 
<a name="l00545"></a><a class="code" href="../../d4/d6a/structBlockATI2.html#aac569d1e3690e08ebe8442c2a6753046">00545</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d6a/structBlockATI2.html#aac569d1e3690e08ebe8442c2a6753046" title="Flip ATI2 block vertically.">BlockATI2::flip4</a>()
<a name="l00546"></a>00546 {
<a name="l00547"></a>00547     <a class="code" href="../../d4/d6a/structBlockATI2.html#a7463fa95658b3f167bfb8511d0b19453">x</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">flip4</a>();
<a name="l00548"></a>00548     <a class="code" href="../../d4/d6a/structBlockATI2.html#a4ce126f7c693a8e3ce9a130c111f5903">y</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a4b8305c2954dd4dc9d98c8277d2d719e">flip4</a>();
<a name="l00549"></a>00549 }
<a name="l00550"></a>00550 
<a name="l00552"></a><a class="code" href="../../d4/d6a/structBlockATI2.html#a77aa9cf7dbbb190139ae0352fd40b2c7">00552</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d6a/structBlockATI2.html#a77aa9cf7dbbb190139ae0352fd40b2c7" title="Flip half ATI2 block vertically.">BlockATI2::flip2</a>()
<a name="l00553"></a>00553 {
<a name="l00554"></a>00554     <a class="code" href="../../d4/d6a/structBlockATI2.html#a7463fa95658b3f167bfb8511d0b19453">x</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">flip2</a>();
<a name="l00555"></a>00555     <a class="code" href="../../d4/d6a/structBlockATI2.html#a4ce126f7c693a8e3ce9a130c111f5903">y</a>.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a68cda1af103bdcd6675162b2da740960">flip2</a>();
<a name="l00556"></a>00556 }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 
<a name="l00559"></a><a class="code" href="../../d3/d5e/structBlockCTX1.html#a98a4f93fcb3a472c7348539e8d5ba6b0">00559</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/structBlockCTX1.html#a98a4f93fcb3a472c7348539e8d5ba6b0">BlockCTX1::evaluatePalette</a>(<a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4])<span class="keyword"> const</span>
<a name="l00560"></a>00560 <span class="keyword"></span>{
<a name="l00561"></a>00561     <span class="comment">// Does bit expansion before interpolation.</span>
<a name="l00562"></a>00562     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = 0x00;
<a name="l00563"></a>00563     color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = <a class="code" href="../../d3/d5e/structBlockCTX1.html#ac87aed87475c4150ad1aed0f30b690de">col0</a>[1];
<a name="l00564"></a>00564     color_array[0].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = <a class="code" href="../../d3/d5e/structBlockCTX1.html#ac87aed87475c4150ad1aed0f30b690de">col0</a>[0];
<a name="l00565"></a>00565     color_array[0].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00566"></a>00566     
<a name="l00567"></a>00567     color_array[1].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00;
<a name="l00568"></a>00568     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = <a class="code" href="../../d3/d5e/structBlockCTX1.html#ac87aed87475c4150ad1aed0f30b690de">col0</a>[1];
<a name="l00569"></a>00569     color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = <a class="code" href="../../d3/d5e/structBlockCTX1.html#a3d8abc32a6fe708a26025adea3d2fbbd">col1</a>[0];
<a name="l00570"></a>00570     color_array[1].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00571"></a>00571     
<a name="l00572"></a>00572     color_array[2].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00;
<a name="l00573"></a>00573     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00574"></a>00574     color_array[2].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00575"></a>00575     color_array[2].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00576"></a>00576         
<a name="l00577"></a>00577     color_array[3].<a class="code" href="../../da/d96/classColor32.html#acdd2edee7c82064de8ccc158268e007d">r</a> = 0x00;
<a name="l00578"></a>00578     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a6ee0f778dc71dc00d7f1538b101defd4">g</a>) / 3;
<a name="l00579"></a>00579     color_array[3].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> = (2 * color_array[1].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a> + color_array[0].<a class="code" href="../../da/d96/classColor32.html#a94b038cf6fef6c53eb815169b936ff08">b</a>) / 3;
<a name="l00580"></a>00580     color_array[3].<a class="code" href="../../da/d96/classColor32.html#ad234a900687c003057a40a8ccf338528">a</a> = 0xFF;
<a name="l00581"></a>00581 }
<a name="l00582"></a>00582 
<a name="l00583"></a><a class="code" href="../../d3/d5e/structBlockCTX1.html#a27307ace2cad8a512ec273c7efadf051">00583</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/structBlockCTX1.html#a27307ace2cad8a512ec273c7efadf051">BlockCTX1::decodeBlock</a>(<a class="code" href="../../db/dc3/structColorBlock.html" title="Uncompressed 4x4 color block.">ColorBlock</a> * block)<span class="keyword"> const</span>
<a name="l00584"></a>00584 <span class="keyword"></span>{
<a name="l00585"></a>00585     <span class="comment">// Decode color block.</span>
<a name="l00586"></a>00586     <a class="code" href="../../da/d96/classColor32.html" title="32 bit color stored as BGRA.">Color32</a> color_array[4];
<a name="l00587"></a>00587     <a class="code" href="../../d3/d5e/structBlockCTX1.html#a98a4f93fcb3a472c7348539e8d5ba6b0">evaluatePalette</a>(color_array);
<a name="l00588"></a>00588     
<a name="l00589"></a>00589     <span class="comment">// Write color block.</span>
<a name="l00590"></a>00590     <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> j = 0; j &lt; 4; j++ ) {
<a name="l00591"></a>00591         <span class="keywordflow">for</span> ( <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++ ) {
<a name="l00592"></a>00592             <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> idx = (<a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[j] &gt;&gt; (2 * <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp; 3;
<a name="l00593"></a>00593             block-&gt;<a class="code" href="../../db/dc3/structColorBlock.html#aa1557aa355ce02c99c5a9a4f94d89257" title="Get block color.">color</a>(<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j) = color_array[idx];
<a name="l00594"></a>00594         }
<a name="l00595"></a>00595     }   
<a name="l00596"></a>00596 }
<a name="l00597"></a>00597 
<a name="l00598"></a><a class="code" href="../../d3/d5e/structBlockCTX1.html#ac265e3fdbd15f30a007b64bd86af7d6b">00598</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/structBlockCTX1.html#ac265e3fdbd15f30a007b64bd86af7d6b">BlockCTX1::setIndices</a>(<span class="keywordtype">int</span> * idx)
<a name="l00599"></a>00599 {
<a name="l00600"></a>00600     <a class="code" href="../../d3/d5e/structBlockCTX1.html#a37adc89a6d0dab86a526f2e6dab9ae83">indices</a> = 0;
<a name="l00601"></a>00601     <span class="keywordflow">for</span> (<a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 16; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {
<a name="l00602"></a>00602         <a class="code" href="../../d3/d5e/structBlockCTX1.html#a37adc89a6d0dab86a526f2e6dab9ae83">indices</a> |= (idx[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; 3) &lt;&lt; (2 * <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604 }
<a name="l00605"></a>00605 
<a name="l00606"></a>00606 
<a name="l00608"></a><a class="code" href="../../d3/d5e/structBlockCTX1.html#a19d4e56fa41b2753b9a61eed1b4acef9">00608</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/structBlockCTX1.html#a19d4e56fa41b2753b9a61eed1b4acef9" title="Flip CTX1 block vertically.">BlockCTX1::flip4</a>()
<a name="l00609"></a>00609 {
<a name="l00610"></a>00610     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[0], <a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[3]);
<a name="l00611"></a>00611     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[1], <a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[2]);
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00615"></a><a class="code" href="../../d3/d5e/structBlockCTX1.html#a8890274516dd59c2c68ceb936f2b6d9b">00615</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/structBlockCTX1.html#a8890274516dd59c2c68ceb936f2b6d9b" title="Flip half CTX1 block vertically.">BlockCTX1::flip2</a>()
<a name="l00616"></a>00616 {
<a name="l00617"></a>00617     <a class="code" href="../../d0/d4b/blender_2imbuf_2intern_2dds_2Common_8h.html#a8c6a16881d4ab28d222f7ac896ced037">swap</a>(<a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[0], <a class="code" href="../../d3/d5e/structBlockCTX1.html#ab732e527338e9cef03365a7f93f0b74a">row</a>[1]);
<a name="l00618"></a>00618 }
<a name="l00619"></a>00619 
<a name="l00620"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#afbb99f6779c64447014ba80175c34785">00620</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d7/d66/structBlockDXT1.html" title="DXT1 block.">BlockDXT1</a> &amp; block)
<a name="l00621"></a>00621 {
<a name="l00622"></a>00622     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d7/d66/structBlockDXT1.html#a677851fe448e75360de5666d53d0f5d1">col0</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a>);
<a name="l00623"></a>00623     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d7/d66/structBlockDXT1.html#a0d806e2636ae2b5c9a182b0fd5ca0f82">col1</a>.<a class="code" href="../../d9/d98/classColor16.html#a54c024609cedd70ae2f43022a349b3d4">u</a>);
<a name="l00624"></a>00624     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d7/d66/structBlockDXT1.html#a918133801d1df721c0f42ac40063732d">indices</a>);
<a name="l00625"></a>00625 }
<a name="l00626"></a>00626 
<a name="l00627"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#aa70694736b9eb311e2fa642375596125">00627</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d6/dac/structAlphaBlockDXT3.html" title="DXT3 alpha block with explicit alpha.">AlphaBlockDXT3</a> &amp; block)
<a name="l00628"></a>00628 {
<a name="l00629"></a>00629     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d6/dac/structAlphaBlockDXT3.html#a3a37313b2869e44093589042ef095fd5">row</a>[<a class="code" href="../../dd/db6/paraloopend_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);
<a name="l00630"></a>00630 }
<a name="l00631"></a>00631 
<a name="l00632"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#ad66e18d8b6770a6af99ba8e1bb8ce066">00632</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d6/d3d/structBlockDXT3.html" title="DXT3 block.">BlockDXT3</a> &amp; block)
<a name="l00633"></a>00633 {
<a name="l00634"></a>00634     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d6/d3d/structBlockDXT3.html#ae23230ce64de829b4807bed1eaee333e">alpha</a>);
<a name="l00635"></a>00635     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d6/d3d/structBlockDXT3.html#abf73308a132921831ed5785381e22139">color</a>);
<a name="l00636"></a>00636 }
<a name="l00637"></a>00637 
<a name="l00638"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#ae9408710e6b3441adc40d305da594bbe">00638</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d3/da2/structAlphaBlockDXT5.html" title="DXT5 alpha block.">AlphaBlockDXT5</a> &amp; block)
<a name="l00639"></a>00639 {
<a name="l00640"></a>00640     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/da2/structAlphaBlockDXT5.html#a09db61144b0e85dddc8aafea430a50fa">u</a>);
<a name="l00641"></a>00641 }
<a name="l00642"></a>00642 
<a name="l00643"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#a109cd16db0aee21c1fe49fd9801177ce">00643</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../db/dc7/structBlockDXT5.html" title="DXT5 block.">BlockDXT5</a> &amp; block)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../db/dc7/structBlockDXT5.html#ae77dcdd093e65b23372fcdb73b3d7c2e">alpha</a>);
<a name="l00646"></a>00646     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../db/dc7/structBlockDXT5.html#a0ecc02652b7444d429259a02b1223124">color</a>);
<a name="l00647"></a>00647 }
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#a8f6c9133bd0f6c229680c9e787f9f432">00649</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d2/de0/structBlockATI1.html" title="ATI1 block.">BlockATI1</a> &amp; block)
<a name="l00650"></a>00650 {
<a name="l00651"></a>00651     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d2/de0/structBlockATI1.html#a8129a4de2c124e019a93e6f79c91fea8">alpha</a>);
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#acea5119707ad166012bacdbaa6af555c">00654</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d4/d6a/structBlockATI2.html" title="ATI2 block.">BlockATI2</a> &amp; block)
<a name="l00655"></a>00655 {
<a name="l00656"></a>00656     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d4/d6a/structBlockATI2.html#a7463fa95658b3f167bfb8511d0b19453">x</a>);
<a name="l00657"></a>00657     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d4/d6a/structBlockATI2.html#a4ce126f7c693a8e3ce9a130c111f5903">y</a>);
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00660"></a><a class="code" href="../../d3/df8/BlockDXT_8h.html#a6f17e7dc4a1c320225d9e8d9d8270f28">00660</a> <span class="keywordtype">void</span> <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(<a class="code" href="../../d0/d4f/structStream.html">Stream</a> &amp; mem, <a class="code" href="../../d3/d5e/structBlockCTX1.html" title="CTX1 block.">BlockCTX1</a> &amp; block)
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/d5e/structBlockCTX1.html#ac87aed87475c4150ad1aed0f30b690de">col0</a>[0]);
<a name="l00663"></a>00663     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/d5e/structBlockCTX1.html#ac87aed87475c4150ad1aed0f30b690de">col0</a>[1]);
<a name="l00664"></a>00664     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/d5e/structBlockCTX1.html#a3d8abc32a6fe708a26025adea3d2fbbd">col1</a>[0]);
<a name="l00665"></a>00665     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/d5e/structBlockCTX1.html#a3d8abc32a6fe708a26025adea3d2fbbd">col1</a>[1]);
<a name="l00666"></a>00666     <a class="code" href="../../df/d97/BlockDXT_8cpp.html#afbb99f6779c64447014ba80175c34785">mem_read</a>(mem, block.<a class="code" href="../../d3/d5e/structBlockCTX1.html#a37adc89a6d0dab86a526f2e6dab9ae83">indices</a>);
<a name="l00667"></a>00667 }
<a name="l00668"></a>00668 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 11:54:03 for Blender by&#160;
<a href="http://www.doxygen.org/index.html"> 
doxygen</a> 1.7.4 </small></address> 
</body>
</html>
